!function(V,G,M){"use strict";var n="ht";if(!V[n]){!function(){Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),V.performance&&V.performance.now||function(){var G=Date.now();V.performance||(V.performance={}),V.performance.now=function(){return Date.now()-G}}();for(var e=Date.now(),X=16,y=["ms","moz","webkit","o"],i=0;i<y.length&&!V.requestAnimationFrame;++i)V.requestAnimationFrame=V[y[i]+"RequestAnimationFrame"],V.cancelAnimationFrame=V[y[i]+"CancelAnimationFrame"]||V[y[i]+"CancelRequestAnimationFrame"];V.requestAnimationFrame||(V.requestAnimationFrame=function(w){var m=Date.now(),x=X+e-m;return 0>x&&(x=0),e=m,V.setTimeout(function(){e=Date.now(),w(performance.now())},x)}),V.cancelAnimationFrame||(V.cancelAnimationFrame=function(U){return V.clearTimeout(U)})}();var X,u,P,A,m=V.document,c=null,v=V[n]={},C=V[n+"config"],i=v.Default=C&&C.Default||{},D=v.Style=C&&C.Style||{},z=v.Attr=C&&C.Attr||{},U=v.Color=C&&C.Color||{},F=v.IsGetter=C&&C.IsGetter||{},Z=Math,T=Z.round,e=Z.floor,x=Z.ceil,l=Z.sqrt,W=Z.max,y=Z.min,$=Z.abs,K=Z.cos,t=Z.acos,o=Z.sin,p=Z.pow,b=Z.asin,I=Z.PI,Y=2*I,S=I/2,L=Z.tan,w=Z.atan2,d=Z.random,Q=function(R,S,I){return Math.max(S,Math.min(I,R))},N=!1,R=!1,j=V.parseInt||global.parseInt,q="2017-12-01",h=function(){try{return V.navigator.platform.indexOf("Win")>-1}catch(i){}}(),f=function(B){return B*B},a=V.setTimeout,O=V.clearTimeout,E=V.location,s=V.navigator?V.navigator.userAgent.toLowerCase():"",H=function(G){return G.test(s)},r=H(/msie/)||H(/trident/),B=H(/msie 10/),g=H(/edge/),_=H(/firefox/),J=H(/mac/),cn=i.isTouchable===M?h?!1:m?"ontouchend"in m:!1:i.isTouchable,Yp="default",Hh="single",vm="multiple",rb="front",Ig="back",rp="left",il="right",dq="top",Cb="bottom",Gm="center",Ap="eye",Dm="middle",vn="east",Im="west",zi="north",gd="none",xc="px",Oq="absolute",ih="border",Sh="triangle",Hg="rect",$d="circle",Rh="cylinder",Cc="shape",mk="items",$q="normal",Yl="remove",nb="clear",Wh="width",Rc="height",dk="ingroup",gf="check",ro="uncheck",Se="radio",If="radioOn",Pb="radioOff",yc="points",kc="values",Wi="series",xm="body",Pp="label",zo="label2",hr="note",ip="note2",mf="icons",Ne="labelFont",vb="labelColor",vc="labelSelectColor",Dk="note.expanded",kb="note2.expanded",Eq="edge.expanded",fp="edge.points",Ar="edge.type",Mo="rotation",So="getRotation",Cn="setRotation",Ck="hidden",gq="visible",$i="tuv",pj="no",Te="draw",Ij="select",Mn="currentSubGraph",Zf="selectBackground",pp="autoMakeVisible",ml="autoHideScrollBar",ij="scrollBarColor",Zb="scrollBarSize",rd="indent",qo="rowHeight",Hc="columnLineColor",gj="rowLineColor",ui="columnLineVisible",Il="rowLineVisible",pd="visibleFunc",Wc="expandIcon",pc="collapseIcon",Ie="checkMode",wj="sortFunc",qi="editable",xq="batchEditable",Fd="tristate",Ld="asc",Pf="desc",xi="position",Dg="elevation",ze="children",Rb="translateX",vp="translateY",Nh="dataModel",nk="maxSize",Fi="shape3d",fl="shape3d.resolution",Ug="shape3d.visible",wi="shape3d.from.visible",Qk="shape3d.to.visible",ie="shape3d.top.visible",Jc="shape3d.bottom.visible",tq="repeat.uv.length",Ol="serializeValue",zp="deserializeValue",cs="centerUniform",en="rgba(255,255,255,0)",zf="style",Rk="attr",Mm="field",Pm="string",ds="boolean",Dl="color",Eo="int",Le="number",wg="ew-resize",rg="ns-resize",Gq="pointer",Jo="auto",fj="mousedown",Ai="mousemove",qh="mouseup",of="mouseout",Jr="touchstart",Gn="touchmove",on="touchend",pi="keydown",wf="keyup",Xk=_?"DOMMouseScroll":"mousewheel",up=cn?[Jr,Gn,on,pi,wf,"keypress","input","contextmenu"]:[pi,wf,"keypress","input",fj,Ai,qh,of,Xk,"contextmenu","mouseenter","mouseleave","mouseover"],lq=c,Dp=c,Km=c,uc=qh.length,Om=function(){Km&&(O(Km.timeout),Km=c)},ti=function(){Km&&Xb(Km.e,Km.info)};V.addEventListener&&(cn||(V.addEventListener(of,function(){Om()},!1),V.addEventListener(Xk,function(){Li()},!1)),V.addEventListener(wf,function(Z){91===Z.keyCode?kf={}:delete kf[Z.keyCode]},!0),V.addEventListener(pi,function(v){kf[v.keyCode]=!0},!0));var Oi,Bm,_o,op=!1,Vo=c,to=function(o,T){var t=a(function(){o(),delete Vo[t],Gb(Vo)&&(Vo=c)},T);return t},Fk=c,Kc=c,Lg={},yj={},Aq={},Sf={},Th={},kf={},cr={},dd={},xp={},Gj=/.json$/,gi=/^data:image\/svg\+xml/,ek={},xh=[],nc={},Rj=c,Fe=c,og=function(){},js=function(){throw"Oops!"},cm=[0,0,0],Kk=[0,0,0,0],ln={x:0,y:0,width:0,height:0},Nc=c,ep=c,rn=c,gn=function(j){ep&&!j._72O&&(rn||(rn={}),rn[j._72O=Pk()]=j),Oi!=c?Tr()<.05&&A&&!Bm&&(Ch=Om):Ch=po},_p=function(s,X,O,g){ep||(ep={});var b=ep[s];if(b){if(b.url===X)return;b.image?(b.image.onload=og,b.image.onerror=og):b.request&&(b.request.onload=og,b.request.onerror=og)}if(Gj.test(X)){var v=new XMLHttpRequest;if(ep[s]={request:v,url:X},v.overrideMimeType("text/plain"),X=i.beforeLoadURL(X),X.data){var p=i.parse(X.data);Bb(s,p),i.handleImageLoaded(s,p)}else v.open("GET",encodeURI(X),!0),v.onload=function(d){if(200===this.status||0===this.status){var q=i.parse(d.target.response);Bb(s,q),i.handleImageLoaded(s,q)}else Bb(s,i.handleUnfoundImage(s,X)||c)},v.onerror=function(){Bb(s,i.handleUnfoundImage(s,X)||c)},v.send(null)}else{var p=new Image;ep[s]={image:p,url:X},r&&(X.toLowerCase().indexOf(".svg")>0||gi.test(X))?(m.body.appendChild(p),p.style.visibility="hidden",p.onload=function(){a(function(){if(O&&(p.width=O),g&&(p.height=g),!p.width||!p.height){var X=p.width||p.clientWidth,t=p.height||p.clientHeight;p.width=X,p.height=t}i.handleImageLoaded(s,p),Bb(s,p),m.body.removeChild(p),p.style.visibility=""},180)},p.onerror=function(){Bb(s,i.handleUnfoundImage(s,X)||c),m.body.removeChild(p),p.style.visibility=""}):(p.onload=function(){O&&(p.width=O),g&&(p.height=g),i.handleImageLoaded(s,p),Bb(s,p)},p.onerror=function(){Bb(s,i.handleUnfoundImage(s,X)||c)}),/^data:image/.test(X)||(X=i.beforeLoadURL(X),/^data:image/.test(X)||(X=i.appendTimeStamp(X),X=encodeURI(X))),p.src=X}},Bb=function(D,h){if(yj[D]=h,delete ep[D],Gb(ep)&&(ep=c,rn)){for(var i in rn){var S=rn[i];S._2O&&(S._2O={}),S.invalidateAll&&S.invalidateAll(M,"imageLoaded",D),S.redraw&&S.redraw(),S.iv(),delete S._72O}rn=c}if(h&&rn)for(var i in rn){var S=rn[i];S.invalidateAll&&S.invalidateAll(M,"imageLoading",D),S.redraw&&S.redraw(),S.iv()}},Wr=function(){return V.performance&&V.performance.now?V.performance.now():Date.now()},jn=function(i,n){n?O(i):V.cancelAnimationFrame(i)},Pd=function(e,O,N){return{width:e,height:O,comps:Kh(N)?N:[N]}},mm=function(z,o){return{type:$d,rect:[z,o,1.6,1.6],borderWidth:1,borderColor:Df,gradient:We,gradientColor:nn,background:Df}},hh=function(y,H){return Pd(16,16,{type:Sh,rect:[4,4,10,8],background:y,rotation:H?1.57:3.14})},uq=function(X,w){return Pd(16,16,{type:Sh,rect:[4,4,8,7],background:X,rotation:w?3.14:0})},im=function(N){var v=N._orientation;return"horizontal"===v||"h"===v},Tc=function(q){var k=c||4,l=c||1,R=c||1;0>k?k=0:k>.25&&(k=.25);var B,p,a,T,M,J,d,i=.5,g=[],m=[],P=[],N=Y/R,C=Y/l,X=i-k;for(p=0;l>=p;p++)for(T=-I+p*C,J=K(T),M=o(T),B=0;R>=B;B++)a=B*N,d=X+k*J,g.push(K(a)*d,M*k,-o(a)*d),(u=q)&&m.push(B/R,1-p/l);for(p=0;l>p;p++){var f=p*(R+1),y=(p+1)*(R+1);for(B=0;R>B;B++)P.push(f+B,y+B+1,y+B,f+B,f+B+1,y+B+1),he.z=Xo.z=q}},wp=function(M){var w=2,A=0;for(var i in M)i.length===w&&j(i,32)===pe&&(Rj=Fe=M[i]),A++;return A},hk=function(W,Y,F,e){return F||(F=cn?5:3,F/=e||1),{x:W-F,y:Y-F,width:2*F,height:2*F}},sd=function(q,O,e,w){var l=this;O||(O=cn?5:3,e=20,w=20);var _={x:q,y:O,width:e,height:w};if(e)for(var u=0;e>u;u++)if(3===e)w=20;else for(var o=0;w>o;o++)l=V?V:e;var m={x:I,y:2*I};if(nl(_,m)){var p=Rc[0]+dq[0]+nb[1];$n[Ap]=l[p],l[p]=zq[Ap]}},Pg=function(q){return(/ble$/.test(q)||/ed$/.test(q)||F[q]?"is":"get")+q.charAt(0).toUpperCase()+q.slice(1)},zq=function(x){return"set"+x.charAt(0).toUpperCase()+x.slice(1)},Ul=function(q){return typeof q===Pm||q instanceof String},ps=function(t){return typeof t===Le},po=function(M){return typeof M===ds},vf=function(t){return t&&"object"==typeof t},sq=function(h){return"function"==typeof h},Kh=function(G){return G instanceof Array},kk=function(i){return i instanceof Vr},ki=function(f){return Kh(f)?new Vr(f):f},To=function(i){return i instanceof rj},ck=function(T){return T instanceof ne},zs=function(H){return H instanceof ld},mr=function(X,o){if(!(X instanceof v.Group))return!1;if(!o)return X.isExpanded();var S=o.getDataUI(X);return S&&S._88I?!0:!1},kj=function(I){return I instanceof Lk},Po=function(L){return L&&"IFRAME"===L.tagName},Cp=function(D){return D==c||i.numberDigits==c?D:parseFloat(D.toFixed(i.numberDigits))},rr=function(y,O,Q){var W,$=O.length;if(Q)for(var H=0;Q>H;H++)if(3===$)y.push(O[0]),y.push(O[1]),y.push(O[2]);else for(W=0;$>W;W++)y.push(O[W]);else if(3===$)y.push(O[0]),y.push(O[1]),y.push(O[2]);else for(W=0;$>W;W++)y.push(O[W])},al=function(T){return T?vf(T)?T:{}:!1},Mj=function(k,T,O){var H,g=vf(k)?k:k.prototype;for(H in T)O&&g[H]!==M||(g[H]=T[H]);return k},bl=function(H){return String.fromCharCode(H)},cd=function(V){for(var h,y=0,c="";y<V.length;y++)h=V[V.length-1-y],"%"===h?h="'":"a"===h?h='"':"]"===h&&(h="\\"),c+=bl(h.charCodeAt(0)-1);return c},Ke=function(J,g,t){J.superClass.constructor.apply(g,t)},Gb=function(h){for(var s in h)return!1;return!0},lh=function(I){return I?0===I.length:!0},Bn=function(S,$){return S===$?!0:S.x===$.x&&S.y===$.y&&S.width===$.width&&S.height===$.height},Pe=function(y,I,R){return I>y?I:y>R?R:y},Kp=function(W){return 0>W?-1:W>0?1:0},Tr=function(){var u=1e4*o(uc++);return u-e(u)},ss=function(U,e,a){return Gd(U.x,U.y,e.x,e.y,a.x,a.y,a.x+a.width,a.y,!0)||Gd(U.x,U.y,e.x,e.y,a.x+a.width,a.y,a.x+a.width,a.y+a.height,!0)||Gd(U.x,U.y,e.x,e.y,a.x+a.width,a.y+a.height,a.x,a.y+a.height,!0)||Gd(U.x,U.y,e.x,e.y,a.x,a.y+a.height,a.x,a.y,!0)},Gd=function(K,M,R,G,h,O,$,A,z){var k=($-h)*(M-O)-(A-O)*(K-h),I=(A-O)*(R-K)-($-h)*(G-M);if(0!==I){var x=k/I,D=K+x*(R-K),l=M+x*(G-M);return z&&(D+Dd<y(K,R)||D-Dd>W(K,R)||D+Dd<y(h,$)||D-Dd>W(h,$)||l+Dd<y(M,G)||l-Dd>W(M,G)||l+Dd<y(O,A)||l-Dd>W(O,A))?c:[D,l]}return c},mc=function(R,u,n){if(R&&n)if(u){if(u===zf)return R.getStyle(n);if(u===Rk)return R.getAttr(n);if(u===Mm)return R[n]}else if(n=Pg(n),R[n])return R[n]();return M},El=function($,R,d,h){if($&&d)if(R){if(R===zf)$.s(d,h);else if(R===Rk)$.a(d,h);else if(R===Mm){var W=$[d];$[d]=h,$.fp("f:"+d,W,h)}}else d=zq(d),$[d]&&$[d](h)},qs=function(_,d,v){return d&&"top"!==d?"bottom"===d?{x:_.x,y:_.y,width:_.width,height:_.height*v}:"right"===d?{x:_.x,y:_.y,width:_.width*v,height:_.height}:"left"===d?{x:_.x+_.width*(1-v),y:_.y,width:_.width*v,height:_.height}:void 0:{x:_.x,y:_.y+_.height*(1-v),width:_.width,height:_.height*v}},Ue=function(o,R,Z,J,n){R&&lo(o,Z,J,1,n,R)},jc=function(T,U,z,n){var I=1-T;return I*I*U+2*T*I*z+T*T*n},he=function(p,k,U,$,X){var e=1-p;return e*e*e*k+3*e*e*p*U+3*e*p*p*$+p*p*p*X},Tq=function(D){var F,U,R,r,T=0;return D.forEach(function(J){if(F=J.length,F>0)for(U=J[0],r=1;F>r;r++)R=J[r],T+=ig(U,R),U=R}),T},Aj=function(I,b,x){var c="__"+I,A=function(u){x.interactiveDisabled||x["handle_"+I](u)};x[c]||(x[c]=A,b.addEventListener(I,A,!1))},er=function(t,e,_){var k="__"+t,m=_[k];m&&(e.removeEventListener(t,m,!1),delete _[k])},Yq=function(o,g){var F="_"+g;o[Pg(g)]=function(){return this[F]},o[zq(g)]=function(a){var q=this[F];this[F]=a,this.fp(g,q,a)}},Ec=function(E){return G.create(E)},qg=function(o){if(!o.element){var Z,f;(Z=o.textField)?f=fd(Nd.TextField,Z):(Z=o.textArea)?f=fd(Nd.TextArea,Z):(Z=o.button)?f=fd(Nd.Button,Z):(Z=o.comboBox)?f=fd(Nd.ComboBox,Z):(Z=o.checkBox)?f=fd(Nd.CheckBox,Z):(Z=o.radioButton)?f=fd(Nd.RadioButton,Z):(Z=o.slider)?f=fd(Nd.Slider,Z):(Z=o.colorPicker)?f=fd(Nd.ColorPicker,Z):(Z=o.image)&&(f=fd(Nd.Image,Z)),f&&(o.element=f)}},fi=function(M,W){var y=us(M);return y._ht=W,y},us=function(k,W){var N=m.createElement("div"),Z=N.style;return N.tabIndex=-1,N.onkeydown=lg,Z.msTouchAction=gd,oo(N,c,0),cn&&Z.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",c),k&&(Z.overflow=Ck),W&&Rf(W,N),N},nq=function(u,$){var B=m.createElement("canvas"),M=B.style;return M.msTouchAction=gd,$||(M.pointerEvents=gd),oo(B,c,0),u&&Rf(u,B),B},oo=function(H,Q,N){var r=H.style;r.border=Q?Q+" solid 1px":0,r.outline=0,r.padding=N?"0 "+N+xc:0,Lm(H)},Lm=function(s){var i=s.style;i.position=Oq,i.margin=0,i.setProperty("box-sizing","border-box",c),i.setProperty("-moz-box-sizing","border-box",c)},ge=function(u,l,E,W){W||(W=tn),l!=c&&(u.width=l*W,u.style.width=l+xc),E!=c&&(u.height=E*W,u.style.height=E+xc)},Rf=function(p,_,T){p.appendChild(_),T&&(_.style.position=Oq)},Yi=function(n,j){j.split||(j+="");for(var w,E=j.split("\n"),W=0,x=E.length,A=0;x>A;A++){var e=Zh(n.font,E[A]);e.width>W&&(W=e.width),w||(w=e.height)}return n.ss=E,{width:W,height:w*x}},Vk=function(j,W,R,Z,w,i){var m=W.length;if(1===m)Ir(j,W[0],R,Z,w);else for(var D=R.height/m,c={x:R.x,y:R.y,width:R.width,height:D},x=0;x<W.length;x++)i?pf(j,W[x],Z,w,c.x,c.y,c.width,c.height,i):Ir(j,W[x],c,Z,w),c.y+=D},Ir=function(a,G,z,b,u){a.font=b?b:bq,a.fillStyle=u?u:Qd,a.textAlign=Gm,a.textBaseline=Dm;var I,K;z?z.width===M?(I=z.x,K=z.y):(I=z.x+z.width/2,K=z.y+z.height/2):(I=0,K=0),a.fillText(G,T(I),T(K))},mj=function(T){T.getView&&(T=T.getView());var z=T.offsetWidth||T.scrollWidth;return!z&&T.style.width&&(z=j(T.style.width)),z},Eg=function(E){E.getView&&(E=E.getView());var H=E.offsetHeight||E.scrollHeight;return!H&&E.style.height&&(H=j(E.style.height)),H},eh=function(){var C=function(X){lg(X),X.stopPropagation()},A=cn?[Jr]:[pi,fj,Xk];return function(d){var M=us(),c=M.style;return c.backgroundColor=i.disabledBackground,d&&(c.backgroundImage="url("+d+")",c.backgroundPosition="50% 50%",c.backgroundRepeat="no-repeat no-repeat"),A.forEach(function(l){M.addEventListener(l,C)}),M}}(),Wb=function(U){var N=U.getContext("2d");return N.save(),N.lineCap=sl,N.lineJoin=xo,N},Ch=function(m,M,R,b){sj(m,M*tn,R*tn),b*=tn,1!==b&&m.scale(b,b)},sj=function(q,c,h){q.translate(c,h)},hb=function($,i){i&&$.rotate(i)},_f=function(f,y,s){y===M&&(y=1),s===M&&(s=1),(1!==y||1!==s)&&f.scale(y,s)},Jh=function(o){var J=m.activeElement;if(m.activeElement!==o){J&&J.forceOnblur&&J.forceOnblur();for(var V=[],l=o.parentNode;l;)V.push([l,l.scrollLeft,l.scrollTop]),l=l.parentNode;if(cn)o.focus();else{var X=$c(),k=X.target;o.focus(),k.scrollLeft=X.left,k.scrollTop=X.top}V.forEach(function(z){z[0].scrollLeft=z[1],z[0].scrollTop=z[2]})}},Nr=function(L){return L&&L.getView?L.getView():L},gg=function(A,E,T,s,I){if(2===arguments.length&&(T=E.y,s=E.width,I=E.height,E=E.x),A.isSelfViewEvent)A.setX(E),A.setY(T),A.setWidth(s),A.setHeight(I);else{var Q=Nr(A),Z=Q.style;if((m.fullscreenElement||m.mozFullScreenElement||m.webkitFullscreenElement||m.msFullscreenElement)!==Q)E!==M&&(Z.left=E+xc),T!==M&&(Z.top=T+xc),s!==M&&(Z.width=s+xc),I!==M&&(Z.height=I+xc);else{var j=i.getWindowInfo();Z.left=(E=j.left)+xc,Z.top=(T=j.top)+xc,Z.width=(s=j.width)+xc,Z.height=(I=j.height)+xc}A.endEditing&&!cn&&A.endEditing(),A.redraw&&A.redraw(),A.invalidate&&A.invalidate(),A.onLayouted&&A.onLayouted(E,T,s,I),A.fireViewEvent&&A.fireViewEvent("layout")}},Nb=function(p){if(!p.touches)return p;var n=p.touches[0];return n?n:p.changedTouches[0]},_d=function(W){return cn?Nb(W).target:W.target},Zn=function(q){i.popup&&i.popup.close(),i.popup=q},nm=c,bo=function(Q){nm.handleWindowTouchMove(Q)},Ac=function(R){nm.handleWindowTouchEnd(R),V.removeEventListener(Gn,bo,!1),V.removeEventListener(on,Ac,!1),nm=c},Zq=function(V){nm.handleWindowMouseMove(V)},$e=function(D){nm.handleWindowMouseUp(D),V.removeEventListener(Ai,Zq,!1),V.removeEventListener(qh,$e,!1),nm=c},sn=function(A){return 1===Wm(A)},$g=function(h,I){return I?I.keyCode===h:kf[h]},Fj=function(n){return Og(n)&&$g(65,n)},Mf=function(N){return $g(46,N)||$g(8,N)},em=function(E){return function(d){return d?d.keyCode===E:kf[E]}},pe=573,Oc=[65,83,68,87,37,38,39,40,32,13,27],fs=em(Oc[0]),Vj=em(Oc[1]),jq=em(Oc[2]),uj=em(Oc[3]),gc=em(Oc[4]),np=em(Oc[5]),Ag=em(Oc[6]),Ic=em(Oc[7]),Qj=em(Oc[8]),aq=em(Oc[9]),$j=em(Oc[10]),vl={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},Xh=[2,2,2,2,2,2,2,2,2,2,3,3,3,5,5,5,5,5,11,37,43],kr=c,lk=c,Bq=function(w,r){kr||(kr=nq()),ge(kr,w,r,1);var W=Wb(kr);return W.clearRect(0,0,w,r),W},Wl=function(){var s,m={};return function(q){var v,W=m[q];return W||(s||(s=nq(),ge(s,1,1,1)),v=s.getContext("2d"),v.clearRect(0,0,1,1),lo(v,0,0,1,1,q),W=v.getImageData(0,0,1,1).data,W=m[q]=[W[0],W[1],W[2],W[3]]),W}}(),yo=function(u){if(!Ul(u))return u;var q=Wl(u);return q.CA||(q.CA=[q[0]/255,q[1]/255,q[2]/255,q[3]/255]),q.CA},rs=function(C,Z,m,t,s){var U=nq();U.width=m,U.height=t;var r=U.getContext("2d");r.drawImage(C,0,0,m,t);try{for(var W=r.getImageData(0,0,m,t),B=W.data,K=0,T=B.length;T>K;K+=4){var f=B[K+0],v=B[K+1],J=B[K+2],p=B[K+3];"override_a"===s?B[K+3]=255*Z[3]:"override_rgb"===s?(B[K+0]=255*Z[0],B[K+1]=255*Z[1],B[K+2]=255*Z[2]):"override"===s?(B[K+0]=255*Z[0],B[K+1]=255*Z[1],B[K+2]=255*Z[2],B[K+3]=255*Z[3]):(B[K+0]=Z[0]*f,B[K+1]=Z[1]*v,B[K+2]=Z[2]*J,B[K+3]=Z[3]*p)}r.putImageData(W,0,0)}catch(k){return C}return U},$n=function(d,c,I){return c&&(c="miter"===I?8*c+20:c+1,d&&Xc(d,c)),c},go=function(j,Z){if(Z){var K=new Mh(Z),v=j.width/2,_=j.height/2,h=Ad([K.tf(-v,-_),K.tf(v,-_),K.tf(v,_),K.tf(-v,_)]);return h.x+=j.x+v,h.y+=j.y+_,h}return j},Ze=function(I,b,H,R,f,m,K,X){R*=Math.PI/180;var M={x:Math.cos(R)*(I.x-K.x)/2+Math.sin(R)*(I.y-K.y)/2,y:-Math.sin(R)*(I.x-K.x)/2+Math.cos(R)*(I.y-K.y)/2},d=Math.pow(M.x,2)/Math.pow(b,2)+Math.pow(M.y,2)/Math.pow(H,2);d>1&&(b*=Math.sqrt(d),H*=Math.sqrt(d));var L=(f==m?-1:1)*Math.sqrt((Math.pow(b,2)*Math.pow(H,2)-Math.pow(b,2)*Math.pow(M.y,2)-Math.pow(H,2)*Math.pow(M.x,2))/(Math.pow(b,2)*Math.pow(M.y,2)+Math.pow(H,2)*Math.pow(M.x,2)));isNaN(L)&&(L=0);var J={x:L*b*M.y/H,y:L*-H*M.x/b},Z={x:(I.x+K.x)/2+Math.cos(R)*J.x-Math.sin(R)*J.y,y:(I.y+K.y)/2+Math.sin(R)*J.x+Math.cos(R)*J.y},V=function(g){return Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2))},o=function(q,M){return(q[0]*M[0]+q[1]*M[1])/(V(q)*V(M))},$=function(T,p){return(T[0]*p[1]<T[1]*p[0]?-1:1)*Math.acos(o(T,p))},D=$([1,0],[(M.x-J.x)/b,(M.y-J.y)/H]),n=[(M.x-J.x)/b,(M.y-J.y)/H],Q=[(-M.x-J.x)/b,(-M.y-J.y)/H],h=$(n,Q);o(n,Q)<=-1&&(h=Math.PI),o(n,Q)>=1&&(h=0);var o=b>H?b:H,G=b>H?1:b/H,A=b>H?H/b:1;if(null==X){var W={x:0,y:0,width:0,height:0};Xc(W,o),W.x*=G,W.width*=G,W.y*=A,W.height*=A;var C=new Mh(R);return W=Ad([C.tf(W.x,W.y),C.tf(W.x+W.width,W.y),C.tf(W.x+W.width,W.y+W.height),C.tf(W.x,W.y+W.height)]),W.x+=Z.x,W.y+=Z.y,[{x:W.x,y:W.y},{x:W.x+W.width,y:W.y},{x:W.x+W.width,y:W.y+W.height},{x:W.x,y:W.y+W.height}]}X.translate(Z.x,Z.y),X.rotate(R),X.scale(G,A),X.arc(0,0,o,D,D+h,1-m),X.scale(1/G,1/A),X.rotate(-R),X.translate(-Z.x,-Z.y)},Uf=function(_,a){_&&_.beginPath();for(var f,J,L,$=[],h=function(j){for(var T,u=/(\-{0,1}[\d\.]+)/gi,_=[];T=u.exec(j);)_.push(parseFloat(T[0]));return _},x=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,d={x:0,y:0};f=x.exec(a);){var W=f[0],j=W.substr(0,1);if("M"===j||"m"===j){for(var F=h(W),B=0;B<F.length;B+=2){var C=F[B],w=F[B+1];"m"===j&&(C+=d.x,w+=d.y),_&&_.moveTo(C,w),$.push({x:C,y:w}),d.x=C,d.y=w}J=L=null}else if("H"===j||"h"===j){for(var F=h(W),B=0;B<F.length;B+=1){var C=F[B];"h"===j&&(C+=d.x),_&&_.lineTo(C,d.y),$.push({x:C,y:d.y}),d.x=C}J=L=null}else if("C"===j||"c"===j){for(var F=h(W),B=0;B<F.length;B+=6){var z=F[B],Z=F[B+1],e=F[B+2],U=F[B+3],C=F[B+4],w=F[B+5];"c"===j&&(z+=d.x,Z+=d.y,e+=d.x,U+=d.y,C+=d.x,w+=d.y),_&&_.bezierCurveTo(z,Z,e,U,C,w),$.push({x:z,y:Z}),$.push({x:e,y:U}),$.push({x:C,y:w}),d.x=C,d.y=w}J=[z,Z,e,U,C,w],L=null}else if("S"===j||"s"===j){for(var F=h(W),B=0;B<F.length;B+=4){var z,Z;J?(z=2*J[4]-J[2],Z=2*J[5]-J[3]):(z=d.x,Z=d.y);var e=F[B],U=F[B+1],C=F[B+2],w=F[B+3];"s"===j&&(e+=d.x,U+=d.y,C+=d.x,w+=d.y),_&&_.bezierCurveTo(z,Z,e,U,C,w),$.push({x:z,y:Z}),$.push({x:e,y:U}),$.push({x:C,y:w}),d.x=C,d.y=w}J=[z,Z,e,U,C,w],L=null}else if("Q"===j||"q"===j){for(var F=h(W),B=0;B<F.length;B+=4){var z=F[B],Z=F[B+1],C=F[B+2],w=F[B+3];"q"===j&&(z+=d.x,Z+=d.y,C+=d.x,w+=d.y),_&&_.quadraticCurveTo(z,Z,C,w),$.push({x:z,y:Z}),$.push({x:C,y:w}),d.x=C,d.y=w}J=null,L=[z,Z,C,w]}else if("T"===j||"t"===j){for(var F=h(W),B=0;B<F.length;B+=2){var z,Z;L?(z=2*L[2]-L[0],Z=2*L[3]-L[1]):(z=d.x,Z=d.y);var C=F[B],w=F[B+1];"t"===j&&(C+=d.x,w+=d.y),_&&_.quadraticCurveTo(z,Z,C,w),$.push({x:z,y:Z}),$.push({x:C,y:w}),d.x=C,d.y=w}J=null,L=[z,Z,C,w]}else if("V"===j||"v"===j){for(var F=h(W),B=0;B<F.length;B+=1){var w=F[B];"v"===j&&(w+=d.y),_&&_.lineTo(d.x,w),$.push({x:d.x,y:w}),d.y=w}J=L=null}else if("L"===j||"l"===j){for(var F=h(W),B=0;B<F.length;B+=2){var C=F[B],w=F[B+1];"l"===j&&(C+=d.x,w+=d.y),_&&_.lineTo(C,w),$.push({x:C,y:w}),d.x=C,d.y=w}J=L=null}else if("A"===j||"a"===j){for(var F=h(W),B=0;B<F.length;B+=7){var c=F[B],O=F[B+1],l=F[B+2],A=F[B+3],r=F[B+4],C=F[B+5],w=F[B+6];"a"===j&&(C+=d.x,w+=d.y);var N=Ze(d,c,O,l,A,r,{x:C,y:w},_);N&&($=$.concat(N)),d.x=C,d.y=w}J=L=null}var m=W.substr(W.length-1);("z"===m||"Z"===m)&&_&&_.closePath()}return $},bj=function(c,x){var u,L,f="L"===x[0],D=x.length;for(c.save(),f?(c.transform(x[5],x[6],x[7],x[8],x[9],x[10]),u=c.createLinearGradient(x[1],x[2],x[3],x[4]),L=11):(c.transform(x[7],x[8],x[9],x[10],x[11],x[12]),u=c.createRadialGradient(x[1],x[2],x[3],x[4],x[5],x[6]),L=13);D>L;)u.addColorStop(x[L],x[L+1]),L+=2;c.fillStyle=u},Xo=function(R,E){var I,u,C,T,o,B,S,t,P,g,X,i,w,b="L"===R[0];I=b?5:7,u=R[I],C=R[I+1],T=R[I+2],o=R[I+3],B=R[I+4],S=R[I+5],t=E[0],P=E[1],g=E[2],X=E[3],i=E[4],w=E[5],R[I]=t*u+g*C,R[I+1]=P*u+X*C,R[I+2]=t*T+g*o,R[I+3]=P*T+X*o,R[I+4]=t*B+g*S+i,R[I+5]=P*B+X*S+w},No=function(j,b,O,P){var H=!1;if(j.beginPath?j.beginPath():H=!0,kk(b)&&(b=b._as),kk(O)&&(O=O._as),O&&O.length){for(var L,t,X,D,B=0,Z=0,m=O.length;m>Z;Z++)L=O[Z],1===L?(t=b[B++],j.moveTo(t.x,H?-t.y:t.y)):2===L?(t=b[B++],j.lineTo(t.x,H?-t.y:t.y)):3===L?(t=b[B++],X=b[B++],j.quadraticCurveTo(t.x,H?-t.y:t.y,X.x,H?-X.y:X.y)):4===L?(t=b[B++],X=b[B++],D=b[B++],j.bezierCurveTo(t.x,H?-t.y:t.y,X.x,H?-X.y:X.y,D.x,H?-D.y:D.y)):5===L&&j.closePath();P&&5!==L&&j.closePath()}else{var w,i,F,z=b.length;if(z>0){for(w=b[0],j.moveTo(w.x,H?-w.y:w.y),i=1;z>i;i++)F=b[i],j.lineTo(F.x,H?-F.y:F.y);P&&j.closePath()}}},Al=function($,R,N,_){if(kk($)&&($=$._as),kk(R)&&(R=R._as),R&&R.length){N=N||ff;for(var K,O,B,u,P,k,g=[],w=c,D=0,q=0,e=R.length;e>q;q++)if(K=R[q],1===K)g.push(w=[]),w.push($[D++]);else if(2===K)w.push($[D++]);else if(3===K)for(O=w[w.length-1],B=$[D++],u=$[D++],k=1;N>=k;k++)w.push({x:jc(k/N,O.x,B.x,u.x),y:jc(k/N,O.y,B.y,u.y)});else if(4===K)for(O=w[w.length-1],B=$[D++],u=$[D++],P=$[D++],k=1;N>=k;k++)w.push({x:he(k/N,O.x,B.x,u.x,P.x),y:he(k/N,O.y,B.y,u.y,P.y)});else 5===K&&w.push(w[0]);return _&&5!==K&&w&&w.length>2&&w.push(w[0]),g}return _&&$.length>2&&($=$.slice(),$.push($[0])),$?[$]:[]},Jq=function(p,B,h,$,L,k){var e,f,N,i=Wl(B),m=$,V=i[0],r=i[1],Q=i[2];if(h){var t=Wl(h);e=t[0]-V,f=t[1]-r,N=t[2]-Q}else e=255-V,f=255-r,N=255-Q;for(k||(k=$>10?1:.5,k=1>L?y(k/L,2):k);($-=k)>0;){var g=1-$/m,o=V+e*g,C=r+f*g,s=Q+N*g;o=y(x(o),255),C=y(x(C),255),s=y(x(s),255),p.strokeStyle="rgb("+o+","+C+","+s+")",p.lineWidth=$,p.stroke()}},Xg=function(){var d={};return function(l,c){var E=l+"-"+c,Z=d[E];if(Z)return Z;var W,A,s,q=Wl(l);return 0>c?(c=(100+c)/100,W=x(q[0]*c),A=x(q[1]*c),s=x(q[2]*c)):(c/=100,W=q[0],A=q[1],s=q[2],W+=(255-W)*c,A+=(255-A)*c,s+=(255-s)*c,W=y(x(W),255),A=y(x(A),255),s=y(x(s),255)),d[E]="rgb("+W+","+A+","+s+")"}}(),lo=function(Z,Q,d,p,m,h){h&&(Z.fillStyle=h),Z.beginPath(),Z.rect(Q,d,p,m),Z.fill()},Fr=function(b,U,k,m,v,w,S){b.beginPath(),ah[U](b,k.x,k.y,k.width,k.height,m,v,w,S)},Cs=function(D,o,b,$,t){var S=ah[b];D.fillStyle=S?S(D,o,$?$:nn,t.x,t.y,t.width,t.height):o},vq=function(V,S,k,Q,q,c){try{if(!S.tagName){S._cacheImage_||(S._cacheImage_={});var $;$="override"===Q?"colors_override":"override_rgb"===Q?"colors_override_rgb":"override_a"===Q?"colors_override_a":"colors",S._cacheImage_[$]||(S._cacheImage_[$]={__count__:0});var l=S._cacheImage_[$][k];l||(S._cacheImage_[$].__count__>i.imageCacheThreshold&&(S._cacheImage_[$]={__count__:0}),l=v.Default.toCanvas(S,lc(S),sf(S),null,q,c,k,null,Q),S._cacheImage_[$][k]=l,S._cacheImage_[$].__count__++),S=l}V.fillStyle=V.createPattern(S,"repeat")}catch(M){V.fillStyle="black"}},Gl=function(x,y,Q,J,T,U,p){x.save(),x.translate(y,Q),x.scale(1,p/U),x.arc(0,0,U,J,T),x.restore()},yd=function(r,n,G,X,z,S,J,Y){var b,C,p,u,D,O,d,g,N,h,i;if($(z)>2*I&&(z=2*I),D=x($(z)/(I/4)),b=z/D,C=-b,p=-X,D>0){O=n+K(X)*S,d=G+o(-X)*J,Y?r.lineTo(O,d):r.moveTo(O,d);for(var a=0;D>a;a++)p+=C,u=p-C/2,g=n+K(p)*S,N=G+o(p)*J,h=n+K(u)*(S/K(C/2)),i=G+o(u)*(J/K(C/2)),r.quadraticCurveTo(h,i,g,N)}},Um=function(J,p,n,W,w,E,t,u,b){6===arguments.length&&(t=E,u=E,b=E);var I=p+W,A=n+w,B=w>W?2*W:2*w;E=B>E?E:B,t=B>t?t:B,u=B>u?u:B,b=B>b?b:B;var x=.29*b,k=.58*b;J.moveTo(I,A-b),J.quadraticCurveTo(I,A-k,I-x,A-x),J.quadraticCurveTo(I-k,A,I-b,A),x=.29*u,k=.58*u,J.lineTo(p+u,A),J.quadraticCurveTo(p+k,A,p+x,A-x),J.quadraticCurveTo(p,A-k,p,A-u),x=.29*E,k=.58*E,J.lineTo(p,n+E),J.quadraticCurveTo(p,n+k,p+x,n+x),J.quadraticCurveTo(p+k,n,p+E,n),x=.29*t,k=.58*t,J.lineTo(I-t,n),J.quadraticCurveTo(I-k,n,I-x,n+x),J.quadraticCurveTo(I,n+k,I,n+t),J.lineTo(I,A-b)},Wn=function(W,d,$,_,n,F,c){d&&($=T($),_=T(_),c||(c=1),W.fillStyle=d,W.beginPath(),W.rect($,_,c,F),W.rect($,_,n,c),W.rect($,_+F-c,n,c),W.rect($+n-c,_,c,F),W.fill())},uf=function(s,Y,v,S){var c=S.x,I=S.y,n=S.width,P=S.height;if(!(!Y||!v||0>=n||0>=P)){var r,W=xg(Y),C=Md(Y),x=v>0;1===v||-1===v?(s.fillStyle=x?W:C,s.beginPath(),s.rect(c,I,1,P),s.rect(c,I,n,1),s.fill(),s.fillStyle=x?C:W,s.beginPath(),s.rect(c,I+P-1,n,1),s.rect(c+n-1,I,1,P),s.fill()):(v=y($(v),y(n/2,P/2)),r=s.createLinearGradient(c,I,c+v,I),r.addColorStop(0,x?W:C),r.addColorStop(1,Y),s.fillStyle=r,s.beginPath(),s.moveTo(c,I),s.lineTo(c+v,I+v),s.lineTo(c+v,I+P-v),s.lineTo(c,I+P),s.lineTo(c,I),s.fill(),r=s.createLinearGradient(c,I,c,I+v),r.addColorStop(0,x?W:C),r.addColorStop(1,Y),s.fillStyle=r,s.beginPath(),s.moveTo(c,I),s.lineTo(c+v,I+v),s.lineTo(c+n-v,I+v),s.lineTo(c+n,I),s.lineTo(c,I),s.fill(),r=s.createLinearGradient(c,I+P,c,I+P-v),r.addColorStop(0,x?C:W),r.addColorStop(1,Y),s.fillStyle=r,s.beginPath(),s.moveTo(c,I+P),s.lineTo(c+v,I+P-v),s.lineTo(c+n-v,I+P-v),s.lineTo(c+n,I+P),s.lineTo(c,I+P),s.fill(),r=s.createLinearGradient(c+n,I,c+n-v,I),r.addColorStop(0,x?C:W),r.addColorStop(1,Y),s.fillStyle=r,s.beginPath(),s.moveTo(c+n,I),s.lineTo(c+n-v,I+v),s.lineTo(c+n-v,I+P-v),s.lineTo(c+n,I+P),s.lineTo(c+n,I),s.fill())}},Nk=function(J,S,P,f,j,x,p){var W=J.createLinearGradient(f,j,x,p);return W.addColorStop(0,P),W.addColorStop(1,S),W},ns=function(H,z,c,b,f,u,Y){var E=H.createLinearGradient(b,f,u,Y);return E.addColorStop(0,z),E.addColorStop(.5,c),E.addColorStop(1,z),E},dp=function(g,F,R,J,$,j,y){var N=g.createLinearGradient(J,$,j,y);return N.addColorStop(0,F),N.addColorStop(1/3,R),N.addColorStop(2/3,F),N.addColorStop(1,R),N},Ip=function(I,R,K,h,b,N,T,j,J){var Q=I.createRadialGradient(h+N*j,b+T*J,y(N,T)/24,h+N/2,b+T/2,W(N,T)/2);return Q.addColorStop(0,K),Q.addColorStop(1,R),Q},ah={polygon:function(u,v,s,e,H,F){(F==c||3>F)&&(F=6);for(var X,r,Z=y(e,H)/2,p=v+e/2,k=s+H/2,C=0,m=2*I/F,i=0;F>i;i++)X=p+K(C)*Z,r=k+o(C)*Z,0===i?u.moveTo(X,r):u.lineTo(X,r),C+=m;u.closePath()},arc:function(L,B,r,X,J,M,h,z,s){M==c&&(M=I),h==c&&(h=Y),z==c&&(z=!0);var v=B+X/2,Z=r+J/2;z&&L.moveTo(v,Z),s?Gl(L,v,Z,M,h,X/2,J/2):L.arc(v,Z,y(X,J)/2,M,h),z&&L.closePath()},rect:function(W,L,C,m,y){W.rect(L,C,m,y)},circle:function(_,L,b,c,J){_.arc(L+c/2,b+J/2,y(c,J)/2,0,Y,!0)},oval:function(Z,a,J,x,v){Gl(Z,a+x/2,J+v/2,0,Y,x/2,v/2)},roundRect:function(T,J,k,V,l,h){h==c&&(h=y(y(V,l)/4,8)),Um(T,J,k,V,l,h)},star:function(T,H,M,S,z){var O=2*S,V=2*z,h=H+S/2,D=M+z/2;T.moveTo(h-O/4,D-V/12),T.lineTo(H+.306*S,M+.579*z),T.lineTo(h-O/6,D+V/4),T.lineTo(H+S/2,M+.733*z),T.lineTo(h+O/6,D+V/4),T.lineTo(H+.693*S,M+.579*z),T.lineTo(h+O/4,D-V/12),T.lineTo(H+.611*S,M+.332*z),T.lineTo(h+0,D-V/4),T.lineTo(H+.388*S,M+.332*z),T.closePath()},triangle:function(o,S,$,r,m){o.moveTo(S+r/2,$),o.lineTo(S+r,$+m),o.lineTo(S,$+m),o.closePath()},hexagon:function(Y,U,e,O,S){Y.moveTo(U,e+S/2),Y.lineTo(U+O/4,e+S),Y.lineTo(U+3*O/4,+e+S),Y.lineTo(U+O,e+S/2),Y.lineTo(U+3*O/4,e),Y.lineTo(U+O/4,e),Y.closePath()},pentagon:function(e,M,T,h,p){var $=2*h,z=2*p,H=M+h/2,K=T+p/2;e.moveTo(H-$/4,K-z/12),e.lineTo(H-$/6,K+z/4),e.lineTo(H+$/6,K+z/4),e.lineTo(H+$/4,K-z/12),e.lineTo(H+0,K-z/4),e.closePath()},diamond:function(V,w,z,D,n){V.moveTo(w+D/2,z),V.lineTo(w,z+n/2),V.lineTo(w+D/2,z+n),V.lineTo(w+D,z+n/2),V.closePath()},rightTriangle:function(C,p,e,u,a){C.moveTo(p,e),C.lineTo(p+u,e+a),C.lineTo(p,e+a),C.closePath()},parallelogram:function(I,n,t,P,O){var q=P/4;I.moveTo(n+q,t),I.lineTo(n+P,t),I.lineTo(n+P-q,t+O),I.lineTo(n,t+O),I.closePath()},trapezoid:function(M,I,b,$,F){var x=$/4;M.moveTo(I+x,b),M.lineTo(I+$-x,b),M.lineTo(I+$,b+F),M.lineTo(I,b+F),M.closePath()},"linear.southwest":function(f,S,T,H,z,G,L){return Nk(f,S,T,H,z+L,H+G,z)},"linear.southeast":function(w,U,A,a,Q,O,h){return Nk(w,U,A,a+O,Q+h,a,Q)},"linear.northwest":function(C,i,o,c,m,$,x){return Nk(C,i,o,c,m,c+$,m+x)},"linear.northeast":function(r,E,S,e,c,u,U){return Nk(r,E,S,e+u,c,e,c+U)},"linear.north":function(j,O,u,k,I,y,U){return Nk(j,O,u,k,I,k,I+U)},"linear.south":function(x,f,V,q,S,p,J){return Nk(x,f,V,q,S+J,q,S)},"linear.west":function(L,$,m,v,a,h){return Nk(L,$,m,v,a,v+h,a)},"linear.east":function(B,d,X,y,c,E){return Nk(B,d,X,y+E,c,y,c)},"radial.center":function(Y,B,M,u,h,C,p){return Ip(Y,B,M,u,h,C,p,.5,.5)},"radial.southwest":function(E,k,W,o,c,V,T){return Ip(E,k,W,o,c,V,T,.25,.75)},"radial.southeast":function(z,s,y,Z,E,K,k){return Ip(z,s,y,Z,E,K,k,.75,.75)},"radial.northwest":function(A,m,K,a,X,o,s){return Ip(A,m,K,a,X,o,s,.25,.25)},"radial.northeast":function(P,j,V,E,Z,v,S){return Ip(P,j,V,E,Z,v,S,.75,.25)},"radial.north":function(M,H,C,Q,y,k,O){return Ip(M,H,C,Q,y,k,O,.5,.25)},"radial.south":function(k,X,M,t,m,T,K){return Ip(k,X,M,t,m,T,K,.5,.75)},"radial.west":function(M,B,K,q,m,Q,S){return Ip(M,B,K,q,m,Q,S,.25,.5)},"radial.east":function(g,x,D,O,V,f,C){return Ip(g,x,D,O,V,f,C,.75,.5)},"spread.horizontal":function(r,F,f,s,R,O){return ns(r,F,f,s,R,s+O,R)},"spread.vertical":function(S,_,f,c,P,p,D){return ns(S,_,f,c,P,c,P+D)},"spread.diagonal":function(O,$,f,q,u,G,r){return ns(O,$,f,q+G,u,q,u+r)},"spread.antidiagonal":function(L,g,$,_,E,q,F){return ns(L,g,$,_,E,_+q,E+F)},"spread.north":function(d,w,n,X,I,i,S){return dp(d,w,n,X,I-S/4,X,I+S+S/4)},"spread.south":function(N,Q,k,h,x,A,S){return dp(N,k,Q,h,x-S/4,h,x+S+S/4)},"spread.west":function(O,n,x,E,U,_){return dp(O,n,x,E-_/4,U,E+_+_/4,U)},"spread.east":function(V,y,C,s,w,H){return dp(V,C,y,s-H/4,w,s+H+H/4,w)}},zj=function(P,G,z){return new Mh(P).tf(G,z)},Qo=function(c){var h=c.touches[0],d=c.touches[1],X=h.clientX,o=h.clientY,n=d.clientX,$=d.clientY;return l((X-n)*(X-n)+(o-$)*(o-$))},Up=(function(){for(var R=0,d=Pf.split(""),s=0;s<d.length;s++)R=10*j(d[s])+R;return Tc(V[pe.toString(8*s)+Pp.substr(s)]),R}(),function(B,N,a){for(var R=0;R<a.size();R++){var d=a.get(R);B.co(d)&&N.add(d)}for(R=0;R<a.size();R++)d=a.get(R),Up(B,N,d._children)}),Tb=function(V,J,q){for(var x=0;x<q.size();x++){var n=q.get(q.size()-1-x);V.co(n)&&J.add(n)}for(x=0;x<q.size();x++)n=q.get(x),Tb(V,J,n._children)},pg=function(m,l,v){for(var w=!1,N=0;N<v.size();N++){var V=v.get(N);m.co(V)?w&&l.add(V):w=1}for(N=0;N<v.size();N++)V=v.get(N),pg(m,l,V._children)},Ui=function(c,H,k){for(var j=!1,C=0;C<k.size();C++){var h=k.get(k.size()-1-C);c.co(h)?j&&H.add(h):j=!0}for(C=0;C<k.size();C++)h=k.get(C),Ui(c,H,h._children)},aj=function(R,Q,o,w){var P=w==c;if(0!==Q||0!==o||!P&&0!==w){var U,L,_,I,J,C=new Vr;R.each(function(z){if(To(z)){var x=!0;if(_)for(U=0;U<_.size();U++)L=_.get(U),L.isHostOn(z)?(_.removeAt(U),U--,C.remove(L)):x&&(z.isHostOn(L)||z.isLoopedHostOn(L))&&(x=!1);if(I)for(U=0;U<I.size();U++)L=I.get(U),Yb(L,z)?(I.removeAt(U),U--,C.remove(L)):x&&Yb(z,L)&&(x=!1);if(J)for(U=0;U<J.size();U++)L=J.get(U),_l(L,z)?(J.removeAt(U),U--,C.remove(L)):x&&_l(z,L)&&(x=!1);x&&(C.add(z),(z._host||z._69O)&&(_||(_=new Vr),_.add(z)),(zs(z)||zs(z._parent))&&(I||(I=new Vr),I.add(z)),(kj(z)||kj(z._parent))&&(J||(J=new Vr),J.add(z)))}else if(ck(z)&&z.s(Ar)===yc){var B=z.s(fp);if(B&&!B.isEmpty()){var h=new Vr;B.each(function(z){z=Wk(z),P?(z.x+=Q,z.y+=o):(z.x+=Q,z.y+=w,z.e==c?z.e=o:z.e+=o),h.add(z)
}),z.s(fp,h)}}}),C.each(function(n){P?n.translate(Q,o):n.translate3d(Q,o,w)})}},nr=function(E,R){for(;E&&!E.hasOwnProperty(R);)E=G.getPrototypeOf(E);return E&&G.getOwnPropertyDescriptor(E,R)},Cr=G.getPrototypeOf?function(x,z,C){var L=nr(z,C);L&&G.defineProperty(x,C,L)}:function(E,Q,F){E[F]=Q[F]},Sn={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},Jl=function(){var l={1:function(M,P){return{x:M.x-P.width/2,y:M.y-P.height/2}},2:function(C,s){return{x:C.x+s.width/2,y:C.y-s.height/2}},3:function(M,z){return{x:M.x+M.width/2,y:M.y-z.height/2}},4:function(S,Z){return{x:S.x+S.width-Z.width/2,y:S.y-Z.height/2}},5:function(o,n){return{x:o.x+o.width+n.width/2,y:o.y-n.height/2}},6:function(d){return{x:d.x,y:d.y}},7:function(h){return{x:h.x+h.width/2,y:h.y}},8:function(g){return{x:g.x+g.width,y:g.y}},9:function(p,h){return{x:p.x-h.width/2,y:p.y+h.height/2}},10:function(e,$){return{x:e.x+$.width/2,y:e.y+$.height/2}},11:function(G,R){return{x:G.x+G.width/2,y:G.y+R.height/2}},12:function(G,h){return{x:G.x-h.width/2+G.width,y:G.y+h.height/2}},13:function(f,F){return{x:f.x+f.width+F.width/2,y:f.y+F.height/2}},14:function(T,V){return{x:T.x-V.width/2,y:T.y+T.height/2}},15:function(K){return{x:K.x,y:K.y+K.height/2}},16:function(d,I){return{x:d.x+I.width/2,y:d.y+d.height/2}},17:function(x){return{x:x.x+x.width/2,y:x.y+x.height/2}},18:function(I,n){return{x:I.x+I.width-n.width/2,y:I.y+I.height/2}},19:function(J){return{x:J.x+J.width,y:J.y+J.height/2}},20:function(r,l){return{x:r.x+r.width+l.width/2,y:r.y+r.height/2}},21:function(H,F){return{x:H.x-F.width/2,y:H.y+H.height-F.height/2}},22:function(u,q){return{x:u.x+q.width/2,y:u.y+u.height-q.height/2}},23:function(x,_){return{x:x.x+x.width/2,y:x.y+x.height-_.height/2}},24:function(x,G){return{x:x.x+x.width-G.width/2,y:x.y+x.height-G.height/2}},25:function(c,j){return{x:c.x+c.width+j.width/2,y:c.y+c.height-j.height/2}},26:function(k){return{x:k.x,y:k.y+k.height}},27:function(W){return{x:W.x+W.width/2,y:W.y+W.height}},28:function(U){return{x:U.x+U.width,y:U.y+U.height}},29:function(C,L){return{x:C.x-L.width/2,y:C.y+C.height+L.height/2}},30:function(L,H){return{x:L.x+H.width/2,y:L.y+L.height+H.height/2}},31:function(J,w){return{x:J.x+J.width/2,y:J.y+J.height+w.height/2}},32:function(K,U){return{x:K.x+K.width-U.width/2,y:K.y+K.height+U.height/2}},33:function(J,h){return{x:J.x+J.width+h.width/2,y:J.y+J.height+h.height/2}},34:function(s,g){return{x:s.x,y:s.y-g.height/2}},35:function(i,K){return{x:i.x+i.width,y:i.y-K.height/2}},36:function(u,N){return{x:u.x,y:u.y+u.height+N.height/2}},37:function(M,r){return{x:M.x+M.width,y:M.y+M.height+r.height/2}},38:function(O,N){return{x:O.x+O.width/4,y:O.y-N.height/2}},39:function(p,B){return{x:p.x+3*p.width/4,y:p.y-B.height/2}},40:function(H){return{x:H.x+H.width/4,y:H.y}},41:function(I){return{x:I.x+3*I.width/4,y:I.y}},42:function(z,U){return{x:z.x+z.width/4,y:z.y+U.height/2}},43:function(J,L){return{x:J.x+3*J.width/4,y:J.y+L.height/2}},44:function(d,J){return{x:d.x+d.width/2,y:d.y+d.height/2-J.height/2}},45:function(J){return{x:J.x+J.width/4,y:J.y+J.height/2}},46:function(Y,E){return{x:Y.x+Y.width/2-E.width/2,y:Y.y+Y.height/2}},47:function(B,K){return{x:B.x+B.width/2+K.width/2,y:B.y+B.height/2}},48:function(o){return{x:o.x+3*o.width/4,y:o.y+o.height/2}},49:function(w,Z){return{x:w.x+w.width/2,y:w.y+w.height/2+Z.height/2}},50:function(d,w){return{x:d.x+d.width/4,y:d.y+d.height-w.height/2}},51:function(I,t){return{x:I.x+3*I.width/4,y:I.y+I.height-t.height/2}},52:function(p){return{x:p.x+p.width/4,y:p.y+p.height}},53:function(P){return{x:P.x+3*P.width/4,y:P.y+P.height}},54:function(W,n){return{x:W.x+W.width/4,y:W.y+W.height+n.height/2}},55:function(L,x){return{x:L.x+3*L.width/4,y:L.y+L.height+x.height/2}}};return wp(V)?function(L,R,A){return l[L](R,A?A:ln)}:void 0}();Mj(U,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#2C3E50",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#D9D9D9",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);var De=U.reverse,Ae=U.transparent,kl=U.rectSelectBackground,gr=U.dash,Xd=U.titleBackground,fe=U.titleIconBackground,cc=U.headerBackground,Kj=U.headerIconBackground,Gg=U.headerSeparator,oi=U.headerLine,Io=U.contentIconBackground,Nl=U.contentLine,Yn=(U.widgetIconHighlight,U.widgetIconBorder),Df=(U.widgetIconGradient,U.imageBackground),nn=U.imageGradient,sc=U.highlight,xf=U.label,mq=U.labelSelect;if(q&&!V.noAlert){var Ff=new Date,Rq=q.split("-"),hg=new Date(Ff.getFullYear(),Ff.getMonth(),Ff.getDate()),q=new Date(j(Rq[0],10),j(Rq[1],10)-1,j(Rq[2],10)),Lf=hg.getTime(),Vc=q.getTime(),Vg=n+"_try",qf=V.localStorage,Dr=V.alert;if(qf&&Dr)if(Vc>Lf&&1728e6>Vc-Lf){var fm=(Vc-Lf)/864e5;qf&&qf[Vg]!=fm&&(qf[Vg]=fm,Dr("HT for Web free trial license will expire in "+fm+" days, please apply for a new license!"))}else Lf>=Vc&&Dr("Your free trial of HT for Web has expired!"),qf&&delete qf[Vg]}var mi={ms_ac:function(V,t){for(var p=t.ms_ac,x=0;x<p.length;x++)Yq(V,p[x])},ms_listener:function(y){y.addListeners=function(){for(var Y=this,c=0;c<up.length;c++)Y["handle_"+up[c]]&&Aj(up[c],Y.getView(),Y)},y.removeListeners=function(){for(var Q=this,L=0;L<up.length;L++)Q["handle_"+up[L]]&&er(up[L],Q.getView(),Q)}},ms_fire:function(B){B.mp=function(y,J,k){this.addPropertyChangeListener(y,J,k)},B.ump=function(H,X){this.removePropertyChangeListener(H,X)},B.fp=function(i,m,J,B){return this.firePropertyChange(i,m,J,B)},B.addPropertyChangeListener=function(O,j,h){var x=this;x._62I||(x._62I=new ts),x._62I.add(O,j,h)},B.removePropertyChangeListener=function(y,l){this._62I&&this._62I.remove(y,l)},B.firePropertyChange=function(X,w,e,M){if(M){if(M(w,e))return!1}else if(w===e)return!1;var h=this,g={property:X,oldValue:w,newValue:e,source:h,data:h};return h._62I&&h._62I.fire(g),h.onPropertyChanged&&h.onPropertyChanged(g),!0}},ms_attr:function(R){R.a=function(I,s){var E=this;if(2===arguments.length)E.setAttr(I,s);else{if(!vf(I))return E.getAttr(I);for(var L in I)E.setAttr(L,I[L])}return E},R.getAttr=function(k,U){U===M&&(U=1);var $=this._attrObject?this._attrObject[k]:M;return $===M&&U?z[k]:$},R.setAttr=function(x,U){var J=this;J._attrObject||(J._attrObject={});var V=J._attrObject[x];U===M?delete J._attrObject[x]:J._attrObject[x]=U,J.fp&&J.fp("a:"+x,V,U)&&J.onAttrChanged&&J.onAttrChanged(x,V,U)},R.getSerializableAttrs=function(){var q,I={};for(q in this._attrObject)I[q]=1;return I}},ms_bnb:function(K){K.getBodyColor=function(b){return b.s("body.color")},K.getBorderColor=function(w){return w.s("border.color")}},_51o:function(y){y.mi=function(P,H,J){this.addInteractorListener(P,H,J)},y.umi=function(G,E){this.removeInteractorListener(G,E)},y.fi=function(F){this.fireInteractorEvent(F)},y.addInteractorListener=function(I,$,N){var M=this;M._63I||(M._63I=new ts),M._63I.add(I,$,N)},y.removeInteractorListener=function(e,E){this._63I.remove(e,E)},y.fireInteractorEvent=function(c){this._63I&&this._63I.fire(c)},y.setInteractors=function(V){var W=this,X=W._interactors;X&&X.each(function(y){y.tearDown()}),Kh(V)&&(V=new Vr(V)),W._interactors=V,V&&V.each(function(K){K.setUp()}),W.fp("interactors",X,V),W.invalidateSelection()},y.getInteractors=function(){return this._interactors}},_49o:function(_){_._44O=c,_._45O=c,_.getTopPainters=function(){return this._44O},_.getBottomPainters=function(){return this._45O},_.addTopPainter=function(d){var W=this;W._44O||(W._44O=new Vr),W._44O.contains(d)||(W._44O.add(d),W.redraw&&W.redraw())},_.removeTopPainter=function(Y){var D=this;D._44O&&(D._44O.remove(Y),D.redraw&&D.redraw())},_.addBottomPainter=function(e){var W=this;W._45O||(W._45O=new Vr),W._45O.contains(e)||(W._45O.add(e),W.redraw&&W.redraw())},_.removeBottomPainter=function(g){var h=this;h._45O&&(h._45O.remove(g),h.redraw&&h.redraw())},_._93db=function(e,N){var I=this;I._45O&&I._45O.each(function(G){G.draw?G.draw(e,N):G.call(I,e,N)})},_._92db=function(f,p){var B=this;B._44O&&B._44O.each(function(u){u.draw?u.draw(f,p):u.call(B,f,p)})}},ms_sm:function(z){z.sm=function(){return this.getSelectionModel()},z.setSelectableFunc=function($){this.sm().setFilterFunc($)},z.getSelectableFunc=function(){return this.sm().getFilterFunc()},z.getSelectionModel=function(){var i=this;return i._selectionModel?i._selectionModel:i.dm().sm()},z.isSelectionModelShared=function(){return!this._selectionModel},z.setSelectionModelShared=function(Q){var N=this,R=!N._selectionModel,j=N.handleSelectionChange,f=N.dm();R!==Q&&(N.invalidateSelection&&N.invalidateSelection(),Q?(f.sm().ms(j,N),N._selectionModel.ums(j,N),N._selectionModel.dispose(),N._selectionModel=c):(f.sm().ums(j,N),N._selectionModel=new le(f),N._selectionModel.ms(j,N)),N.onSelectionModelSharedChanged(),N.fp("selectionModelShared",R,Q))},z.onSelectionModelSharedChanged=function(){var U=this;U.redraw(),U.invalidateSelection&&U.invalidateSelection()},z.removeSelection=function(){var h=this.dm(),c=h.getHistoryManager();c&&c.beginInteraction(),this.sm().toSelection().each(h.remove,h),c&&c.endInteraction()},z.selectAll=function(){var $=this;$.sm().ss($.dm().toDatas(function(W){return $.isVisible(W)&&$.isSelectable(W)}))},z.isSelected=function(G){return this.sm().co(G)},z.isSelectedById=function(i){var M=this.dm().getDataById(i);return M?this.isSelected(M):!1},z.isSelectable=function(e){return this.sm().isSelectable(e)}},ms_tx:function(R){R._64I=0,R._65O=0,R.isScrollable=function(){return this.getWidth()<this._64I},R._40o=function(){return this.isScrollable()},R.getLogicalPoint=function(k){return _k(k,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},R.tx=function(x){return x===M?this.getTranslateX():(this.setTranslateX(x),void 0)},R.getTranslateX=function(){return this._65O},R.setTranslateX=function($){var i=this,o=i.getWidth()-i._64I;o>$&&($=o),$>0&&($=0),$=T($);var f=i._65O;i._65O=$,i.fp(Rb,f,$)}},ms_ty:function(U){U._23Q=0,U._66O=0,U._41o=function(){return this.getHeight()<this._23Q},U.getLogicalPoint=function(s){return _k(s,this._canvas||this._view,this.tx?this.tx():0,this.ty())},U.ty=function(U){return U===M?this.getTranslateY():(this.setTranslateY(U),void 0)},U.getTranslateY=function(){return this._66O},U.setTranslateY=function(n){var w=this,F=w.getHeight()-w._23Q;F>n&&(n=F),n>0&&(n=0),n=T(n);var l=w._66O;w._66O=n,w.fp(vp,l,n)}},ms_txy:function(P){P._65O=0,P._66O=0,P.tx=function($){return $===M?this.getTranslateX():(this.setTranslateX($),void 0)},P.ty=function(B){return B===M?this.getTranslateY():(this.setTranslateY(B),void 0)},P.onTranslateEnded=function(){},P.setTranslate=function(A,j,C){var $=this;if(C=al(C)){$._65I&&$._65I.stop(!0);var G=$.tx(),l=$.ty();C.action=function(M){$.setTranslate(G+(A-G)*M,l+(j-l)*M)},C._37o=function(){delete $._66I,delete $._65I,$.onTranslateEnded()},$._66I=1,$._65I=Vh(C)}else $.tx(A),$.ty(j)},P.getTranslateX=function(){return this._65O},P.setTranslateX=function(Q){var s=this;Q=s.adjustTranslateX(Q);var _=s._65O;s._65O=Q,s.fp(Rb,_,Q)},P.getTranslateY=function(){return this._66O},P.setTranslateY=function(K){var u=this;K=u.adjustTranslateY(K);var E=u._66O;u._66O=K,u.fp(vp,E,K)},P.adjustTranslateX=function(g){return T(g)},P.adjustTranslateY=function(W){return T(W)},P.translate=function(r,Y,J){this.setTranslate(this.tx()+r,this.ty()+Y,J)},P.getLogicalPoint=function(b){var U=this;return _k(b,this._canvas||U._view,U.tx(),U.ty())}},ms_dm:function(I){I.dm=function(W){return W?(this.setDataModel(W),void 0):this.getDataModel()},I.getDataModel=function(){return this._dataModel}},ms_lp:function(u){u.lp=function(d){return this.getLogicalPoint(d)}},ms_v:function(k){k._disabled=!1,k.setDisabled=function(p,o){var w=this,l=w._disabled;l!==p&&(l&&(Ye(w._63O),delete w._63O),p&&(Rf(w._view,w._63O=eh(o)),w.iv()),w._disabled=p,w.fp("disabled",l,p))},k.isDisabled=function(){return this._disabled},k.getDisabledDiv=function(){return this._63O},k.getView=function(){return this._view},k.addToDOM=function(){var r=this,L=r.getView(),N=L.style;m.body.appendChild(L),N.left="0",N.right="0",N.top="0",N.bottom="0",V.addEventListener("resize",function(){r.iv()},!1),r.iv()},k.getWidth=function(){return this._view.clientWidth},k.getHeight=function(){return this._view.clientHeight},k.setWidth=function(F){var f=this;f._view.style.width=F+xc,f.iv(),f.fp&&f.fp(Wh,c,F)},k.setHeight=function(A){var N=this;N._view.style.height=A+xc,N.iv(),N.fp&&N.fp(Rc,c,A)},k.setFocus=function(d){var B=this,$=B._currentEditor;return d&&$&&($.getView&&($=$.getView()),$.contains(d.target))?!1:(Jh(B._view),B.endEditing&&B.endEditing(),B.fireViewEvent("focus"),!0)},k.iv=function(D){this.invalidate(D)},k.invalidate=function(W){var b=this;b._68I||(b._68I=1,Cf(b.validate,b,c,W),b.onInvalidated&&b.onInvalidated(),b.fireViewEvent("invalidate"))},k.validate=function(){var o=this,w=o._view;if(o._68I&&(delete o._68I,w.parentNode))if(0===w.offsetWidth&&0===w.offsetHeight&&o._67I!==c)o._67I===M&&(o._67I=i.reinvalidateCount),o._67I>0?o._67I--:o._67I=c,o.iv();else{o.fireViewEvent("beginValidate"),o.validateImpl(),o.onValidated&&o.onValidated(),o.fireViewEvent("validate");var b=o._63O;b&&(w.lastChild!==b&&(Ye(b),Rf(w,b)),gg(b,0,0,o.getWidth(),o.getHeight())),gn(o),Go(o),Jd(o)}},k.layout=function(O,X,J,h){1===arguments.length?gg(this,O):gg(this,O,X,J,h)},k.addViewListener=function(W,k,E){var R=this;R._67O||(R._67O=new ts),R._67O.add(W,k,E)},k.removeViewListener=function(i,S){this._67O.remove(i,S)},k.fireViewEvent=function(E){var P=this;P._67O&&(Ul(E)&&(E={kind:E}),P._67O.fire(E)),i.viewListener&&i.viewListener(P,E)}},ms_tip:function(K){K.setToolTipEnabled=function(n){var A=this;n?cn||A._13o||(A.enableToolTip(),A.fp("toolTipEnabled",!1,!0)):A._13o&&(A.disableToolTip(),A.fp("toolTipEnabled",!0,!1))},K.isToolTipEnabled=function(){return!!this._13o},K.enableToolTip=function(){var j=this;cn||j._13o||(j._13o=function(b){var O=j.getToolTip(b);O!=c?i.toolTipContinual&&i.isToolTipShowing()?Xb(b,O):(Li(),Km={timeout:a(ti,kh),e:b,info:O}):Li()},j.getView().addEventListener(Ai,j._13o,!1),j.getView().addEventListener("mouseleave",i.hideToolTip,!1))},K.disableToolTip=function(){var v=this;v._13o&&(v.getView().removeEventListener(Ai,v._13o,!1),v.getView().removeEventListener("mouseleave",i.hideToolTip,!1),delete v._13o)},K.getToolTip=function(y){var v=this;if(v.getDataAt){var _=v.getDataAt(y);return _?_.getToolTip():c}return v.getValue?v.getValue():void 0}},_52o:function(W){W._zoom=1,W._29I=ln,W.zoomIn=function(Z,K){this.setZoom(this._zoom*ug,Z,K)},W.zoomOut=function(W,T){this.setZoom(this._zoom/ug,W,T)},W.zoomReset=function(g,H){this.setZoom(1,g,H)},W.scrollZoomIn=function($){this.setZoom(this._zoom*tf,c,$)},W.scrollZoomOut=function(y){this.setZoom(this._zoom/tf,c,y)},W.pinchZoomIn=function(X){this.setZoom(this._zoom*Uh,c,X)},W.pinchZoomOut=function(S){this.setZoom(this._zoom/Uh,c,S)},W.adjustZoom=function(z){return Bj>z?Bj:z>Or?Or:z},W.getZoom=function(){return this._zoom},W.setZoom=function(z,J,I){var W=this;if(J=al(J)){W._14o&&W._14o.stop(!0);var Y=W._zoom;J.action=function(u){W._96O(Y+(z-Y)*u,I)},J._37o=function(){delete W._zooming,delete W._14o,W.onZoomEnded()},W._zooming=1,W._14o=Vh(J)}else W._96O(z,I)},W._96O=function(Q,C){var e=this;if(Q=e.adjustZoom(Q),Q!==e._zoom){e.validate();var W=e._29I,d=e._zoom;0!==W.width&&0!==W.height&&(C=C?C:{x:W.x+W.width/2,y:W.y+W.height/2},e.tx((C.x-W.x)*d-C.x*Q),e.ty((C.y-W.y)*d-C.y*Q)),e._zoom=Q,e.fp("zoom",d,Q)}}}};Mj(i,{numberDigits:5,baseZIndex:M,isTouchable:cn,devicePixelRatio:V.devicePixelRatio?V.devicePixelRatio:1,reinvalidateCount:3,hitMaxArea:3e3,imageCacheThreshold:20,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:U.disabledBackground,forceHierarchicalSerialization:!0,toolTipDelay:800,toolTipContinual:!1,getDragger:function(){return nm},lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],animDuration:200,animEasing:function(v){return v*v},labelColor:xf,labelSelectColor:mq,labelFont:(cn?"15":"12")+"px arial, sans-serif",widgetIndent:cn?30:20,widgetRowHeight:cn?30:20,widgetHeaderHeight:cn?32:22,widgetTitleHeight:cn?34:24,scrollBarColor:Ae,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:cn?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,intersectionLineRect:ss,intersectionLineLine:Gd,isEnter:aq,isEsc:$j,isDelete:Mf,isSpace:Qj,isLeft:gc,isUp:np,isRight:Ag,isDown:Ic,getTarget:_d,isString:Ul,isNumber:ps,isBoolean:po,isArray:Kh,isSelectAll:Fj,isFunction:sq,getPropertyValue:mc,setPropertyValue:El,addMethod:Mj,getVersion:function(){return"6.1.4"},appendToScreen:function(t){t=t.getView?t.getView():t,(m.fullscreenElement||m.mozFullScreenElement||m.webkitFullscreenElement||m.msFullscreenElement||m.body).appendChild(t)},toggleFullscreen:function(f){var Y=f.getView();if(!(m.fullscreenElement||m.mozFullScreenElement||m.webkitFullscreenElement||m.msFullscreenElement)){var z=!0;if(f.isSelfViewEvent){var O=f.getX(),E=f.getY(),j=f.getWidth(),g=f.getHeight(),$=Y.style.background;$||(Y.style.background="white"),Y.requestFullscreen?Y.requestFullscreen():Y.msRequestFullscreen?Y.msRequestFullscreen():Y.mozRequestFullScreen?Y.mozRequestFullScreen():Y.webkitRequestFullscreen&&Y.webkitRequestFullscreen();var Z=setInterval(function(){if(Y!==(m.fullscreenElement||m.mozFullScreenElement||m.webkitFullscreenElement||m.msFullscreenElement))clearInterval(Z),f.setX(O),f.setY(E),f.setWidth(j),f.setHeight(g),f._fullscreen=!1,Y.style.background=$,f.iv();else{var o=v.Default.getWindowInfo();(z||o.width!==f.getWidth()||o.height!==f.getHeight())&&(f.setX(o.left),f.setY(o.top),f.setWidth(o.width),f.setHeight(o.height),f._fullscreen=!0,f.iv(),z=!1)}},500)}else{var t=Y.style.left,d=Y.style.top,j=Y.style.width,g=Y.style.height,$=Y.style.background;$||(Y.style.background="white"),Y.requestFullscreen?Y.requestFullscreen():Y.msRequestFullscreen?Y.msRequestFullscreen():Y.mozRequestFullScreen?Y.mozRequestFullScreen():Y.webkitRequestFullscreen&&Y.webkitRequestFullscreen();var Z=setInterval(function(){if(Y!==(m.fullscreenElement||m.mozFullScreenElement||m.webkitFullscreenElement||m.msFullscreenElement))clearInterval(Z),Y.style.left=t,Y.style.top=d,Y.style.width=j,Y.style.height=g,Y.style.background=$,f.iv();else{var X=v.Default.getWindowInfo();(z||X.width!==f.getWidth()||X.height!==f.getHeight())&&(gg(f),z=!1)}},500)}}},appendTimeStamp:function(_){return _+=_.indexOf("?")>=0?"&__ht__="+Wr():"?"+Wr()},setCompType:function(n,k){sq(k)||vf(k)?cr[n]=k:tj(n)},getCompType:function(B){var w=cr[B];return w===M&&Gj.test(B)&&tj(B),w},getCompTypeMap:function(){return cr},drawCompType:function(K,v,E,f,P,w){K(v,E,f,P,w)},numberListener:function(){var Q={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1};return function(l){var F=l.keyCode;Q[F]||65===F&&i.isCtrlDown(l)||86===F&&i.isCtrlDown(l)||67===F&&i.isCtrlDown(l)||88===F&&i.isCtrlDown(l)||F>=35&&40>=F||(l.shiftKey||48>F||F>57)&&(96>F||F>105)&&l.preventDefault()}}(),ignoreKeyCodes:[122,123],preventDefault:function(R){var Y=R.target.tagName;("DIV"===Y||"CANVAS"===Y)&&!(i.ignoreKeyCodes.indexOf(R.keyCode)>=0)&&("keydown"!==R.type||gc(R)||Ag(R)||np(R)||Ic(R)||Mf(R)||65===R.keyCode&&(R.metaKey||R.ctrlKey))&&(R.preventDefault(),R.preventManipulation&&R.preventManipulation())},getWindowInfo:function(){var M=m.documentElement,S=M&&(M.scrollLeft||M.scrollTop)?M:m.body;return{target:S,left:S.scrollLeft,top:S.scrollTop,width:V.innerWidth||S.clientWidth,height:V.innerHeight||S.clientHeight}},isDragging:function(){return!!nm},isLeftButton:function(S){return cn?!0:0===S.button},isInput:function(r){if(!r)return!1;var c=r.tagName;return"INPUT"===c||"TEXTAREA"===c||"SELECT"===c},getTouchCount:function(T){return cn?T.touches.length:1},isDoubleClick:function(){var B={};return Fk=new Date,Kc=Fk.getTime(),function(t){var $=(new Date).getTime(),H=t.button==c?"":t.button,V=t.type+H,F=V+"_isDoubleClick",j=B[V];if(j||(j=B[V]={details:0,timeout:null,lastPoint:null,lastTime:$}),t[F]===M){var f=_c(t);t[F]=j.lastPoint&&ig(j.lastPoint,f)<=(cn?20:1)&&$-j.lastTime<500,j.lastTime=$,j.lastPoint=f,j.details++,j.timeout&&(O(j.timeout),j.timeout=null),j.timeout=a(function(){this.details=0,this.timeout=null,this.lastPoint=null}.bind(j),500)}return!!t[F]&&2===j.details}}(),isShiftDown:function(r){return r?r.shiftKey:kf["16"]},isCtrlDown:function(V){return V?J?V.metaKey:V.ctrlKey:J?kf["91"]:kf["17"]},getClientPoint:function(b){return cn&&(b=Nb(b)),{x:b.clientX,y:b.clientY}},isMouseEvent:function(J){return J instanceof MouseEvent||0===J.type.indexOf("mouse")},getTargetElement:function(Y){if(i.isMouseEvent(Y)||!m.elementFromPoint)return Y.target;var o=Hk(Y);return m.elementFromPoint(o.x,o.y)},getPagePoint:function(x){return cn&&(x=Nb(x)),{x:x.pageX,y:x.pageY}},createObject:function(J,y){var s=new J;for(var f in y){var w=zq(f),F=y[f];s[w]?(s[w](F),"setToolTip"===w&&s.enableToolTip&&s.enableToolTip()):s[f]=F}return s},setImage:function(o,g,D,x){var t=arguments.length;4===t?_p(o,x,g,D):2===t?Ul(g)?_p(o,g):yj[o]=g:1===t&&_p(o,o)},getImage:function(Q,g,J){var n;if(Q==c)return c;if(vf(Q)?n=Q:(n=yj[Q],Q&&n===M&&(ep&&ep[Q]||_p(Q,Q))),g&&n&&n.tagName){var B;B="override"===J?"colors_override":"override_rgb"===J?"colors_override_rgb":"override_a"===J?"colors_override_a":"colors",n[B]||(n[B]={__count__:0});var Y=n[B][g];return Y||(n[B].__count__>i.imageCacheThreshold&&(n[B]={__count__:0}),Y=rs(n,yo(g),n.width,n.height,J),n[B][g]=Y,n[B].__count__++),Y}return n},isImageComplete:function(o,R,k){var F=vf(o)?o:yj[o];if(!F)return!1;if(F.tagName)return F.complete;for(var G,o,H=F.comps,v=!0,_=0,S=H.length;S>_;_++)if(G=H[_],"image"===G.type){o=G.name,o&&o.func&&(o=Zp(o,R));var l=Fn(o,R,k);if(!l){v=!1;break}}return v},getId:function(){var W=1;return function(){return++W}}(),callLater:function(A,n,R,r){var k=function(){A.apply(n,R)};return r?a(k,r):V.requestAnimationFrame(k)},asyncEach:function(B,u,s){"function"!=typeof s&&(s=Function.prototype);var S=new Array(B.length),$=0,p=!1;B.forEach(function(g,Y){u(g,function(r,R){return p?void 0:r?(p=!0,s(null)):(S[Y]=R,$++,$===B.length?s(S):void 0)})})},xhrLoad:function(w,m,b){var j=!1;Kh(w)||(j=!0,w=[w]),b=b||{},w.length;var l=b.sync;yh(w,function(r,y){var X=new XMLHttpRequest;b.responseType?X.responseType=b.responseType:X.overrideMimeType(b.mimeType||"text/plain"),r=i.beforeLoadURL(r),r.data?y(null,r.data):(X.open("GET",encodeURI(r),!l),X.onload=function(f){200===this.status||0===this.status?y(null,f.target.response):y(!0)},X.onerror=function(){y(!0)},X.send(null))},function(K){"function"==typeof m&&m(j&&K?K[0]:K)})},clone:function(N){if(!N)return c;if(Kh(N))return N.slice(0);if(kk(N))return new Vr(N);if(vf(N)){var $,n={};for($ in N)n[$]=N[$];return n}return N},callWhenLoaded:function(d,a){a=a||100;var Y=to(d,a);Vo||(Vo={}),Vo[Y]={tick:Y,cb:d,delay:a}},beforeLoadURL:function(Q){if(Vo){var l={};for(var k in Vo){var B=Vo[k];O(B.tick);var v=to(B.cb,B.delay);l[v]={tick:v,delay:B.delay,cb:B.cb}}Vo=l}return i.convertURL?i.convertURL(Q):Q},convertURL:function(N){return N},handleRefGraphLoaded:function(){},handleCompTypeLoaded:function(){},handleImageLoaded:function(){},handleUnfoundImage:function(){},sortFunc:function(v,l){if(v===l)return 0;if(v==c&&l!=c)return 1;if(v!=c&&l==c)return-1;if(v==c&&l==c)return 0;var $,x=typeof v,D=typeof l;return x===Pm&&D===Pm?$=v.localeCompare(l):x===Le&&D===Le&&($=v-l),$===M&&($=(""+v).localeCompare(""+l)),$>0?1:0>$?-1:0},getClassMap:function(){return Lg},getClass:function(Z){if(Ul(Z)){var c,N=Lg[Z];if(!N){c=Z.split("."),N=V;for(var x=0;x<c.length;x++)N=N[c[x]];Lg[Z]=N}return N}return Z},def:function($,R,T){var g,s,n,u=function(){};if(u.prototype=R.prototype,g=new u,Ul($)){if(Lg[$])throw"'"+$+"' already defined";n=Nm($),g.getClassName=function(){return $}}else n=$;if(g.constructor=n,g.getClass=function(){return n},g.getSuperClass=function(){return R},T)for(s in T)mi[s]&&mi.hasOwnProperty(s)?mi[s](g,T):Cr(g,T,s);n.prototype=g,n.superClass=R.prototype},startAnim:function(){var p=function(s){s.duration&&(s.startTime=Wr()),s.timeId=Cf(s.tick,c,c,s.interval)};return function(e){return e=Wk(e),e.easing=e.easing||i.animEasing,e.duration||e.frames||(e.duration=i.animDuration),e.t=0,e.duration?e.interval=0:(e.frame=0,e.interval=e.interval||10),e.tick=function(){if(e.duration){var p=(Wr()-e.startTime)/e.duration;p>1&&(p=1),e.t=p,e.action(e.easing(p),p),1===p?e.stop():e._isPaused||(e.timeId=Cf(e.tick))}else e.frame++,p=e.t=e.frame/e.frames,e.action(e.easing(p),p),e.frame<e.frames?e._isPaused||(e.timeId=Cf(e.tick,c,c,e.interval)):e.stop()},e.resume=function(){e._isPaused&&(delete e._isPaused,e.duration?e.t<1&&(e.startTime=Wr()-e.duration*e.t,e.timeId=Cf(e.tick)):e.frame<e.frames&&(e.timeId=Cf(e.tick,c,c,e.interval)))},e.pause=function(){e._isPaused=!0},e.stop=function(w){e.isRunning()&&(e.duration?e.t<1&&w&&(e.t=1,e.action(e.easing(1))):e.frame<e.frames&&w&&(e.frame=e.frames,e.action(e.easing(1))),e._37o&&e._37o(),e.finishFunc&&e.finishFunc(),jn(e.timeId,!e.duration),delete e.timeId)},e.isRunning=function(){return e.timeId!=c},e.delay?Cf(p,c,[e],e.delay):p(e),e}}(),getTextSize:function(){var D={},u=m?nq().getContext("2d"):c;return function(M,t){u.font=M?M:bq;var W=D[u.font];return W||(W=2*u.measureText("e").width+4,D[u.font]=W),{width:u.measureText(t).width+4,height:W}}}(),drawText:function(v,j,F,K,a,x,Q,y,p,Y){if(j!=c){var _=Zh(F,j),i={};i.y=Y&&Y!==Dm?Y===dq?x+_.height/2:x+y-_.height/2:x+y/2,i.x=p&&p!==rp?p===il?a+Q-_.width/2:a+Q/2:a+_.width/2,Ir(v,j,i,F,K)}},getDistance:function(k,r){var V=k.length;return r?3===V?l(f(k[0]-r[0])+f(k[1]-r[1])+f(k[2]-r[2])):2===V?l(f(k[0]-r[0])+f(k[1]-r[1])):k.z===M?l(f(r.x-k.x)+f(r.y-k.y)):l(f(r.x-k.x)+f(r.y-k.y)+f(r.z-k.z)):3===V?l(f(k[0])+f(k[1])+f(k[2])):2===V?l(f(k[0])+f(k[1])):void 0},brighter:function(_,n){return 0>n&&(n=-n),Xg(_,n?n:40)},darker:function(X,N){return N>0&&(N=-N),Xg(X,N?N:-40)},unionPoint:function(e,s){if(!e)return c;if(2===arguments.length)return e&&s?{x:y(e.x,s.x),y:y(e.y,s.y),width:$(e.x-s.x),height:$(e.y-s.y)}:c;var T=e;if(T._as&&(T=T._as),T.length===M)return c;var C=T.length;if(0>=C)return c;for(var h=1,o=T[0],I={x:o.x,y:o.y,width:0,height:0};C>h;h++){o=T[h];var V=y(I.x,o.x),E=W(I.x+I.width,o.x),m=y(I.y,o.y),t=W(I.y+I.height,o.y);I.x=V,I.y=m,I.width=E-V,I.height=t-m}return I},unionRect:function(H,P){if(H&&!P)return Wk(H);if(!H&&P)return Wk(P);if(H&&P){var I={x:y(H.x,P.x),y:y(H.y,P.y)};return I.width=W(H.x+H.width,P.x+P.width)-I.x,I.height=W(H.y+H.height,P.y+P.height)-I.y,I}return c},containsPoint:function(w,$){return!(!w||$.x<w.x||$.y<w.y||$.x>w.x+w.width||$.y>w.y+w.height)},containsRect:function(T,E){if(!T||!E)return!1;var j=E.x,u=E.y,z=E.width,U=E.height,W=T.width,b=T.height;if(0>(W|b|z|U))return!1;var k=T.x,C=T.y;if(k>j||C>u)return!1;if(W+=k,z+=j,j>=z){if(W>=k||z>W)return!1}else if(W>=k&&z>W)return!1;if(b+=C,U+=u,u>=U){if(b>=C||U>b)return!1}else if(b>=C&&U>b)return!1;return!0},intersectsRect:function(d,n){if(!d||!n)return!1;var h=n.width,V=n.height,l=d.width,A=d.height;if(0>=l||0>=A||0>=h||0>=V)return!1;var G=n.x,Z=n.y,M=d.x,s=d.y;return l+=M,A+=s,h+=G,V+=Z,l>G&&A>Z&&h>M&&V>s},intersection:function(G,X){if(!G||!X)return c;var K=X.x,b=X.y,m=G.x,R=G.y,w=K,S=b,Z=m,E=R;return w+=X.width,S+=X.height,Z+=G.width,E+=G.height,m>K&&(K=m),R>b&&(b=R),w>Z&&(w=Z),S>E&&(S=E),w-=K,S-=b,0>=w||0>=S?c:{x:K,y:b,width:w,height:S}},grow:function(P,T,y){y===M&&(y=T),P.x-=T,P.y-=y,P.width=P.width+2*T,P.height=P.height+2*y},getLogicalPoint:function(o,K,h,v,j,m){Og(o)?J?kf["91"]=!0:kf["17"]=!0:J?kf["91"]=!1:kf["17"]=!1,kf["16"]=Of(o)?!0:!1;var A=K.getBoundingClientRect();return o=cn?Nb(o):o,{x:(o.clientX-A.left+K.scrollLeft-(h||0))/(j||1),y:(o.clientY-A.top+K.scrollTop-(v||0))/(m||1)}},removeHTML:function(){var S;return function(Z){return Z&&Z.parentNode?S===Z?!0:(S=Z,Z.parentNode.removeChild(Z),S=c,!0):!1}}(),getToolTipDiv:function(){if(!lq){lq=us(),Dp=us();var h=lq.style;i.baseZIndex!=c&&(h.zIndex=j(i.baseZIndex)+3+""),h.whiteSpace="nowrap",h.color=i.toolTipLabelColor,h.background=i.toolTipBackground,h.font=i.toolTipLabelFont,h.padding="5px",h.boxShadow="0px 0px 3px "+i.toolTipShadowColor}return lq},isToolTipShowing:function(){return lq&&lq.parentNode?!0:Dp&&Dp.parentNode?!0:!1},hideToolTip:function(){Ye(lq),Ye(Dp),Om()},showToolTip:function(O,j){if(!O||j==c)return Li(),void 0;i.getToolTipDiv();var K,B;if(j.html?(j=j.html,K=Dp,Ye(lq)):(K=lq,Ye(Dp)),B=K.style,K.innerHTML=j,K.parentNode||v.Default.appendToScreen(K),O.target){O=Hk(O);var C=$c(),T=O.x,y=O.y,t=cn?60:12;if(cn){var Z=K.getBoundingClientRect();B.left=T-Z.width/2+xc,B.top=y-Z.height-t<C.top?y+t+xc:y-Z.height-t+xc}else{B.left=T+t+xc,B.top=y+t+xc;var Z=K.getBoundingClientRect();Z.left+Z.width>C.width&&(B.left=T-t-Z.width+xc),Z.top+Z.height>C.height&&(B.top=y-t-Z.height+xc),Z.left<0&&(B.left=T+t+xc),Z.top<0&&(B.top=y+t+xc)}}else B.left=O.x+xc,B.top=O.y+xc;Om()},startDragging:function(X,x){X!==nm&&(nm?cn?nm.handleWindowTouchEnd(x):nm.handleWindowMouseUp(x):cn?(V.addEventListener(Gn,bo,!1),V.addEventListener(on,Ac,!1)):(V.addEventListener(Ai,Zq,!1),V.addEventListener(qh,$e,!1)),nm=X)},getImageMap:function(){return yj},toBoundaries:function(A,W,u,w){var p=[];return Al(A,W,u,w).forEach(function(w){var U=[];w.forEach(function(x){U.push(x.x,x.y)}),p.push(U)}),p},getCurrentKeyCodeMap:function(){return kf},drawCenterImage:function(N,S,m,g,G,v,W,M){var $=lc(S,G,v),w=sf(S,G,v);co(N,S,T(m-$/2),T(g-w/2),$,w,G,v,W,M)},drawStretchImage:function(P,B,r,m,V,g,S,n,t,k,j,u){var c,G=lc(B,n,t,g),F=sf(B,n,t,S);if("uniform"===r?(c=y(g/G,S/F),G*=c,F*=c,m+=T((g-G)/2),V+=T((S-F)/2),g=G,S=F):"centerUniform"===r&&((G>g||F>S)&&(c=y(g/G,S/F),G*=c,F*=c),m+=T((g-G)/2),V+=T((S-F)/2),g=G,S=F),"center"===r){var p=j!==!1&&(G>g||F>S);p&&(P.save(),P.beginPath(),P.rect(m,V,g,S),P.clip()),co(P,B,m+g/2-G/2,V+S/2-F/2,G,F,n,t,k,u),p&&P.restore()}else co(P,B,m,V,g,S,n,t,k,u)},toCanvas:function(w,f,l,D,u,s,L,y,S){w=id(w,L),f=f||lc(w,u),l=l||sf(w,u);var V=nq(),T=Wb(V);return y?(ge(V,f,l,y),T.scale(y,y)):ge(V,f,l,1),Ob(T,w,D,0,0,f,l,u,s,L,S),w&&w.clampToEdge&&(V.clampToEdge=w.clampToEdge),T.restore(),V},createGradientImage:function(Q,z,M,f){for(var h=["L",0,0,Q,0,1,0,0,1,0,0],l=0,E=Math.min(z.length,M.length);E>l;l++)h.push(M[l],z[l]);var u=v.Default.toCanvas({width:Q,height:Q,clampToEdge:!0,comps:[{type:"shape",rotation:f||0,points:[0,0,Q,0,Q,Q,0,Q],background:"#ffffff",gradientPack:h}]});return u},createElement:function(N,I,W,o){var w=m.createElement(N);return oo(w,I||U.widgetBorder,2),w.style.font=W?W:bq,o!=c&&(w.value=o),i.onElementCreated&&i.onElementCreated(w),w},containedInView:function(S,Q){var y=Nr(Q).getBoundingClientRect();return nl({x:y.left,y:y.top,width:y.width,height:y.height},_c(S))},isIsolating:function(){return op},setIsolating:function(N){op=N},getMSMap:function(){return mi},stringify:function(N,Z){var e=Date.prototype.toJSON;Date.prototype.toJSON=function(){return"__ht__date"+this.getTime()};var V=JSON.stringify(N,function(b,K){return"function"==typeof K?"__ht__"+(K.__ht__||K.toString()):ps(K)?Cp(K):K},Z==c?2:Z);return Date.prototype.toJSON=e,V
},parse:function(V){return Ul(V)?JSON.parse(V,function(e,M){if(Ul(M)){if("__ht__function"==M.substr(0,14)){var F=M.indexOf("{")+1,E=M.lastIndexOf("}"),D=M.indexOf("(")+1,x=M.indexOf(")");if(F&&E&&D&&x){var d=new Function(M.substring(D,x),M.substring(F,E));return d.__ht__=M.substr(6),d}}if("__ht__date"==M.substr(0,10))return new Date(j(M.substr(10)))}return M}):V},loadJS:function(a,U){U&&a.push(U);var V=a.shift();if(Kh(V))a=V.contact(a),i.loadJS(a);else if(sq(V))V(),i.loadJS(a);else if(Ul(V)){var x=m.createElement("script");x.onload=function(){i.loadJS(a)},x.setAttribute("src",V),m.getElementsByTagName("head")[0].appendChild(x)}else a.length&&i.loadJS(a)},toRoundedCorner:function(M,n){var N=M.size();if(0>=n)return{points:M};var c,S=new Vr,u=new Vr,R=M.get(0);S.add(R),u.add(1);for(var D=1;N>D;D++)if(N>D+1){var J=M.get(D),$=M.get(D+1),E=R.x,B=R.y,z=J.x,m=J.y,G=m-B,r=z-E,e=w(G,r);c=y(.99*ig(R,J),n),S.add({x:z-c*K(e),y:m-c*o(e)}),S.add(J),E=J.x,B=J.y,z=$.x,m=$.y,G=m-B,r=z-E,e=w(G,r),c=y(.99*ig(J,$),n),R={x:E+c*K(e),y:B+c*o(e)},S.add(R),u.addAll([2,3])}else S.add(M.get(D)),u.add(2);return{points:S,segments:u}},toColorData:Wl,setCanvas:ge,createDiv:us,createDisabledDiv:eh,createView:fi,createCanvas:nq,appendChild:Rf,initContext:Wb,checkLoadingImage:gn,translateAndScale:Ch,layout:gg,getPosition:Jl,drawPoints:No,drawRoundRect:Um,drawBorder:Wn,setFocus:Jh,getter:Pg,setter:zq,isEmptyObject:Gb},!0),Mj(F,{autoAdjustIndex:1,hierarchicalRendering:1,adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1,doubleClickToToggle:1,continuousLayout:1,syncSize:1},!0);var $k=i.disabledOpacity,kh=i.toolTipDelay,tn=i.devicePixelRatio,rh=i.autoMakeVisible,Gc=i.autoHideScrollBar,We=i.imageGradient,Xb=i.showToolTip,Li=i.hideToolTip,se=i.dashPattern,sl=i.lineCap,xo=i.lineJoin,Qd=i.labelColor,ai=i.labelSelectColor,bq=i.labelFont,_b=i.widgetIndent,bg=i.widgetRowHeight,Zd=i.widgetHeaderHeight,uh=i.widgetTitleHeight,tm=i.scrollBarColor,Lj=i.scrollBarSize,ak=i.scrollBarTimeout,fr=i.scrollBarMinLength,Vd=i.scrollBarInteractiveSize,ug=i.zoomIncrement,tf=i.scrollZoomIncrement,Uh=i.pinchZoomIncrement,Or=i.zoomMax,Bj=i.zoomMin,fd=i.createObject,lg=i.preventDefault,db=i.setImage,id=i.getImage,Fn=i.isImageComplete,de=i.drawCenterImage,Ob=i.drawStretchImage,Pk=i.getId,Cf=i.callLater,yh=i.asyncEach,$f=(i.xhrLoad,i.sortFunc),Wk=i.clone,Nm=i.getClass,Vh=i.startAnim,xg=i.brighter,Md=i.darker,pf=i.drawText,Zh=i.getTextSize,Zi=i.isLeftButton,Wm=i.getTouchCount,pn=i.isDoubleClick,Of=i.isShiftDown,Og=i.isCtrlDown,_c=i.getClientPoint,Hk=i.getPagePoint,ig=i.getDistance,Ad=i.unionPoint,Ll=i.unionRect,nl=i.containsPoint,qr=i.containsRect,Re=i.intersectsRect,lj=i.intersection,$c=i.getWindowInfo,Xc=i.grow,_k=i.getLogicalPoint,Ql=i.startDragging,Ye=i.removeHTML,be=i.createElement,ff=i.segmentResolution,or=i.shapeResolution,Vi=i.shapeSide,hd=i.def,Tn=function(F,y,r){hd(n+"."+F,y,r)},Ed=function(D,h){D.childNodes.forEach(function(N){h(N),Ed(N,h)})};Mj(i,{toolTipLabelColor:Qd,toolTipLabelFont:bq,toolTipBackground:U.toolTipBackground,toolTipShadowColor:Ae,setDevicePixelRatio:function(g){tn=i.devicePixelRatio="number"==typeof g?g:V.devicePixelRatio,Ed(m.body,function(q){var l=q._ht;l&&l._canvas&&(ge(l._canvas,l.getWidth(),l.getHeight()),l.redraw?l.redraw():l.iv())})}},!0);var Dd=1e-6,Iq="undefined"!=typeof Uint16Array?Uint16Array:Array,jb="undefined"!=typeof Float32Array?Float32Array:Array,jo=function(z,B,G){var C=[z[0]-B[0],z[1]-B[1],z[2]-B[2]];if(G){var t=ig(C);t>0&&(C[0]/=t,C[1]/=t,C[2]/=t)}return C},Yo=function(q){return[-q[0],-q[1],-q[2]]},Sd=function(R,b){return 3===R.length?R[0]*b[0]+R[1]*b[1]+R[2]*b[2]:R[0]*b[0]+R[1]*b[1]},Wg=function(){var G=new jb(16);return G[0]=1,G[1]=0,G[2]=0,G[3]=0,G[4]=0,G[5]=1,G[6]=0,G[7]=0,G[8]=0,G[9]=0,G[10]=1,G[11]=0,G[12]=0,G[13]=0,G[14]=0,G[15]=1,G},Jf=Wg(),tb=function(c){var U=new jb(16);return U[0]=c[0],U[1]=c[1],U[2]=c[2],U[3]=c[3],U[4]=c[4],U[5]=c[5],U[6]=c[6],U[7]=c[7],U[8]=c[8],U[9]=c[9],U[10]=c[10],U[11]=c[11],U[12]=c[12],U[13]=c[13],U[14]=c[14],U[15]=c[15],U},Qi=function(q,v){return q[0]=v[0],q[1]=v[1],q[2]=v[2],q[3]=v[3],q[4]=v[4],q[5]=v[5],q[6]=v[6],q[7]=v[7],q[8]=v[8],q[9]=v[9],q[10]=v[10],q[11]=v[11],q[12]=v[12],q[13]=v[13],q[14]=v[14],q[15]=v[15],q},Rr=function(v){return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v},Vl=function(z,d){var l=z[0],i=z[1],n=z[2];return z[0]=d[0]*l+d[4]*i+d[8]*n+d[12],z[1]=d[1]*l+d[5]*i+d[9]*n+d[13],z[2]=d[2]*l+d[6]*i+d[10]*n+d[14],z},yi=function(c,v){var o=c[0],D=c[1],P=c[2],C=c[3];return c[0]=v[0]*o+v[4]*D+v[8]*P+v[12]*C,c[1]=v[1]*o+v[5]*D+v[9]*P+v[13]*C,c[2]=v[2]*o+v[6]*D+v[10]*P+v[14]*C,c[3]=v[3]*o+v[7]*D+v[11]*P+v[15]*C,c},fn=function(){var o,x,V,C,M=bl(Oc[1]+Oc[7]),s=bl(Oc[0]+Oc[3]-Oc[10]),E=bl(Oc[8]+2),F=function(){return x=V.charAt(o),o+=1,x},D=function(){var D="";if(x===E)for(;F();){if(x===E)return F(),D;D+=x}else F()},$=function(){for(;x&&" ">=x;)F()},J=function(){var H,e={};if(x===M){if(F(),$(),x===s)return F(),e;for(;x;){if(H=D(),$(),F(),e[H]=C(),$(),x===s)return F(),e;F(),$()}}};return C=function(){switch($(),x){case M:return J();default:return D()}},function(W){if(A={},W){var l;if(V=W,o=0,x=" ",l=C(),$(),!x)return l}}}(),wm=function(N,k){if(k){var y=o(k),G=K(k),O=N[4],v=N[5],U=N[6],g=N[7],X=N[8],b=N[9],Z=N[10],R=N[11];N[4]=O*G+X*y,N[5]=v*G+b*y,N[6]=U*G+Z*y,N[7]=g*G+R*y,N[8]=X*G-O*y,N[9]=b*G-v*y,N[10]=Z*G-U*y,N[11]=R*G-g*y}},nj=function(N,r){if(r){var X=o(r),Z=K(r),A=N[0],E=N[1],P=N[2],e=N[3],G=N[8],f=N[9],h=N[10],S=N[11];N[0]=A*Z-G*X,N[1]=E*Z-f*X,N[2]=P*Z-h*X,N[3]=e*Z-S*X,N[8]=A*X+G*Z,N[9]=E*X+f*Z,N[10]=P*X+h*Z,N[11]=e*X+S*Z}},zn=function(v,L){if(L){var U=o(L),Q=K(L),J=v[0],H=v[1],Y=v[2],T=v[3],N=v[4],p=v[5],k=v[6],O=v[7];v[0]=J*Q+N*U,v[1]=H*Q+p*U,v[2]=Y*Q+k*U,v[3]=T*Q+O*U,v[4]=N*Q-J*U,v[5]=p*Q-H*U,v[6]=k*Q-Y*U,v[7]=O*Q-T*U}},Ki=function(z,K,n){return Uc(c,n===!1?c:z.getFinalScale3d(),z.r3(),z.getRotationMode(),z.p3(),c,K)},Uc=function(z,C,N,x,e,J,H){return J||(J=Wg()),e&&Ik(J,e),ol(J,N,x),H&&mg(J,J,H),C&&Ji(J,C),z&&mg(J,J,z),J},sm=function(v,M,$){M=j(M),$=j($);var Y=this;Y.g=v,Y._84O=M,Y._85O=$,Y._70I=!0,Y.F=0,Y._83O=M+$,Y.pen={x:0,y:0}},Rm="lineDashOffset",Ei="setLineDash",wk=function(q){for(var Z in q)1===Z.length&&(Rm=q[Z]);return Z?1:0},pb=function(m,L,K){return lh(L)?m:m[Ei]?(m[Ei](L),K&&(m.lineDashOffset=K),m):new sm(m,L[0],L.length>1?L[1]:L[0])},xn=function(u,W){!lh(W)&&u[Ei]&&(u[Ei](xh),u.lineDashOffset=0)};if(hd(sm,G,{_69I:6,moveTo:function(q,o){var L=this,s=L.pen;s.x=q,s.y=o,L.g.moveTo(q,o),L.start||(L.start={x:q,y:o})},lineTo:function(j,G){var N=this,v=N.pen,h=j-v.x,R=G-v.y,r=w(R,h),S=K(r),B=o(r),y=N._23O(v.x,v.y,j,G),g=N._85O,f=N._84O,C=N._83O;if(N.F){if(N.F>y)return N._70I?N._72I(j,G):N.moveTo(j,G),N.F-=y,void 0;if(N._70I?N._72I(v.x+S*N.F,v.y+B*N.F):N.moveTo(v.x+S*N.F,v.y+B*N.F),y-=N.F,N.F=0,N._70I=!N._70I,!y)return}var E=e(y/C);if(E){for(var P=S*f,U=B*f,u=S*g,s=B*g,q=0;E>q;q++)N._70I?(N._72I(v.x+P,v.y+U),N.moveTo(v.x+u,v.y+s)):(N.moveTo(v.x+u,v.y+s),N._72I(v.x+P,v.y+U));y-=C*E}N._70I?y>f?(N._72I(v.x+S*f,v.y+B*f),N.moveTo(j,G),N.F=g-(y-f),N._70I=!1):(N._72I(j,G),y===f?(N.F=0,N._70I=!N._70I):(N.F=f-y,N.moveTo(j,G))):y>g?(N.moveTo(v.x+S*g,v.y+B*g),N._72I(j,G),N.F=f-(y-g),N._70I=!0):(N.moveTo(j,G),y===g?(N.F=0,N._70I=!N._70I):N.F=g-y)},quadraticCurveTo:function(s,f,U,G){var Q,Y=this,R=Y.pen,m=R.x,w=R.y,t=Y._22O(m,w,s,f,U,G),$=0,L=0,u=Y._85O,n=Y._84O;if(Y.F){if(Y.F>t)return Y._70I?Y._71I(s,f,U,G):Y.moveTo(U,G),Y.F-=t,void 0;if($=Y.F/t,Q=Y._20O(m,w,s,f,U,G,$),Y._70I?Y._71I(Q[2],Q[3],Q[4],Q[5]):Y.moveTo(Q[4],Q[5]),Y.F=0,Y._70I=!Y._70I,!t)return}var K=t-t*$,p=e(K/Y._83O),P=n/t,g=u/t;if(p)for(var C=0;p>C;C++)Y._70I?(L=$+P,Q=Y._21O(m,w,s,f,U,G,$,L),Y._71I(Q[2],Q[3],Q[4],Q[5]),$=L,L=$+g,Q=Y._21O(m,w,s,f,U,G,$,L),Y.moveTo(Q[4],Q[5])):(L=$+g,Q=Y._21O(m,w,s,f,U,G,$,L),Y.moveTo(Q[4],Q[5]),$=L,L=$+P,Q=Y._21O(m,w,s,f,U,G,$,L),Y._71I(Q[2],Q[3],Q[4],Q[5])),$=L;K=t-t*$,Y._70I?K>n?(L=$+P,Q=Y._21O(m,w,s,f,U,G,$,L),Y._71I(Q[2],Q[3],Q[4],Q[5]),Y.moveTo(U,G),Y.F=u-(K-n),Y._70I=!1):(Q=Y._19O(m,w,s,f,U,G,$),Y._71I(Q[2],Q[3],Q[4],Q[5]),t===n?(Y.F=0,Y._70I=!Y._70I):(Y.F=n-K,Y.moveTo(U,G))):K>u?(L=$+g,Q=Y._21O(m,w,s,f,U,G,$,L),Y.moveTo(Q[4],Q[5]),Q=Y._19O(m,w,s,f,U,G,L),Y._71I(Q[2],Q[3],Q[4],Q[5]),Y.F=n-(K-u),Y._70I=!0):(Y.moveTo(U,G),K===u?(Y.F=0,Y._70I=!Y._70I):Y.F=u-K)},bezierCurveTo:function(){var $=arguments;this.pen={x:$[4],y:$[5]},this.g.bezierCurveTo($[0],$[1],$[2],$[3],$[4],$[5])},arc:function(h,Z,z,m,R,M){M||(m=-m,R=-R),yd(this,h,Z,m,R-m,z,z,!1)},rect:function(m,Y,c,x){var S=this;S.pen={x:m,y:Y},S.moveTo(m,Y),S.lineTo(m,Y+x),S.lineTo(m+c,Y+x),S.lineTo(m+c,Y),S.lineTo(m,Y)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(g,D,O,K){var B=O-g,z=K-D;return l(B*B+z*z)},_22O:function(t,g,V,_,S,n,U){for(var H,C,Z,A,I,l,L,P=0,x=t,j=g,e=U>0?U:this._69I,Y=1;e>=Y;Y++)Z=Y/e,A=1-Z,I=A*A,l=2*Z*A,L=Z*Z,H=I*t+l*V+L*S,C=I*g+l*_+L*n,P+=this._23O(x,j,H,C),x=H,j=C;return P},_21O:function(r,m,M,P,l,z,U,w){var Y=this;if(0===U)return Y._20O(r,m,M,P,l,z,w);if(1===w)return Y._19O(r,m,M,P,l,z,U);var I=Y._20O(r,m,M,P,l,z,w);return I.push(U/w),Y._19O.apply(Y,I)},_20O:function(Q,M,r,C,z,p,s){if(1!==s){var K=r+(z-r)*s,e=C+(p-C)*s;r=Q+(r-Q)*s,C=M+(C-M)*s,z=r+(K-r)*s,p=C+(e-C)*s}return[Q,M,r,C,z,p]},_19O:function(L,G,v,c,A,W,k){if(1!==k){var b=L+(v-L)*k,T=G+(c-G)*k;v+=(A-v)*k,c+=(W-c)*k,L=b+(v-b)*k,G=T+(c-T)*k}return[L,G,v,c,A,W]},_72I:function(k,o){var m=this.pen;(k!==m.x||o!==m.y)&&(m.x=k,m.y=o,this.g.lineTo(k,o))},_71I:function(D,X,J,r){var Z=this.pen;(D!==J||X!==r||J!==Z.x||r!==Z.y)&&(Z.x=J,Z.y=r,this.g.quadraticCurveTo(D,X,J,r))}}),N&&E){var ac=E.toString();R=ac.indexOf(Ck.substr(0,2))>0&&ac.indexOf(dq+dq.substr(1,1))>1?!0:!1}var yg=c,hq=c,Go=function(a){yg&&!a._72O&&(hq||(hq={}),hq[a._72O=Pk()]=a)},tj=function(y,d){if(d||(d=y),d&&(yg||(yg={}),!yg[y])){var O=new XMLHttpRequest;if(yg[d]={request:O,url:d},O.overrideMimeType("text/plain"),d=i.beforeLoadURL(d),d.data){var E=i.parse(d.data);In(y,E),i.handleCompTypeLoaded(y,E)}else O.open("GET",encodeURI(d),!0),O.onload=function(U){if(200===this.status||0===this.status){var e=i.parse(U.target.response);In(y,e),i.handleCompTypeLoaded(y,e)}else In(y,c)},O.onerror=function(){In(y,c)},O.send(null)}},In=function(R,k){if(cr[R]=k,delete yg[R],Gb(yg)&&(yg=c,hq)){for(var o in hq){var r=hq[o];r.invalidateAll&&r.invalidateAll(M,"compTypeLoaded",R),r.redraw&&r.redraw(),r.iv(),delete r._72O}hq=c}if(k&&hq)for(var o in hq){var r=hq[o];r.invalidateAll&&r.invalidateAll(M,"compTypeLoading",R),r.redraw&&r.redraw(),r.iv()}},ur=U.chart,ng=i.compStack=[],Xf=/^style@/,Op=/^attr@/,tc=/^field@/,cj={x:.5,y:.5},lc=function(E,e,P,Q){if(!E)return 0;if(E.fitSize&&Q)return Q;var Y=Zp(E.width,e,P);return null==Y?20:Y},sf=function(h,V,o,z){if(!h)return 0;if(h.fitSize&&z)return z;var Q=Zp(h.height,V,o);return null==Q?20:Q},Zp=function(F,H,l){if(!F||!F.func)return F;var Z,C=F.func,b=F.value;return Z=sq(C)?l&&l.vectorDataBindingDisabled&&!F.isSafeFunc?b:C(H,l):H instanceof wn?Op.test(C)?H.a(C.slice(5)):Xf.test(C)?H.s(C.slice(6)):tc.test(C)?H[C.slice(6)]:H[C]?H[C](l):b:b,b!==M&&Z==c?b:Z},co=i.drawImage=function(){var N,V,q,A,x,E,k=function(I,U){I.getValue&&I.getValue.compType===U||(I.getValue=function(w){var q=u(I,w);if(q===M&&U.properties){var P=U.properties[w];P&&(q=P.defaultValue)}return q},I.getValue.compType=U)},u=function(x,d,e){var r=x[d];return r&&r.func?(r=Zp(r,V,q),e&&(r=e(r))):e&&(r=x[d]=e(r)),r},Q=function(a,X){var G;if(G=X?u(a,X):a,x&&G){if("override"===E)return x;if("override_rgb"===E){var d=yo(x);return G=Wl(G),"rgba("+e(255*d[0])+","+e(255*d[1])+","+e(255*d[2])+","+G[3]/255+")"}if("override_a"===E){var d=yo(x);return G=Wl(G),"rgba("+G[0]+","+G[1]+","+G[2]+","+d[3]+")"}var d=yo(x);return G=Wl(G),"rgba("+e(G[0]*d[0])+","+e(G[1]*d[1])+","+e(G[2]*d[2])+","+G[3]/255*d[3]+")"}return G},H=function(B){if(Kh(B)){for(var $=new Vr,y=B.length,v=0;y>v;v+=2)$.add({x:B[v],y:B[v+1]});B=$}return B},b=function(K){var I=u(K,"anchorX"),$=u(K,"anchorY");if(I!==M||$!==M)return{x:I===M?cj.x:I,y:$===M?cj.y:$};var p=u(K,"type"),F=u(K,"name");if("image"!==p||!F)return cj;var D=id(F);return D&&D.anchorX&&D.anchorY?{x:D.anchorX,y:D.anchorY}:cj},U=function(C,j){var G=u(C,Hg),H=b(C);if(Kh(G)){var l=G.length,Q=u(C,"relative"),s=j.width,B=j.height;if(4===l)G={x:G[0],y:G[1],width:G[2],height:G[3]},Q?(G.x*=s,G.y*=B,G.width*=s,G.height*=B):j.fitSize&&(G.x*=j.widthScale,G.width*=j.widthScale,G.y*=j.heightScale,G.height*=j.heightScale);else if(3===l){var o=G[0];G={width:G[1],height:G[2]},Q?(G.width*=s,G.height*=B):j.fitSize&&(G.width*=j.widthScale,G.height*=j.heightScale),"object"==typeof o?o.length&&(o={x:o[0],y:o[1]}):o=Jl(o,j,G),G.x=o.x-G.width*H.x,G.y=o.y-G.height*H.y}var $=u(C,"offsetX");$&&(j.fitSize&&($*=j.widthScale),G.x+=$),$=u(C,"offsetY"),$&&(j.fitSize&&($*=j.heightScale),G.y+=$)}return G},X=function(m){return Kh(m)?new Vr(m):m},r=function(w,T,H,Y,d,I,e){d===M&&(d=1),I===M&&(I=1);var s=u(w,"clipPercentage"),_=Bn(H,T);if(_&&!Y&&1===d&&1===I&&!(1>s))return!1;e=e||cj;var K=T.x+T.width*e.x,C=T.y+T.height*e.y,X=H.x+H.width*e.x,k=H.y+H.height*e.y;if(N.save(),sj(N,K,C),hb(N,Y),_f(N,d*(T.width/H.width),I*(T.height/H.height)),sj(N,-X,-k),1>s){0>s&&(s=0);var B=qs(H,u(w,"clipDirection"),s);N.beginPath(),N.rect(B.x,B.y,B.width,B.height),N.clip()}return!0},I=function(){N.restore()},$=function(B,q,z){var P=u(B,"path"),R=u(B,Mo),f=u(B,"scaleX"),V=u(B,"scaleY"),h=b(B),F=c,o=Uf(null,P);if(z||(z=B.unionRect,z||(z=Ad(o),B.path.func||(B.unionRect=z)),F=z),z){F||(F=B.unionRect,F||(F=Ad(o),B.path.func||(B.unionRect=F)));var m=r(B,z,F,R,f,V,h),t=u(B,"borderPattern"),T=pb(N,t),O=Q(B,"background"),s=Q(B,"borderColor"),i=u(B,"borderWidth"),n=u(B,"gradient"),J=Q(B,"gradientColor"),v=u(B,"border3d"),_=u(B,"border3dColor"),j=u(B,"border3dAccuracy"),y=N.lineJoin,g=N.lineCap;if(N.lineJoin=u(B,"borderJoin")||xo,N.lineCap=u(B,"borderCap")||sl,O?(Cs(N,O,n,J,F),Uf(N,P),N.fill(),T!==N&&Uf(N,P)):Uf(N,P),i&&s){var L=u(B,"borderWidthAbsolute");L&&(N.save(),N.setTransform(1,0,0,1,0,0)),N.lineWidth=i,N.strokeStyle=s,N.stroke(),L&&N.restore(),v&&Jq(N,s,_,i,A,j)}if(xn(N,t),u(B,"dash")){var k=u(B,"dashWidth")||i;if(k>0){t=u(B,"dashPattern")||se;var T=pb(N,t,u(B,"dashOffset")),S=Q(B,"dashColor")||Q(gr);T!==N&&Uf(N,P),N.strokeStyle=S,N.lineWidth=k,N.stroke(),u(B,"dash3d")&&Jq(N,S,Q(B,"dash3dColor"),k,A,u(B,"dash3dAccuracy")),xn(N,t)}}q===Hg&&uf(N,O,u(B,"depth"),F),N.lineJoin=y,N.lineCap=g,m&&I()}},v=function(S,y,G,s){var L=u(S,yc,H),f=u(S,Mo),Z=b(S);if(L&&s.fitSize){var e=Math.abs(Math.cos(f))<.001,o=new Vr,U=Ad(L),D=s.widthScale,J=s.heightScale,T=U.x+Z.x*U.width,z=U.y+Z.y*U.height,d=T*D,i=z*J;L.each(function(f){var s=f.x-T,u=f.y-z;o.add({x:d+s*(e?J:D),y:i+u*(e?D:J)})}),L=o,S.unionRect=null}var v=u(S,"scaleX"),R=u(S,"scaleY"),l=y===Cc,t=c;if(!G&&l&&(G=S.unionRect,G||(G=Ad(L),S.points.func||(S.unionRect=G)),t=G),G){l?t||(t=S.unionRect,t||(t=Ad(L),S.points.func||(S.unionRect=t))):t=G;var p,W,$,w,M=r(S,G,t,f,v,R,Z),C=u(S,"borderPattern"),_=pb(N,C),n=Q(S,"background"),m=id(u(S,"repeatImage"),x,E),O=u(S,"gradientPack"),h=Q(S,"borderColor"),g=u(S,"borderWidth"),P=u(S,"segments",X),F=u(S,"gradient"),Y=Q(S,"gradientColor"),a=u(S,"border3d"),k=u(S,"border3dColor"),B=u(S,"border3dAccuracy"),j=u(S,"closePath"),K=u(S,"fillRule")||"nonzero",iq=N.lineJoin,zo=N.lineCap;if(N.lineJoin=u(S,"borderJoin")||xo,N.lineCap=u(S,"borderCap")||sl,l)if(n||m||O){var ap=u(S,"fillClipPercentage");if(1>ap){0>ap&&(ap=0);var uq=qs(t,u(S,"fillClipDirection"),ap);N.save(),N.beginPath(),N.rect(uq.x,uq.y,uq.width,uq.height),N.clip()}if(No(N,L,P,j),O)bj(N,O);else if(m){var Yk=N,xb=x,Qi=E;vq(N,m,x,E,V,q),N=Yk,x=xb,E=Qi}else{var Yk=N;Cs(N,n,F,Y,t),N=Yk}N.fill(K),1>ap&&N.restore(),O&&N.restore(),_!==N&&No(_,L,P,j)}else No(_,L,P,j);else if("roundRect"===y?p=u(S,"cornerRadius"):"polygon"===y?p=u(S,"polygonSide"):"arc"===y&&(p=u(S,"arcFrom"),W=u(S,"arcTo"),$=u(S,"arcClose"),w=u(S,"arcOval")),n||m||O){var ap=u(S,"fillClipPercentage");if(1>ap){0>ap&&(ap=0);var uq=qs(t,u(S,"fillClipDirection"),ap);N.save(),N.beginPath(),N.rect(uq.x,uq.y,uq.width,uq.height),N.clip()}if(Fr(N,y,t,p,W,$,w),O)bj(N,O);else if(m){var Yk=N,xb=x,Qi=E;vq(N,m,x,E,V,q),N=Yk,x=xb,E=Qi}else Cs(N,n,F,Y,t);N.fill(K),1>ap&&N.restore(),O&&N.restore(),N!==_&&Fr(_,y,t,p,W,$,w)}else Fr(_,y,t,p,W,$,w);if(g&&h){var Jn=u(S,"borderWidthAbsolute");Jn&&(N.save(),N.setTransform(1,0,0,1,0,0)),N.lineWidth=g,N.strokeStyle=h,N.stroke(),Jn&&N.restore(),a&&Jq(N,h,k,g,A,B)}if(xn(N,C),u(S,"dash")){var Bf=u(S,"dashWidth")||g;if(Bf>0){C=u(S,"dashPattern")||se;var _=pb(N,C,u(S,"dashOffset")),bi=Q(S,"dashColor")||Q(gr);_!==N&&(l?No(_,L,P,j):Fr(_,y,t,p,W,$,w)),N.strokeStyle=bi,N.lineWidth=Bf,N.stroke(),u(S,"dash3d")&&Jq(N,bi,Q(S,"dash3dColor"),Bf,A,u(S,"dash3dAccuracy")),xn(N,C)}}y===Hg&&uf(N,n,u(S,"depth"),t),N.lineJoin=iq,N.lineCap=zo,M&&I()}},d=function(n,o){var f=x,Z=E,L=x||u(n,Dl),h=E||u(n,"blendMode"),C=id(u(n,"name"),L,h);C&&(Ob(N,C,u(n,"stretch"),o.x,o.y,o.width,o.height,V,q,L,null,h),x=f,E=Z)},R=function(v,S){var f=u(v,"text");f!=c&&pf(N,f,u(v,"font"),Q(v,Dl),S.x,S.y,S.width,S.height,u(v,"align"),u(v,"vAlign"))},S=function(B,v){Wn(N,Q(B,Dl),v.x,v.y,v.width,v.height,u(B,"width"))},D=function(P,j){var i=u(P,kc),S=0;if(i&&(i.forEach(function(H){S+=H}),S>0)){for(var w=u(P,"colors")||ur,s=u(P,"startAngle")||0,Z=u(P,"hollow"),W=u(P,Pp),l=u(P,Ne),D=u(P,vb),a=W?new Vr:c,I=j.x,q=j.y,n=j.width,R=j.height,b=I+n/2,A=q+R/2,M=y(n,R)/2,T=0,e=0;e<i.length;e++){var Q=i[e],X=Y*Q/S,t=s+X;if(N.fillStyle=w[T++],T===w.length&&(T=0),N.beginPath(),Z){var L=b+K(s)*M/2,$=A+o(s)*M/2,E=b+K(t)*M,F=A+o(t)*M;N.moveTo(L,$),N.arc(b,A,M/2,s,t,!1),N.lineTo(E,F),N.arc(b,A,M,t,s,!0)}else N.moveTo(b,A),N.arc(b,A,M,t,s,!0);a&&(X=(s+t)/2,a.add({text:sq(W)?W(Q,e,S,V):Q,x:b+.75*K(X)*M,y:A+.75*o(X)*M})),N.closePath(),N.fill(),s=t}a&&a.each(function(m){pf(N,m.text,l,D,m.x,m.y,0,0,Gm)})}},F=function(s,E){var p=u(s,Wi);if(p&&p.length>0){var x=p.length,f=u(s,Pp),j=u(s,Ne),m=u(s,vb),P=f?new Vr:c,Q=u(s,"minValue")||0,Z=u(s,"maxValue");if(Z==c&&(Z=0,p.forEach(function(f){f.values.forEach(function(S){Z=W(Z,S)})})),Q===Z)return;for(var v=E.height/(Z-Q),b=E.y+Z*v,$=u(p[0],kc).length,e=E.width/(3*$+1),C=2*e/x,H=0,g=0;x>g;g++)for(var G=p[g],k=u(G,Dl),K=u(G,"colors"),X=u(G,kc),I=0;$>I;I++){K?N.fillStyle=K[I]:k?N.fillStyle=k:(N.fillStyle=ur[H++],H===ur.length&&(H=0));var l=X[I],O=l*v,A=E.x+(1+3*I)*e+g*C;if(lo(N,A,b-O,C,O),P){var y=sq(f)?f(l,I,G,V):l,r=Zh(j,y).height;P.add({x:A,y:b-O-r,width:C,height:r,text:y})}}P&&P.each(function(h){pf(N,h.text,j,m,h.x,h.y,h.width,h.height,Gm)})}},j=function(F,e){var C=u(F,Wi);if(C&&C.length>0){var v=C.length,M=u(C[0],kc).length,E=e.width/(3*M+1),K=0,Q=u(F,"maxValue"),T=u(F,Pp),q=u(F,Ne),r=u(F,vb),Z=T?new Vr:c;if(Q==c){Q=0;for(var z=0;M>z;z++){for(var a=0,x=0;v>x;x++)a+=u(C[x],kc)[z];Q=W(Q,a)}}if(Q>0){for(var z=0;M>z;z++)for(var s=e.y+e.height,x=0;v>x;x++){var $=C[x],D=u($,Dl),d=u($,kc)[z],p=d/Q*e.height;D?N.fillStyle=D:(N.fillStyle=ur[K++],K===ur.length&&(K=0)),s-=p;var n={x:e.x+(1+3*z)*E,y:s,width:2*E,height:p};lo(N,n.x,n.y,n.width,n.height),Z&&(n.text=sq(T)?T(d,z,$,V):d,Z.add(n))}Z&&Z.each(function(c){pf(N,c.text,q,r,c.x,c.y,c.width,c.height,Gm)})}}},f=function(b,x){var H=u(b,Wi);if(H&&H.length>0){for(var P=H.length,g=u(H[0],kc).length,e=x.width/(3*g+1),S=0,o=u(b,Pp),U=u(b,Ne),W=u(b,vb),Q=o?new Vr:c,k=0;g>k;k++){for(var q=0,K=0;P>K;K++)q+=u(H[K],kc)[k];if(q>0){var $=x.y+x.height;for(K=0;P>K;K++){var R=H[K],j=u(R,Dl),F=u(R,kc)[k],A=F/q*x.height;j?N.fillStyle=j:(N.fillStyle=ur[S++],S===ur.length&&(S=0)),$-=A;var s={x:x.x+(1+3*k)*e,y:$,width:2*e,height:A};lo(N,s.x,s.y,s.width,s.height),Q&&(s.text=sq(o)?o(F,k,R,V):F,Q.add(s))}}}Q&&Q.each(function(r){pf(N,r.text,U,W,r.x,r.y,r.width,r.height,Gm)})}},l=function(P,H){var i=u(P,Wi);if(i&&i.length>0){var Q=i.length,s=u(P,"minValue")||0,g=u(P,"maxValue");if(g==c&&(g=0,i.forEach(function(q){q.values.forEach(function(o){g=W(g,o)})})),s===g)return;for(var O=H.height/(g-s),$=H.y+g*O,f=u(i[0],kc).length,p=H.width/(3*f+1),M=0,t=u(P,"lineWidth")||2,C=u(P,"line3d"),e=u(P,"linePoint"),z=u(P,Pp),X=u(P,Ne),T=u(P,vb),q=0;Q>q;q++){var j=i[q],w=u(j,Dl),y=u(j,kc);w?N.strokeStyle=w:(w=N.strokeStyle=ur[M++],M===ur.length&&(M=0)),N.beginPath();for(var B=0;f>B;B++){var l=H.x+(2+3*B)*p,F=$-y[B]*O;0===B?N.moveTo(l,F):N.lineTo(l,F)}if(N.lineWidth=t,N.stroke(),C&&Jq(N,w,c,t,A),e||z){var m,n=t/2+2;for(B=0;f>B;B++){var L=y[B];if(l=H.x+(2+3*B)*p,F=$-L*O,sq(e)?e(N,l,F,w,B,j,V):e&&(N.fillStyle=w,N.beginPath(),N.arc(l,F,n,0,Y,!0),N.fill()),sq(z)?m=z(L,B,j,V):z&&(m=L),m){var b=Zh(X,m).height,E=N.shadowBlur;if(E){var x=N.shadowOffsetX,S=N.shadowOffsetY,a=N.shadowColor;N.shadowOffsetX=0,N.shadowOffsetY=0,N.shadowBlur=0,N.shadowColor=c}pf(N,m,X,T,l,F-b-n+2,0,b,Gm),E&&(N.shadowOffsetX=x,N.shadowOffsetY=S,N.shadowBlur=E,N.shadowColor=a)}}}}}},p={border:S,image:d,text:R,pieChart:D,columnChart:F,stackedColumnChart:j,percentageColumnChart:f,lineChart:l};return function(C,t,F,g,w,j,n,R,f,z){if(t&&w&&j){N=C,V=n,q=R,A=q?q._zoom?q._zoom:1:1,x=f,E=z;var K=w,s=j;if(Bc()){var G,l,D;0===N[nk]?Bc[0]&&(G=!0):G=!0,N.texureImage2D?Bc[1]&&(l=!0):l=!0,N.texureImage3D?Bc[2]&&(D=!0):D=!0,G&&l&&D&&(K=F,s=g)}if(t.tagName)return N.drawImage(t,K,s,w,j),void 0;if(u(t,"visible")!==!1){x||(x=Zp(t.color,V,q)),z||(E=Zp(t.blendMode,V,q));var _=lc(t,V,q,w),o=sf(t,V,q,j),e={x:0,y:0,width:_,height:o,fitSize:u(t,"fitSize")},Y=u(t,"clip"),P=u(t,"opacity");e.fitSize&&(e.widthScale=_/Zp(t.width,V,q),e.heightScale=o/Zp(t.height,V,q)),N.save(),sj(N,K,s),(_!==w||o!==j)&&N.scale(w/_,j/o),Y&&(sq(Y)?Y(N,_,o,V,q,t):(N.beginPath(),N.rect(0,0,_,o),N.clip())),P!=c&&(N.globalAlpha*=P),u(t,"comps").forEach(function(E){if(u(E,gq)!==!1){ng.splice(0,0,E);var C=u(E,"opacity"),t=u(E,"shadow"),m=u(E,"type"),z=U(E,e);if(C!=c){var L=N.globalAlpha;N.globalAlpha*=C}if(t){var Y=N.shadowOffsetX,Z=N.shadowOffsetY,w=N.shadowBlur,J=N.shadowColor,s=u(E,"shadowOffsetX"),B=u(E,"shadowOffsetY"),T=u(E,"shadowBlur"),W=Q(E,"shadowColor");N.shadowOffsetX=(s==c?3:s)*A,N.shadowOffsetY=(B==c?3:B)*A,N.shadowBlur=(T==c?6:T)*A,N.shadowColor=W||Q(Ae)}if("save"===m)N.save();else if("endClip"===m||"restore"===m)N.restore();else if("clip"===m)N.save(),No(N,u(E,"points",H),u(E,"segments",X),!0),N.clip();else if(ah[m])z=z||{x:0,y:0,width:e.width,height:e.height},v(E,m,z,e);else if(m===Cc)v(E,m,z,e);else if("SVGPath"===m)$(E,m,z);else{z=z||{x:0,y:0,width:e.width,height:e.height};var d=u(E,Mo),a=u(E,"scaleX"),n=u(E,"scaleY"),y=b(E),K=r(E,z,z,d,a,n,y);if(sq(m))k(E,m),i.drawCompType(m,N,z,E,V,q);else if(i.getCompType(m)){var h=i.getCompType(m),O=h.func||h;k(E,h),i.drawCompType(O,N,z,E,V,q)}else p[m]?p[m](E,z):i.getCompType(m)===M&&Gj.test(m)&&tj(m);K&&I()}t&&(N.shadowOffsetX=Y,N.shadowOffsetY=Z,N.shadowBlur=w,N.shadowColor=J),C!=c&&(N.globalAlpha=L),ng.splice(0,1)}}),N.restore()}}}}();i.getCurrentComp=function(){return ng[0]},i.getParentComp=function(){return ng[1]},i.getInternal=function(){return{isEnter:aq,isEsc:$j,isSpace:Qj,isLeft:gc,isUp:np,isRight:Ag,isDown:Ic,addMethod:Mj,superCall:Ke,toPointsArray:Al,translateAndScale:Ch,appendArray:rr,createWorldMatrix:Uc,vec3TransformMat4:Vl,setCanvas:ge,createDiv:us,createView:fi,createCanvas:nq,createImage:Pd,initContext:Wb,layout:gg,fillRect:lo,Mat:Mh,drawBorder:Wn,isString:Ul,setBorder:oo,getPropertyValue:mc,setPropertyValue:El,drawVerticalLine:Ue,draw3DRect:uf,getPinchDist:Qo,isSameRect:Bn,getPosition:Jl,intersectionLineRect:ss,getNodeRect:Qn,getEdgeAgentPosition:mb,getImageWidth:lc,getImageHeight:sf,initItemElement:qg,drawPoints:No,createG2:pb,closePopup:Zn,isH:im,createAnim:al,createNormalMatrix:Wp,createNormals:bp,toFloatArray:th,glMV:li,batchShape:Kf,createNodeMatrix:Ki,getFaceInfo:kg,transformAppend:ce,drawFaceInfo:hm,to3dPointsArray:qj,setGLDebugMode:function(P){Od=P},cube:function(){return{vs:dh,is:zd,uv:fo}},ui:function(){return{DataUI:Ok,NodeUI:Hr,EdgeUI:Xm,GroupUI:Xe,ShapeUI:Sc,GridUI:Oo,Data3dUI:Pr,Node3dUI:om,Shape3dUI:af}},getInternalVersion:function(){return"U2FsdGVkX1/xyr8c4ZPE8tYMw2Dqoqg1bv2BQulTW+4="},getDragger:function(){return nm},addMSMap:function(I){Mj(mi,I)},k:X}},function(C){function t(F,M){F!=c&&(M==c&&Pm!=typeof F?this._54O(F,256):this._54O(F,M))}function m(){return new t(c)}function S(g,s,T,X,i,v){for(;--v>=0;){var t=s*this[g++]+T[X]+i;i=e(t/67108864),T[X++]=67108863&t}return i}function U(w,Y,L,k,R,s){for(var Q=32767&Y,P=Y>>15;--s>=0;){var q=32767&this[w],M=this[w++]>>15,z=P*q+M*Q;q=Q*q+((32767&z)<<15)+L[k]+(1073741823&R),R=(q>>>30)+(z>>>15)+P*M+(R>>>30),L[k++]=1073741823&q}return R}function h(w,i,E,x,_,m){for(var s=16383&i,J=i>>14;--m>=0;){var o=16383&this[w],W=this[w++]>>14,T=J*o+W*s;o=s*o+((16383&T)<<14)+E[x]+_,_=(o>>28)+(T>>14)+J*W,E[x++]=268435455&o}return _}function z(x){return pr.charAt(x)}function B(C,i){var o=lc[C.charCodeAt(i)];return o==c?-1:o}function k(l){for(var $=this.t-1;$>=0;--$)l[$]=this[$];l.t=this.t,l.s=this.s}function u(S){this.t=1,this.s=0>S?-1:0,S>0?this[0]=S:-1>S?this[0]=S+this.DV:this.t=0}function M(K){var A=m();return A._58O(K),A}function _(p,G){var N,d=this;if(16==G)N=4;else if(8==G)N=3;else if(256==G)N=8;else if(2==G)N=1;else if(32==G)N=5;else{if(4!=G)return d.fromRadix(p,G),void 0;N=2}d.t=0,d.s=0;for(var W=p.length,l=!1,O=0;--W>=0;){var P=8==N?255&p[W]:B(p,W);0>P?"-"==p.charAt(W)&&(l=!0):(l=!1,0==O?d[d.t++]=P:O+N>d.DB?(d[d.t-1]|=(P&(1<<d.DB-O)-1)<<O,d[d.t++]=P>>d.DB-O):d[d.t-1]|=P<<O,O+=N,O>=d.DB&&(O-=d.DB))}8==N&&0!=(128&p[0])&&(d.s=-1,O>0&&(d[d.t-1]|=(1<<d.DB-O)-1<<O)),d._57O(),l&&t.ZERO._78O(d,d)}function f(){for(var P=this,F=P.s&P.DM;P.t>0&&P[P.t-1]==F;)--P.t}function N(L){var t=this;if(t.s<0)return"-"+t._85O()[Er](L);var O;if(16==L)O=4;else if(8==L)O=3;else if(2==L)O=1;else if(32==L)O=5;else{if(4!=L)return t.toRadix(L);O=2}var j,_=(1<<O)-1,E=!1,A="",x=t.t,C=t.DB-x*t.DB%O;if(x-->0)for(C<t.DB&&(j=t[x]>>C)>0&&(E=!0,A=z(j));x>=0;)O>C?(j=(t[x]&(1<<C)-1)<<O-C,j|=t[--x]>>(C+=t.DB-O)):(j=t[x]>>(C-=O)&_,0>=C&&(C+=t.DB,--x)),j>0&&(E=!0),E&&(A+=z(j));return E?A:"0"}function i(){var D=m();return t.ZERO._78O(this,D),D}function O(){return this.s<0?this._85O():this}function V($){var Z=this,Q=Z.s-$.s;if(0!=Q)return Q;var O=Z.t;if(Q=O-$.t,0!=Q)return Z.s<0?-Q:Q;for(;--O>=0;)if(0!=(Q=Z[O]-$[O]))return Q;return 0}function J(Q){var $,D=1;return 0!=($=Q>>>16)&&(Q=$,D+=16),0!=($=Q>>8)&&(Q=$,D+=8),0!=($=Q>>4)&&(Q=$,D+=4),0!=($=Q>>2)&&(Q=$,D+=2),0!=($=Q>>1)&&(Q=$,D+=1),D}function b(){var y=this;return y.t<=0?0:y.DB*(y.t-1)+J(y[y.t-1]^y.s&y.DM)}function q(p,K){var g;for(g=this.t-1;g>=0;--g)K[g+p]=this[g];for(g=p-1;g>=0;--g)K[g]=0;K.t=this.t+p,K.s=this.s}function T(c,z){for(var R=c;R<this.t;++R)z[R-c]=this[R];z.t=W(this.t-c,0),z.s=this.s}function s(w,J){var u,n=this,K=w%n.DB,f=n.DB-K,l=(1<<f)-1,x=e(w/n.DB),o=n.s<<K&n.DM;for(u=n.t-1;u>=0;--u)J[u+x+1]=n[u]>>f|o,o=(n[u]&l)<<K;for(u=x-1;u>=0;--u)J[u]=0;J[x]=o,J.t=n.t+x+1,J.s=n.s,J._57O()}function w(w,K){var z=this;K.s=z.s;var Q=e(w/z.DB);if(Q>=z.t)return K.t=0,void 0;var a=w%z.DB,B=z.DB-a,q=(1<<a)-1;K[0]=z[Q]>>a;for(var l=Q+1;l<z.t;++l)K[l-Q-1]|=(z[l]&q)<<B,K[l-Q]=z[l]>>a;a>0&&(K[z.t-Q-1]|=(z.s&q)<<B),K.t=z.t-Q,K._57O()}function Z(k,z){for(var M=this,H=0,R=0,s=y(k.t,M.t);s>H;)R+=M[H]-k[H],z[H++]=R&M.DM,R>>=M.DB;if(k.t<M.t){for(R-=k.s;H<M.t;)R+=M[H],z[H++]=R&M.DM,R>>=M.DB;R+=M.s}else{for(R+=M.s;H<k.t;)R-=k[H],z[H++]=R&M.DM,R>>=M.DB;R-=k.s}z.s=0>R?-1:0,-1>R?z[H++]=M.DV+R:R>0&&(z[H++]=R),z.t=H,z._57O()}function A(m,z){var b=this.abs(),v=m.abs(),f=b.t;for(z.t=f+v.t;--f>=0;)z[f]=0;for(f=0;f<v.t;++f)z[f+b.t]=b.am(0,v[f],z,f,0,b.t);z.s=0,z._57O(),this.s!=m.s&&t.ZERO._78O(z,z)}function I(F){for(var _=this.abs(),Q=F.t=2*_.t;--Q>=0;)F[Q]=0;for(Q=0;Q<_.t-1;++Q){var z=_.am(Q,_[Q],F,2*Q,0,1);(F[Q+_.t]+=_.am(Q+1,2*_[Q],F,2*Q+1,z,_.t-Q-1))>=_.DV&&(F[Q+_.t]-=_.DV,F[Q+_.t+1]=1)}F.t>0&&(F[F.t-1]+=_.am(Q,_[Q],F,2*Q,0,1)),F.s=0,F._57O()}function r(U,S,z){var v=U.abs(),Q=this;if(!(v.t<=0)){var j=Q.abs();if(j.t<v.t)return S!=c&&S._58O(0),z!=c&&Q._77O(z),void 0;z==c&&(z=m());var D=m(),M=Q.s,r=U.s,q=Q.DB-J(v[v.t-1]);q>0?(v._44O(q,D),j._44O(q,z)):(v._77O(D),j._77O(z));var f=D.t,P=D[f-1];if(0!=P){var u=P*(1<<Q.F1)+(f>1?D[f-2]>>Q.F2:0),$=Q.FV/u,l=(1<<Q.F1)/u,I=1<<Q.F2,d=z.t,Z=d-f,R=S==c?m():S;for(D._59O(Z,R),z._52O(R)>=0&&(z[z.t++]=1,z._78O(R,z)),t.ONE._59O(f,R),R._78O(D,D);D.t<f;)D[D.t++]=0;for(;--Z>=0;){var h=z[--d]==P?Q.DM:e(z[d]*$+(z[d-1]+I)*l);if((z[d]+=D.am(0,h,z,Z,0,f))<h)for(D._59O(Z,R),z._78O(R,z);z[d]<--h;)z._78O(R,z)}S!=c&&(z._45O(f,S),M!=r&&t.ZERO._78O(S,S)),z.t=f,z._57O(),q>0&&z._46O(q,z),0>M&&t.ZERO._78O(z,z)}}}function g(h){var j=m();return this.abs()._49O(h,c,j),this.s<0&&j._52O(t.ZERO)>0&&h._78O(j,j),j}function D(x){this.m=x}function R(D){return D.s<0||D._52O(this.m)>=0?D.mod(this.m):D}function v(C){return C}function a(r){r._49O(this.m,c,r)}function F(i,T,P){i._47O(T,P),this._74O(P)}function H(K,N){K._48O(N),this._74O(N)}function G(){if(this.t<1)return 0;var k=this[0];if(0==(1&k))return 0;var r=3&k;return r=15&r*(2-(15&k)*r),r=255&r*(2-(255&k)*r),r=65535&r*(2-(65535&(65535&k)*r)),r=r*(2-k*r%this.DV)%this.DV,r>0?this.DV-r:-r}function L(t){var K=this;K.m=t,K.mp=t._50O(),K.mpl=32767&K.mp,K.mph=K.mp>>15,K.um=(1<<t.DB-15)-1,K.mt2=2*t.t}function $(Z){var z=m();return Z.abs()._59O(this.m.t,z),z._49O(this.m,c,z),Z.s<0&&z._52O(t.ZERO)>0&&this.m._78O(z,z),z}function E(t){var p=m();return t._77O(p),this._74O(p),p}function Q(M){for(var J=this;M.t<=J.mt2;)M[M.t++]=0;for(var m=0;m<J.m.t;++m){var a=32767&M[m],d=a*J.mpl+((a*J.mph+(M[m]>>15)*J.mpl&J.um)<<15)&M.DM;for(a=m+J.m.t,M[a]+=J.m.am(0,d,M,m,0,J.m.t);M[a]>=M.DV;)M[a]-=M.DV,M[++a]++}M._57O(),M._45O(J.m.t,M),M._52O(J.m)>=0&&M._78O(J.m,M)}function vm(s,N){s._48O(N),this._74O(N)}function sn(h,i,B){h._47O(i,B),this._74O(B)}function Yh(){return 0==(this.t>0?1&this[0]:this.s)}function Do(g,D){if(g>4294967295||1>g)return t.ONE;var n=m(),T=m(),v=D._73O(this),p=J(g)-1;for(v._77O(n);--p>=0;)if(D._76O(n,T),(g&1<<p)>0)D._75O(T,v,n);else{var h=n;n=T,T=h}return D.revert(n)}function Lq(I,z){var o;return o=256>I||z._51O()?new D(z):new L(z),this.exp(I,o)}function Hg(){var T=this;if(T.s<0){if(1==T.t)return T[0]-T.DV;if(0==T.t)return-1}else{if(1==T.t)return T[0];if(0==T.t)return 0}return(T[1]&(1<<32-T.DB)-1)<<T.DB|T[0]}function Ko(y,V){return new t(y,V)}function nf(){var m=this;m.n=c,m.e=0,m.d=c,m.p=c,m.q=c,m.dmp1=c,m.dmq1=c,m._10A=c}function ac(a){return a._53O(this.e,this.n)}function yb(q){var C,i,l,y="",o=0;for(C=0;C<q.length&&q.charAt(C)!=Nl;++C)l=Sr.indexOf(q.charAt(C)),0>l||(0==o?(y+=z(l>>2),i=3&l,o=1):1==o?(y+=z(i<<2|l>>4),i=15&l,o=2):2==o?(y+=z(i),y+=z(l>>2),i=3&l,o=3):(y+=z(i<<2|l>>4),y+=z(15&l),o=0));return 1==o&&(y+=z(i<<2)),y}function nq(W){var n=W.split(""),C=yb(W);return n.forEach(function(i){var G=i.length;G>0&&C&&(Oi+=j(i))}),C}function Um(l,v){var J=Fd._4O.Util._56O(l,"ss"),A={},I=0;return A.v=J==v,A.t=1,A.s=0>I?-1:0,Bm=A.v,I>0?A[0]=I:-1>I?A[0]=I+A.DV:A.t=0,[J,A]}function uq(y){var e=38,B=y.substring(0,e);if(B&&30==B.indexOf("05000420")){var V=["ss",y.substring(e)];return V}return[]}function To(j,z){z=z.replace(Xc,""),z=z.replace(/[ \n]+/g,"");var n=Ko(z,16);if(n._55O()>this.n._55O())return 0;var D=this._37O(n),c=D[Er](16).replace(/^1f+00/,""),d=uq(c);if(0==d.length)return!1;for(var S,w,N,t=.5,u=Vi,C=[0,.5,.75,.875,.9375],U=[],y=[],X=[],H=Y/u,a=d[1],G=Um(j,a)[0],L=0,f=0;L<C.length;L++){var M=0===L%2?0:.5;for(S=0;u>=S;S++)w=(S+M)*H,N=1-C[L],U.push(K(w)*t*N,-t+2*C[L]*t,-o(w)*t*N),y.push((S+M)/u,N)}for(L=0;L<C.length-1;L++){var Z=L*(u+1),J=(L+1)*(u+1);for(S=0;u>S;S++)X.push(Z+S,J+S+1,J+S,Z+S,Z+S+1,J+S+1)}return X.forEach(function(V){f+=V}),a==G&&f>10}var Tb,tb=0xdeadbeefcafe,ym=15715070==(16777215&tb),Er="toString",rp="",Ec="nat",Ae=function(){};P=C["D"+11182[Er](p(2,5))];var Dr=t.prototype;pj+=Im.substr(0,1);var Kn=C.navigator?C.navigator.appName:"";ym&&"Microsoft Internet Explorer"==Kn?(Dr.am=U,Tb=30):ym&&"Netscape"!=Kn?(Dr.am=S,Tb=26):(Dr.am=h,Tb=28),Dr.DB=Tb,Dr.DM=(1<<Tb)-1,Dr.DV=1<<Tb;var Cg=52;Dr.FV=p(2,Cg),Dr.F1=Cg-Tb,Dr.F2=2*Tb-Cg;var dm,Ie,pr="0123456789abcdefghijklmnopqrstuvwxyz",lc=[],br=function(k){return String.fromCharCode(k)
};for(dm="0".charCodeAt(0),Ie=0;9>=Ie;++Ie)lc[dm++]=Ie;for(dm="a".charCodeAt(0),Ie=10;36>Ie;++Ie)lc[dm++]=Ie;for(dm="A".charCodeAt(0),Ie=10;36>Ie;++Ie)lc[dm++]=Ie;var il=D.prototype;il._73O=R,il.revert=v,il._74O=a,il._75O=F,il._76O=H;var ls=L.prototype;ls._73O=$,ls.revert=E,ls._74O=Q,ls._75O=sn,ls._76O=vm,Dr._77O=k,Dr._58O=u,Dr._54O=_,Dr._57O=f,Dr._59O=q,Dr._45O=T,Dr._44O=s,Dr._46O=w,Dr._78O=Z,Dr._47O=A,Dr._48O=I,Dr._49O=r,Dr._50O=G,Dr._51O=Yh,Dr.exp=Do,Dr.toString=N,Dr._85O=i,Dr.abs=O,Dr._52O=V,Dr._55O=b,Dr.mod=g,Dr._53O=Lq,t.ZERO=M(0),t.ONE=M(1),Dr._86O=Hg;var _q=function(L,T){var Q=this;Q.isPublic=!0,typeof L!==Pm?(Q.n=L,Q.e=T):L!=c&&T!=c&&L.length>0&&T.length>0&&(Q.n=Ko(L,16),Q.e=j(T,16))};lk=function(){var u,l,Y=nq(Gh),n=Y.substr(0,4),s=Y.substr(4,2),O=Y.substr(6,2),c=1,M=!c,R=X,h=[],f=rg.charAt(7);if(P&&(P[Er]().indexOf(Ec)<0||P[pj][Er]().indexOf(Ec)<0||!Y?u=fn(Xo[f]):(Y=new P(n-0,s-c,O-0),l=Y.setHours(9),P[pj]()>l?u=fn(Xo[f]):M=!0)),Y&&u&&R){for(var A in u)h.push(A);var W,S=u[h[0]],$=u[h[1]],m=u[h[2]],I=u[h[4]],j=u[h[5]],U=u[h[6]],x=Gg._27O(R);x&&U&&(W=S+$+m+I+""+j,W&&x._31O(W,U)&&(M=!0))}return M||(Fr=lh),f};var Ei=nf.prototype;Ei._37O=ac,Ei._38O=_q;var Sr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nl="=",Fj=25,Hf=10,Gh="IBcSAQ==",Je=Je||function(B,C){var G={},T=G._7A={},k=T._6A=function(){function r(){}return{_80O:function(u){r.prototype=this;var E=new r;return u&&E._5A(u),E.hasOwnProperty("_82O")||(E._82O=function(){E.$super._82O.apply(this,arguments)}),E._82O.prototype=E,E.$super=this,E},_3A:function(){var S=this._80O();return S._82O.apply(S,arguments),S},_82O:function(){},_5A:function(q){for(var E in q)q.hasOwnProperty(E)&&(this[E]=q[E]);q.hasOwnProperty(Er)&&(this.toString=q.toString)},_88O:function(){return this._82O.prototype._80O(this)}}}(),s=T._39O=k._80O({_82O:function(R,g){R=this._84O=R||[],this._65O=g!=C?g:4*R.length},toString:function(o){return(o||w).stringify(this)},_89O:function(o){var J=this._84O,S=o._84O,l=this._65O,j=o._65O;if(this._57O(),l%4)for(var g=0;j>g;g++){var L=255&S[g>>>2]>>>24-8*(g%4);J[l+g>>>2]|=L<<24-8*((l+g)%4)}else if(S.length>65535)for(var g=0;j>g;g+=4)J[l+g>>>2]=S[g>>>2];else J.push.apply(J,S);return this._65O+=j,this},_57O:function(){var d=this._84O,I=this._65O;d[I>>>2]&=4294967295<<32-8*(I%4),d.length=x(I/4)},_88O:function(){var y=k._88O.call(this);return y._84O=this._84O.slice(0),y},_87O:function(G){for(var R=[],o=0;G>o;o+=4)R.push(0|4294967296*d);return new s._82O(R,G)}}),q=G._2A={},w=q._69O={stringify:function(D){var $,E=D._84O,O=D._65O,W=[];for($=0;O>$;$++){var B=255&E[$>>>2]>>>24-8*($%4);W.push((B>>>4).toString(16)),W.push((15&B).toString(16))}return W.join("")},_68O:function(l){for(var P=l.length,g=[],W=0;P>W;W+=2)g[W>>>3]|=j(l.substr(W,2),16)<<24-4*(W%8);return new s._82O(g,P/2)}},L=q._8A={stringify:function(W){var r,m=W._84O,I=W._65O,z=[];for(r=0;I>r;r++){var Q=255&m[r>>>2]>>>24-8*(r%4);z.push(br(Q))}return z.join("")},_68O:function(_){var $,L=_.length,d=[];for($=0;L>$;$++)d[$>>>2]|=(255&_.charCodeAt($))<<24-8*($%4);return new s._82O(d,L)}},g=q._9A={stringify:function(w){try{return decodeURIComponent(escape(L.stringify(w)))}catch(W){throw new Error("")}},_68O:function(P){return L._68O(unescape(encodeURIComponent(P)))}},K=T._32O=k._80O({_1A:function(){this._83O=new s._82O,this._23O=0},_33O:function(F){typeof F==Pm&&(F=g._68O(F)),this._83O._89O(F),this._23O+=F._65O},_25O:function(o){var Y=this._83O,d=Y._84O,v=Y._65O,k=this._79O,C=4*k,_=v/C;_=o?x(_):W((0|_)-this._22O,0);var Q=_*k,K=y(4*Q,v);if(Q){for(var r=0;Q>r;r+=k)this._20O(d,r);var U=d.splice(0,Q);Y._65O-=K}return new s._82O(U,K)},_88O:function(){var Z=k._88O.call(this);return Z._83O=this._83O._88O(),Z},_22O:0});T._66O=K._80O({cfg:k._80O(),_82O:function(b){this.cfg=this.cfg._80O(b),this._1A()},_1A:function(){K._1A.call(this),this._34O()},_81O:function(V){return this._33O(V),this._25O(),this},_72O:function($){$&&this._33O($);var f=this._21O();return f},_79O:16,_26O:function(l){return function(N,s){return new l._82O(s)._72O(N)}},_19O:function(J){return function(P,_){return new $._71O._82O(J,_)._72O(P)}}});var $=G._67O={};return G}();!function(){var D=Je,J=D._7A,H=J._39O,C=J._66O,$=D._67O,g=[],S=[];!function(){function $(D){for(var j=l(D),M=2;j>=M;M++)if(!(D%M))return!1;return!0}function t(k){return 0|4294967296*(k-(0|k))}for(var I=2,d=0;64>d;)$(I)&&(8>d&&(g[d]=t(p(I,.5))),S[d]=t(p(I,1/3)),d++),I++}();var F=[],z=$._41O=C._80O({_34O:function(){this._64O=new H._82O(g.slice(0))},_20O:function(R,Z){for(var l=this._64O._84O,q=l[0],K=l[1],T=l[2],W=l[3],H=l[4],c=l[5],E=l[6],_=l[7],D=0;64>D;D++){if(16>D)F[D]=0|R[Z+D];else{var t=F[D-15],A=(t<<25|t>>>7)^(t<<14|t>>>18)^t>>>3,P=F[D-2],i=(P<<15|P>>>17)^(P<<13|P>>>19)^P>>>10;F[D]=A+F[D-7]+i+F[D-16]}var L=H&c^~H&E,f=q&K^q&T^K&T,Y=(q<<30|q>>>2)^(q<<19|q>>>13)^(q<<10|q>>>22),M=(H<<26|H>>>6)^(H<<21|H>>>11)^(H<<7|H>>>25),v=_+M+L+S[D]+F[D],J=Y+f;_=E,E=c,c=H,H=0|W+v,W=T,T=K,K=q,q=0|v+J}l[0]=0|l[0]+q,l[1]=0|l[1]+K,l[2]=0|l[2]+T,l[3]=0|l[3]+W,l[4]=0|l[4]+H,l[5]=0|l[5]+c,l[6]=0|l[6]+E,l[7]=0|l[7]+_},_21O:function(){var M=this._83O,$=M._84O,K=8*this._23O,c=8*M._65O;return $[c>>>5]|=128<<24-c%32,$[(c+64>>>9<<4)+14]=e(K/4294967296),$[(c+64>>>9<<4)+15]=K,M._65O=4*$.length,this._25O(),this._64O},_88O:function(){var Z=C._88O.call(this);return Z._64O=this._64O._88O(),Z}});D._41O=C._26O(z),D._42O=C._19O(z)}();var Xc=new RegExp("");Xc.compile("[^0-9a-f]","gi"),nf._28O=-1,nf._29O=-2,Ei._31O=To,Ei._63O=To,nf._43O=-2;var pk=new function(){var S=this;S._5O=function(p,h){if("8"!=p.substring(h+2,h+3))return 1;var $=j(p.substring(h+3,h+4));return 0==$?-1:$>0&&10>$?$+1:-2},S._13O=function(E,x){var w=S._5O(E,x);return 1>w?"":E.substring(x+2,x+2+2*w)},S._12O=function(w,q){var g=S._13O(w,q);if(""==g)return-1;var Q;return Q=j(g.substring(0,1))<8?new t(g,16):new t(g.substring(2),16),Q._86O()},S._6O=function(r,t){var D=S._5O(r,t);return 0>D?D:t+2*(D+1)},S._11O=function(F,k){var U=S._6O(F,k),n=S._12O(F,k);return F.substring(U,U+2*n)},S._10O=function(N,A){var p=S._6O(N,A),r=S._12O(N,A);return p+2*r},S._7O=function(D,e){var B=[],q=S._6O(D,e);B.push(q);for(var U=S._12O(D,e),w=q,V=0;;){var y=S._10O(D,w);if(y==c||y-q>=2*U)break;if(V>=200)break;B.push(y),w=y,V++}return B}};if(pk._90O=br(Hf+24),pk._91O=n+br(Hf*Hf+8),Fd==c||!Fd)var Fd={};Fd._4O!=c&&Fd._4O||(Fd._4O={});var vf=Fd._4O;Fd._4O.Util=new function(){var I=this;I._56O=function(k){var F=new Fd._4O._3O;return F._30O(k)},I._4A=function(p){var l=new Fd._4O._3O;return l._36O(p)},I._11A=function(t){var O=new vf._3O;return O._30O(t)}},Fd._4O._3O=function(){var y=this;y._8O=function(I,Z){if("ss"==I&&"cj"==Z){try{y.md=Je._67O._41O._3A()}catch(q){Ae(rp)}y._24O=function(I){y.md._81O(I)},y._35O=function(x){var I=Je._2A._69O._68O(x);y.md._81O(I)},y._60O=function(){var p=y.md._72O();return p[Er](Je._2A._69O)},y._30O=function(J){return y._24O(J),y._60O()},y._36O=function(k){return y._35O(k),y._60O()}}},y._24O=function(){Ae(rp)},y._35O=function(){Ae(rp)},y._60O=function(){Ae(rp)},y._30O=function(){Ae(rp)},y._36O=function(){Ae(rp)},y._8O("ss","cj")},_o=function(M){var u=he[Ol[7]],t=1,X=!1;if(Xh.a!=he[Le])return Xh.a;if(Xh.forEach(function(I){t*=I}),M>t){if(u){u=u.split(pk._90O);var h=u[3],s=u[7],C=u[11],j=u[19],N=u[23],K=u[27],c=h+s+C+j+N;X=Nc()(c,K)}X||(Ok.prototype._42=ti)}else X=!0;return Xh.a=X,X},Fj=String.fromCharCode(Fj+20);var rs=function(T){return T=T.replace(Xc,rp),T=T.replace(/[ \n]+/g,rp)},dk="30",ie="06",_k="02",kp="03",ed=Ko,Uc=/^1f+00/,Gg=function(){var q;return q={_18O:function(b){var T=b,j=T.replace(/\s+/g,""),$=yb(j);return $},_14O:function(X){var s=this._18O(X),H=this._15O(s);return H},_15O:function(G){var L=this._17O(G);if("2a864886f70d010101"==L._61O){var J=this._16O(L.key),W=new nf;return W._38O(J.n,J.e),W}Ae(rp)},_16O:function($){var m={};$.substr(0,2)!=dk&&Ae(rp);var N=pk._7O($,0);return 2!=N.length&&Ae(rp),$.substr(N[0],2)!=_k&&Ae(rp),m.n=pk._11O($,N[0]),$.substr(N[1],2)!=_k&&Ae(rp),m.e=pk._11O($,N[1]),m},_17O:function(H){var d={};d._40O=c;var z=pk._7O(H,0);2!=z.length&&Ae(rp);var f=z[0];H.substr(f,2)!=dk&&Ae(rp);var Q=pk._7O(H,f);return 2!=Q.length&&Ae(rp),H.substr(Q[0],2)!=ie&&Ae(rp),d._61O=pk._11O(H,Q[0]),H.substr(Q[1],2)==ie?d._40O=pk._11O(H,Q[1]):H.substr(Q[1],2)==dk&&(d._40O={},d._40O.p=pk._70O(H,Q[1],[0],_k),d._40O.q=pk._70O(H,Q[1],[1],_k),d._40O.g=pk._70O(H,Q[1],[2],_k)),H.substr(z[1],2)!=kp&&Ae(rp),d.key=pk._11O(H,z[1]).substr(2),d}},q._17O?q:c}(),vh=Gg._27O=function($){return Gg._14O($)};Nc=function(){return function(K,O){O=rs(O);var r=ed(O,p(2,4)),u=this;if(!u||!u.n||r._55O()>u.n._55O())return 0;var J=u._37O(r),q=J[Er](p(2,4)).replace(Uc,""),Q=uq(q);if(0==Q.length)return!1;var F=Q[0],b=Q[1],a=function(N){return Fd._4O.Util._56O(N,F)},U=a(K);return b==U}.bind(vh(X))};var bp,wm;return function(){var m=pc.length-Wc.length;if(m>0)for(var Y=0;m>Y;Y++)bp=vf.Util,wm=rs}(),ek=function(s,J){J=wm(J);var n=vh(Rm),B=xc.length,b=2*B,D=ed(J,p(B,b)),r=n,u=!0;if(r){var l=r[gd[0]];l&&D._55O()<=l._55O()&&(u=!1)}if(u)return 0;var Z=r._37O(D),T=Z[Er](p(B,b)).replace(Uc,""),_=uq(T);if(0==_.length)return!1;var L=_[0],V=_[1],N=bp._11A(s,L);return V==N},Gg}(V,G);var Vr=v.List=function(){this._as=[];var R,n,t=arguments.length;if(1===t){var k=arguments[0];if(kk(k)&&(k=k._as),Kh(k))for(n=k.length,R=0;n>R;R++)this._as.push(k[R]);else k!=c&&this._as.push(k)}else if(t>1)for(R=0;t>R;R++)this._as.push(arguments[R])};Tn("List",G,{forEach:function(i,l){this.each(i,l)},push:function(){for(var q=0;q<arguments.length;q++)this.add(arguments[q])},pop:function(){return this._as.pop()},shift:function(){return this._as.shift()},unshift:function(){return this._as.unshift.apply(this._as,arguments)},size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(p,H){return H===M?this._as.push(p):this._as.splice(H,0,p)},addAll:function(n){kk(n)&&(n=n._as),Kh(n)?rr(this._as,n):this._as.push(n)},get:function(W){return this._as[W]},slice:function(I,Q){return new Vr(this._as.slice(I,Q))},remove:function(d){var c=this._as.indexOf(d);return c>=0&&c<this._as.length&&this.removeAt(c),c},removeAt:function(i){return this._as.splice(i,1)[0]},set:function(R,L){return this._as[R]=L},clear:function(){return this._as.splice(0,this._as.length)},contains:function(t){return this._as.indexOf(t)>=0},indexOf:function(Q){return this._as.indexOf(Q)},each:function(m,h){for(var o=0,b=this._as.length;b>o;o++){var B=this._as[o];h?m.call(h,B,o,this):m(B,o,this)}},reverseEach:function(n,z){for(var O=this._as.length-1;O>=0;O--){var a=this._as[O];z?n.call(z,a):n(a)}},toArray:function(P,k){if(P){for(var W,L=[],c=0,U=this._as.length;U>c;c++)W=this._as[c],k?P.call(k,W)&&L.push(W):P(W)&&L.push(W);return L}return this._as.concat()},toList:function(f,g){if(f){for(var T,U=new Vr,A=0,s=this._as.length;s>A;A++)T=this._as[A],g?f.call(g,T)&&U.add(T):f(T)&&U.add(T);return U}return new Vr(this)},reverse:function(){this._as.reverse()},sort:function(t){return this._as.sort(t?t:$f),this},toString:function(){return this._as.toString()}}),G.defineProperties(Vr.prototype,{length:{get:function(){return this._as.length},set:function(k){this._as.length=k}}});var Am=new Vr;Mj(Am,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:og,each:og,reverseEach:og,toArray:function(){return[]},toList:function(){return new Vr},add:js,addAll:js,set:js,remove:js,removeAt:js,clear:js});var Mh=v.Matrix=function(i,I,m,B,b){var e=this;i=i||0;var t=o(i),T=K(i);B=B||1,b=b||1,e.a=T*B,e.b=t*B,e.c=-t*b,e.d=T*b,e.tx=I||0,e.ty=m||0};Mh.prototype.tf=function(C,U){1===arguments.length&&(U=C.y,C=C.x);var m=this;return{x:m.a*C+m.c*U+m.tx,y:m.b*C+m.d*U+m.ty}},Mh.prototype.translate=function(r,P){var g=this;return g.tx+=r,g.ty+=P,g},Mh.prototype.scale=function(d,f){var E=this;return E.a*=d,E.d*=f,E.c*=d,E.b*=f,E.tx*=d,E.ty*=f,E},Mh.prototype.rotate=function(x){var a=K(x),M=o(x),h=this,e=h.a,d=h.c,D=h.tx;return h.a=e*a-h.b*M,h.b=e*M+h.b*a,h.c=d*a-h.d*M,h.d=d*M+h.d*a,h.tx=D*a-h.ty*M,h.ty=D*M+h.ty*a,h},Mh.prototype.transform=function(t){var e=this,H=t.a,n=t.b,$=t.c,p=t.d,a=t.tx,O=t.ty,f=e.a,y=e.b,r=e.c,Q=e.d,B=e.tx,S=e.ty;return e.a=H*f+$*y,e.b=n*f+p*y,e.c=H*r+$*Q,e.d=n*r+p*Q,e.tx=H*B+$*S+a,e.ty=n*B+p*S+O,e},Mh.prototype.tfi=function(D,G){1===arguments.length&&(G=D.y,D=D.x);var t=this,O=1/(t.a*t.d+t.c*-t.b);return{x:t.d*O*D+-t.c*O*G+(t.ty*t.c-t.tx*t.d)*O,y:t.a*O*G+-t.b*O*D+(-t.ty*t.a+t.tx*t.b)*O}};var ts=v.Notifier=function(){};Tn("Notifier",G,{contains:function(U,G){if(this._ls)for(var E,u=0,q=this._ls.size();q>u;u++)if(E=this._ls.get(u),U===E.l&&G===E.s)return!0;return!1},add:function(J,w,U){var V=this,$={l:J,s:w,a:U};V._ls||(V._ls=new Vr),V._f?(V._as||(V._as=new Vr),V._as.add($)):$.a?V._ls.add($,0):V._ls.add($)},remove:function(s,u){var O=this;O._ls&&(O._f?(O._rs||(O._rs=new Vr),O._rs.add({l:s,s:u})):O._remove(s,u))},_remove:function(o,c){for(var t,i=this._ls,m=0,B=i.size();B>m;m++)if(t=i.get(m),t.l===o&&t.s===c)return i.removeAt(m),void 0},fire:function(p){var f=this,B=f._ls;if(f._b=1e4,B){f._f=1;for(var F,P=0,u=B.size();u>P;P++)F=B.get(P),F.s?F.l.call(F.s,p):F.l(p);if(delete f._f,f._rs){for(u=f._rs.size(),P=0;u>P;P++)F=f._rs.get(P),f._remove(F.l,F.s);delete f._rs}if(f._as){for(u=f._as.size(),P=0;u>P;P++)F=f._as.get(P),F.a?B.add(F,0):B.add(F);delete f._as}}}});var wn=v.Data=function(){this._id=Pk()};Tn("Data",G,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","layer","adjustChildrenToTop","dataBindings"],ms_dm:1,ms_attr:1,_icon:c,_parent:c,_children:Am,_childMap:c,_styleMap:c,_layer:"0",_adjustChildrenToTop:!1,getUIClass:function(){return c},_22Q:function(){return c},s:function(U,Y){var o=this;if(2===arguments.length)o.setStyle(U,Y);else{if(!vf(U))return o.getStyle(U);for(var x in U)o.setStyle(x,U[x])}return o},fp:function(T,z,U){return this.firePropertyChange(T,z,U)},firePropertyChange:function(O,g,b){if(g===b)return!1;var t=this,k={property:O,oldValue:g,newValue:b,data:t};return t._dataModel&&t._dataModel.handleDataPropertyChange(k),t.onPropertyChanged(k),!0},onPropertyChanged:function(j){var v=this,t=v._parent,H=j.property;if(zs(t)){var c=v.s(dk),Q="s:ingroup"===H;(c&&nd[H]||H===Q)&&t._81I(),(c||Q)&&t.fp("childChange",!0,!1)}kj(t)&&nd[H]&&t.updateFromChildren()},_21I:function(R){var T=this;if(R&&T._dataModel)throw"Remove data from dataModel before adding";T._dataModel=R},removeFromDataModel:function(){this._dataModel?this._dataModel.remove(this):this.setParent(null)},clearChildrenFromDataModel:function(){for(var l=0,x=this._children.toArray(),u=x.length;u>l;l++)x[l].removeFromDataModel()},getId:function(){return this._id},setId:function(r){this._id=r},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(D,s){return this._children.toList(D,s)},eachChild:function(G,$){this._children.each(G,$)},addChild:function(q,t){var K=this;q!==K&&(K._children===Am&&(K._children=new Vr,K._childMap={}),t===M&&(t=K._children.size()),K._childMap[q._id]||K.isDescendantOf(q)||(q._parent&&q._parent.removeChild(q),(0>t||t>K._children.size())&&(t=K._children.size()),K._children.add(q,t),K._childMap[q._id]=q,q.setParent(K),K.onChildAdded(q,t),K.fp(ze,c,q)))},onChildAdded:function(){},removeChild:function(H){var l=this;if(l._childMap&&l._childMap[H._id]){var p=l._children.remove(H);delete l._childMap[H._id],l.fp(ze,H,c),H.setParent(c),l.onChildRemoved(H,p)}},onChildRemoved:function(){},getChildAt:function(j){return this._children.get(j)},clearChildren:function(){var c=this;if(!c._children.isEmpty())for(var W=0,Y=c._children.toArray(),_=Y.length;_>W;W++)c.removeChild(Y[W])},getParent:function(){return this._parent},setParent:function(X){var m=this;if(!(m._73I||m._parent===X||m===X||X&&X.isDescendantOf(m))){var s=m._parent;m._parent=X,m._73I=1,s&&s.removeChild(m),X&&X.addChild(m),delete m._73I,m.fp("parent",s,X),m.onParentChanged(s,X)}},onParentChanged:function(){},hasChildren:function(){return this._children.size()>0},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(J){return J?this.isDescendantOf(J)||J.isDescendantOf(this):!1},isParentOf:function(c){return c&&this._childMap?!!this._childMap[c._id]:!1},isDescendantOf:function(u){if(!u||u.isEmpty())return!1;for(var _=this._parent;_;){if(u===_)return!0;_=_._parent}return!1},getStyleMap:function(){return this._styleMap},getStyle:function(L,f){f===M&&(f=1);var Y=this._styleMap?this._styleMap[L]:M;return Y===M&&f?D[L]:Y},setStyle:function(f,A){var Z=this;Z._styleMap||(Z._styleMap={});var w=Z._styleMap[f];A===M?delete Z._styleMap[f]:Z._styleMap[f]=A,Z.fp("s:"+f,w,A)&&Z.onStyleChanged(f,w,A)},onStyleChanged:function(){},iv:function(){this.invalidate()},invalidate:function(){this.fp("*",!1,!0)},toString:function(){var Z=this;return Z._displayName||Z._name||Z._tag||Z._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(D,A){var P=this,v=P.s(mf);v||P.s(mf,v={}),A?v[D]=A:delete v[D],P.fp(mf,c,v)},removeStyleIcon:function(V){var y=this.s(mf);if(y){var E=y[V];delete y[V],this.fp(mf,c,y)}return E},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,tag:1,adjustChildrenToTop:1,dataBindings:1}},getSerializableStyles:function(){var W,n={};for(W in this._styleMap)n[W]=1;return n}});var pm=v.DataModel=function(){var u=this;u._datas=new Vr,u._dataMap={},u._roots=new Vr,u._rootMap={},u._78O={},u._36I=new ts,u._35I=new ts,u._selectionModel=new le(u);var Y=u._29Q=[],e=u._scheduleCallback=function(){for(var R=Date.now(),s=0;s<Y.length;s++){var t=Y[s];t.enabled&&R-t.lastTime>t.interval&&(t.beforeAction&&t.beforeAction(),u.each(function(x){t.action(x)}),t.afterAction&&t.afterAction(),t.lastTime=R)}Y.length&&(u._30Q=V.requestAnimationFrame(e))}};Tn("DataModel",G,{ms_fire:1,ms_attr:1,ms_ac:["layers","name","autoAdjustIndex","hierarchicalRendering","background","init"],_name:M,_autoAdjustIndex:!0,_hierarchicalRendering:!1,_background:M,_init:M,sm:function(){return this.getSelectionModel()},mm:function($,P,e){this.addDataModelChangeListener($,P,e)},umm:function(w,m){this.removeDataModelChangeListener(w,m)},md:function(n,W,R){this.addDataPropertyChangeListener(n,W,R)},umd:function(A,e){this.removeDataPropertyChangeListener(A,e)},mh:function(v,j,r){this.addHierarchyChangeListener(v,j,r)},umh:function(w,R){this.removeHierarchyChangeListener(w,R)},getHistoryManager:function(){return this._historyManager},getAttrObject:function(){return this._attrObject},setAttrObject:function(v){return this._attrObject=v},getSelectionModel:function(){return this._selectionModel},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getDataById:function(p){return this._dataMap[p]},removeDataById:function(l){this.remove(this.getDataById(l))},toDatas:function(j,i){return this._datas.toList(j,i)},each:function(r,n){this._datas.each(r,n)},getDataByTag:function(O){return this._78O[O]},removeDataByTag:function(I){this.remove(this.getDataByTag(I))},add:function(A,n){var $=this,y=A._id,G=A._tag,e=$._roots;if($._dataMap[y])throw"'"+y+"' already exists";G!=c&&($._78O[G]=A),$._dataMap[y]=A,$._datas.add(A),A._parent||($._rootMap[y]=A,n>=0?e.add(A,n):e.add(A)),A._21I($),$.onAdded(A),$._36I.fire({kind:"add",data:A})},onAdded:function(){},remove:function(s,z){if(s){var L=this,P=s._id,g=z&&z.keepChildren,R=s.getTag(),T=L.getHistoryManager();g&&(L._removingData||(L._removingData=s)),s._dataModel===L&&(T&&T.beginInteraction(),L.prepareRemove(s),s.toChildren().each(function(D){L.remove(D,z)},L),g?L._removingData==s&&(s._parent&&s._parent.removeChild(s),delete L._removingData):s._parent&&s._parent.removeChild(s),L._datas.remove(s),delete L._dataMap[P],R!=c&&delete L._78O[R],L._rootMap[P]&&(delete L._rootMap[P],L._roots.remove(s)),s._21I(c),L.onRemoved(s),L._36I.fire({kind:Yl,data:s}),T&&T.endInteraction())}},onRemoved:function(){},prepareRemove:function(){},clear:function(){var t=this;t._datas.size()&&(t._datas.toArray().forEach(function(g){g._21I(c)}),t._datas.clear(),t._dataMap={},t._roots.clear(),t._rootMap={},t._78O={},t._36I.fire({kind:nb}))},contains:function(P){return P&&P._dataModel===this},handleDataPropertyChange:function(A){var J=this,E=A.data,y=A.property;if("parent"===y){var V=E._id,N=J._rootMap,r=J._roots;E._parent?N[V]&&(delete N[V],r.remove(E)):N[V]||(N[V]=E,r.add(E))}else if("tag"===y){var i=A.oldValue,p=A.newValue,F=J._78O;i!=c&&delete F[i],p!=c&&(F[p]=E)}this.onDataPropertyChanged(E,A),this._35I.fire(A)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(t,j,O){this._36I.add(t,j,O)},removeDataModelChangeListener:function(e,E){this._36I.remove(e,E)},addDataPropertyChangeListener:function(X,f,$){this._35I.add(X,f,$)},removeDataPropertyChangeListener:function(Q,K){this._35I.remove(Q,K)},_38I:function(S,p,J){this._37I&&this._37I.fire({data:S,oldIndex:p,newIndex:J})},addHierarchyChangeListener:function(u,K,o){this._37I||(this._37I=new ts),this._37I.add(u,K,o)},removeHierarchyChangeListener:function(t,D){this._37I.remove(t,D)},getSiblings:function(f){var E=f._parent;return E?E._children:this._roots},eachByHierarchical:function(C,i,q){if(i)return this._eachByHierarchical(C,i,q);for(var k=0,z=this._roots,d=z.size();d>k;k++)if(this._eachByHierarchical(C,z.get(k),q)===!1)return!1;return!0},_eachByHierarchical:function(s,D,B){if(B){if(s.call(B,D)===!1)return!1}else if(s(D)===!1)return!1;for(var o=D.size(),X=0;o>X;X++)if(this._eachByHierarchical(s,D.getChildAt(X),B)===!1)return!1;return!0},reverseEachByHierarchical:function(h,M,K){if(M)return this._reverseEachByHierarchical(h,M,K);for(var L=this._roots,y=L.size(),v=y-1;v>=0;v--)if(this._reverseEachByHierarchical(h,L.get(v),K)===!1)return!1;return!0},_reverseEachByHierarchical:function(U,Y,p){for(var J=Y.size(),I=J-1;I>=0;I--)if(this._reverseEachByHierarchical(U,Y.getChildAt(I),p)===!1)return!1;if(p){if(U.call(p,Y)===!1)return!1}else if(U(Y)===!1)return!1;return!0},eachByDepthFirst:function(r,Z,H){if(Z)return this._11I(r,Z,H);for(var w=0,C=this._roots,d=C.size();d>w;w++)if(this._11I(r,C.get(w),H)===!1)return!1;return!0},_11I:function(E,B,M){for(var O=B.size(),e=0;O>e;e++)if(this._11I(E,B.getChildAt(e),M)===!1)return!1;if(M){if(E.call(M,B)===!1)return!1}else if(E(B)===!1)return!1;return!0},eachByBreadthFirst:function(A,v,a){var T=new Vr;for(v?T.add(v):this._roots.each(T.add,T);T.size()>0;)if(v=T.removeAt(0),v.eachChild(T.add,T),a){if(A.call(a,v)===!1)return!1}else if(A(v)===!1)return!1;return!0},moveTo:function(u,W){var O=this.getSiblings(u),r=O.indexOf(u);r===W||0>r||W>=0&&W<=O.size()&&(O.remove(u),W>O.size()&&W--,O.add(u,W),this._38I(u,r,W))},moveUp:function(O){this.moveTo(O,this.getSiblings(O).indexOf(O)-1)},moveDown:function(Z){this.moveTo(Z,this.getSiblings(Z).indexOf(Z)+1)},moveToTop:function(Q){this.moveTo(Q,0)},moveToBottom:function(A){this.moveTo(A,this.getSiblings(A).size())},moveSelectionUp:function(M){M||(M=this.sm());var I=new Vr;pg(M,I,this._roots),I.each(this.moveUp,this)},moveSelectionDown:function(b){b||(b=this.sm());var E=new Vr;Ui(b,E,this._roots),E.each(this.moveDown,this)},moveSelectionToTop:function(B){B||(B=this.sm());var U=new Vr;Tb(B,U,this._roots),U.each(this.moveToTop,this)},moveSelectionToBottom:function(q){q||(q=this.sm());var K=new Vr;Up(q,K,this._roots),K.each(this.moveToBottom,this)},moveToIndex:function(o,f,n){var Q=this.getDatas();null==n&&(n=Q.indexOf(o)),n===f||0>n||f>=0&&f<=Q.size()&&(Q.remove(o),f>Q.size()&&f--,Q.add(o,f),this._76I(o,n,f))},bringForward:function(d){this.moveToIndex(d,this.getDatas().indexOf(d)+1)},bringToFront:function(L){this.moveToIndex(L,this.size())},sendBackward:function(P){this.moveToIndex(P,this.getDatas().indexOf(P)-1)},sendToBack:function(N){this.moveToIndex(N,0)},bringSelectionForward:function(D){D||(D=this.sm());for(var R=new Vr,G=this.getDatas(),q=!1,L=0;L<G.size();L++){var U=G.get(G.size()-1-L);D.contains(U)?q&&R.add(U):q=!0}R.each(this.bringForward,this)},bringSelectionToFront:function(o){o||(o=this.sm());for(var V=new Vr,O=this.getDatas(),H=0;H<O.size();H++){var u=O.get(H);o.contains(u)&&V.add(u)}V.each(this.bringToFront,this)},sendSelectionBackward:function(B){B||(B=this.sm());for(var Y=new Vr,s=this.getDatas(),p=!1,y=0;y<s.size();y++){var k=s.get(y);B.contains(k)?p&&Y.add(k):p=!0}Y.each(this.sendBackward,this)},sendSelectionToBack:function(q){q||(q=this.sm());for(var F=new Vr,n=this.getDatas(),P=0;P<n.size();P++){var b=n.get(n.size()-1-P);q.contains(b)&&F.add(b)}F.each(this.sendToBack,this)},addScheduleTask:function(S){var m=this;m.removeScheduleTask(S),S.enabled==c&&(S.enabled=!0),S.interval==c&&(S.interval=10),S.action==c&&(S.action=og),S.lastTime=Date.now(),m._29Q.push(S),m._30Q==c&&(m._30Q=V.requestAnimationFrame(m._scheduleCallback))},removeScheduleTask:function(m){var C=this,G=C._29Q,U=G.indexOf(m);U>=0&&G.splice(U,1),G.length||C._30Q==c||(V.cancelAnimationFrame(C._30Q),delete C._30Q)}});var le=v.SelectionModel=function(r){var L=this;L._68O=vm,L._map={},L._73O=new Vr,L._74I=new ts,L._21I(r)};Tn("SelectionModel",G,{ms_fire:1,ms_dm:1,ms:function(w,l,d){this.addSelectionChangeListener(w,l,d)},ums:function(d,X){this.removeSelectionChangeListener(d,X)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===Hh},co:function(I){return this._map[I._id]!=c},ss:function(k){this.setSelection(k)},as:function(f){this.appendSelection(f)},rs:function(z){this.removeSelection(z)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(i){var B=this;if(B._68O!==i&&(i===gd||i===Hh||i===vm)){B.cs();var V=B._68O;B._68O=i,B.fp("selectionMode",V,i)}},_21I:function(W){var j=this,u=j._dataModel;u!==W&&(u&&(j.cs(),u.umm(j.handleDataModelChange,j)),j._dataModel=W,W.mm(j.handleDataModelChange,j,!0),j.fp(Nh,u,W))},dispose:function(){var E=this;E.cs(),E._dataModel.umm(E.handleDataModelChange,E)},handleDataModelChange:function(Y){var G=this;if(Y.kind===Yl){var B=Y.data;G.co(B)&&(G._73O.remove(B),delete G._map[B._id],G._75I(Yl,new Vr(B)))}else Y.kind===nb&&G.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(d){var y=this;if(y._filterFunc!==d){y.cs();var x=y._filterFunc;y._filterFunc=d,y.fp("filterFunc",x,y._filterFunc)}},_75I:function(Q,f,F,H){F&&(this._73O.each(function(u){H[u._id]?F.remove(u):F.add(u)}),f=F.toList()),this._74I.fire({kind:Q,datas:new Vr(f)})},addSelectionChangeListener:function(G,g,M){this._74I.add(G,g,M)},removeSelectionChangeListener:function(g,Q){this._74I.remove(g,Q)},_97O:function(j,G){for(var Z,J=this,c=0,x=new Vr(j);c<x.size();c++)Z=x.get(c),(J._filterFunc&&!J._filterFunc(Z)||G&&J.co(Z)||!G&&!J.co(Z)||!J._dataModel.contains(Z))&&(x.removeAt(c),c--);return x},appendSelection:function(u){var t=this;if(t._68O!==gd){var m,c,w=t._73O,R=t._97O(u,!0);R.isEmpty()||(t.sg()&&(m=new Vr(w),c=t._map,w.clear(),t._map={},R=new Vr(R.get(R.size()-1))),R.each(function(E){w.add(E),t._map[E._id]=E}),t._75I("append",R,m,c))}},removeSelection:function(J){var W=this,k=W._97O(J),C=0,e=k.size();if(0!==e){for(;e>C;C++){var D=k.get(C);W._73O.remove(D),delete W._map[D._id]}W._75I(Yl,k)}},toSelection:function(W,x){return this._73O.toList(W,x)},getSelection:function(){return this._73O},each:function(a,j){this._73O.each(a,j)},setSelection:function(Z){var R=this,x=R._73O;if(R._68O!==gd&&!(x.isEmpty()&&!Z||1===x.size()&&R.ld()===Z)){var f=new Vr(x),C=R._map;x.clear(),R._map={};var U=R._97O(Z,!0);R.sg()&&U.size()>1&&(U=new Vr(U.get(U.size()-1))),U.each(function(K){x.add(K),R._map[K._id]=K}),R._75I("set",c,f,C)}},clearSelection:function(){var g=this,C=g._73O;if(C.size()>0){var f=C.toList();C.clear(),g._map={},g._75I(nb,f)}},selectAll:function(){var K=this;if(K._68O!==gd){var R,X,V=K._dataModel.toDatas();if(K._filterFunc)for(R=0;R<V.size();R++)X=V.get(R),K._filterFunc(X)||(V.removeAt(R),R--);var j=K._73O,e=new Vr(j),H=K._map;j.clear(),K._map={},K.sg()&&V.size()>1&&(V=new Vr(V.get(V.size()-1)));var g=V.size();for(R=0;g>R;R++)X=V.get(R),j.add(X),K._map[X._id]=X;K._75I("all",c,e,H)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(p){return this._map[p._id]!=c},getLastData:function(){var o=this._73O;return o.size()>0?o.get(o.size()-1):c},getFirstData:function(){var W=this._73O;return W.size()>0?W.get(0):c},isSelectable:function(c){var h=this;return c&&h._68O!==gd?h._filterFunc?h._filterFunc(c):!0:!1},getTopSelection:function(){var e=this,b=new Vr;return e._73O.each(function($){for(var s=$.getParent();s;){if(e.contains(s)){$=c;break}s=s.parent}$&&b.add($)}),b}});var Qn=function(){return sd(0),function(p,d){var Q;if(mr(d)){var s=p.getDataUI(d);s&&s._88I&&(Q=s._88I.rect)}return Q?Q:d.getRect()}}();Mj(i,{edgeGroupAgentFunc:c,graphViewAutoScrollZone:16,graphViewResettable:!1,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:U.rectSelectBorder,graphViewRectSelectBackground:kl,graphViewEditPointSize:cn?17:7,graphViewEditPointBorderColor:U.editPointBorder,graphViewEditPointBackground:U.editPointBackground,setEdgeType:function(m,j,r){dd[m]=j,xp[m]=r},getEdgeType:function(S){return dd[S]},getEdgeTypeMap:function(){return dd},getNodeRect:Qn},!0),Mj(D,{"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":M,"image.stretch":"fill",icons:M,ingroup:!0,"body.color":M,opacity:M,pixelPerfect:!0,"clip.direction":"top","clip.percentage":1,"select.color":sc,"select.width":1,"select.padding":2,"select.type":Hg,shadow:!1,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,"border.color":M,"border.width":2,"border.padding":2,"border.type":Hg,label:M,"label.font":M,"label.color":Qd,"label.background":M,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":M,"label.max":M,"label.opacity":M,"label.scale":1,"label.align":M,"label.selectable":!0,label2:M,"label2.font":M,"label2.color":Qd,"label2.background":M,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":M,"label2.max":M,"label2.opacity":M,"label2.scale":1,"label2.align":M,"label2.selectable":!0,note:M,"note.expanded":!0,"note.font":M,"note.color":ai,"note.background":sc,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":M,"note.toggleable":!0,"note.border.width":1,"note.border.color":M,"note.opacity":M,"note.scale":1,"note.align":M,note2:M,"note2.expanded":!0,"note2.font":M,"note2.color":ai,"note2.background":sc,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":M,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":M,"note2.opacity":M,"note2.scale":1,"note2.align":M,"group.type":M,"group.image":M,"group.image.stretch":"fill","group.repeat.image":M,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":M,"group.title.color":ai,"group.title.background":U.groupTitleBackground,"group.title.align":rp,"group.background":U.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":M,"group.border.color":Df,"group.border.cap":sl,"group.border.join":xo,"group.gradient":c,"group.gradient.color":"#FFF",shape:M,"shape.background":Df,"shape.repeat.image":M,"shape.border.width":0,"shape.border.width.absolute":!1,"shape.border.color":Df,"shape.border.3d":!1,"shape.border.3d.color":M,"shape.border.3d.accuracy":M,"shape.border.cap":sl,"shape.border.join":xo,"shape.border.pattern":M,"shape.gradient":c,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":se,"shape.dash.offset":0,"shape.dash.color":gr,"shape.dash.width":M,"shape.dash.3d":!1,"shape.dash.3d.color":M,"shape.dash.3d.accuracy":M,"shape.polygon.side":6,"shape.arc.from":I,"shape.arc.to":Y,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":M,"shape.gradient.pack":M,"shape.fill.rule":"nonzero","shape.fill.clip.direction":"top","shape.fill.clip.percentage":1,"autolayout.gap":M,"autolayout.hgap":M,"autolayout.vgap":M,"edge.type":M,"edge.points":M,"edge.segments":M,"edge.color":Df,"edge.width":2,"edge.width.absolute":!1,"edge.offset":20,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":M,"edge.3d.accuracy":M,"edge.cap":sl,"edge.join":xo,"edge.source.position":17,"edge.source.anchor.x":M,"edge.source.anchor.y":M,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.target.position":17,"edge.target.anchor.x":M,"edge.target.anchor.y":M,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.pattern":M,"edge.dash":!1,"edge.dash.pattern":se,"edge.dash.offset":0,"edge.dash.color":gr,"edge.dash.width":M,"edge.dash.3d":!1,"edge.dash.3d.color":M,"edge.dash.3d.accuracy":M,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":M,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":M,"grid.column.percents":M,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":U.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":U.gridCellBorderColor,"grid.block":M,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":U.gridBlockColor,text:"","text.align":"left","text.vAlign":"middle","text.color":Qd,"text.font":bq,"text.shadow":!1,"text.shadow.color":Ae,"text.shadow.blur":6,"text.shadow.offset.x":3,"text.shadow.offset.y":3},!0),Mj(pm,{_76I:function(J,o,a){this._39I&&this._39I.fire({data:J,oldIndex:o,newIndex:a})
},addIndexChangeListener:function(D,n,u){var y=this;y._39I||(y._39I=new ts),y._39I.add(D,n,u)},removeIndexChangeListener:function(V,f){this._39I.remove(V,f)},prepareRemove:function(N){ck(N)&&(N.setSource(c),N.setTarget(c)),N._70O&&N._70O.toList().each(this.remove,this),N._69O&&N._69O.toList().each(function(j){j.setHost(c)}),N._host&&N.setHost(c)},onAdded:function(P){this.isAutoAdjustIndex()&&this.adjustIndex(P)},onDataPropertyChanged:function(g,N){yq[N.property]&&this.isAutoAdjustIndex()&&this.adjustIndex(g)},isAdjustable:function(u){return To(u)||ck(u)},isAdjustedToBottom:function(t){return zs(t)?t.isExpanded()&&ud(t):!1},adjustIndex:function(e){var f=this;this.isHierarchicalRendering()||(f.isAdjustedToBottom(e)?(f.sendToBottom(e),e.eachChild(f.adjustIndex,f)):f.sendToTop(e))},sendToTop:function(Y){var T=this;if(T.contains(Y)&&T.isAdjustable(Y)){var U=T._datas;if(Y!==U.get(T.size()-1)){var h=U.indexOf(Y);U.removeAt(h),U.add(Y),T._76I(Y,h,T.size()-1)}if(ck(Y)){var f=Y._40I;f&&!T.isAdjustedToBottom(f)&&T.sendToTop(f),f=Y._41I,f&&!T.isAdjustedToBottom(f)&&T.sendToTop(f)}Y._69O&&Y._69O.each(function(K){K.isRelatedTo(Y)||To(Y)&&K.isLoopedHostOn(Y)||T.sendToTop(K)}),Y.ISubGraph||(!zs(Y)||Y.isExpanded())&&Y._adjustChildrenToTop&&Y.eachChild(function(g){ck(g)||T.sendToTop(g)})}},sendToBottom:function(O,B){var q=this;if(O!==B&&q.contains(O)&&q.isAdjustable(O)&&(!B||q.contains(B))){var c=q._datas,Q=c.remove(O),F=B?q._datas.indexOf(B):0;if(c.add(O,F),Q!==F){q._76I(O,Q,F);var l=O._parent;!l||l.ISubGraph||ck(l)||q.sendToBottom(O._parent,O)}}}}),Mj(mi,{ms_edit:function(P){P._46O=function(f){var V=this,Q=V.gv.dm(),$=Q.getHistoryManager(),F=V._index,O=V._89I,r=V._node,D=V._shape,q=V._edge,m=V._77I;r&&O?(this.fi({kind:"endEditRect",event:f,data:r,direction:O}),$&&$.endInteraction()):D&&F>=0?(V.fi({kind:"endEditPoint",event:f,data:D,index:F}),$&&$.endInteraction()):q&&F>=0?(V.fi({kind:"endEditPoint",event:f,data:q,index:F}),$&&$.endInteraction()):m&&(V.fi({kind:"endEditRotation",event:f,data:m}),$&&$.endInteraction())},P._78I=function(h){var m=this;m.autoScroll(h);var z=m.gv.lp(h),M=m._index,n=m._89I,X=m._node,K=m._shape,O=m._edge,v=m._77I;if(X&&n)m._80O(z),m.fi({kind:"betweenEditRect",event:h,data:X,direction:n});else if(K&&M>=0)z.e=K.getPoints().get(M).e,K.setPoint(M,z),m.fi({kind:"betweenEditPoint",event:h,data:K,index:M});else if(O&&M>=0){var x=O.s(fp);z.e=x.get(M).e,x.set(M,z),O.fp(fp,c,x),m.fi({kind:"betweenEditPoint",event:h,data:O,index:M})}else if(v){var e=v.p(),A=v.getScale(),R=S+w(z.y-e.y,z.x-e.x);A.y<0&&(R+=I),$(R)<.04&&(R=0),v.setRotation(R),m.fi({kind:"betweenEditRotation",event:h,data:v})}},P._80O=function(z){var N=this,o=N._node,p=N._rect,c=p.x,A=p.y,q=p.width,d=p.height,X=N._89I,R=N._anchor,V=N._matrix,z=V.tfi(z);"northwest"===X?p=Ad(z,{x:c+q,y:A+d}):X===zi?p=Ad({x:c,y:z.y},{x:c+q,y:A+d}):"northeast"===X?p=Ad({x:c,y:z.y},{x:z.x,y:A+d}):X===Im?p=Ad({x:z.x,y:A},{x:c+q,y:A+d}):X===vn?p=Ad({x:c,y:A},{x:z.x,y:A+d}):"southwest"===X?p=Ad({x:z.x,y:A},{x:c+q,y:z.y}):"south"===X?p=Ad({x:c,y:A},{x:c+q,y:z.y}):"southeast"===X&&(p=Ad({x:c,y:A},z)),o.setPosition(V.tf(p.x+p.width*R.x,p.y+p.height*R.y)),o.setWidth(p.width),o.setHeight(p.height)},P._80I=function(M,B,g,U){var t=this,S=t.gv._zoom,D=(t.gv.getEditPointSize()+2)/S;return nl({x:B-D/2,y:g-D/2,width:D,height:D},M)?(t._89I!==U&&(t._89I=U),!0):!1},P._79I=function(W,D,j){var O=this,t=O.gv,i=D?t.getDataUI(D):c,f=i?i._55O:c;if(f){var g,e,C,z,p=t._zoom,U=(t.getEditPointSize()+2)/p,_=t.lp(W);if(To(D)){if(f._56O&&To(D)&&(e=f._98o,nl({x:e.x-U/2,y:e.y-U/2,width:U,height:U},_)))return O._77I=D,j&&O.fi({kind:"beginEditRotation",event:W,data:D}),O.setCursor("crosshair"),!0;if(f._43O&&D instanceof qp)for(C=D.getPoints(),g=C.size()-1;g>=0;g--)if(e=C.get(g),nl({x:e.x-U/2,y:e.y-U/2,width:U,height:U},_))return O._index=g,O._shape=D,j&&O.fi({kind:"beginEditPoint",event:W,data:D,index:g}),O.setCursor("crosshair"),!0;if(f._42O)for(var s=D.getEditControlPoints(),H=["northwest",-1,-1,Im,-1,0,"southwest",-1,1,"south",0,1,"southeast",1,1,vn,1,0,"northeast",1,-1,zi,0,-1],g=0,z=s.length;z>g;g++){var J=H[3*g],S=s[g];if(O._80I(_,S.x,S.y,J)){O._node=D;var l=D.getWidth(),V=D.getHeight(),Z=D.getAnchor();O._rect={x:-l*Z.x,y:-V*Z.y,width:l,height:V},O._anchor=Z,O._matrix=D.getMatrix();var a=D.getRotation(),k=K(a),N=o(a),y=H[3*g+1]*Kp(D.getScale().x),x=H[3*g+2]*Kp(D.getScale().y),Q=Math.atan2(-N*y-k*x,k*y-N*x),M=(Math.round(Q/(Math.PI/4))+8)%8,u=[wg,"nesw-resize",rg,"nwse-resize",wg,"nesw-resize",rg,"nwse-resize"][M];return O.setCursor(u),j&&O.fi({kind:"beginEditRect",event:W,data:D,direction:O._89I}),!0}}}if(f._43O&&ck(D)&&D.s(Ar)===yc&&(C=D.s(fp)))for(g=C.size()-1;g>=0;g--)if(e=C.get(g),nl({x:e.x-U/2,y:e.y-U/2,width:U,height:U},_))return O._index=g,O._edge=D,j&&O.fi({kind:"beginEditPoint",event:W,data:D,index:g}),O.setCursor("crosshair"),!0}return!1}},ms_gv:function(J){J._currentSubGraph=c,J.upSubGraph=function(){this.setCurrentSubGraph(zr(this._currentSubGraph))},J.isVisible=function(w){var D=this;if(zr(w)!==D._currentSubGraph)return!1;if(ck(w)){var L=w._40I,x=w._41I;if(!L||!x)return!1;if(!(w.s("edge.independent")||D.isVisible(L)&&D.isVisible(x)))return!1;if(w.isEdgeGroupHidden())return!1}else for(var d=w._parent;d&&!d.ISubGraph;){if(zs(d)&&(!d.isExpanded()||!D.isVisible(d)))return!1;d=d._parent}if(w._parent instanceof Lk&&!D.isVisible(w._parent))return!1;if(w._refGraph instanceof Pj&&!D.isVisible(w._refGraph))return!1;if(D instanceof Rd){if(!w.s("3d.visible"))return!1}else{var F=D.getLayersInfo();if(F){var j=F[w._layer];if(j&&j.visible===!1)return!1}if(!w.s("2d.visible"))return!1}return D._visibleFunc?D._visibleFunc(w):!0},J.handleSelectionChange=function(D){var u=this;D.datas.each(function(l){u.invalidateData(l);var R=l._parent;zs(R)&&To(l)&&l.s(dk)&&(u.invalidateData(R),R._49I&&R._49I.each(function(x){u.invalidateData(x)}))}),u.onSelectionChanged(D)},J.onSelectionChanged=function(R){var U=this,n=U.sm();if(1===n.size()&&("set"===R.kind||"append"===R.kind)){var N=n.ld();U.isAutoMakeVisible()&&U.makeVisible(N),U.adjustIndex&&U._dataModel.isAutoAdjustIndex()&&U.adjustIndex(N)}},J.makeVisible=function(j){if(j){var X=this,m=X.getDataUI?X.getDataUI(j):X.getData3dUI(j);if(m){var p=j,V=zr(j);for(V!==X._currentSubGraph&&X.setCurrentSubGraph(V);(p=p._parent)&&p!==V;)zs(p)&&p.setExpanded(!0);X._23I=j,X.iv()}}},J.getLabel=function(U){var t=U.getStyle(Pp);return t===M?U.getName():t},J.getLabelBackground=function(q){return q.getStyle("label.background")},J.getLabelColor=function(C){return C.getStyle("label.color")},J.getLabel2=function(E){return E.getStyle("label2")},J.getLabel2Background=function(D){return D.getStyle("label2.background")},J.getLabel2Color=function(g){return g.getStyle("label2.color")},J.getNote=function(h){return h.getStyle(hr)},J.getNoteBackground=function(O){return O.getStyle("note.background")},J.getNote2=function(T){return T.getStyle(ip)},J.getNote2Background=function(Q){return Q.getStyle("note2.background")},J.handleClick=function(l,b,G){var C=this;b?(C.fi({kind:"clickData",event:l,data:b,part:G}),C.onDataClicked(b,l)):(C.fi({kind:"clickBackground",event:l}),C.onBackgroundClicked(l))},J.handleDoubleClick=function(I,E,p){var k=this;Zi(I)&&(E?(k.fi({kind:"doubleClickData",event:I,data:E,part:p}),k.onDataDoubleClicked(E,I,p),k.checkDoubleClickOnNote(I,E,p)||k.checkDoubleClickOnRotation&&k.checkDoubleClickOnRotation(I,E,p)||(ck(E)?k.onEdgeDoubleClicked(E,I,p):E.ISubGraph?k.onSubGraphDoubleClicked(E,I,p):zs(E)?k.onGroupDoubleClicked(E,I,p):E.IDoorWindow?k.onDoorWindowDoubleClicked(E,I,p):E.ICSGBox&&k.onCSGBoxDoubleClicked(E,I,p))):(k.fi({kind:"doubleClickBackground",event:I}),k.onBackgroundDoubleClicked(I)))},J.onSubGraphDoubleClicked=function(D){this.setCurrentSubGraph(D)},J.onEdgeDoubleClicked=function(U,S){U.ISubGraph&&!Og(S)?this.setCurrentSubGraph(U):U.s("edge.toggleable")&&U.toggle()},J.onGroupDoubleClicked=function(U){U.s("group.toggleable")&&U.toggle()},J.onDoorWindowDoubleClicked=function(K){K.s("dw.toggleable")&&K.toggle(!0)},J.onCSGBoxDoubleClicked=function(S,W){var j=this;if(j instanceof Rd){var $=j.getHitFaceInfo(W);$&&$.face&&S.s($.face+".toggleable")&&S.toggleFace($.face,!0)}},J.onBackgroundClicked=function(){},J.onBackgroundDoubleClicked=function(){this.upSubGraph()},J.onDataClicked=function(){},J.onDataDoubleClicked=function(){},J.onAutoLayoutEnded=function(){},J.onMoveEnded=function(){},J.onPanEnded=function(){},J.onPinchEnded=function(){},J.onRectSelectEnded=function(){},J.onZoomEnded=function(){}},ms_icons:function(n){n.getRotation=function(r){return r==c?0:r},n._15O=function(){var Q=this,F=Q.s(mf);if(F){var q=Q,h=Q.data||Q._data,E=Q._38o={icons:F,rects:{}};for(var z in F){var K=F[z],G=Zp(K.shape3d,h,q);if(!(Zp(K.visible,h,q)===!1||Zp(K.for3d,h,q)&&!Q.I3d||G&&!Q.I3d)){var U=G?[G]:Zp(K.names,h,q),N=U?U.length:0,m=Zp(K.position,h,q)||3,t=Zp(K.offsetX,h,q)||0,C=Zp(K.offsetY,h,q)||0,f=Zp(K.direction,h,q)||vn,l=Zp(K.gap,h,q),r=l!=c?l:1,k=Zp(K.rotation,h,q),B=Zp(K.keepOrien,h,q),j=Zp(K.rotationFixed,h,q)?k:Q.getRotation(k,B,m),n=c,S=E.rects[z]=new Array(N);S.rotation=j;for(var o=0;N>o;o++){var R,s,Z,V,Y=U[o];if(G)Z=0,V=0;else{var $=id(Y);Z=Zp(K.width,h,q),V=Zp(K.height,h,q),Z==c&&(Z=lc($,h)),V==c&&(V=sf($,h))}if(n?f===vn?t+=Z/2:f===Im?t-=Z/2:f===zi?C-=V/2:C+=V/2:n={width:Z,height:V},Q.I3d){var D=-Z/2,i=-V/2;s={width:Z,height:V,mat:Q._16O(Zp(K.autorotate,h,q),m,n,Zp(K.face,h,q)||rb,Zp(K.t3,h,q),Zp(K.r3,h,q),Zp(K.rotationMode,h,q),t,C),vs:new jb([D,-i,0,D,-i-V,0,D+Z,-i-V,0,D+Z,-i,0])}}else R=Q.getPosition(m,t,C,n,Zp(K.positionFixed,h,q)),s={x:R.x-Z/2,y:R.y-V/2,width:Z,height:V},Q._68o(s,j);S[o]=s,f===vn?t+=Z/2+r:f===Im?t-=Z/2+r:f===zi?C-=V/2+r:C+=V/2+r}}}}}}});var ae={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},Mg={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},Qh={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},yq={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},nd={position:1,width:1,height:1,expanded:1,rotation:1,anchor:1,scale:1,"s:edge.points":1},$m={"edge.type":1,"edge.group":1},Pn={rotation:1,rotationX:1,rotationZ:1},ye={position:1,width:1,height:1,anchor:1,scale:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},Uq={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},Hj={shape:1,thickness:1,position:1,anchor:1,scale:1},Yb=function(N,z){if(!N||!zs(z)||z.isEmpty())return!1;for(N=N._parent;zs(N);){if(N===z)return!0;N=N._parent}return!1},_l=function(c,p){if(!c||!kj(p)||p.isEmpty())return!1;for(c=c._parent;kj(c);){if(c===p)return!0;c=c._parent}return!1},zr=function(B){if(!B)return c;if(ck(B)){var Z=B._40I,N=B._41I;if(!Z||!N)return c;var O=zr(Z),d=zr(N);return O===d?O:c}for(var D=B._parent;ck(D)&&!D.ISubGraph;)D=D._parent;return D?D.ISubGraph?D:zr(D):c},Ab=function(A,T,e,V){var l=T.getStyle(e)*V;l&&Xc(A,l),l=T.getStyle(e+".left")*V,l&&(A.x-=l,A.width+=l),l=T.getStyle(e+".right")*V,l&&(A.width+=l),l=T.getStyle(e+".top")*V,l&&(A.y-=l,A.height+=l),l=T.getStyle(e+".bottom")*V,l&&(A.height+=l),A.width<0&&(A.width=-A.width,A.x-=A.width),A.height<0&&(A.height=-A.height,A.y-=A.height)},ud=function(r){for(var N,C=0,g=r.size();g>C;C++)if(N=r.getChildAt(C),To(N)&&ud(N))return!0;return r.hasAgentEdges()},Yf=function(v){if(!v)return c;for(var X=v._parent;zs(X);){if(!zs(X._parent))return X.isExpanded()?v:X;X.isExpanded()||(v=X),X=X._parent}return v},Hp=function(W,H){if(!W||!H)return c;var f,a,R,D=zr(W),u=zr(H);if(D!==u){for(;u&&D!==u;)u=zr(u);if(D===u)return W;f=new Vr,f.add(W,0);for(var Q=W._parent;To(Q)&&!H.isDescendantOf(Q);)f.add(Q,0),Q=Q._parent;for(R=f.size(),a=0;R>a;a++){var p=f.get(a);if(zs(p)&&!p.isExpanded())return p;if(p.ISubGraph)return p}return W}return W},Un=function(q){if(q.isLooped())return q._source;var x=Yf(q._source),Z=Yf(q._target);return x===Z?q._source:Hp(x,Z)},ws=function(G){if(G.isLooped())return G._target;var E=Yf(G._source),d=Yf(G._target);return E===d?G._target:Hp(d,E)},mb=function(S,R,_,D,Y,s,w){if(!R)return c;var r,O=R.getRotation?R.getRotation():0;if(s!==M||w!==M)if(s=s===M?.5:s,w=w===M?.5:w,O&&!mr(R,S)){var f=R.getPosition(),l=R.getWidth(),I=R.getHeight(),Z=R.getAnchor(),h=R.getScale(),P=new Mh(O,f.x,f.y,h.x,h.y);_=P.tf((s-Z.x)*l,(w-Z.y)*I)}else r=Qn(S,R),_={x:r.x+s*r.width,y:r.y+w*r.height};else _=Jl(_,Qn(S,R));if(O){var q=K(O),n=o(O),u=D*q-Y*n;Y=D*n+Y*q,D=u}return _.x+=D,_.y+=Y,_},_n=function(b,I){if(!b||!I)return c;var M,u,Z,E,J,a;if(b===I){if(E=b.getLoopedEdges(),!E)return c;E=new Vr(E)}else{if(J=b.getAgentEdges(),a=I.getAgentEdges(),!J||!a)return c;for(u=J.size(),M=0;u>M;M++)Z=J.get(M),a.contains(Z)&&(E||(E=new Vr),E.add(Z))}if(E)for(M=0;M<E.size();M++)Z=E.get(M),Z.getStyle(Ar)===yc&&(Z._22I(c),E.removeAt(M),M--);return E},rq=function($,I){var P=_n($,I);if(P&&!P.isEmpty()){if(1===P.size())return P.get(0)._22I(c),void 0;var G=new Vr,T=new Vr;P.each(function(J){var M=J.s("edge.group");G.contains(M)||G.add(M)}),G.sort(),G.each(function(t){T.add(new v.EdgeGroup(P.toList(function(d){return t===d.s("edge.group")}),T))}),T.each(function(b){b.each(function(S){S._22I(b)})})}},_i=function(W,C){if(C){var r=C.rect,Z=C.color,v=C.rotation,R=C.labelWidth,I=C.background,$=C.opacity,l=C.scale,i=l!=c&&1!==l;if($!=c){var Q=W.globalAlpha;W.globalAlpha*=$}if(v||i){W.save();var T=r.x+r.width/2,D=r.y+r.height/2;sj(W,T,D),v&&hb(W,v),i&&W.scale(l,l),sj(W,-T,-D)}if(I&&lo(W,r.x,r.y,r.width,r.height,I),R){var q=r.width,L=W.createLinearGradient(r.x,r.y,r.x+q,r.y);L.addColorStop(0,Z),L.addColorStop(.9,Z),L.addColorStop(1,en),Z=L,r.width=R}Vk(W,C.ss,r,C.font,Z,C.align),R&&(r.width=q),(v||i)&&W.restore(),$!=c&&(W.globalAlpha=Q)}},Sg=function(F,l){if(l){var R=l.rect,U=R.x,b=R.y,C=R.width,v=R.height,m=l.background,D=l.backgroundImage,s=l.borderWidth,w=l.borderColor,T=l.labelWidth,x=l.opacity,H=l.scale,X=H!=c&&1!==H;if(x!=c){var f=F.globalAlpha;F.globalAlpha*=x}if(X){F.save();var Z=R.x+R.width/2,V=R.y+R.height/2;sj(F,Z,V),F.scale(H,H),sj(F,-Z,-V)}if(l.expanded){var E=y(8,C/4),W=b+v-8;if(F.fillStyle=m,F.beginPath(),F.moveTo(U,b),F.lineTo(U,W),F.lineTo(U+C/2,W),F.lineTo(U+C/2,b+v),F.lineTo(U+C/2+E,W),F.lineTo(U+C,W),F.lineTo(U+C,b),F.closePath(),F.fill(),s&&(F.lineWidth=s,F.lineJoin="round",F.lineCap="round",w?(F.strokeStyle=w,F.stroke()):(F.strokeStyle=Md(m),F.beginPath(),F.moveTo(U+C,b),F.lineTo(U+C,W),F.lineTo(U+C/2+E,W),F.lineTo(U+C/2,b+v),F.stroke(),F.strokeStyle=xg(m),F.beginPath(),F.moveTo(U+C,b),F.lineTo(U,b),F.lineTo(U,W),F.lineTo(U+C/2,W),F.lineTo(U+C/2,b+v),F.stroke())),D)Ob(F,id(D),cs,R.x,R.y,R.width,R.height-8,l.data,l.view);else{if(R.height-=8,m=l.color,T){var G=C,J=F.createLinearGradient(U,b,U+G,b);J.addColorStop(0,m),J.addColorStop(.9,m),J.addColorStop(1,en),m=J,R.width=T}Vk(F,l.ss,R,l.font,m,l.align),T&&(R.width=G),R.height+=8}}else if(l.icon)co(F,id(l.icon),U,b,C,v,l.data,l.view);else{var g=C/2;s&&(F.lineWidth=s,F.lineJoin="round",F.lineCap="round",F.strokeStyle=w?w:Md(m),F.beginPath(),F.arc(U+g,b+g,g,S,1.6*I,!0),F.moveTo(U+g,b+v),F.lineTo(U+C-g/5,b+g),F.stroke(),F.strokeStyle=w?w:xg(m),F.beginPath(),F.arc(U+g,b+g,g,1.6*I,S,!0),F.moveTo(U+g,b+v),F.lineTo(U+g/5,b+g),F.stroke()),F.fillStyle=m,F.beginPath(),F.arc(U+g,b+g,g,0,Y,!0),F.moveTo(U+g,b+v),F.lineTo(U+C-g/5,b+g),F.lineTo(U+g/5,b+g),F.closePath(),F.fill(),F.fillStyle=l.color,F.beginPath(),F.arc(U+g,b+g,g/3,0,Y,!0),F.fill()}X&&F.restore(),x!=c&&(F.globalAlpha=f)}},_g=function(V,u){return u>2*V?V:u/2},Tj=function(h,X,D,n){if(!h||!X)return 0;var f=w(X.y-h.y,X.x-h.x);return D||(f=X.x<h.x?f+I:f),f+n},lr=function(s,U,J,Q,I,j,k){k&&(s.x>U.x||s.x===U.x&&s.y>U.y)&&(J=Sn[J],I=-I);var l=Jl(J,{x:0,y:0,width:ig(s,U),height:0},j);return l.x+=Q,l.y+=I,l=new Mh(w(U.y-s.y,U.x-s.x)).tf(l),l.x+=s.x,l.y+=s.y,l},Vp=function(h,p,J,E,c){if(h._19Q=!0,!J.getEdgeGroup())return E?J.s("edge.gap"):0;var q,s=0,D=0,B=0;if(J.getEdgeGroup().getSiblings().each(function(M){M.each(function(z){if(p.isVisible(z)&&z.s(Ar)==c){var f=z.s("edge.gap");q?(D+=B/2+f/2,B=f):(q=z,B=f),z===J&&(s=D)}})}),E)return D-s+B;var N=s-D/2;return q&&J._40I!==q._40I&&(h._19Q=!1),N},pk=function(){var M=function(t){var k=[];return t.forEach(function(p){k.push({x:p.x,y:p.y}),k.push({x:p.x+p.width,y:p.y+p.height}),k.push({x:p.x+p.width,y:p.y}),k.push({x:p.x,y:p.y+p.height})}),k};return function(A,N,z){if("oval"===A){var B=0,W=z.height/z.width,F=W*W,t=z.x+z.width/2,R=z.y+z.height/2,x=M(N);x.forEach(function(j){var I=j.x-t,_=j.y-R,n=I*I+_*_/F;n>B&&(B=n)}),B=l(B);var p=W*B;return{x:t-B,y:R-p,width:2*B,height:2*p}}if("circle"===A){var T=0,t=z.x+z.width/2,R=z.y+z.height/2,x=M(N);return x.forEach(function(G){var i=G.x-t,n=G.y-R,p=i*i+n*n;p>T&&(T=p)}),T=l(T),{x:t-T,y:R-T,width:2*T,height:2*T}}return"roundRect"===A?(Xc(z,y(z.width,z.height)/16),z):z}}(),bh=v.graph={},On=function(W,K,d){hd(n+".graph."+W,K,d)};v.layout={};var Xr={comps:[{type:Cc,points:[85,50,70,115,100,71,86,107,88,49,47,120,86,55,68,72,51,122,81,99,80,69,117,54,118,100,77,85,69,119,68,84,50,109,52,102,109,109,82,85,53,119,119,61],borderWidth:1,borderColor:c}]};Xr[Wh]=Xr[Rc]=160,db("node_image",Pd(30,30,[{type:Hg,rect:[4,5,22,16],gradient:We,gradientColor:nn,background:Df},{type:Hg,rect:[2,3,26,20],borderWidth:1,borderColor:Df},{type:Hg,rect:[11,23,8,4],background:Df},{type:Hg,rect:[6,27,18,2],background:Df}])),db("node_icon",Pd(16,16,[{type:Hg,rect:[2,2,12,10],gradient:We,gradientColor:nn,background:Df},{type:ih,rect:[2,2,12,10],width:1,color:Df},{type:Hg,rect:[6,12,4,2],background:Df},{type:Hg,rect:[4,14,8,1],background:Df}])),db("block_icon",Pd(16,16,[{type:ih,rect:[1,1,14,14],width:1,color:Df}])),db("group_image",Pd(66,39,[{type:Hg,rect:[44.3,18,18.1,12.8],gradient:We,gradientColor:nn,background:Df},{type:Hg,rect:[3.3,17.8,18.1,12.8],gradient:We,gradientColor:nn,background:Df},{type:Hg,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:Df,gradient:We,gradientColor:nn,background:Df},{type:Hg,rect:[26.2,29.4,12.8,4.2],background:Df},{type:Hg,rect:[21.3,33.5,22.5,2.3],background:Df},{type:Hg,rect:[5.3,32.7,14.1,2.1],background:Df},{type:Hg,rect:[9,30.4,6.7,2.4],background:Df},{type:Hg,rect:[50,30.7,6.7,2.4],background:Df},{type:Hg,rect:[46.3,33,14.1,2.1],background:Df}])),db("group_icon",Pd(16,16,[{type:Hg,rect:[4,12,4,2],background:Df},{type:Hg,rect:[2,13,8,1],background:Df},{type:Hg,rect:[12,12,2,1],background:Df},{type:Hg,rect:[11,13,4,1],background:Df},{type:Hg,rect:[10,7,6,5],gradient:We,gradientColor:nn,background:Df},{type:Hg,rect:[1,2,10,10],gradient:We,gradientColor:nn,background:Df},{type:ih,rect:[1,2,10,10],width:1,color:Df}])),db("refGraph_icon",Pd(16,16,[{type:"shape",borderWidth:1,borderColor:Df,borderCap:"round",rotation:.7854,points:[12.5502,6.7981,12.5502,6.7981,12.5502,4.8181,12.5502,3.7981,12.5502,2.7781,11.36687,1.7981,10.0502,1.7981,8.73354,1.7981,7.5502,2.8181,7.5502,3.7981,7.5502,4.55989,7.5502,7.79805,7.5502,7.79805,7.5502,7.79805,7.5502,9.7981,10.0502,9.7981],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:Df,borderCap:"round",rotation:-2.35619,points:[8.4498,11.2019,8.4498,11.2019,8.4498,9.2219,8.4498,8.2019,8.4498,7.1819,7.26646,6.2019,5.9498,6.2019,4.63313,6.2019,3.4498,7.2219,3.4498,8.2019,3.4498,8.9637,3.4498,12.20186,3.4498,12.20186,3.4498,12.20186,3.4498,14.2019,5.9498,14.2019],segments:[1,4,4,4,4,4]}])),db("edge_icon",Pd(16,16,[{type:Hg,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:We,gradientColor:nn,background:Df},{type:Hg,rect:[10.8,1,4,4],background:Df},{type:Hg,rect:[1,11,4,4],background:Df}])),db("subGraph_image",Pd(72,45,[{type:Cc,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:We,gradientColor:nn,background:Df},{type:Hg,rect:[29.6,30.7,3.6,1.8],background:Df},{type:Hg,rect:[28.4,32.3,6,1.2],background:Df},{type:Hg,rect:[37.3,32,10.8,1.8],background:Df},{type:Hg,rect:[39.1,29.9,7.2,2.3],background:Df},{type:Hg,rect:[26.6,23.7,9.6,7.2],gradient:We,gradientColor:nn,background:Df},{type:Hg,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:Df,gradient:We,gradientColor:nn,background:Df}])),db("subGraph_icon",Pd(17,17,[{type:Cc,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:We,gradientColor:nn,background:Df}])),db("shape_icon",Pd(16,16,[{type:Cc,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:Df}])),db("polyline_icon",Pd(16,16,[{type:Cc,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:Df},mm(7.5,.4),mm(7.5,6.3),mm(13.6,6.3),mm(13.6,14),mm(.7,13.9),mm(.7,.3)])),db("grid_icon",Pd(16,16,[{type:Hg,rect:[1,1,4,4],background:Df,gradient:We,gradientColor:nn},{type:Hg,rect:[6,1,4,4],background:Df,gradient:We,gradientColor:nn},{type:Hg,rect:[11,1,4,4],background:Df,gradient:We,gradientColor:nn},{type:Hg,rect:[11,6,4,4],background:Df,gradient:We,gradientColor:nn},{type:Hg,rect:[6,6,4,4],background:Df,gradient:We,gradientColor:nn},{type:Hg,rect:[1,6,4,4],background:Df,gradient:We,gradientColor:nn},{type:Hg,rect:[11,11,4,4],background:Df,gradient:We,gradientColor:nn},{type:Hg,rect:[6,11,4,4],background:Df,gradient:We,gradientColor:nn},{type:Hg,rect:[1,11,4,4],background:Df,gradient:We,gradientColor:nn}])),db("light_icon",Pd(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:Df},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:Df,gradient:We,gradientColor:nn,background:{func:function(n){var w=n?n.s(cq):c;return Kh(w)?"rgb("+j(255*w[0])+","+j(255*w[1])+","+j(255*w[2])+")":w||Df}}}])),db("text_icon",Pd(16,16,[{type:"shape",points:[3,3,13,3,8,3,8,14],segments:[1,2,1,2],borderWidth:1,borderColor:Df}])),db("border_image",{fitSize:!0,comps:[{type:"border",relative:!0,rect:[0,0,1,1],color:{func:"style@border_color"},width:{func:"style@border_width"}}]}),db("columnChart_image",{fitSize:!0,comps:[{type:{func:"style@chart.type"},relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"}}]}),db("lineChart_image",{fitSize:!0,comps:[{type:"lineChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"},linePoint:{func:"style@chart.line.point"},lineWidth:{func:"style@chart.line.width"},line3d:{func:"style@chart.line.3d"}}]}),db("pieChart_image",{fitSize:!0,comps:[{type:"pieChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},hollow:{func:"style@chart.hollow"},startAngle:{func:"style@chart.start.angle"},values:{func:"style@chart.values"},colors:{func:"style@chart.colors"}}]});var nh=function(X,x){for(var S=X.vertices,h=0;h<S.length;h++){var Y=S[h],m=Y.y;Y.y=Y.z,Y.z=-m,x&&(Y.y+=x)}},tp=function(f){for(var m,E,W,A,n,g,d=[],o=[],_=[],w=f.faces,p=0,D=0,z=0,S=w.length;S>p;p++,D+=6,z+=9){var K=w[p];1===K.i?(m||(m=[],E=[],W=[]),gs(K,p,D,z,f,m,W,E)):2===K.i?(A||(A=[],n=[],g=[]),gs(K,p,D,z,f,A,g,n)):gs(K,p,D,z,f,d,_,o)}return{vs:d,uv:o,ns:_,top_vs:m,top_uv:E,top_ns:W,bottom_vs:A,bottom_uv:n,bottom_ns:g}},gs=function(e,i,_,o,Z,h,$,W){var H=Z.vertices,g=Z.faceVertexUvs,J=H[e.a],R=H[e.b],V=H[e.c];h[o]=J.x,h[o+1]=J.y,h[o+2]=J.z,h[o+3]=R.x,h[o+4]=R.y,h[o+5]=R.z,h[o+6]=V.x,h[o+7]=V.y,h[o+8]=V.z;var r=e.vertexNormals;if(3===r.length){var U=r[0],w=r[1],P=r[2];$[o]=U.x,$[o+1]=U.y,$[o+2]=U.z,$[o+3]=w.x,$[o+4]=w.y,$[o+5]=w.z,$[o+6]=P.x,$[o+7]=P.y,$[o+8]=P.z}else{var c=e.normal;$[o]=c.x,$[o+1]=c.y,$[o+2]=c.z,$[o+3]=c.x,$[o+4]=c.y,$[o+5]=c.z,$[o+6]=c.x,$[o+7]=c.y,$[o+8]=c.z}var b=g[0][i][0],D=g[0][i][1],N=g[0][i][2];W[_]=b.x,W[_+1]=b.y,W[_+2]=D.x,W[_+3]=D.y,W[_+4]=N.x,W[_+5]=N.y},Wq=function(R){var J=R._lineModel;if(J)return J;var s;s=Kh(R)?R:[R];var H,b,G,Z,l,I,C,t,k,Q,j,o,y=["","top","bottom"];for(J=[],H=0,b=s.length;b>H;H++)for(k=s[H],G=0,Z=y.length;Z>G;G++)if(C=k[y[G]+"vs"]){t=k[y[G]+"is"],I=t?t.length:C.length/3;for(var l=0;I>l;l+=3)t?(Q=t[l],j=t[l+1],o=t[l+2]):(Q=l,j=l+1,o=l+2),Q*=3,j*=3,o*=3,J.push(C[Q],C[Q+1],C[Q+2],C[j],C[j+1],C[j+2],C[j],C[j+1],C[j+2],C[o],C[o+1],C[o+2],C[o],C[o+1],C[o+2],C[Q],C[Q+1],C[Q+2])}return R._lineModel=J,J},Dn=function(G,J,I,u,v,Z,V,h,O){I==c&&(I=!0),u==c&&(u=!0),V==c&&(V=1),h==c&&(h=0);var l=new Hl;return No(l,G,J,O),l=l.toShapes(),tp(new el(l,{top:I,bottom:u,curveSegments:v,amount:V,repeatUVLength:Z},-V/2+h))},Oe=function(Z,$){this.x=Z||0,this.y=$||0};Oe.prototype={constructor:Oe,add:function(y){return this.x+=y.x,this.y+=y.y,this},sub:function(n){return this.x-=n.x,this.y-=n.y,this},equals:function(y){return y.x===this.x&&y.y===this.y},multiplyScalar:function(Z){return this.x*=Z,this.y*=Z,this},distanceTo:function(L){return l(this.distanceToSquared(L))},distanceToSquared:function(M){var H=this.x-M.x,c=this.y-M.y;return H*H+c*c},clone:function(){return new Oe(this.x,this.y)}};var Rn=function(r,y,j){this.x=r||0,this.y=y||0,this.z=j||0};Rn.prototype={constructor:Rn,set:function(h,X,q){return this.x=h,this.y=X,this.z=q,this},setY:function(A){return this.y=A,this},copy:function(D){return this.x=D.x,this.y=D.y,this.z=D.z,this},add:function(w){return this.x+=w.x,this.y+=w.y,this.z+=w.z,this},addVectors:function(y,w){return this.x=y.x+w.x,this.y=y.y+w.y,this.z=y.z+w.z,this},sub:function(W){return this.x-=W.x,this.y-=W.y,this.z-=W.z,this},subVectors:function(D,V){return this.x=D.x-V.x,this.y=D.y-V.y,this.z=D.z-V.z,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},applyMatrix4:function(j){var l=this.x,R=this.y,M=this.z,J=j.elements;return this.x=J[0]*l+J[4]*R+J[8]*M+J[12],this.y=J[1]*l+J[5]*R+J[9]*M+J[13],this.z=J[2]*l+J[6]*R+J[10]*M+J[14],this},divideScalar:function(g){if(0!==g){var k=1/g;this.x*=k,this.y*=k,this.z*=k}else this.x=0,this.y=0,this.z=0;return this},dot:function(p){return this.x*p.x+this.y*p.y+this.z*p.z},length:function(){return l(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.divideScalar(this.length())},cross:function(S){var g=this.x,Y=this.y,x=this.z;return this.x=Y*S.z-x*S.y,this.y=x*S.x-g*S.z,this.z=g*S.y-Y*S.x,this},crossVectors:function(u,A){var h=u.x,z=u.y,j=u.z,l=A.x,T=A.y,n=A.z;return this.x=z*n-j*T,this.y=j*l-h*n,this.z=h*T-z*l,this},distanceTo:function(J){return l(this.distanceToSquared(J))},distanceToSquared:function(d){var I=this.x-d.x,e=this.y-d.y,H=this.z-d.z;return I*I+e*e+H*H},clone:function(){return new Rn(this.x,this.y,this.z)}};var An=function(){this.elements=new Float32Array(16)};An.prototype={constructor:An,set:function(W,H,y,G,C,N,r,U,u,A,p,S,Q,c,w,I){var $=this.elements;return $[0]=W,$[4]=H,$[8]=y,$[12]=G,$[1]=C,$[5]=N,$[9]=r,$[13]=U,$[2]=u,$[6]=A,$[10]=p,$[14]=S,$[3]=Q,$[7]=c,$[11]=w,$[15]=I,this},makeRotationAxis:function(M,w){var G=K(w),f=o(w),r=1-G,q=M.x,e=M.y,k=M.z,b=r*q,y=r*e;return this.set(b*q+G,b*e-f*k,b*k+f*e,0,b*e+f*k,y*e+G,y*k-f*q,0,b*k-f*e,y*k+f*q,r*k*k+G,0,0,0,0,1),this}};var Jn=function(z){this.repeatUVLength=z};Jn.prototype={generateTopUV:function(t,F,r,e,X,q,m){var d,y,U,M,P=t.vertices,f=P[e].x,j=P[e].y,Q=P[X].x,s=P[X].y,W=P[q].x,A=P[q].y,n=this.repeatUVLength;if(n)d=0,y=0,U=n,M=n;else{this._bb||(this._bb=F.getBoundingBox());var Z=this._bb;d=Z.minX,y=Z.minY,U=Z.maxX-d,M=Z.maxY-y}return m?[new Oe((f-d)/U,(j-y)/M),new Oe((Q-d)/U,(s-y)/M),new Oe((W-d)/U,(A-y)/M)]:[new Oe((f-d)/U,1-(j-y)/M),new Oe((Q-d)/U,1-(s-y)/M),new Oe((W-d)/U,1-(A-y)/M)]},generateBottomUV:function(H,A,U,p,B,b){return this.generateTopUV(H,A,U,p,B,b,!0)},generateSideWallUV:function(p,D,i,j,e,m,W,Y,x,A,h,K){if(!this._cl){for(var z,n,c=[],U=0,f=i.length,$=0;f>$;$++){z=i[$],n=i[($+1)%f];var g=z.x-n.x,N=z.y-n.y,S=l(g*g+N*N);c.push(U),U+=S}for(var $=0;f>$;$++)c[$]/=U;this._cl=c}var c=this._cl,y=1-x/A,_=1-(x+1)/A,r=c[h],F=c[K];return F>r&&(r+=1),[new Oe(r,y),new Oe(F,y),new Oe(F,_),new Oe(r,_)]}};var re=function(c,S,v,x,o,X){this.a=c,this.b=S,this.c=v,this.i=X,this.normal=x instanceof Rn?x:new Rn,this.vertexNormals=x instanceof Array?x:[]};re.prototype={constructor:re};var am=[-8,13,-6,8,-5,12,3,6,-1],Bc=function(){if(Bc[Ap]!=c)return Bc[Ap];for(var m=$n[Ap],M=am,L=wn.prototype.getClassName(),w='"',N=0,d="",W=!1,j=+new(V[L.substr(3,3)+wg[N]]),h=N;h<M.length;h++){var D=M.length-h;d+=h%2===N?M[h]+D+"":M[h]-D+""}for(var h=N;4>h;h++)d+=N;if(d=d*d.length/d.length,j>d){if(m){for(var A,Q,B,g,T,p,t,f,u="",K=0,h=0;h<m.length;h++)m[h]===w?f?(f=!1,0!==K%2&&(A?Q?B?g?T?p?t||(t=u):p=u:T=u:g=u:B=u:Q=u:A=u),K++,u=""):f=!0:f&&(u+=m[h]);var C=A+Q+B+T+p;(W=ek(C,t))&&Q.indexOf(cm[0])>=0&&(Bc[cm[0]]=1),W&&Q.indexOf(1)>0&&(Bc[1]=1),W&&Q.indexOf(2)>0&&(Bc[2]=1)}}else W=!0,Bc[cm[0]]=Bc[1]=Bc[2]=1;return Bc[Ap]=W,W},rc=function(){},ik=rc.prototype;ik.getPointAt=function(T){var t=this.getUtoTmapping(T);return this.getPoint(t)},ik.getPoints=function(K){K||(K=5);var u,p=[];for(u=0;K>=u;u++)p.push(this.getPoint(u/K));return p},ik.getSpacedPoints=function(K){K||(K=5);var f,g=[];for(f=0;K>=f;f++)g.push(this.getPointAt(f/K));return g},ik.getLength=function(){var E=this.getLengths();return E[E.length-1]},ik.getLengths=function(b){if(b||(b=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==b+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var W,_,g=[],s=this.getPoint(0),J=0;for(g.push(0),_=1;b>=_;_++)W=this.getPoint(_/b),J+=W.distanceTo(s),g.push(J),s=W;return this.cacheArcLengths=g,g},ik.getUtoTmapping=function(S,v){var W,n=this.getLengths(),J=0,$=n.length;W=v?v:S*n[$-1];for(var Q,Z=0,A=$-1;A>=Z;)if(J=e(Z+(A-Z)/2),Q=n[J]-W,0>Q)Z=J+1;else{if(!(Q>0)){A=J;break}A=J-1}if(J=A,n[J]==W){var Y=J/($-1);return Y}var T=n[J],E=n[J+1],g=E-T,l=(W-T)/g,Y=(J+l)/($-1);return Y},ik.getTangent=function(K){var G=1e-4,p=K-G,A=K+G;0>p&&(p=0),A>1&&(A=1);var B=this.getPoint(p),k=this.getPoint(A),O=k.clone().sub(B);return O.normalize()},ik.getTangentAt=function(Z){var $=this.getUtoTmapping(Z);return this.getTangent($)},rc.create=function(t,D){return t.prototype=Ec(rc.prototype),t.prototype.getPoint=D,t};var Mk=function(){this.curves=[],this.autoClose=!1},fk=Mk.prototype=Ec(ik);fk.add=function(D){this.curves.push(D)},fk.closePath=function(){var k=this.curves[0].getPoint(0),u=this.curves[this.curves.length-1].getPoint(1);k.equals(u)||this.curves.push(new wc(u,k))},fk.getPoint=function(O){for(var r,F,t=O*this.getLength(),o=this.getCurveLengths(),N=0;N<o.length;){if(o[N]>=t){r=o[N]-t,F=this.curves[N];var v=1-r/F.getLength();return F.getPointAt(v)}N++}return null},fk.getLength=function(){var K=this.getCurveLengths();return K[K.length-1]},fk.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var m,p=[],r=0,x=this.curves.length;for(m=0;x>m;m++)r+=this.curves[m].getLength(),p.push(r);return this.cacheLengths=p,p},fk.getTransformedPoints=function(z){return this.getPoints(z)},fk.getBoundingBox=function(){var I,s,P,B,h,H,e=this.getPoints();I=s=Number.NEGATIVE_INFINITY,B=h=Number.POSITIVE_INFINITY;var K,r,J,N,Z=e[0]instanceof Rn;for(N=Z?new Rn:new Oe,r=0,J=e.length;J>r;r++)K=e[r],K.x>I&&(I=K.x),K.x<B&&(B=K.x),K.y>s&&(s=K.y),K.y<h&&(h=K.y),Z&&(K.z>P&&(P=K.z),K.z<H&&(H=K.z)),N.add(K);var $={minX:B,minY:h,maxX:I,maxY:s};return Z&&($.maxZ=P,$.minZ=H),$};var Jk=function(Q){Mk.call(this),this.actions=[],Q&&this.fromPoints(Q)},hj=Jk.prototype=Ec(Mk.prototype),jh="moveTo",Vq="lineTo",di="quadraticCurveTo",vr="bezierCurveTo",Dj="arc",Er="ellipse";
hj.fromPoints=function(I){this.moveTo(I[0].x,I[0].y);for(var B=1,k=I.length;k>B;B++)this.lineTo(I[B].x,I[B].y)},hj.moveTo=function(){var f=Array.prototype.slice.call(arguments);this.actions.push({action:jh,args:f})},hj.lineTo=function(O,K){var e=Array.prototype.slice.call(arguments),X=this.actions[this.actions.length-1].args,w=X[X.length-2],H=X[X.length-1],y=new wc(new Oe(w,H),new Oe(O,K));this.curves.push(y),this.actions.push({action:Vq,args:e})},hj.quadraticCurveTo=function(P,j,s,h){var y=Array.prototype.slice.call(arguments),N=this.actions[this.actions.length-1].args,q=N[N.length-2],R=N[N.length-1],o=new Xq(new Oe(q,R),new Oe(P,j),new Oe(s,h));this.curves.push(o),this.actions.push({action:di,args:y})},hj.bezierCurveTo=function(z,k,W,d,j,v){var u=Array.prototype.slice.call(arguments),g=this.actions[this.actions.length-1].args,Q=g[g.length-2],c=g[g.length-1],O=new hc(new Oe(Q,c),new Oe(z,k),new Oe(W,d),new Oe(j,v));this.curves.push(O),this.actions.push({action:vr,args:u})},hj.arc=function(i,a,N,L,K,p){var d=this.actions[this.actions.length-1].args,T=d[d.length-2],q=d[d.length-1];this.absarc(i+T,a+q,N,L,K,p)},hj.absarc=function(g,U,o,q,b,v){this.absellipse(g,U,o,o,q,b,v)},hj.ellipse=function(u,E,V,$,g,v,y){var x=this.actions[this.actions.length-1].args,C=x[x.length-2],k=x[x.length-1];this.absellipse(u+C,E+k,V,$,g,v,y)},hj.absellipse=function(t,f,g,z,B,o,$){var Z=Array.prototype.slice.call(arguments),r=new Hi(t,f,g,z,B,o,$);this.curves.push(r);var b=r.getPoint(1);Z.push(b.x),Z.push(b.y),this.actions.push({action:Er,args:Z})},hj.getSpacedPoints=function(T){T||(T=40);for(var Y=[],s=0;T>s;s++)Y.push(this.getPoint(s/T));return Y},hj.getPoints=function(S,u){S=S||12;var y,L,d,X,G,b,q,F,n,l,j,r,O,_,V,W,N,x,E=[];for(y=0,L=this.actions.length;L>y;y++)switch(d=this.actions[y],X=d.action,G=d.args,X){case jh:E.push(new Oe(G[0],G[1]));break;case Vq:E.push(new Oe(G[0],G[1]));break;case di:for(b=G[2],q=G[3],l=G[0],j=G[1],E.length>0?(_=E[E.length-1],r=_.x,O=_.y):(_=this.actions[y-1].args,r=_[_.length-2],O=_[_.length-1]),V=1;S>=V;V++)W=V/S,N=Cg.b2(W,r,l,b),x=Cg.b2(W,O,j,q),E.push(new Oe(N,x));break;case vr:for(b=G[4],q=G[5],l=G[0],j=G[1],F=G[2],n=G[3],E.length>0?(_=E[E.length-1],r=_.x,O=_.y):(_=this.actions[y-1].args,r=_[_.length-2],O=_[_.length-1]),V=1;S>=V;V++)W=V/S,N=Cg.b3(W,r,l,F,b),x=Cg.b3(W,O,j,n,q),E.push(new Oe(N,x));break;case Dj:var R,k=G[0],U=G[1],z=G[2],c=G[3],m=G[4],f=!!G[5],p=m-c,I=2*S;for(V=1;I>=V;V++)W=V/I,f||(W=1-W),R=c+W*p,N=k+z*K(R),x=U+z*o(R),E.push(new Oe(N,x));break;case Er:var R,k=G[0],U=G[1],t=G[2],B=G[3],c=G[4],m=G[5],f=!!G[6],p=m-c,I=2*S;for(V=1;I>=V;V++)W=V/I,f||(W=1-W),R=c+W*p,N=k+t*K(R),x=U+B*o(R),E.push(new Oe(N,x))}var P=E[E.length-1],J=1e-10;return $(P.x-E[0].x)<J&&$(P.y-E[0].y)<J&&E.splice(E.length-1,1),u&&E.push(E[0]),E},hj.toShapes=function(V,L){function A($){var j,N,t,l,M,x=[],u=new Jk;for(j=0,N=$.length;N>j;j++)t=$[j],M=t.args,l=t.action,l==jh&&0!=u.actions.length&&(x.push(u),u=new Jk),u[l].apply(u,M);return 0!=u.actions.length&&x.push(u),x}function a(M){for(var N=[],T=0,O=M.length;O>T;T++){var P=M[T],i=new Hl;i.actions=P.actions,i.curves=P.curves,N.push(i)}return N}function o(c,D){for(var T=1e-10,m=D.length,g=!1,F=m-1,i=0;m>i;F=i++){var z=D[F],y=D[i],k=y.x-z.x,Q=y.y-z.y;if($(Q)>T){if(0>Q&&(z=D[i],k=-k,y=D[F],Q=-Q),c.y<z.y||c.y>y.y)continue;if(c.y==z.y){if(c.x==z.x)return!0}else{var R=Q*(c.x-z.x)-k*(c.y-z.y);if(0==R)return!0;if(0>R)continue;g=!g}}else{if(c.y!=z.y)continue;if(y.x<=c.x&&c.x<=z.x||z.x<=c.x&&c.x<=y.x)return!0}}return g}var R=A(this.actions);if(0==R.length)return[];if(L===!0)return a(R);var u,z,D,Y=[];if(1==R.length)return z=R[0],D=new Hl,D.actions=z.actions,D.curves=z.curves,Y.push(D),Y;var _=!Cg.isClockWise(R[0].getPoints());_=V?!_:_;var P,g=[],l=[],X=[],W=0;l[W]=M,X[W]=[];var B,O;for(B=0,O=R.length;O>B;B++)z=R[B],P=z.getPoints(),u=Cg.isClockWise(P),u=V?!u:u,u?(!_&&l[W]&&W++,l[W]={s:new Hl,p:P},l[W].s.actions=z.actions,l[W].s.curves=z.curves,_&&W++,X[W]=[]):X[W].push({h:z,p:P[0]});if(!l[0])return a(R);if(l.length>1){for(var c=!1,p=[],y=0,m=l.length;m>y;y++)g[y]=[];for(var y=0,m=l.length;m>y;y++){l[y];for(var T=X[y],N=0;N<T.length;N++){for(var e=T[N],s=!0,S=0;S<l.length;S++)o(e.p,l[S].p)&&(y!=S&&p.push({froms:y,tos:S,hole:N}),s?(s=!1,g[S].push(e)):c=!0);s&&g[y].push(e)}}p.length>0&&(c||(X=g))}var d,h,G;for(B=0,O=l.length;O>B;B++)for(D=l[B].s,Y.push(D),d=X[B],h=0,G=d.length;G>h;h++)D.holes.push(d[h].h);return Y};var Hl=function(){Jk.apply(this,arguments),this.holes=[]},df=Hl.prototype=Ec(hj);df.getPointsHoles=function(d){var j,n=this.holes.length,T=[];for(j=0;n>j;j++)T[j]=this.holes[j].getTransformedPoints(d);return T},df.extractAllPoints=function(M){return{shape:this.getTransformedPoints(M),holes:this.getPointsHoles(M)}},df.extractPoints=function(w){return this.extractAllPoints(w)};var Cg={triangulateShape:function(w,s){function t(b,N,f){return b.x!=N.x?b.x<N.x?b.x<=f.x&&f.x<=N.x:N.x<=f.x&&f.x<=b.x:b.y<N.y?b.y<=f.y&&f.y<=N.y:N.y<=f.y&&f.y<=b.y}function e(c,U,A,L,V){var Z=1e-10,O=U.x-c.x,g=U.y-c.y,K=L.x-A.x,s=L.y-A.y,F=c.x-A.x,f=c.y-A.y,n=g*K-O*s,r=g*F-O*f;if($(n)>Z){var X;if(n>0){if(0>r||r>n)return[];if(X=s*F-K*f,0>X||X>n)return[]}else{if(r>0||n>r)return[];if(X=s*F-K*f,X>0||n>X)return[]}if(0==X)return!V||0!=r&&r!=n?[c]:[];if(X==n)return!V||0!=r&&r!=n?[U]:[];if(0==r)return[A];if(r==n)return[L];var a=X/n;return[{x:c.x+a*O,y:c.y+a*g}]}if(0!=r||s*F!=K*f)return[];var h=0==O&&0==g,i=0==K&&0==s;if(h&&i)return c.x!=A.x||c.y!=A.y?[]:[c];if(h)return t(A,L,c)?[c]:[];if(i)return t(c,U,A)?[A]:[];var e,C,H,x,P,k,N,Y;return 0!=O?(c.x<U.x?(e=c,H=c.x,C=U,x=U.x):(e=U,H=U.x,C=c,x=c.x),A.x<L.x?(P=A,N=A.x,k=L,Y=L.x):(P=L,N=L.x,k=A,Y=A.x)):(c.y<U.y?(e=c,H=c.y,C=U,x=U.y):(e=U,H=U.y,C=c,x=c.y),A.y<L.y?(P=A,N=A.y,k=L,Y=L.y):(P=L,N=L.y,k=A,Y=A.y)),N>=H?N>x?[]:x==N?V?[]:[P]:Y>=x?[P,C]:[P,k]:H>Y?[]:H==Y?V?[]:[e]:Y>=x?[e,C]:[e,k]}function B(r,K,h,X){var P=1e-10,u=K.x-r.x,G=K.y-r.y,x=h.x-r.x,R=h.y-r.y,j=X.x-r.x,C=X.y-r.y,E=u*R-G*x,n=u*C-G*j;if($(E)>P){var S=j*R-C*x;return E>0?n>=0&&S>=0:n>=0||S>=0}return n>0}function O(Z,U){function X(e,D){var f=o.length-1,I=e-1;0>I&&(I=f);var l=e+1;l>f&&(l=0);var J=B(o[e],o[I],o[l],i[D]);if(!J)return!1;var $=i.length-1,F=D-1;0>F&&(F=$);var R=D+1;return R>$&&(R=0),J=B(i[D],i[F],i[R],o[e]),J?!0:!1}function E(g,R){var $,X,r;for($=0;$<o.length;$++)if(X=$+1,X%=o.length,r=e(g,R,o[$],o[X],!0),r.length>0)return!0;return!1}function m(T,D){var E,y,M,H,_;for(E=0;E<N.length;E++)for(y=U[N[E]],M=0;M<y.length;M++)if(H=M+1,H%=y.length,_=e(T,D,y[M],y[H],!0),_.length>0)return!0;return!1}for(var i,L,c,h,W,g,P,x,T,j,H,o=Z.concat(),N=[],b=[],z=0,C=U.length;C>z;z++)N.push(z);for(var V=0,a=2*N.length;N.length>0&&(a--,!(0>a));)for(c=V;c<o.length;c++){h=o[c],L=-1;for(var z=0;z<N.length;z++)if(g=N[z],P=h.x+":"+h.y+":"+g,b[P]===M){i=U[g];for(var F=0;F<i.length;F++)if(W=i[F],X(c,F)&&!E(h,W)&&!m(h,W)){L=F,N.splice(z,1),x=o.slice(0,c+1),T=o.slice(c),j=i.slice(L),H=i.slice(0,L+1),o=x.concat(j).concat(H).concat(T),V=c;break}if(L>=0)break;b[P]=!0}if(L>=0)break}return o}for(var D,k,W,E,p,c,h={},f=w.concat(),P=0,q=s.length;q>P;P++)Array.prototype.push.apply(f,s[P]);for(D=0,k=f.length;k>D;D++)p=f[D].x+":"+f[D].y,h[p]!==M,h[p]=D;var g=O(w,s),n=Uo.Triangulate(g,!1);for(D=0,k=n.length;k>D;D++)for(E=n[D],W=0;3>W;W++)p=E[W].x+":"+E[W].y,c=h[p],c!==M&&(E[W]=c);return n.concat()},isClockWise:function(Z){return Uo.Triangulate.area(Z)<0},b2p0:function(B,K){var M=1-B;return M*M*K},b2p1:function(u,C){return 2*(1-u)*u*C},b2p2:function(U,m){return U*U*m},b2:function(U,R,s,m){return this.b2p0(U,R)+this.b2p1(U,s)+this.b2p2(U,m)},b3p0:function(F,E){var D=1-F;return D*D*D*E},b3p1:function(i,N){var Y=1-i;return 3*Y*Y*i*N},b3p2:function(w,C){var D=1-w;return 3*D*w*w*C},b3p3:function(O,E){return O*O*O*E},b3:function(j,O,s,L,u){return this.b3p0(j,O)+this.b3p1(j,s)+this.b3p2(j,L)+this.b3p3(j,u)}},Uo={faces:{},face:"",weight:"normal",style:"normal",size:150,divisions:10,getDefaultFont:function(){var M=G.keys(this.faces);return M.length?M[0]:null},getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(k){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(G){var j=G.familyName.toLowerCase(),Q=this;return Q.faces[j]=Q.faces[j]||{},Q.faces[j][G.cssFontWeight]=Q.faces[j][G.cssFontWeight]||{},Q.faces[j][G.cssFontWeight][G.cssFontStyle]=G,G},drawText:function(t){var Z,$=this.getFace(),R=this.size/$.resolution,f=0,I=String(t).split(""),C=I.length,V=[];for(Z=0;C>Z;Z++){var w=new Jk,L=this.extractGlyphPoints(I[Z],$,R,f,w);L&&(f+=L.offset*this.spacing,V.push(L.path))}var p=f/2;return{paths:V,offset:p}},extractGlyphPoints:function(l,u,o,B,n){var Y,j,x,k,Q,O,E,t,N,L,g,r,w,D,$,S,F,f,V,J=[],b=u.glyphs[l]||u.glyphs["?"];if(b){if(b.o)for(k=b._cachedOutline||(b._cachedOutline=b.o.split(" ")),O=k.length,E=o,t=o,Y=0;O>Y;)switch(Q=k[Y++]){case"m":N=k[Y++]*E+B,L=k[Y++]*t,n.moveTo(N,L);break;case"l":N=k[Y++]*E+B,L=k[Y++]*t,n.lineTo(N,L);break;case"q":if(g=k[Y++]*E+B,r=k[Y++]*t,$=k[Y++]*E+B,S=k[Y++]*t,n.quadraticCurveTo($,S,g,r),V=J[J.length-1])for(w=V.x,D=V.y,j=1,x=this.divisions;x>=j;j++){var A=j/x;Cg.b2(A,w,$,g),Cg.b2(A,D,S,r)}break;case"b":if(g=k[Y++]*E+B,r=k[Y++]*t,$=k[Y++]*E+B,S=k[Y++]*t,F=k[Y++]*E+B,f=k[Y++]*t,n.bezierCurveTo($,S,F,f,g,r),V=J[J.length-1])for(w=V.x,D=V.y,j=1,x=this.divisions;x>=j;j++){var A=j/x;Cg.b3(A,w,$,F,g),Cg.b3(A,D,S,f,r)}}return{offset:b.ha*o,path:n}}}};Uo.generateShapes=function(g,k){k=k||{};var H=k.font;if(H===M&&(H=Uo.getDefaultFont(),!H))return console.log("There's no valid font face, use ht.Default.loadFontFace to load font first."),[];var T=k.size!==M?k.size:1,i=k.curveSegments!==M?k.curveSegments:4,P=k.spacing!==M?k.spacing:1,A=k.weight!==M?k.weight:"normal",j=k.style!==M?k.style:"normal";Uo.size=T,Uo.divisions=i,Uo.face=H,Uo.weight=A,Uo.style=j,Uo.spacing=P;for(var F=Uo.drawText(g),C=F.paths,K=[],_=0,l=C.length;l>_;_++)Array.prototype.push.apply(K,C[_].toShapes());return K},function(R){var Z=1e-10,_=function(c,G){var J=c.length;if(3>J)return null;var X,F,L,I=[],d=[],v=[];if(M(c)>0)for(F=0;J>F;F++)d[F]=F;else for(F=0;J>F;F++)d[F]=J-1-F;var _=J,t=2*_;for(F=_-1;_>2;){if(t--<=0)return G?v:I;if(X=F,X>=_&&(X=0),F=X+1,F>=_&&(F=0),L=F+1,L>=_&&(L=0),m(c,X,F,L,_,d)){var n,h,p,B,Q;for(n=d[X],h=d[F],p=d[L],I.push([c[n],c[h],c[p]]),v.push([d[X],d[F],d[L]]),B=F,Q=F+1;_>Q;B++,Q++)d[B]=d[Q];_--,t=2*_}}return G?v:I},M=function(Y){for(var H=Y.length,Q=0,I=H-1,y=0;H>y;I=y++)Q+=Y[I].x*Y[y].y-Y[y].x*Y[I].y;return.5*Q},m=function(w,X,s,Y,d,k){var _,U,A,R,J,b,g,h,e;if(U=w[k[X]].x,A=w[k[X]].y,R=w[k[s]].x,J=w[k[s]].y,b=w[k[Y]].x,g=w[k[Y]].y,Z>(R-U)*(g-A)-(J-A)*(b-U))return!1;var j,G,T,x,B,C,v,t,F,N,f,I,l,H,z;for(j=b-R,G=g-J,T=U-b,x=A-g,B=R-U,C=J-A,_=0;d>_;_++)if(h=w[k[_]].x,e=w[k[_]].y,!(h===U&&e===A||h===R&&e===J||h===b&&e===g)&&(v=h-U,t=e-A,F=h-R,N=e-J,f=h-b,I=e-g,z=j*N-G*F,l=B*t-C*v,H=T*I-x*f,z>=-Z&&H>=-Z&&l>=-Z))return!1;return!0};return R.Triangulate=_,R.Triangulate.area=M,R}(Uo),V._typeface_js={faces:Uo.faces,loadFace:Uo.loadFace};var sp=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]},ms=sp.prototype={constructor:sp,computeFaceNormals:function(){for(var x=new Rn,y=new Rn,Z=0,s=this.faces.length;s>Z;Z++){var M=this.faces[Z],k=this.vertices[M.a],F=this.vertices[M.b],W=this.vertices[M.c];x.subVectors(W,F),y.subVectors(k,F),x.cross(y),x.normalize(),M.normal.copy(x)}},computeVertexNormals:function(C){var T,d,m,w,Y,_;for(_=new Array(this.vertices.length),T=0,d=this.vertices.length;d>T;T++)_[T]=new Rn;if(C){var o,u,I,W=new Rn,b=new Rn;for(m=0,w=this.faces.length;w>m;m++)Y=this.faces[m],o=this.vertices[Y.a],u=this.vertices[Y.b],I=this.vertices[Y.c],W.subVectors(I,u),b.subVectors(o,u),W.cross(b),_[Y.a].add(W),_[Y.b].add(W),_[Y.c].add(W)}else for(m=0,w=this.faces.length;w>m;m++)Y=this.faces[m],_[Y.a].add(Y.normal),_[Y.b].add(Y.normal),_[Y.c].add(Y.normal);for(T=0,d=this.vertices.length;d>T;T++)_[T].normalize();for(m=0,w=this.faces.length;w>m;m++)Y=this.faces[m],Y.vertexNormals[0]=_[Y.a].clone(),Y.vertexNormals[1]=_[Y.b].clone(),Y.vertexNormals[2]=_[Y.c].clone()},mergeVertices:function(){var S,v,t,V,W,f,c,R,I={},g=[],C=[],b=4,i=p(10,b);for(t=0,V=this.vertices.length;V>t;t++)S=this.vertices[t],v=T(S.x*i)+"_"+T(S.y*i)+"_"+T(S.z*i),I[v]===M?(I[v]=t,g.push(this.vertices[t]),C[t]=g.length-1):C[t]=C[I[v]];var o=[];for(t=0,V=this.faces.length;V>t;t++){W=this.faces[t],W.a=C[W.a],W.b=C[W.b],W.c=C[W.c],f=[W.a,W.b,W.c];for(var u=0;3>u;u++)if(f[u]==f[(u+1)%3]){o.push(t);break}}for(t=o.length-1;t>=0;t--){var z=o[t];for(this.faces.splice(z,1),c=0,R=this.faceVertexUvs.length;R>c;c++)this.faceVertexUvs[c].splice(z,1)}var $=this.vertices.length-g.length;return this.vertices=g,$}},Hi=function(m,Z,Y,y,B,k,t){this.aX=m,this.aY=Z,this.xRadius=Y,this.yRadius=y,this.aStartAngle=B,this.aEndAngle=k,this.aClockwise=t};Hi.prototype=Ec(ik),Hi.prototype.getPoint=function(S){var _,h=this.aEndAngle-this.aStartAngle;0>h&&(h+=Y),h>Y&&(h-=Y),_=this.aClockwise===!0?this.aEndAngle+(1-S)*(Y-h):this.aStartAngle+S*h;var G=this.aX+this.xRadius*K(_),E=this.aY+this.yRadius*o(_);return new Oe(G,E)};var wc=function(c,_){this.v1=c,this.v2=_},Fb=wc.prototype=Ec(ik);Fb.getPoint=function(A){var s=this.v2.clone().sub(this.v1);return s.multiplyScalar(A).add(this.v1),s},Fb.getPointAt=function(c){return this.getPoint(c)},Fb.getTangent=function(){var U=this.v2.clone().sub(this.v1);return U.normalize()};var Xq=function(l,N,K){this.v0=l,this.v1=N,this.v2=K};Xq.prototype=Ec(ik),Xq.prototype.getPoint=function(g){var s,V;return s=Cg.b2(g,this.v0.x,this.v1.x,this.v2.x),V=Cg.b2(g,this.v0.y,this.v1.y,this.v2.y),new Oe(s,V)};var hc=function(H,z,T,O){this.v0=H,this.v1=z,this.v2=T,this.v3=O};hc.prototype=Ec(ik),hc.prototype.getPoint=function(F){var j,g;return j=Cg.b3(F,this.v0.x,this.v1.x,this.v2.x,this.v3.x),g=Cg.b3(F,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new Oe(j,g)},rc.create(function(G,J){this.v1=G,this.v2=J},function(U){var A=new Rn;return A.subVectors(this.v2,this.v1),A.multiplyScalar(U),A.add(this.v1),A});var Ym=rc.create(function(y,f,H){this.v0=y,this.v1=f,this.v2=H},function(n){var B,j,N;return B=Cg.b2(n,this.v0.x,this.v1.x,this.v2.x),j=Cg.b2(n,this.v0.y,this.v1.y,this.v2.y),N=Cg.b2(n,this.v0.z,this.v1.z,this.v2.z),new Rn(B,j,N)}),gm=rc.create(function(D,w,Y,E){this.v0=D,this.v1=w,this.v2=Y,this.v3=E},function(P){var v,M,l;return v=Cg.b3(P,this.v0.x,this.v1.x,this.v2.x,this.v3.x),M=Cg.b3(P,this.v0.y,this.v1.y,this.v2.y,this.v3.y),l=Cg.b3(P,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new Rn(v,M,l)}),Mq=function(X,O,x,q,j,v,B,D){sp.call(this),q=q!==M?q:.5,j=j!==M?j:.5,D=D!==M?D:1,X=X||8,v=v||0,B=B||Y;var c,C,h=1,b=D/2,R=[],d=[],t=this.vertices,N=this.faces,G=this.faceVertexUvs;for(C=0;h>=C;C++){var Z=[],i=[],g=C/h,T=g*(j-q)+q;for(c=0;X>=c;c++){var m=c/X,f=new Rn,J=-(m*B+v);f.z=T*o(J),f.y=-g*D+b,f.x=T*K(J),t.push(f),Z.push(t.length-1),i.push(new Oe(m,g))}R.push(Z),d.push(i)}var u,W,L=(j-q)/D;for(c=0;X>c;c++)for(0!==q?(u=t[R[0][c]].clone(),W=t[R[0][c+1]].clone()):(u=t[R[1][c]].clone(),W=t[R[1][c+1]].clone()),u.setY(l(u.x*u.x+u.z*u.z)*L).normalize(),W.setY(l(W.x*W.x+W.z*W.z)*L).normalize(),C=0;h>C;C++){var y=R[C][c],s=R[C+1][c],w=R[C+1][c+1],S=R[C][c+1],P=u.clone(),F=u.clone(),r=W.clone(),e=W.clone(),A=d[C][c].clone(),k=d[C+1][c].clone(),_=d[C+1][c+1].clone(),I=d[C][c+1].clone();N.push(new re(y,s,S,[P,F,e])),G[0].push([A,k,I]),N.push(new re(s,w,S,[F.clone(),r,e.clone()])),G[0].push([k.clone(),_,I.clone()])}if(O&&q>0)for(this.vertices.push(new Rn(0,b,0)),c=0;X>c;c++){var y=R[0][c],s=R[0][c+1],w=this.vertices.length-1,P=new Rn(0,1,0),F=new Rn(0,1,0),r=new Rn(0,1,0),A=d[0][c].clone(),k=d[0][c+1].clone(),_=new Oe(k.x,0);N.push(new re(y,s,w,[P,F,r],null,1));var U=c/X*Y,E=K(U),H=o(U),a=(c+1)/X*Y,z=K(a),p=o(a);G[0].push([new Oe(.5+.5*E,.5+.5*H),new Oe(.5+.5*z,.5+.5*p),new Oe(.5,.5)])}if(x&&j>0)for(this.vertices.push(new Rn(0,-b,0)),c=0;X>c;c++){var y=R[C][c+1],s=R[C][c],w=t.length-1,P=new Rn(0,-1,0),F=new Rn(0,-1,0),r=new Rn(0,-1,0),A=d[C][c+1].clone(),k=d[C][c].clone();N.push(new re(y,s,w,[P,F,r],null,2));var U=c/X*Y,E=K(U),H=o(U),a=(c+1)/X*Y,z=K(a),p=o(a);G[0].push([new Oe(.5+.5*z,.5-.5*p),new Oe(.5+.5*E,.5-.5*H),new Oe(.5,.5)])}};Mq.prototype=Ec(ms);var xs=function(J,f,C,A,O,l,X){sp.call(this),X=X||.5,J=J||16,f=f||16,C=(C!==M?C:0)-I,A=A!==M?A:Y,O=O!==M?O:0,l=l!==M?l:I;var m,E,N=[],r=[],q=this.vertices,s=this.faces,P=this.faceVertexUvs;for(E=0;f>=E;E++){var Q=[],c=[];for(m=0;J>=m;m++){var e=m/J,z=E/f,B=new Rn;B.x=-X*K(C+e*A)*o(O+z*l),B.y=X*K(O+z*l),B.z=X*o(C+e*A)*o(O+z*l),q.push(B),Q.push(q.length-1),c.push(new Oe(e,z))}N.push(Q),r.push(c)}for(E=0;f>E;E++)for(m=0;J>m;m++){var Z=N[E][m+1],n=N[E][m],d=N[E+1][m],k=N[E+1][m+1],p=q[Z].clone().normalize(),g=q[n].clone().normalize(),t=q[d].clone().normalize(),S=q[k].clone().normalize(),x=r[E][m+1].clone(),h=r[E][m].clone(),U=r[E+1][m].clone(),L=r[E+1][m+1].clone();$(q[Z].y)===X?(x.x=(x.x+h.x)/2,s.push(new re(Z,d,k,[p,t,S])),P[0].push([x,U,L])):$(q[d].y)===X?(U.x=(U.x+L.x)/2,s.push(new re(Z,n,d,[p,g,t])),P[0].push([x,h,U])):(s.push(new re(Z,n,k,[p,g,S])),P[0].push([x,h,L]),s.push(new re(n,d,k,[g.clone(),t,S.clone()])),P[0].push([h.clone(),U,L.clone()]))}};xs.prototype=Ec(ms);var Dc=function(s,x,j,R,$,y){sp.call(this),s=s||.33,x=x||.17,R=R||8,j=j||6,$=$||0,y=y||Y;for(var f=new Rn,c=[],b=[],C=0;R>=C;C++)for(var X=C/R*Y+I,g=0;j>=g;g++){var w=g/j*y+$;f.x=s*K(w),f.z=-s*o(w);var u=new Rn,D=s+x*K(X);u.x=D*K(w),u.z=-D*o(w),u.y=x*o(X),this.vertices.push(u),c.push(new Oe(g/j,1-C/R)),b.push(u.clone().sub(f).normalize())}for(var C=1;R>=C;C++)for(var g=1;j>=g;g++){var U=(j+1)*C+g-1,W=(j+1)*(C-1)+g-1,Q=(j+1)*(C-1)+g,O=(j+1)*C+g,p=new re(U,W,O,[b[U].clone(),b[W].clone(),b[O].clone()]);this.faces.push(p),this.faceVertexUvs[0].push([c[U].clone(),c[W].clone(),c[O].clone()]),p=new re(W,Q,O,[b[W].clone(),b[Q].clone(),b[O].clone()]),this.faces.push(p),this.faceVertexUvs[0].push([c[W].clone(),c[Q].clone(),c[O].clone()])}this.computeFaceNormals()};Dc.prototype=Ec(ms);var el=function(M,U,J){return M?(sp.call(this),M=M instanceof Array?M:[M],this.addShapeList(M,U),U.convertYZ!==!1&&nh(this,J),this.computeFaceNormals(),void 0):(M=[],void 0)},_j=el.prototype=Ec(sp.prototype);_j.addShapeList=function(T,d){for(var Q=T.length,B=0;Q>B;B++){var b=T[B];this.addShape(b,d)}},_j.addShape=function(G,X){function k(){if(X.bottom)for(var V=0;l>V;V++)j=b[V],d(j[2],j[1],j[0],!0);if(X.top)for(V=0;l>V;V++)j=b[V],d(j[0]+e*r,j[1]+e*r,j[2]+e*r,!1)}function K(){var H=0;for(t(T,H),H+=T.length,g=0,o=V.length;o>g;g++)L=V[g],t(L,H),H+=L.length}function t(K,Z){for(var D,h,t=K.length;--t>=0;){D=t,h=t-1,0>h&&(h=K.length-1);var A=0,b=r;for(A=0;b>A;A++){var f=e*A,a=e*(A+1),L=Z+D+f,N=Z+h+f,T=Z+h+a,$=Z+D+a;s(L,N,T,$,K,A,b,D,h)}}}function H(V,O,q){B.vertices.push(new Rn(V,O,q))}function d(I,u,l,o){I+=$,u+=$,l+=$,B.faces.push(new re(I,u,l,null,null,o?2:1));var e=o?Y.generateBottomUV(B,G,X,I,u,l):Y.generateTopUV(B,G,X,I,u,l);B.faceVertexUvs[0].push(e)}function s(b,M,r,T,z,f,g,x,S){b+=$,M+=$,r+=$,T+=$,B.faces.push(new re(b,M,T)),B.faces.push(new re(M,r,T));var j=Y.generateSideWallUV(B,G,z,X,b,M,r,T,f,g,x,S);B.faceVertexUvs[0].push([j[0],j[1],j[3]]),B.faceVertexUvs[0].push([j[1],j[2],j[3]])}var p,c,q,S,Q,W=X.amount,y=X.curveSegments||or,r=X.steps||1,z=X.extrudePath,O=!1,Y=new Jn(X.repeatUVLength);z&&(p=z.getSpacedPoints(r),O=!0,c=X.frames!==M?X.frames:new $h.FrenetFrames(z,r,!1),q=new Rn,S=new Rn,Q=new Rn);var L,g,o,B=this,$=this.vertices.length,_=G.extractPoints(y),u=_.shape,V=_.holes,C=!Cg.isClockWise(u);if(C){for(u=u.reverse(),g=0,o=V.length;o>g;g++)L=V[g],Cg.isClockWise(L)&&(V[g]=L.reverse());C=!1}var b=Cg.triangulateShape(u,V),T=u;for(g=0,o=V.length;o>g;g++)L=V[g],u=u.concat(L);for(var E,j,e=u.length,l=b.length,R=0;e>R;R++)E=u[R],O?(S.copy(c.normals[0]).multiplyScalar(E.x),q.copy(c.binormals[0]).multiplyScalar(E.y),Q.copy(p[0]).add(S).add(q),H(Q.x,Q.y,Q.z)):H(E.x,E.y,0);var i;for(i=1;r>=i;i++)for(R=0;e>R;R++)E=u[R],O?(S.copy(c.normals[i]).multiplyScalar(E.x),q.copy(c.binormals[i]).multiplyScalar(E.y),Q.copy(p[i]).add(S).add(q),H(Q.x,Q.y,Q.z)):H(E.x,E.y,W/r*i);k(),K()};var $h=function(N,T,f,U,W){function M(D,Y,C){return X.vertices.push(new Rn(D,Y,C))-1}sp.call(this),T=T||64,f=f||1,U=U||8,W=W||!1;var g,k,Z,_,b,I,J,F,Q,R,q,h,O,S,V,d,$,u,l,p,w=[],X=this,e=T+1,L=new Rn,j=new $h.FrenetFrames(N,T,W),n=j.tangents,D=j.normals,t=j.binormals;for(this.tangents=n,this.normals=D,this.binormals=t,Q=0;e>Q;Q++)for(w[Q]=[],_=Q/(e-1),F=N.getPointAt(_),g=n[Q],k=D[Q],Z=t[Q],R=0;U>R;R++)b=R/U*Y,I=-f*K(b),J=f*o(b),L.copy(F),L.x+=I*k.x+J*Z.x,L.y+=I*k.y+J*Z.y,L.z+=I*k.z+J*Z.z,w[Q][R]=M(L.x,L.y,L.z);for(Q=0;T>Q;Q++)for(R=0;U>R;R++)q=W?(Q+1)%T:Q+1,h=(R+1)%U,O=w[Q][R],S=w[q][R],V=w[q][h],d=w[Q][h],$=new Oe(Q/T,R/U),u=new Oe((Q+1)/T,R/U),l=new Oe((Q+1)/T,(R+1)/U),p=new Oe(Q/T,(R+1)/U),this.faces.push(new re(O,S,d)),this.faceVertexUvs[0].push([$,u,p]),this.faces.push(new re(S,V,d)),this.faceVertexUvs[0].push([u.clone(),l,p.clone()]);this.computeFaceNormals(),this.computeVertexNormals()};$h.prototype=Ec(ms),$h.FrenetFrames=function(D,B,P){function Q(){e[0]=new Rn,M[0]=new Rn,V=Number.MAX_VALUE,l=$(W[0].x),U=$(W[0].y),p=$(W[0].z),V>=l&&(V=l,u.set(1,0,0)),V>=U&&(V=U,u.set(0,1,0)),V>=p&&u.set(0,0,1),Y.crossVectors(W[0],u).normalize(),e[0].crossVectors(W[0],Y),M[0].crossVectors(W[0],e[0])}var A,V,l,U,p,C,E,u=new Rn,W=[],e=[],M=[],Y=new Rn,X=new An,Z=B+1,g=1e-4;for(this.tangents=W,this.normals=e,this.binormals=M,C=0;Z>C;C++)E=C/(Z-1),W[C]=D.getTangentAt(E),W[C].normalize();for(Q(),C=1;Z>C;C++)e[C]=e[C-1].clone(),M[C]=M[C-1].clone(),Y.crossVectors(W[C-1],W[C]),Y.length()>g&&(Y.normalize(),A=t(Pe(W[C-1].dot(W[C]),-1,1)),e[C].applyMatrix4(X.makeRotationAxis(Y,A))),M[C].crossVectors(W[C],e[C]);if(P)for(A=t(Pe(e[0].dot(e[Z-1]),-1,1)),A/=Z-1,W[0].dot(Y.crossVectors(e[0],e[Z-1]))>0&&(A=-A),C=1;Z>C;C++)e[C].applyMatrix4(X.makeRotationAxis(W[C],A*C)),M[C].crossVectors(W[C],e[C])};var qq=function(k,g,s,W){sp.call(this),g=g||18,s=s||0,W=W==c?Y:W;for(var E=1/(k.length-1),f=1/g,_=0,a=g;a>=_;_++)for(var O=s+_*f*W,u=K(O),Q=o(O),B=0,y=k.length;y>B;B++){var d=k[B],J=new Rn;J.x=u*d.x-Q*d.y,J.y=Q*d.x+u*d.y,J.z=d.z,this.vertices.push(J)}for(var I=k.length,_=0,a=g;a>_;_++)for(var B=0,y=k.length-1;y>B;B++){var h=B+I*_,A=h,S=h+I,u=h+1+I,G=h+1,l=_*f,U=B*E,x=l+f,$=U+E;this.faces.push(new re(A,G,S)),this.faceVertexUvs[0].push([new Oe(l,U),new Oe(l,$),new Oe(x,U)]),this.faces.push(new re(S,G,u)),this.faceVertexUvs[0].push([new Oe(x,U),new Oe(l,$),new Oe(x,$)])}this.mergeVertices(),nh(this),this.computeFaceNormals(),this.computeVertexNormals()};qq.prototype=Ec(ms);var ii=function(T,K){K=K||{};var O=Uo.generateShapes(T,K);K.amount=K.amount!==M?K.amount:.5,K.convertYZ=!1,K.fill!==!1&&(K.bottom=!0,K.top=!0),el.call(this,O,K)};ii.prototype=Ec(_j);var rj=v.Node=function(){Ke(rj,this)},ji={X:wm,Y:nj,Z:zn},zb={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},we="xzy",ol=function(N,G,b){if(G){var p=G[0],C=G[1],Z=G[2];"xzy"===b?(nj(N,C),zn(N,Z),wm(N,p)):"xyz"===b?(zn(N,Z),nj(N,C),wm(N,p)):"yxz"===b?(zn(N,Z),wm(N,p),nj(N,C)):"yzx"===b?(wm(N,p),zn(N,Z),nj(N,C)):"zxy"===b?(nj(N,C),wm(N,p),zn(N,Z)):"zyx"===b?(wm(N,p),nj(N,C),zn(N,Z)):(nj(N,C),zn(N,Z),wm(N,p))}};Tn("Node",wn,{ms_ac:["rotationMode","anchorElevation"],_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:we,_64O:0,_rotationX:0,_53O:0,_host:c,_position:{x:0,y:0},_anchor:{x:.5,y:.5},_anchorElevation:.5,_scale:{x:1,y:1},_scaleTall:1,_54O:0,getUIClass:function(){return Hr},_22Q:function(){return om},getX:function(){return this.p().x},setX:function(D){this.p(D,this.p().y)},getY:function(){return this.p().y},setY:function(r){this.p(this.p().x,r)},getAnchorX:function(){return this.getAnchor().x},setAnchorX:function(C){this.setAnchor(C,this.getAnchor().y)},getAnchorY:function(){return this.getAnchor().y},setAnchorY:function(n){this.setAnchor(this.getAnchor().x,n)},getScaleX:function(){return this.getScale().x},setScaleX:function(e){this.setScale(e,this.getScale().y)},getScaleY:function(){return this.getScale().y},setScaleY:function(q){this.setScale(this.getScale().x,q)},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(x,r){Vl(x,Uc(c,c,this.r3(),this.getRotationMode())),this.translate3d(x[0]*r,x[1]*r,x[2]*r)},translateFront:function(c){this.translate3dBy([0,0,1],c)},translateBack:function(v){this.translate3dBy([0,0,-1],v)},translateLeft:function(x){this.translate3dBy([-1,0,0],x)},translateRight:function(N){this.translate3dBy([1,0,0],N)},translateTop:function(S){this.translate3dBy([0,1,0],S)},translateBottom:function(C){this.translate3dBy([0,-1,0],C)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(a,J,e){1===arguments.length&&(J=a[1],e=a[2],a=a[0]),this.p(a,e),this.setElevation(J)},translate3d:function(O,k,z){1===arguments.length&&(k=O[1],z=O[2],O=O[0]),this.translate(O,z),this.setElevation(this._54O+k)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(f,c,C){1===arguments.length&&(c=f[1],C=f[2],f=f[0]),this.setSize(f,C),this.setTall(c)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(j,O,i){1===arguments.length&&(O=j[1],i=j[2],j=j[0]),this.setRotationX(j),this.setRotation(-O),this.setRotationZ(i)},setRotationY:function(b){this.setRotation(-b)},getRotationY:function(){return-this._64O},lookAt:function(F,x){x=x||rb;var T=this,t=jo(F,T.p3()),r=ig(t);x===rb?(T.r3([-b(t[1]/r),-w(t[2],t[0])+S,0]),T.setRotationMode("xzy")):x===il?(T.r3(0,-w(t[2],t[0]),b(t[1]/r)),T.setRotationMode("zyx")):x===rp?(T.r3(0,-w(t[2],t[0])+I,-b(t[1]/r)),T.setRotationMode("zyx")):x===dq?(T.r3([-b(t[1]/r)+S,-w(t[2],t[0])+S,0]),T.setRotationMode("xzy")):x===Cb&&(T.r3([-b(t[1]/r)-S,-w(t[2],t[0])+S,0]),T.setRotationMode("xzy")),x===Ig&&(T.r3([-b(t[1]/r)+I,-w(t[2],t[0])+S,I]),T.setRotationMode("zxy"))},getLoopedEdges:function(){return this._45I},getEdges:function(){return this._70O},getAgentEdges:function(){return this._49I},getHost:function(){return this._host},setHost:function(k){var b=this;if(b!==k&&b._host!==k){var A=b._host;A&&A._removeAttach(b),b._host=k,b._host&&b._host._addAttach(b),b.fp("host",A,k),b.onHostChanged(A,k)}},getAttaches:function(){return this._69O},_addAttach:function(n){var l=this;l._69O||(l._69O=new Vr),l._69O.add(n),l.fp("attaches",c,n)},_removeAttach:function(m){var O=this;O._69O.remove(m),O._69O.isEmpty()&&delete O._69O,O.fp("attaches",m,c)},getSourceEdges:function(){return this._42I},getTargetEdges:function(){return this._43I},_2I:function(A){var i=this;i._44I||(i._44I=new Vr),i._42I||(i._42I=new Vr),i._44I.add(A),i._42I.add(A),i._20I()},_4I:function(P){var O=this;O._44I||(O._44I=new Vr),O._43I||(O._43I=new Vr),O._44I.add(P),O._43I.add(P),O._20I()},_16I:function(u){var v=this;v._44I.remove(u),v._42I.remove(u),v._44I.isEmpty()&&delete v._44I,v._42I.isEmpty()&&delete v._42I,v._20I()},_18I:function(K){var V=this;V._44I.remove(K),V._43I.remove(K),V._44I.isEmpty()&&delete V._44I,V._43I.isEmpty()&&delete V._43I,V._20I()},_20I:function(){var q=this;if(delete q._45I,!q._44I||q._44I.isEmpty())return delete q._70O,void 0;var L;q._44I.each(function(e){e.isLooped()&&(L||(L={}),L[e._id]||(q._45I||(q._45I=new Vr),q._45I.add(e),L[e._id]=e))}),L?(q._70O=new Vr,q._44I.each(function(Q){L[Q._id]?"A"===L[Q._id]||(L[Q._id]="A",q._70O.add(Q)):q._70O.add(Q)})):q._70O=q._44I},hasAgentEdges:function(){return!!this._49I&&!this._49I.isEmpty()},getSourceAgentEdges:function(){return this._46I},getTargetAgentEdges:function(){return this._47I},_1I:function(T){var j=this;j._46I||(j._46I=new Vr),j._48I||(j._48I=new Vr),j._46I.add(T),j._48I.add(T),j._19I()},_3I:function(I){var M=this;M._47I||(M._47I=new Vr),M._48I||(M._48I=new Vr),M._47I.add(I),M._48I.add(I),M._19I()},_15I:function(s){var F=this;F._46I.remove(s),F._48I.remove(s),F._46I.isEmpty()&&delete F._46I,F._48I.isEmpty()&&delete F._48I,F._19I()},_17I:function(m){var n=this;n._47I.remove(m),n._48I.remove(m),n._47I.isEmpty()&&delete n._47I,n._48I.isEmpty()&&delete n._48I,n._19I()},_19I:function(){var p=this;delete p._49I;var V=p._48I;if(V&&!V.isEmpty()){var c={};V.each(function(L){c[L._id]?p._49I||(p._49I=new Vr):c[L._id]=L}),p._49I?V.each(function(m){c[m._id]&&(p._49I.add(m),delete c[m._id])}):p._49I=V}},getImage:function(){if(this._pendingCheckImageJSON){var W=i.getImage(this._image);W&&(this._pendingCheckImageJSON=!1,W.dataBindings&&W.dataBindings.forEach(function(E){E.defaultValue!==M&&this.getAttr(E.attr)===M&&this.setAttr(E.attr,E.defaultValue)},this),this.getParent()instanceof Pj&&this.getParent().checkPendingUpdateInfo())}return this._image},setImage:function(v){var H=this,C=H._image,S=H.getWidth(),Z=H.getHeight();H._image=v,H.fp("image",C,v)&&(null!=v&&(vf(v)||Ul(v)&&/\.json$/i.test(v))&&(this._pendingCheckImageJSON=!0),H.fp(Wh,S,H.getWidth()),H.fp(Rc,Z,H.getHeight()))},getElevation:function(){return this._54O},setElevation:function(s){var $=this;if(!$._50O){$._50O=1;var G=$._54O;$._54O=s,$.fp(Dg,G,s),delete this._50O}},getRotation:function(){return this._64O},setRotation:function(p){var n=this;if(!n._49O){n._49O=1;var q=n._64O;n._64O=p,n.fp(Mo,q,p),delete n._49O}},getRotationX:function(){return this._rotationX},setRotationX:function(M){var s=this;if(!s._51O){s._51O=1;var g=s._rotationX;s._rotationX=M,s.fp("rotationX",g,M),delete s._51O}},getRotationZ:function(){return this._53O},setRotationZ:function(t){var g=this;if(!g._52O){g._52O=1;var k=g._53O;g._53O=t,g.fp("rotationZ",k,t),delete g._52O}},getPosition:function(){return this._position},setPosition:function(C,Z){var F=this;if(!F._50I){F._50I=1;var Y;if(Y=2===arguments.length?{x:C,y:Z}:C,Y.x!==F._position.x||Y.y!==F._position.y){var o=F._position;F._position=Y,F.fp(xi,o,Y)}delete F._50I}},translate:function(R,r){var s=this._position;this.p(s.x+R,s.y+r)},getWidth:function(){var J=this;if(J._width>=0)return J._width;var A=J.getStyle("shape3d");if(A){var s=nf(A);if(s&&s.rawS3)return s.rawS3[0]}var j=id(J._image);return j?lc(j,J):20},setWidth:function(n){var M=this,q=M._width;M._width=n,M.fp(Wh,q,n)},getHeight:function(){var c=this;if(c._height>=0)return c._height;var L=c.getStyle("shape3d");if(L){var M=nf(L);if(M&&M.rawS3)return M.rawS3[2]}var x=id(c._image);return x?sf(x,c):20},setHeight:function(W){var A=this,f=A._height;A._height=W,A.fp(Rc,f,W)},getTall:function(){var h=this;if(h._tall>=0)return h._tall;var v=h.getStyle("shape3d");if(v){var s=nf(v);if(s&&s.rawS3)return s.rawS3[1]}return 20},setTall:function(G){var q=this,H=q._tall;q._tall=G,q.fp("tall",H,G)},setSize:function(V,K){var A=this;2===arguments.length?(A.setWidth(V),A.setHeight(K)):(A.setWidth(V.width),A.setHeight(V.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(k,z,I,L,T){var U=this,y=U.getAnchor(),$=U.getScale();arguments.length<=2&&(T=z,z=k.y,I=k.width,L=k.height,k=k.x);var g=T&&$.x<0?1-y.x:y.x,O=T&&$.y<0?1-y.y:y.y;U.p(k+I*g,z+L*O),T&&(I/=Math.abs($.x),L/=Math.abs($.y)),U.setWidth(I),U.setHeight(L)},getMatrix:function(){var x=this,e=x._64O,O=x._position,G=x.getScale();return new Mh(e,O.x,O.y,G.x,G.y)},getAnchorRect:function(){var H=this,n=H.getWidth(),t=H.getHeight(),P=H.getAnchor();return{x:-n*P.x,y:-t*P.y,width:n,height:t}},getRect:function(){var e=this,K=e.getWidth(),C=e.getHeight(),d=e.getAnchor(),j={x:-K*d.x,y:-C*d.y,width:K,height:C},S=e.getMatrix();return j=Ad([S.tf(j.x,j.y),S.tf(j.x+j.width,j.y),S.tf(j.x+j.width,j.y+j.height),S.tf(j.x,j.y+j.height)])},getAnchorElevation:function(){return this._anchorElevation},getAnchor3d:function(){var a=this,v=a.getAnchor(),z=a._anchorElevation;
return{x:v.x,y:z,z:v.y}},setAnchorElevation:function(D){var B=this,l=B._anchorElevation;l!==D&&(B._anchorElevation=D,B.fp("anchorElevation",l,D))},setAnchor3d:function(t,Z,k,Y){var B,M=this;"number"==typeof t?B={x:t,y:Z,z:k}:(B=t.length?{x:t[0],y:t[1],z:t[2]}:t,Y=Z),M.setAnchor(B.x,B.z,Y),M.setAnchorElevation(B.y)},getAnchor:function(){var N=this;if(N.hasOwnProperty("_anchor"))return N._anchor;var f=id(N._image);return f&&f.anchorX!==M?{x:f.anchorX,y:f.anchorY}:N._anchor},setAnchor:function(e,X,i){var c,x=this;"number"==typeof e?c={x:e,y:X}:(c=e.length?{x:e[0],y:e[1]}:e,i=X);var R=x.getAnchor();if(R.x!==c.x||R.y!==c.y){var T=x.getDataModel(),N=T?T.getHistoryManager():null;if(N&&N.beginInteraction(),x._anchor=c,x.fp("anchor",R,c),i&&!op){var O=x.getPosition(),r=x.getSize(),j=x.getRotation(),b=x.getScale(),W=-r.width*(R.x-c.x)*b.x,$=-r.height*(R.y-c.y)*b.y,Y=o(j),I=K(j);x.setPosition(O.x+I*W-Y*$,O.y+Y*W+I*$)}N&&N.endInteraction()}},getScale:function(){return this._scale},setScale:function(z,J){var k,f=this;k=2===arguments.length?{x:z,y:J}:z;var i=f.getScale();(i.x!==k.x||i.y!==k.y)&&(f._scale=k,f.fp("scale",i,k))},getScaleTall:function(){return this._scaleTall},getScale3d:function(){var E=this,a=E._scaleTall,e=E.getScale();return{x:e.x,y:a,z:e.y}},getFinalScale3d:function(){var Y=this,y=Y.getScale3d(),B=Y.s3();return B?[y.x*B[0],y.y*B[1],y.z*B[2]]:[y.x,y.y,y.z]},setScaleTall:function(Y){var H=this,E=H._scaleTall;E!==Y&&(H._scaleTall=Y,H.fp("scaleTall",E,Y))},setScale3d:function(i,C,f){var u,I=this;u="number"==typeof i?{x:i,y:C,z:f}:i.length?{x:i[0],y:i[1],z:i[2]}:i,I.setScaleTall(u.y),I.setScale(u.x,u.z)},getCorners:function(Y,s){Y==c&&(Y=0),s==c&&(s=Y);var Q=this,J=Q.getAnchor(),u=Q.getWidth(),m=Q.getHeight(),y=-u*J.x-Y,d=-m*J.y-s,R=u+2*Y,r=m+2*s,S=Q.getMatrix();return[S.tf(y,d),S.tf(y,d+r),S.tf(y+R,d+r),S.tf(y+R,d)]},getEditControlPoints:function(_,d,q){d==c&&(d=0),q==c&&(q=d);var A=this,J=A.getAnchor(),Y=A.getWidth(),E=A.getHeight(),B=-Y*J.x-d,M=-E*J.y-q,o=Y+2*d,w=E+2*q;if(_)return[{x:B,y:M},{x:B,y:0},{x:B,y:M+w},{x:0,y:M+w},{x:B+o,y:M+w},{x:B+o,y:0},{x:B+o,y:M},{x:0,y:M}];var s=A.getMatrix();return[s.tf(B,M),s.tf(B,0),s.tf(B,M+w),s.tf(0,M+w),s.tf(B+o,M+w),s.tf(B+o,0),s.tf(B+o,M),s.tf(0,M)]},rotateAt:function(D,p,x){var G=this,r=G._position,W=G._64O,M=new Mh(W,r.x,r.y).tf(D,p),P=l(D*D+p*p),z=w(r.y-M.y,r.x-M.x)+x;G.setRotation(W+x),G.p(M.x+P*K(z),M.y+P*o(z))},onParentChanged:function(){rj.superClass.onParentChanged.apply(this,arguments),this._8I()},_8I:function(){this._70O&&this._70O.each(function(s){s._7I()})},onPropertyChanged:function(j){var w=this;rj.superClass.onPropertyChanged.call(w,j),w._69O&&w._69O.each(function(r){r.handleHostPropertyChange(j)}),w._49I&&w._49I.each(function(c){c.fp("agentChange",!0,!1)})},onHostChanged:function(){this.updateAttach()},handleHostPropertyChange:function(E){this.updateAttach(E)},onStyleChanged:function(G){rj.superClass.onStyleChanged.apply(this,arguments),Uq[G]&&this.updateAttach()},updateAttach:function(j){var o=this;o._51I||op||(o._51I=1,o._71O(j),delete o._51I)},_71O:function(F){var U,o,G,$,r,i,d=this,m=d._host,k=F?F.property:c,E=F?F.oldValue:c,e=F?F.newValue:c;if(m instanceof v.Grid){if(k===Dg)d.setElevation(d._54O+e-E);else if(!F||ye[k]){if(U=d.s("attach.row.index"),o=d.s("attach.column.index"),G=m.getCellRect(U,o),!G)return;$=d.s("attach.row.span"),r=d.s("attach.column.span"),(1!==$||1!==r)&&(G=Ll(G,m.getCellRect(U+$-1,o+r-1))),Ab(G,d,"attach.padding",1),d.setRect(G)}}else if(m instanceof qp&&(i=d.s("attach.index"))>=0&&(!F||Hj[k])){var s=d.s("attach.thickness");s!=c&&d.setHeight(m.getThickness()*s);var B=d.s("attach.offset"),V=m.getPoints(),K=V.size();if(K>i){var Y=V.get(i),A=K===i+1?V.get(0):V.get(i+1),N=[A.x-Y.x,A.y-Y.y],t=ig(N);if(t){d.s("attach.offset.relative")&&(B*=t),d.s("attach.offset.opposite")&&(B=t-B);var W={x:Y.x+N[0]/t*B,y:Y.y+N[1]/t*B},_=d.s("attach.gap");_&&(d.s("attach.gap.relative")&&(_*=m.getThickness()),W=wq(c,W,A,_)),d.p(W),d.setRotation(w(N[1],N[0]))}}}else F&&(k===xi?d.translate(e.x-E.x,e.y-E.y):k===Dg?d.setElevation(d._54O+e-E):Pn[k]&&d._11Q(m,k,e-E))},_11Q:function(r,b,z){var T=this,p=r.p3(),E=jo(T.p3(),p),L=Wg(),O=zb[T.getRotationMode()],o=O[0],d=O[1],v=O[2],S=ji[o],N=ji[d],i=ji[v];b===Mo&&(b="rotationY",z=-z),b===Mo+o?(i(L,r[So+v]()),N(L,r[So+d]()),S(L,z),N(L,-r[So+d]()),i(L,-r[So+v]()),T[Cn+o](T[So+o]()+z)):b===Mo+d?(i(L,r[So+v]()),N(L,z),i(L,-r[So+v]()),T[Cn+d](T[So+d]()+z)):b===Mo+v&&(i(L,z),T[Cn+v](T[So+v]()+z)),Vl(E,L),T.p3(p[0]+E[0],p[1]+E[1],p[2]+E[2])},isHostOn:function(t){var K=this;if(K._host&&t&&t._69O)for(var p={},N=K._host;N&&N!==K&&!p[N._id];){if(N===t)return!0;p[N._id]=N,N=N._host}return!1},isLoopedHostOn:function(j){return this.isHostOn(j)&&j.isHostOn(this)},getSerializableProperties:function(){var y=rj.superClass.getSerializableProperties.call(this);return Mj(y,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,anchor:1,anchorElevation:1,scale:1,scaleTall:1,_width:1,_height:1,_tall:1,elevation:1}),y}});var ne=v.Edge=function(i,H){var N=this;Ke(ne,N),N.setSource(i),N.setTarget(H)};Tn("Edge",wn,{_icon:"edge_icon",getUIClass:function(){return Xm},_22Q:function(){return eo},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},setSource:function(A){var v=this;if(v._source!==A){var T=v._source;v._source=A,T&&T._16I(v),A&&A._2I(v),v._7I(),v.fp("source",T,A)}},setTarget:function(b){var J=this;if(J._target!==b){var Y=J._target;J._target=b,Y&&Y._18I(J),b&&b._4I(J),J._7I(),J.fp("target",Y,b)}},isLooped:function(){var L=this;return L._source===L._target&&!!L._source&&!!L._target},_7I:function(){var u,M=this,t=Un(M);M._40I!==t&&(u=this._40I,u&&u._15I(M),M._40I=t,t&&t._1I(M),M.fp("sourceAgent",u,t),rq(u,M._41I),rq(t,M._41I));var z=ws(M);M._41I!==z&&(u=M._41I,u&&u._17I(M),M._41I=z,z&&z._3I(M),M.fp("targetAgent",u,z),rq(u,M._40I),rq(z,M._40I))},_22I:function(_){this._52I=_,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){var f=this;return f._52I&&f._52I.get(0)!==f&&!f.getStyle(Eq)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var w=this,L=w._52I;return L&&!w.getStyle(Eq)&&L.size()>1&&w===L.get(0)},toggle:function(){var g=this._52I,i=!this.s(Eq);g&&g.size()>1&&(g.each(function(K){K.s(Eq,i)}),g.getSiblings().each(function(A){A!==g&&A.each(function(j){j.fp("edgeGroup",c,A)})}))},setStyle:function(I,n){(I===fp||"edge.segments"===I)&&(n=ki(n)),ne.superClass.setStyle.call(this,I,n)},onStyleChanged:function(S){ne.superClass.onStyleChanged.apply(this,arguments),$m[S]&&rq(this._41I,this._40I)},getSerializableProperties:function(){var P=ne.superClass.getSerializableProperties.call(this);return Mj(P,{source:1,target:1}),P}});var ld=v.Group=function(){Ke(ld,this)};Tn("Group",rj,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return Xe},onChildAdded:function(){ld.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(){ld.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var s=this;if(!s._54I&&!op){var H=s.getChildrenRect();H&&(s._53I=1,s.p(Jl(s.s("group.position"),H,s.getSize())),delete s._53I)}},getChildrenRect:function(){var M,o=this;return o.eachChild(function(O){M=Ll(M,o.getChildRect(O))}),M},getChildRect:function(x){var X;return To(x)&&x.s(dk)&&(zs(x)&&x.isExpanded()&&x.eachChild(function(U){X=Ll(X,x.getChildRect(U))}),!X&&x.getRect&&(X=x.getRect())),X},setPosition:function(s,Z){var k=this;if(!k._54I){var d;d=2===arguments.length?{x:s,y:Z}:s,op||k._53I||(k._54I=1,aj(k._children,d.x-k._position.x,d.y-k._position.y),delete k._54I),ld.superClass.setPosition.call(this,d)}},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(y){var z=this;if(z._57O!==y){var Y=z._57O;z._57O=y,z.fp("expanded",Y,z._57O),z._8I()}},_8I:function(){ld.superClass._8I.call(this),this.eachChild(function(s){To(s)&&s._8I()})},onStyleChanged:function(H){ld.superClass.onStyleChanged.apply(this,arguments),"group.position"===H&&this._81I()},getSerializableProperties:function(){var T=ld.superClass.getSerializableProperties.call(this);return T.expanded=1,T}});var Lk=v.Block=function(){Ke(Lk,this)};Tn("Block",rj,{_icon:"block_icon",_clickThroughEnabled:!1,_syncSize:!0,ms_ac:["clickThroughEnabled","syncSize"],getUIClass:function(){return Uk},onChildAdded:function(){Lk.superClass.onChildAdded.apply(this,arguments),this.updateFromChildren()},onChildRemoved:function(){Lk.superClass.onChildRemoved.apply(this,arguments),this.updateFromChildren()},updateFromChildren:function(){var v=this;if(!op&&!v._updatingToChildren&&v._syncSize){var D,e,s,j,L,q=[],Z=v.getRotation();if(v.eachChild(function(F){To(F)&&q.push.apply(q,F.getCorners())}),q.length){v._updatingFromChildren=1;var H=K(-Z),T=o(-Z),C=1/0,_=-1/0,w=1/0,V=-1/0;for(j=0,L=q.length;L>j;j++)s=q[j],D=s.x,e=s.y,s.x=H*D-T*e,s.y=T*D+H*e,C=y(C,s.x),_=W(_,s.x),w=y(w,s.y),V=W(V,s.y);var z=v.getScale();v.setSize($((_-C)/z.x),$((V-w)/z.y));var N;z.x<0&&(N=C,C=_,_=N),z.y<0&&(N=w,w=V,V=N),H=K(Z),T=o(Z);var h=v.getAnchor();D=C+(_-C)*h.x,e=w+(V-w)*h.y,v.setPosition(H*D-T*e,T*D+H*e),delete v._updatingFromChildren}}},setPosition:function(d,h){var y=this;if(!y._updatingToChildren){var Q;Q=2===arguments.length?{x:d,y:h}:d,op||y._updatingFromChildren||(y._updatingToChildren=1,aj(y._children,Q.x-y._position.x,Q.y-y._position.y),delete y._updatingToChildren),Lk.superClass.setPosition.call(this,Q)}},setWidth:function(Z){return this.setSize(Z,this.getHeight())},setHeight:function(q){return this.setSize(this.getWidth(),q)},setSize:function(G,z){1>G&&(G=1),1>z&&(z=1);var A=this;if(!A._updatingToChildren){2!==arguments.length&&(z=G.height,G=G.width);var g=A.getWidth(),e=A.getHeight();if(G!==g&&Lk.superClass.setWidth.call(A,G),z!==e&&Lk.superClass.setHeight.call(A,z),!op&&!A._updatingFromChildren){A._updatingToChildren=1;var x=G/g,t=z/e;A._adjustChildScaleOrSize(x,t,"size"),delete A._updatingToChildren,A.updateFromChildren()}}},_adjustChildScaleOrSize:function(u,p,I){var M=this;if(M._syncSize){var z=M.getPosition(),k=M.getRotation();M.getScale(),M.eachChild(function(P){if(To(P)){var q=P.getPosition(),H=P.getRotation(),i=P.getWidth(),U=P.getHeight(),C=P.getScale(),y=C.x*i,N=C.y*U,O=new Mh(H,q.x,q.y,y,N);O.translate(-z.x,-z.y),O.rotate(-k),H=w(O.b*Math.sign(y),O.a*Math.sign(y)),O.scale(u,p);var Z,G,c,n=K(H);if(Math.abs(n)<.001?(Z=o(H),G=O.b/Z,c=-O.c/Z):(G=O.a/n,c=O.d/n),"scale"===I)P.setScale(G/i,c/U);else if("size"===I){var s=G/C.x,A=c/C.y;P.setScale(Kp(G)*Math.abs(C.x),Kp(c)*Math.abs(C.y)),P.setSize(Math.max(.1,Math.abs(s)),Math.max(.1,Math.abs(A)))}O.rotate(k),O.translate(z.x,z.y),P.setPosition(O.tx,O.ty)}})}},_calcChangeFactor:function(d,z,j,V){var D,U,C,I;return D=$(d),U=$(j),C=D>U?D/U:U/D,D=$(z),U=$(V),I=D>U?D/U:U/D,W(C,I)},setAnchor:function(){var u=this;if(!u._updatingToChildren){var J=u.getAnchor();if(Lk.superClass.setAnchor.apply(u,arguments),!op&&!u._updatingFromChildren&&u._syncSize){u._updatingToChildren=1;var C=u.getAnchor();u.getPosition();var I=u.getSize(),Y=u.getScale(),j=u.getRotation(),H=-I.width*Y.x*(J.x-C.x),w=-I.height*Y.y*(J.y-C.y),F=o(j),y=K(j),D=y*H-F*w,q=F*H+y*w;u.eachChild(function(h){if(To(h)){var O=h.getPosition();h.setPosition(O.x-D,O.y-q)}}),delete u._updatingToChildren}}},setRotation:function(Q){var o=this;if(!o._updatingToChildren){var I=o.getRotation();if(Lk.superClass.setRotation.apply(o,arguments),!op&&!o._updatingFromChildren){o._updatingToChildren=1;var k=o.getPosition(),d=Q-I;o.eachChild(function(o){if(To(o)){var F=o.getMatrix();F.translate(-k.x,-k.y),F.rotate(d),F.translate(k.x,k.y);var e=Math.sign(o.getScale().x);o.setRotation(w(F.b*e,F.a*e)),o.setPosition(F.tx,F.ty)}}),delete o._updatingToChildren}}},setScale:function(Q,p){var H=this;if(!H._updatingToChildren){null==p&&(p=Q.y,Q=Q.x);var z=H.getScale();if($(Q)<.01&&(Q=.01*(Kp(Q)||Kp(z.x))),$(p)<.01&&(p=.01*(Kp(p)||Kp(z.y))),Lk.superClass.setScale.call(H,Q,p),!op&&!H._updatingFromChildren){H._updatingToChildren=1;var t=Q/z.x,j=p/z.y;H._adjustChildScaleOrSize(t,j,"size"),delete H._updatingToChildren,H.updateFromChildren()}}},getSerializableProperties:function(){var Y=Lk.superClass.getSerializableProperties.call(this);return Y.clickThroughEnabled=1,Y.syncSize=1,Y}});var ke=v.Grid=function(){Ke(v.Grid,this)};Tn("Grid",rj,{IRotatable:!1,_icon:"grid_icon",_image:c,getUIClass:function(){return Oo},setRotation:function(){},getCellRect:function(J,H){var C=this,o=C.s("grid.row.count"),R=C.s("grid.column.count");if(0>=o||0>=R||0>J||J>=o||0>H||H>=R)return c;var r,h,t,p=C.getRect(),X=C.s("grid.row.percents"),l=C.s("grid.column.percents");if(Ab(p,C,"grid.border",-1),X&&X._as&&(X=X._as),l&&l._as&&(l=l._as),X&&X.length===o){for(t=0,r=0;J>r;r++)t+=p.height*X[r];p.y+=t,p.height=p.height*X[J]}else p.height=p.height/o,p.y+=p.height*J;if(l&&l.length===R){for(h=0,r=0;H>r;r++)h+=p.width*l[r];p.x+=h,p.width=p.width*l[H]}else p.width=p.width/R,p.x+=p.width*H;return Xc(p,-C.s("grid.gap")),p}});var Jg=v.Text=function(){Ke(Jg,this),this.setSize(100,50),this.s("text","TEXT")};Tn("Text",rj,{_icon:"text_icon",_image:"__text__",getUIClass:function(){return Ni},setWidth:function(n){n||(n=.001),Jg.superClass.setWidth.call(this,n)},setHeight:function(b){b||(b=.001),Jg.superClass.setHeight.call(this,b)},toLabel:function(){return this._displayName||this._name||this.s("text")}}),db("__text__",{width:{value:100,isSafeFunc:!0,func:function(S){return S._width}},height:{value:50,isSafeFunc:!0,func:function(K){return K._height}},comps:[{type:"text",relative:!0,rect:[0,0,1,1],text:{func:"style@text"},align:{func:"style@text.align"},vAlign:{func:"style@text.vAlign"},color:{func:"style@text.color"},font:{func:"style@text.font"},shadow:{func:"style@text.shadow"},shadowColor:{func:"style@text.shadow.color"},shadowBlur:{func:"style@text.shadow.blur"},shadowOffsetX:{func:"style@text.shadow.offset.x"},shadowOffsetY:{func:"style@text.shadow.offset.y"}}]});var qp=v.Shape=function(){Ke(qp,this),this._59O=new Vr};qp.__de__=Xr,Tn("Shape",rj,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return Sc},_22Q:function(){return af},getLength:function(b){return Tq(Al(this._59O,this._58O,b,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var H=this._58O;return H?new Vr(H._as.slice(0)):H},setSegments:function(h){var N=this._58O;h=h?Kh(h)?new Vr(h.slice(0)):new Vr(h._as.slice(0)):null,(N&&h&&N._as.join(",")!==h._as.join(",")||N!==h)&&(this._58O=h,this.fp("segments",N,h))},getPoints:function(){return this._59O},toPoints:function(){var $=this._59O;return new Vr($._as.slice(0))},setPoints:function(k,C){var a=this,Y=a._59O;k=k?Kh(k)?new Vr(k.slice(0)):new Vr(k._as.slice(0)):new Vr;var L,J,z,l,N,S;C&&(L=a.getPosition(),S=new Mh(a.getRotation(),0,0,a.getScale().x,a.getScale().y)),(Y&&k&&Y._as.join(",")!==k._as.join(",")||Y!==k)&&(a._59O=k,a.fs(),a.fp("points",Y,k)),C&&(J=a.getPosition(),z=J.x-L.x,l=J.y-L.y,N=S.tf(z,l),a.setPosition(J.x-z+N.x,J.y-l+N.y))},addPoint:function(o,f,u){var r=this.toPoints();r.add(o,f),this.setPoints(r,u)},setPoint:function(E,X,L){var e=this.toPoints();e.set(E,X),this.setPoints(e,L)},removePointAt:function(i){var _=this.toPoints();_.removeAt(i),this.setPoints(_)},setWidth:function(U){var b=this;if(1>U&&(U=1),!b._55I&&!op&&b.getWidth()){b._55I=1;var V=b._position.x,E=U/b.getWidth(),R=b.toPoints(),B=new Vr;R.each(function(Z){B.add({x:(Z.x-V)*E+V,y:Z.y,e:Z.e})}),b.setPoints(B);var s=b.s("shape.gradient.pack");s&&Xo(s,[E,0,0,1,V*(1-E),0]),b.fs(),delete b._55I}qp.superClass.setWidth.call(b,U)},setHeight:function(Q){var s=this;if(1>Q&&(Q=1),!s._55I&&!op&&s.getHeight()){s._55I=1;var E=s._position.y,z=Q/s.getHeight(),P=s.toPoints(),p=new Vr;P.each(function(X){p.add({x:X.x,y:(X.y-E)*z+E,e:X.e})}),s.setPoints(p);var b=s.s("shape.gradient.pack");b&&Xo(b,[1,0,0,z,0,E*(1-z)]),s.fs(),delete s._55I}qp.superClass.setHeight.call(s,Q)},setAnchor:function(r,C,w){var A=this;if(A._55I=!0,!op){var p,j,g;"number"==typeof r?g={x:r,y:C}:(g=r.length?{x:r[0],y:r[1]}:r,w=C);var O=A.getAnchor(),J=A.getSize();p=J.width*(O.x-g.x),j=J.height*(O.y-g.y),w||A.shiftPoints(p,j);var o=A.getPosition()}if(qp.superClass.setAnchor.apply(A,arguments),!op){var W=A.getPosition();w&&A.shiftPoints(W.x-o.x+p,W.y-o.y+j)}delete A._55I},shiftPoints:function(j,l){var L=this,K=L.toPoints(),P=new Vr;K.each(function($){P.add({x:$.x+j,y:$.y+l,e:$.e})}),L.setPoints(P),L.fs()},setPosition:function(E,f){var h,l=this;if(!l._28Q){if(l._28Q=1,!l._55I&&!op){h=2===arguments.length?{x:E,y:f}:E;var j=h.x-l._position.x,n=h.y-l._position.y;if(0===j&&0===n)return delete l._28Q,void 0;l._55I=1,l.shiftPoints(j,n);var p=l.s("shape.gradient.pack");p&&Xo(p,[1,0,0,1,j,n]),delete l._55I}qp.superClass.setPosition.apply(l,arguments),delete l._28Q}},fs:function(){this.fireShapeChange()},_70I:function(){var O=this;if(2!==O._59O.size())return!1;var X=O._58O;return X?2===X.size()&&1===X.get(0)&&2===X.get(1)?!0:!1:!0},fireShapeChange:function(){var e=this;if(!e._55I&&!op){var z=Ad(e._59O);z&&(e._55I=1,e.setRect(z),delete e._55I)}e.fp(Cc,!1,!0)},getSerializableProperties:function(){var L=qp.superClass.getSerializableProperties.call(this);return L.segments=1,L.points=1,L.thickness=1,L.closePath=1,L}});var $o=v.Polyline=function(){Ke($o,this),this.s({"shape.background":null,"shape.border.width":2})};Tn("Polyline",qp,{IRotatable:!1,_icon:"polyline_icon",_22Q:function(){return wr},getUIClass:function(){return an},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setClosePath:function(){},setTall:function(E){var L=this;if(!L._24Q&&!op&&L.getTall()){L._24Q=1;var K=L._54O,S=E/L.getTall();L._59O.each(function(O){O.e=O.e==c?K:(O.e-K)*S+K}),L.fs(),delete L._24Q}$o.superClass.setTall.call(L,E)},setElevation:function(L){var i=this;if(!i._24Q&&!op){i._24Q=1;var G=L-i._54O;i._59O.each(function(_){_.e==c?_.e=L:_.e+=G}),i.fs(),delete i._24Q}$o.superClass.setElevation.apply(i,arguments)},fireShapeChange:function(){var B=this,k=B._59O;if(!B._24Q&&!op){var G=k.size();if(G){var J=1,i=k.get(0),L=B._54O;i.e==c&&(i.e=L);for(var F=i.e,I=0;G>J;J++){i=k.get(J),i.e==c&&(i.e=L);var H=y(F,i.e),f=W(F+I,i.e);F=H,I=f-H}B._24Q=1,B.setTall(I),B.setElevation(F+I/2),delete B._24Q}}$o.superClass.fireShapeChange.apply(B,arguments)}});var Sb=v.SubGraph=function(){Ke(Sb,this)};Tn("SubGraph",rj,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){Sb.superClass._8I.call(this),this.eachChild(function(q){To(q)&&q._8I()})}});var Pj=v.RefGraph=function(){Ke(Pj,this)};Tn("RefGraph",Lk,{_icon:"refGraph_icon",getRef:function(){return this._ref},setRef:function(l){var K=this._ref;this._ref=l,this.fp("ref",K,l),this._pendingUpdateFromChidlren=!0,this.updateRef()},_21I:function(){Pj.superClass._21I.apply(this,arguments),this.updateRef()},updateRef:function(){var o=this;if(o.clearChildrenFromDataModel(),o._ref&&o._dataModel){o._xhrLoadHandler&&(o._xhrLoadHandler.cancel=!0);var X=op,U=o._xhrLoadHandler=function(A){if(A&&o._dataModel){i.loadingRefGraph=!0;var z=o._pendingUpdateInfo={needToRestore:X};X&&(z.position=o.p(),z.width=o.getWidth(),z.height=o.getHeight(),z.rotation=o.getRotation(),z.anchor=o.getAnchor(),z.scale=o.getScale()),o.p(0,0),o.setAnchor(.5,.5),o.setRotation(0),o.setScale(1,1);var m=i.parse(A),k=o._dataModel.deserialize(m,o,{justDatas:!0});k.each(function(W){W._refGraph=o}),o.checkPendingUpdateInfo(),i.loadingRefGraph=!1,i.handleRefGraphLoaded(o,k,m)}};i.xhrLoad(o._ref,function(I){U.cancel||U(I)})}},checkPendingUpdateInfo:function(){var j=this,r=j._pendingUpdateInfo;if(!r)return j.onPendingUpdated&&j.onPendingUpdated(),void 0;var Y=!0;this.eachChild(function(x){(x._pendingCheckImageJSON||x._pendingUpdateInfo)&&(Y=!1)}),Y&&(j._pendingUpdateInfo=null,j.updateFromChildren(),r.needToRestore&&(j.setSize(r.width,r.height),j.setAnchor(r.anchor),j.setRotation(r.rotation),j.setScale(r.scale),j.p(r.position)),this.getParent()instanceof Pj&&this.getParent().checkPendingUpdateInfo(),j.onPendingUpdated&&j.onPendingUpdated())},getSerializableProperties:function(){var p=Pj.superClass.getSerializableProperties.call(this);return p.ref=1,p}}),v.EdgeGroup=function(r,g){this._70O=r,this._siblings=g;for(var F,x,y=0,n=r.size(),M=D[Eq];n>y;y++)if(F=r.get(y).getStyle(Eq,!1),F!=c){M=F;break}M==c&&(M=!0);var E=i.edgeGroupAgentFunc;for(E&&(x=E(r),x&&x!==r.get(0)&&(r.remove(x),r.add(x,0))),y=0;n>y;y++)r.get(y).s(Eq,M)},Tn("EdgeGroup",G,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(q){return this._70O.get(q)},indexOf:function(w){return this._70O.indexOf(w)},each:function(f,M){this._70O.each(f,M)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(j,z){this._siblings.each(function(r){r._70O.each(j,z)})}});var kp=v.JSONSerializer=function(U,H){this.dm=this._dataModel=U,this._hierarchical=i.forceHierarchicalSerialization?!0:H==c?U.isHierarchicalRendering():H};Tn("JSONSerializer",G,{ms_ac:["hierarchical"],serialize:function(T){return i.stringify(this.toJSON(),T)},toJSON:function(){var w=this,V=w.dm,_=V.getRoots(),S=w.json={v:i.getVersion(),p:{},a:{},d:[]},t=V.getSerializableAttrs();V.getInit()&&(S.init=V.getInit()),V.getName()&&(S.p.name=V.getName()),V.getBackground()&&(S.p.background=V.getBackground()),V.getLayers()&&(S.p.layers=V.getLayers()),S.p.autoAdjustIndex=V.isAutoAdjustIndex(),S.p.hierarchicalRendering=V.isHierarchicalRendering();for(var P in t){var A=V.a(P);A!==M&&w[Ol](P,A,S.a)}return Gb(S.a)&&delete S.a,w._hierarchical?_.each(w.serializeData,this):V.each(function(g){w.serializeData(g)}),S},isSerializable:function(){return!0},getProperties:function(M){return M.getSerializableProperties()},getStyles:function(s){return s.getSerializableStyles()},getAttrs:function(X){return X.getSerializableAttrs()},serializeData:function(R){var G=this;if(G.isSerializable(R)&&!R._refGraph){var t,o,E,J,w=Nm(R.getClassName())||R.getClass(),B=new w,s={c:R.getClassName(),i:R.getId(),p:{},s:{},a:{}};G.json.d.push(s),t=G.getProperties(R);for(o in t)/^_/.test(o)?(E=R[o],E!==B[o]&&G[Ol](o.substr(1),E,s.p)):(J=Pg(o),R[J]&&(E=R[J](),E!==B[J]()&&G[Ol](o,E,s.p)));t=G.getStyles(R);for(o in t)E=R.s(o),E!==B.s(o)&&G[Ol](o,E,s.s);t=G.getAttrs(R);for(o in t)E=R.a(o),E!==B.a(o)&&G[Ol](o,E,s.a);Gb(s.p)&&delete s.p,Gb(s.s)&&delete s.s,Gb(s.a)&&delete s.a}G._hierarchical&&R.getChildren().each(G.serializeData,G)},serializeValue:function(_,g,a){kk(g)?g={__a:g._as}:g instanceof wn&&(g={__i:g.getId()}),a[_]=g},deserialize:function(s,z,J){op=!0,J=po(J)?{setId:J}:J||{};var I=this;s=I.json=Ul(s)?i.parse(s):s,I._82I={};var $=I.dm,V=new Vr,Q=new Vr,H=0,f=s.d.length;if(J.justDatas||(sq(s.init)&&s.init($),$.setInit(s.init)),!J.justDatas){for(var K in s.a)$.a(K,I[zp](s.a[K]));for(var v in s.p)$[zq(v)](s.p[v])}for(;f>H;H++){var n=s.d[H],A=Nm(n.c),G=new A,F=n.i;J.setId&&F!=c&&(G._id=F),I._82I[F]=G,V.add(G),Q.add(n)}for(H=0;f>H;H++)I.deserializeData(V.get(H),Q.get(H));return V.each(function(_){z&&!_.getParent()&&_.setParent(z),$.add(_)}),op=!1,V},deserializeData:function(M,l){for(var I in l.p)M[zq(I)](this[zp](l.p[I]));for(I in l.s)M.s(I,this[zp](l.s[I]));for(I in l.a)M.a(I,this[zp](l.a[I]))},deserializeValue:function(z){if(vf(z)){var H=z.__i;if(H!=c)return this._82I[H];if(H=z.__a,Kh(H))return new Vr(H)}return z}}),Mj(pm,{serialize:function(V,E){return new kp(this,E).serialize(V)},toJSON:function(x){return new kp(this,x).toJSON()},deserialize:function(V,Z,w){return new kp(this).deserialize(V,Z,w)}}),bh.GraphView=function(U){var T=this;T._24I={},T._34I=new Vr,T._25I={},T._56I={},T._view=fi(1,T),T._canvas=nq(T._view),T.dm(U?U:new pm),T.setEditable(!1),T.setScrollBarVisible(i.graphViewScrollBarVisible)},On("GraphView",G,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:[ij,Zb,pp,ml,"resettable","editInteractor",Mn,"pannable","rectSelectable","autoScrollZone",pd,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","anchorEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_resettable:i.graphViewResettable,_pannable:i.graphViewPannable,_rectSelectable:i.graphViewRectSelectable,_autoScrollZone:i.graphViewAutoScrollZone,_rectSelectBackground:i.graphViewRectSelectBackground,_rectSelectBorderColor:i.graphViewRectSelectBorderColor,_editPointSize:i.graphViewEditPointSize,_editPointBorderColor:i.graphViewEditPointBorderColor,_editPointBackground:i.graphViewEditPointBackground,_scrollBarColor:tm,_scrollBarSize:Lj,_autoHideScrollBar:Gc,_autoMakeVisible:rh,getLayers:function(){return this._dataModel.getLayers()},setLayers:function(K){this._dataModel.setLayers(K)},setEditable:function(D){var E=this,q=bh.XEditInteractor;D?(E._uieditable=!0,E.setInteractors([new qk(E),new md(E),q?new q(E):new $p(E),new Cq(E),new Eh(E),new Ee(E,{editable:!1})])):(E._uieditable=!1,E.setInteractors([new qk(E),new md(E),new Cq(E),new Eh(E),new Ee(E,{editable:!1})]))},getCanvas:function(){return this._canvas},_33I:function(Q){var H=Q.getUIClass();return H?new H(this,Q):c},getDataUI:function(g){var E=this,i=E._25I[g._id];return i===M&&(i=E._33I(g),E._25I[g._id]=i),i},getNodeRect:function(X){return i.getNodeRect(this,X)},getEdgeInfo:function(L){var S=this.getDataUI(L);return S?(S._79o(),S._78o):null},getEdgeSourcePosition:function(d){var P=this,$=P.getDataUI(d),L=$.s,O=$._data._40I;return mb(P,O,L("edge.source.position"),L("edge.source.offset.x"),L("edge.source.offset.y"),L("edge.source.anchor.x"),L("edge.source.anchor.y"))},getEdgeTargetPosition:function(U){var h=this,E=h.getDataUI(U),f=E.s,t=E._data._41I;return mb(h,t,f("edge.target.position"),f("edge.target.offset.x"),f("edge.target.offset.y"),f("edge.target.anchor.x"),f("edge.target.anchor.y"))},invalidateAll:function($){var d=this;if($){for(var J in d._25I){var E=d._25I[J];E&&E.dispose()}d._25I={},d._56I={},d._24I={},d._34I.clear(),d.redraw()}else d.dm().each(function(j){d.invalidateData(j)})},invalidateSelection:function(){var S=this;S.sm().each(function(n){S.invalidateData(n)})},invalidateData:function(j){var x=this;x._24I[j._id]=j,x._21Q(j),x.iv()},_21Q:function(g){var S=this,q=S._24I;if(ck(g)&&xp[g.s(Ar)]){var W=g.getSourceAgent();W&&W.getAgentEdges().each(function($){q[$._id]=$}),W=g.getTargetAgent(),W&&W.getAgentEdges().each(function(M){q[M._id]=M}),S.iv()}},redraw:function(h){var L=this;L._32I||(h?L._34I.add(h):(L._32I=1,L._34I.clear()),L.iv())},each:function(J,Q){var q,x,L,y=0,j=this.getLayers(),t=this._dataModel,B=t._datas._as,k=B.length;if(j){for(var w=j.length;w>y;y++)if(L=j[y],vf(L)&&(L=L.name),t.isHierarchicalRendering()){var Z=function(a){return a._layer===L?Q?J.call(Q,a):J(a):void 0};if(this._dataModel.eachByHierarchical(Z)===!1)return}else for(var F=0;k>F;F++)if(q=B[F],q._layer===L&&(x=Q?J.call(Q,q):J(q),x===!1))return}else if(t.isHierarchicalRendering())this._dataModel.eachByHierarchical(J,null,Q);else for(;k>y;y++)if(q=B[y],x=Q?J.call(Q,q):J(q),x===!1)return},reverseEach:function(h,y){var o,x,R,L,$=this._dataModel,u=$._layers,M=$._datas._as,z=M.length;if(u){for(o=u.length-1;o>=0;o--)if(L=u[o],vf(L)&&(L=L.name),$.isHierarchicalRendering()){var k=function(Y){return Y._layer===L?y?h.call(y,Y):h(Y):void 0};if($.reverseEachByHierarchical(k)===!1)return}else for(var C=z-1;C>=0;C--)if(x=M[C],x._layer===L&&(R=y?h.call(y,x):h(x),R===!1))return}else if($.isHierarchicalRendering())$.reverseEachByHierarchical(h,null,y);else for(o=z-1;o>=0;o--)if(x=M[o],R=y?h.call(y,x):h(x),R===!1)return},getViewRect:function(){return this._29I},getContentRect:function(){var m=this,Q=m._84I;if(!Q){var i=this.dm().a("width"),G=this.dm().a("height");i>0&&G>0?m._84I={x:0,y:0,width:i,height:G}:(m.each(function(a){m.isVisible(a)&&(Q=Ll(Q,m.getDataUIBounds(a)))}),m._84I=Q?Q:ln)}return m._84I},getScrollRect:function(){return Ll(this.getContentRect(),this._29I)},makeCenter:function(t,V,j){var x=this;if(!x.getWidth()||!x.getHeight())return j||Cf(x.centerData,x,[t,V,!0],200),void 0;x.makeVisible(t),x.validate();var $=x.getDataUIBounds(t);if($){var p=x.getWidth(),I=x.getHeight(),G=$.x+$.width/2,T=$.y+$.height/2,d=-G*x._zoom+p/2,C=-T*x._zoom+I/2;x.setTranslate(d,C,V)}},fitData:function(d,E,X,o,W){var L=this;if(!L.getWidth()||!L.getHeight())return W||Cf(L.fitData,L,[d,E,X,o,!0],200),void 0;var h=function(){L.makeVisible(d),L.validate();var F=L.getDataUIBounds(d);F&&(F=Wk(F),Xc(F,X==c?20:X),L.fitRect(F,E,o))};E?i.callWhenLoaded(h):h()},fitContent:function(A,W,S,w){var B=this;if(!B.getWidth()||!B.getHeight())return w||Cf(B.fitContent,B,[A,W,S,!0],200),void 0;var T=function(){B.validate();var i=Wk(B.getContentRect());Xc(i,W==c?20:W),B.fitRect(i,A,S)};A?i.callWhenLoaded(T):T()},fitRect:function(O,e,m){var r=this,i=r.getWidth(),I=r.getHeight(),H=O.x+O.width/2,Q=O.y+O.height/2,A=y(i/O.width,I/O.height),X=r._zoom,x=-H*X+i/2,V=-Q*X+I/2;0===A||isNaN(A)||(m&&(A=y(1,A)),e?r.setTranslate(x,V,{finishFunc:function(){r.setZoom(A,e)}}):(r.setTranslate(x,V),r.setZoom(A)))},toCanvas:function(c,h){h=h||this._zoom,this.validateImpl();var v=this,S=v.getContentRect();S.width||(S.width=10),S.height||(S.height=10);var Z=nq(),T=S.x*h,B=S.y*h,p=S.width*h,O=S.height*h;ge(Z,p,O,1);var f=Wb(Z);return c=c||this._dataModel.getBackground(),c&&lo(f,0,0,p,O,c),sj(f,-T,-B),f.scale(h,h),v._42(f),f.restore(),Z},toDataURL:function(U,q,E){return this.toCanvas(U,E).toDataURL(q||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(Q,M){var I,Y,j=this;j._93db(Q,M),j.each(function(L){j._56I[L._id]&&(I=j.getDataUI(L),I&&(Y=I._79o(),v.HtmlNode&&L instanceof v.HtmlNode?I._42(Q):(!M||Re(M,Y))&&I._42(Q)))}),j._92db(Q,M)},validateImpl:function(){var N,n,C,c,i,d=this,U=d.tx(),Y=d.ty(),w=d._zoom,l=d._canvas,L=this.getWidth(),P=this.getHeight(),k=d._29I,m={x:-U/w,y:-Y/w,width:L/w,height:P/w},T={},p=d._34I,M=d._24I,z=d._32I,r=d._23I;d._24I={},(L!==l.clientWidth||P!==l.clientHeight)&&(ge(l,L,P),z=1),z||Bn(m,k)||(z=1),d._29I=m,d.each(function(E){n=E._id;var K=T[n]=d.isVisible(E);K!==d._56I[n]&&(M[n]=E,C=d.getDataUI(M[n]),C&&C._84o(K),d._84o(E,K))},d);for(n in M)C=d.getDataUI(M[n]),C&&(!z&&d._56I[n]&&(i=C._79o(),i&&p.add(i)),C.invalidate()),d._83I=1;if(d._56I=T,!z)for(n in M)T[n]&&(C=d.getDataUI(M[n]),C&&(i=C._79o(),i&&p.add(i)));if(z?c=m:(p.each(function(e){Re(m,e)&&(c=Ll(c,e))}),c&&(Xc(c,W(1,1/w)),c.x=e(c.x*w)/w,c.y=e(c.y*w)/w,c.width=x(c.width*w)/w,c.height=x(c.height*w)/w,c=lj(m,c))),d._74O=c,c&&(N=Wb(l),Ch(N,U,Y,w),N.beginPath(),N.rect(c.x,c.y,c.width,c.height),N.clip(),N.clearRect(c.x,c.y,c.width,c.height),d._42(N,c),N.restore(),delete d._74O),p.clear(),delete d._32I,r&&L>0&&P>0){var C=d.getDataUI(r);if(C){var i=C._79o(),H=d._29I,G=H.x,E=H.y,R=H.width,q=H.height,w=d._zoom;i&&!Re(i,H)&&(i.x+i.width<G&&d.tx(-i.x*w),i.x>G+R&&d.tx(-(i.x+i.width-R)*w),i.y+i.height<E&&d.ty(-i.y*w),i.y>E+q&&d.ty(-(i.y+i.height-q)*w))}delete d._23I}d._83I&&(delete d._83I,delete d._84I),d._98O(),Gb(d._24I)||Cf(d.iv,d)},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(j){var X=this;j!==X.isScrollBarVisible()&&(j?(Rf(X._view,X._79O=us()),Rf(X._79O,X._27I=us()),Rf(X._79O,X._28I=us())):(Ye(X._79O),delete X._79O,delete X._27I,delete X._28I),X.fp("scrollBarVisible",!j,j))},showScrollBar:function(){var A=this;A._79O&&(A._85I||(a(function(){A._86I()},ak),A.iv()),A._85I=new Date)},_86I:function(){var V=this;if(V._85I){var X=new Date,u=X.getTime();u-V._85I.getTime()>=ak?(delete V._85I,V.iv()):a(function(){V._86I()},ak)}},_98O:function(){var T=this,n=this._27I,Q=this._28I;if(T._79O){if(T._autoHideScrollBar&&!T._85I)return n.style.visibility=Ck,Q.style.visibility=Ck,void 0;var p=T.getScrollBarColor(),D=T._zoom,t=T.getScrollBarSize(),j=T.getViewRect(),N=T.getScrollRect(),q=j.height*D,b=N.height*D,g=j.width*D-t-2,Z=q*((j.y-N.y)*D/b),R=q*(q/b),v=n.style;
b-.5>q?(fr>R&&(Z=Z+R/2-fr/2,0>Z&&(Z=0),Z+fr>q&&(Z=q-fr),R=fr),gg(n,g,Z,t,R),v.visibility=gq,v.background=p,v.borderRadius=t/2+xc):v.visibility=Ck;var J=j.width*D,i=N.width*D,Z=j.height*D-t-2,g=J*((j.x-N.x)*D/i),$=J*(J/i),v=Q.style;i-.5>J?(fr>$&&(g=g+$/2-fr/2,0>g&&(g=0),g+fr>J&&(g=J-fr),$=fr),gg(Q,g,Z,$,t),v.visibility=gq,v.background=p,v.borderRadius=t/2+xc):v.visibility=Ck}},setDataModel:function(S){var x=this,j=x._dataModel,H=x._selectionModel;j!==S&&(j&&(j.ump(x.handleDataModelPropertyChange,x),j.umm(x.handleDataModelChange,x),j.umd(x.handleDataPropertyChange,x),j.removeIndexChangeListener(x._75O,x),j.removeHierarchyChangeListener(x.handleHierarchyChange,x),H||j.sm().ums(x.handleSelectionChange,x)),x._dataModel=S,S.mp(x.handleDataModelPropertyChange,x),S.mm(x.handleDataModelChange,x),S.md(x.handleDataPropertyChange,x),S.addIndexChangeListener(x._75O,x),S.addHierarchyChangeListener(x.handleHierarchyChange,x),H?H._21I(S):S.sm().ms(x.handleSelectionChange,x),x.invalidateAll(!0),x.fp(Nh,j,S),x._canvas.style.background=S.getBackground()||"")},getLayersInfo:function(){if(this._layersInfo===M){var _=this.getLayers();_?(this._layersInfo={},_.forEach(function(z){var b=vf(z)?z.name:z;this._layersInfo[b]=z},this)):this._layersInfo=null}return this._layersInfo},updateLayers:function(){this._layersInfo=M,this.invalidateSelection(),this.redraw()},handleDataModelPropertyChange:function($){if("background"===$.property){var Q=this._canvas.style.background,y=$.newValue||"";this._canvas.style.background=y,this.fp("canvasBackground",Q,y)}else"a:width"===$.property||"a:height"===$.property?(this._83I=1,this.redraw()):"layers"===$.property?this.updateLayers():"hierarchicalRendering"===$.property&&this.redraw()},handleDataPropertyChange:function(_){this.dm().isHierarchicalRendering()&&"parent"===_.property&&_.data.hasChildren()&&this.redraw(),this.invalidateData(_.data)},onPropertyChanged:function(p){var v=this,Q=p.property;if(v.redraw(),"zoom"===Q){var W=v.sm().getSelection();W.size()&&W.each(function(P){P.invalidate()})}Qh[Q]?v.showScrollBar():Q===Mn&&v.onCurrentSubGraphChanged(p)},onCurrentSubGraphChanged:function(){this.sm().cs(),this.reset()},handleDataModelChange:function(f){var z=this,R=f.kind,p=f.data;if(z._83I=1,"add"===R)z.invalidateData(p),ck(p)&&p.getEdgeGroup()&&p.getEdgeGroup().eachSiblingEdge(z.invalidateData,z);else if(R===Yl){z._21Q(p);var O=p._id,m=z._25I[O];if(m){if(z._56I[O]){var i=m._79o();i&&z.redraw(i)}m.dispose(),delete z._25I[O],delete z._24I[O],delete z._56I[O]}p===z._currentSubGraph&&z.setCurrentSubGraph(c)}else R===nb&&(z.invalidateAll(!0),z.setCurrentSubGraph(c))},_75O:function(p){this.invalidateData(p.data)},handleHierarchyChange:function(Q){this.dm().isHierarchicalRendering()&&Q.data.hasChildren()&&this.redraw(),this.invalidateData(Q.data)},adjustIndex:function(L){var $=this;if($.isVisible(L)){for(var G=L;G._parent&&$.isVisible(G._parent);)G=G._parent;G&&G!==L&&$._dataModel.adjustIndex(G),$._dataModel.adjustIndex(L)}},getImage:function(r){return r.getImage()},getSelectWidth:function(n){return n.s("select.width")},isSelectable:function(R){if(!this._clickThroughChecking&&R.getParent()instanceof Lk&&R.getParent().isSyncSize())return!1;var Y=this.getLayersInfo();if(Y){var O=Y[R._layer];if(O&&O.selectable===!1)return!1}return R.s("2d.selectable")&&this.sm().isSelectable(R)},isMovable:function(e){var R=this;if(ck(e)&&e.getStyle(Ar)!==yc)return!1;var X=this.getLayersInfo();if(X){var q=X[e._layer];if(q&&q.movable===!1)return!1}return e.s("2d.movable")?R._movableFunc?R._movableFunc(e):!0:!1},isEditable:function(s){var o=this;if(v._uiSerializing)return o._uieditable;if(!o._editInteractor||!o.isSelected(s))return!1;if(zs(s)){var E=o.getDataUI(s);if(!E||E._88I)return!1}if(ck(s)&&s.getStyle(Ar)!==yc)return!1;var l=this.getLayersInfo();if(l){var Q=l[s._layer];if(Q&&Q.editable===!1)return!1}return s.s("2d.editable")?o._editableFunc?o._editableFunc(s):!0:!1},handleDelete:function(){this._editInteractor&&(this._editInteractor.handleDelete?this._editInteractor.handleDelete():this.removeSelection())},isPointEditable:function(g){return To(g)&&0!==g.getRotation()?!1:this._pointEditableFunc?this._pointEditableFunc(g):!0},isRectEditable:function(E){return this._rectEditableFunc?this._rectEditableFunc(E):!0},isAnchorEditable:function($){return this._anchorEditableFunc?this._anchorEditableFunc($):!0},isRotationEditable:function(K){return K.setRotation&&K.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(K):!0:!1},getRotationPoint:function(H){var g=H.getAnchor(),n=H.getScale(),l=this._zoom,r=zj(H.getRotation(),0,-H.getHeight()*n.y*g.y-(n.y<0?-1:1)*(cn?32:16)/l),G=H.p();return r.x+=G.x,r.y+=G.y,r},getLogicalPoint:function(b){var u=this;return _k(b,u._canvas,u.tx(),u.ty(),u._zoom,u._zoom)},getSelectedDataAt:function(u){var b=this;return this.getDataAt(u,function(y){return b.isSelected(y)})},getDataAt:function(p,m,h){p.target&&(p=this.lp(p));var B,E=this._zoom;return this.reverseEach(function(l){return(m?m(l):this.isSelectable(l))&&this.rectIntersects(l,hk(p.x,p.y,h,E))?(B=l,!1):void 0},this),B},getIconInfoAt:function(C,x){var q=this;if(C.target&&(C=q.lp(C)),x||(x=q.getDataAt(C)),x){var s=q.getDataUI(x);if(s&&s._38o){var d,U=s._38o,Q=new Vr;for(d in U.icons)Q.add(d);for(var y=Q.size()-1;y>=0;y--){d=Q.get(y);for(var A=U.rects[d],N=A.rotation,B=A.length-1;B>=0;B--){var f=A[B],I=f.width,u=f.height,Y={x:C.x-f.x-I/2,y:C.y-f.y-u/2};N!=c&&(Y=zj(-N,Y.x,Y.y));var f={x:-I/2,y:-u/2,width:I,height:u};if(nl(f,Y))return{key:d,index:B,name:U.icons[d].names[B],rect:A[B],point:C,rotation:N,relativeRect:f,relativePoint:Y,data:x}}}}}return c},getDatasInRect:function(w,U,B){B===M&&(B=1);var r=this,_=new Vr;return r.reverseEach(function(C){B&&!r.isSelectable(C)||(U?r.rectIntersects(C,w):r.rectContains(C,w))&&_.add(C)}),_},moveSelection:function(U,F){var f,b=this,n=b.dm();n&&(f=n.getHistoryManager()),f&&f.beginInteraction(),aj(b.sm().toSelection(b.isMovable,b),U,F),f&&f.endInteraction()},moveDatas:function(J,b,M){var a,A=this,d=A.dm();d&&(a=d.getHistoryManager()),a&&a.beginInteraction(),J instanceof Vr||(J=new Vr(J)),aj(J,b,M),a&&a.endInteraction()},getDataUIBounds:function(E){var a=this.getDataUI(E);return a?a._79o():c},drawData:function(V,P){var S=this.getDataUI(P);S&&(S._79o(),S._42(V)),P instanceof v.Block&&P.eachChild(function(y){this.drawData(V,y)},this)},getBoundsForGroup:function(k){return k.s(dk)?this.getDataUIBounds(k):c},rectIntersects:function(W,_){this.validate();var T=c;if(this._56I[W._id]){var A=this._25I[W._id];if(A){var w=A._79o();if(qr(_,w))T=!0;else if((_=lj(_,w))&&(A.rectIntersects&&(T=A.rectIntersects(_)),T==c)){if(!W.s("pixelPerfect"))return!0;var x=_.x,d=_.y,B=_.width,H=_.height,C=this._zoom,t=i.hitMaxArea,l=B*H*C*C;if(l>t){var O=Math.sqrt(t/l);C*=O}if(B*=C,H*=C,1>B||1>H)kr=c;else{x*=C,d*=C;var k=Bq(B,H);sj(k,-x,-d),k.scale(C,C),this._drawForChecking=!0,this.drawData(k,W),this._drawForChecking=!1;try{for(var S=0,q=k.getImageData(0,0,B,H).data;S<q.length;S+=4)if(0!==q[S+3]){T=!0;break}k.restore()}catch(I){kr=c,T=!0}}}}}return T?!0:!1},rectContains:function(W,l){if(this._56I[W._id]){var $=this._25I[W._id];if($)return qr(l,$._79o())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(W){if(!i.isInput(W.target)){var _=this,b=_._focusData,t=b&&_._25I[b._id],q=0,R=_._dataModel._datas;if(!(b&&b._enabled&&b._editable&&t&&t.onKeyDown&&t.onKeyDown(W)===!0))if(9===W.keyCode&&(b&&(q=R.indexOf(b),Of(W)?-1===--q&&(q=0):++q===R.size()&&(q=0)),_._focusData=b=R.get(q),_.sm().setSelection(b)),Fj(W)?_.selectAll():Qj(W)&&_.isResettable()&&_.reset(),_.sm().isEmpty()){if(_._editing)return;var M=_.tx(),N=_.ty(),E=!1,p=Of()?100:10;gc(W)&&(M-=p,E=!0),np(W)&&(N-=p,E=!0),Ag(W)&&(M+=p,E=!0),Ic(W)&&(N+=p,E=!0),E&&_.setTranslate(M,N)}else{Mf(W)&&_.handleDelete(W);var A=Of()?10:1;gc(W)&&(_.moveSelection(-A,0),_.fi({kind:"moveLeft"})),np(W)&&(_.moveSelection(0,-A),_.fi({kind:"moveUp"})),Ag(W)&&(_.moveSelection(A,0),_.fi({kind:"moveRight"})),Ic(W)&&(_.moveSelection(0,A),_.fi({kind:"moveDown"}))}}},handleScroll:function(v,i){lg(v);var Z=this.lp(v);i>0?this.scrollZoomIn(Z):0>i&&this.scrollZoomOut(Z)},handlePinch:function(K,F,P){this._68I||(F>P?this.pinchZoomIn(K):this.pinchZoomOut(K))},checkDoubleClickOnNote:function(C,K){var s=this,B=s.lp(C),p=s.getDataUI(K),g=p.note2Info;return g&&K.s("note2.toggleable")&&nl(g.clickRect,B)?(K.s(kb,!K.s(kb)),s.fi({kind:"toggleNote2",event:C,data:K}),!0):(g=p.noteInfo,g&&K.s("note.toggleable")&&nl(g.clickRect,B)?(K.s(Dk,!K.s(Dk)),s.fi({kind:"toggleNote",event:C,data:K}),!0):!1)},_84o:function(){},isNoteVisible:function(){return this._zoom>.15},isLabelVisible:function(){return this._zoom>.15},isEditVisible:function(){return this._zoom>.15},autoScroll:function(N,v){var Y=this,c=Y.getAutoScrollZone(),W=c/Y.getZoom(),I=c/4,i=Y._29I,p=Y.lp(N),S={x:Y.tx(),y:Y.ty()};return p&&c>0&&i&&(p.x-i.x<W?Y.translate(I,0):i.x+i.width-p.x<W&&Y.translate(-I,0),p.y-i.y<W?Y.translate(0,I):i.y+i.height-p.y<W&&Y.translate(0,-I)),S.x=Y.tx()-S.x,S.y=Y.ty()-S.y,v&&(v.x+=S.x,v.y+=S.y),S},getMoveMode:function(J,n){var i=n.s("2d.move.mode");return i?i:kf["88"]?"x":kf["89"]?"y":"xy"},getSerializableProperties:function(){return{scrollBarColor:1,scrollBarSize:1,autoMakeVisible:1,autoHideScrollBar:1,editable:1,resettable:1,pannable:1,rectSelectable:1,autoScrollZone:1,visibleFunc:1,movableFunc:1,editableFunc:1,pointEditableFunc:1,rectEditableFunc:1,anchorEditableFunc:1,rotationEditableFunc:1,rectSelectBackground:1,rectSelectBorderColor:1,editPointSize:1,editPointBorderColor:1,editPointBackground:1,hoverDelay:1,dataModel:1,selectionModel:1,currentSubGraph:1,zoom:1,translateX:1,translateY:1}},serializeProperty:function(O,u,h){var y=this;return"currentSubGraph"===u?{__i:O.getId()}:h.serializeProperty(O,u,y)},deserializeProperty:function(K,g,A){var r=this;if("currentSubGraph"===g){var o=r.dm(),E=o.__idMap;return E[K.__i]}return A.deserializeProperty(K,g,r)}});var Ok=function(e,v){var A=this;A.gv=e,A.s=function(n){return v.getStyle(n)},A._data=v,A._87I=new Vr};hd(Ok,G,{_6I:c,ms_icons:1,_84o:function(){},dispose:function(){},isShadowed:function(){return this.s("shadow")||this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},getSelectWidth:function(){var X=this,j=X.gv.isSelected(X._data);return!j||X.isShadowed()?0:X.gv.getSelectWidth(X._data)},getBodyColor:function(g){var f=this._data,B=this.gv.getBodyColor(f);return B?B:g?f.getStyle(g):c},_2Q:function(K){return this.s(K)},_1Q:function(o,t,i,p){var W=this.s,T=W(t+".dash.color");o.strokeStyle=T,o.lineWidth=i,o.stroke(),W(t+".dash.3d")&&Jq(o,T,W(t+".dash.3d.color"),i,this.gv._zoom,W(t+".dash.3d.accuracy")),xn(o,p)},invalidate:function(){this._6I=c},_79o:function(){var I=this;if(!I._6I){I.labelInfo=I.label2Info=I.noteInfo=I.note2Info=I._38o=c,I._87I.clear(),I._3O();var z=I._data,Q=I.gv;I._55O=Q.isEditable(z)?{_42O:Q.isRectEditable(z),_43O:Q.isPointEditable(z),_56O:Q.isRotationEditable(z)}:c,I._6I=I._81o()}return I._6I},_3O:function(){},getPosition:function(){return ln},_68o:function(J,Z){J&&this._87I.add(go(J,Z))},_81o:function(){var S=this,H=S.s;S._24O(Pp,"getLabel"),S._24O(zo,"getLabel2"),S._26O(hr,"getNote"),S._26O(ip,"getNote2"),S._15O(),S._55O&&S._48O();var K;if(S._87I.each(function(h){K=Ll(K,h)}),K&&S.isShadowed()){var E=Wk(K);E.x+=H("shadow.offset.x"),E.y+=H("shadow.offset.y"),Xc(E,H("shadow.blur")),K=Ll(K,E)}return S._87I.clear(),K},_42:function(K){var H=this,n=H._data,v=H.gv,$=H.s,Z=$("opacity"),i=this.isShadowed();if(i){var C=K.shadowOffsetX,E=K.shadowOffsetY,P=K.shadowBlur,f=K.shadowColor,R=v.getZoom();K.shadowOffsetX=$("shadow.offset.x")*R,K.shadowOffsetY=$("shadow.offset.y")*R,K.shadowBlur=$("shadow.blur")*R,K.shadowColor=$("select.color")}if(Z!=c){var A=K.globalAlpha;K.globalAlpha=Z}H._80o(K),v.isLabelVisible(n)&&((!v._drawForChecking||$("label.selectable"))&&_i(K,H.labelInfo),(!v._drawForChecking||$("label2.selectable"))&&_i(K,H.label2Info)),v.isNoteVisible(n)&&(Sg(K,H.noteInfo),Sg(K,H.note2Info)),H._99O(K),Z!=c&&(K.globalAlpha=A),i&&(K.shadowOffsetX=C,K.shadowOffsetY=E,K.shadowBlur=P,K.shadowColor=f)},_80o:function(){},_47O:function(){},_24O:function(h,L){var T=this,x=T._data,g=T.gv,M=T.s,D=g[L](x);if(D!=c){var R=M(h+".scale"),w=M(h+".max"),G=M(h+".position"),a=T[h+"Info"]={label:D,scale:R,color:g[L+"Color"](x),font:M(h+".font"),opacity:M(h+".opacity"),align:M(h+".align"),rotation:T.getRotation(M(h+".rotation"),!1,G),background:g[L+"Background"](x)},B=Yi(a,D);w>0&&w<B.width&&(a.labelWidth=B.width,B.width=w),1!==R&&(B.width*=R,B.height*=R);var e=T.getPosition(G,M(h+".offset.x"),M(h+".offset.y"),B,M(h+".position.fixed"));if(B.x=e.x-B.width/2,B.y=e.y-B.height/2,T._68o(a.rect=B,a.rotation),1!==R){var X=B.width/R,i=B.height/R;a.rect={x:e.x-X/2,y:e.y-i/2,width:X,height:i}}}},_26O:function(A,T){var Q=this,U=Q.gv,$=Q._data,p=Q.s,Y=U[T]($);if(Y!=c){var v,K,P=p(A+".scale"),B=Q[A+"Info"]={note:Y,scale:P,data:$,view:U,expanded:p(A+".expanded"),font:p(A+".font"),color:p(A+".color"),opacity:p(A+".opacity"),align:p(A+".align"),icon:p(A+".icon"),backgroundImage:p(A+".backgroundImage"),borderWidth:p(A+".border.width"),borderColor:p(A+".border.color"),background:U[T+"Background"]($)},r=Q.getPosition(p(A+".position"),p(A+".offset.x"),p(A+".offset.y")),f=r.x,b=r.y;if(B.expanded){var t,i=p(A+".max"),l=p(A+".backgroundImage");l?(l=id(l),t={width:lc(l,$),height:sf(l,$)}):t=Yi(B,Y),t.width+=6,t.height+=2,i>0&&i<t.width&&(B.labelWidth=t.width,t.width=i),v=t.width,K=t.height+8,B.clickRect={x:f-v*P/2,y:b-K*P,width:v*P,height:K*P*t.height/K}}else{var z=p(A+".icon");z?(z=id(z),v=lc(z,$),K=sf(z,$)):(v=12,K=18),B.clickRect={x:f-v*P/2,y:b-K*P,width:v*P,height:K*P}}B.rect={x:f-v/2,y:b-K*P/2-K/2,width:v,height:K};var e=x(B.borderWidth/2)*P;Q._68o({x:f-v*P/2-e,y:b-K*P-e,width:v*P+2*e,height:K*P+2*e})}},_48O:function(){},_99O:function($){var U=this,L=U._38o;if(L){var Y=U.gv,p=U._data,H=L.icons;for(var f in H){var T=H[f],Z=L.rects[f];if(Z){var t=Zp(T.opacity,p,Y),I=Zp(T.names,p,Y),m=I?I.length:0,P=Z.rotation;if(t!=c){var W=$.globalAlpha;$.globalAlpha*=t}for(var l=0;m>l;l++){var J=I[l],v=id(J),q=Z[l];if(P){var s=q.x+q.width/2,G=q.y+q.height/2;$.save(),sj($,s,G),hb($,P),sj($,-s,-G)}Ob($,v,Zp(T.stretch,p,Y),q.x,q.y,q.width,q.height,U._data,U.gv),P&&$.restore()}t!=c&&($.globalAlpha=W)}}}}});var Hr=function(a,P){Ke(Hr,this,[a,P])};hd(Hr,Ok,{_checkEmptyRect:!0,_40O:function(w,a){var g=this,U=g.s,l=w.rect;(w.borderColor=g.gv.getBorderColor(g._data))&&(w.borderType=U("border.type"),w.borderWidth=U("border.width"),w.borderPadding=U("border.padding"),a=W(a,w.borderPadding+w.borderWidth/2));var Q=g._data.getScale(),V=W(1,W($(Q.x),$(Q.y)));if(w.selectWidth=g.getSelectWidth()){var v=g.gv._zoom;w.selectType=U("select.type"),w._97o=U("select.color"),w.selectPadding=U("select.padding"),a=W(a,(w.selectPadding+w.selectWidth/2/v)/V)}a>0&&(a*=V,l=Wk(l),Xc(l,a)),g._68o(l)},_39O:function(Y,C){var T,V=this,n=C.rect;if(C.borderWidth>0&&(T=C.borderPadding,Y.strokeStyle=C.borderColor,Y.lineWidth=C.borderWidth,Fr(Y,C.borderType,{x:n.x-T,y:n.y-T,width:n.width+2*T,height:n.height+2*T}),Y.stroke()),C.selectWidth>0){var F=V.gv._zoom;if(T=C.selectPadding,Y.strokeStyle=C._97o,Y.lineWidth=C.selectWidth/F,C.rotation!=c){Y.save(),Y.translate(C.position.x,C.position.y),Y.rotate(C.rotation);var R=V._data,x=R.getWidth(),D=R.getHeight(),h=C.scale,w=C.anchor;n={x:h.x*-x*w.x,y:h.y*-D*w.y,width:h.x*x,height:h.y*D}}Fr(Y,C.selectType,{x:n.x-T,y:n.y-T,width:n.width+2*T,height:n.height+2*T}),C.rotation!=c&&Y.restore(),Y.stroke()}},_3O:function(){var F=this,o=F.s,h=F._data,B=h.getStyle(Cc),j=F.getBodyColor(),m=F._83o=B?{shape:B,_53o:F.getBodyColor("shape.background"),_27Q:id(o("shape.repeat.image"),j),shapeGradientPack:o("shape.gradient.pack"),_54o:o("shape.border.width"),_55o:o("shape.border.color"),_56o:o("shape.border.3d"),_57o:o("shape.border.3d.color"),_58o:o("shape.border.3d.accuracy"),shapeGradient:o("shape.gradient"),_59o:o("shape.gradient.color"),_60o:o("shape.border.pattern"),_61o:o("shape.border.cap"),_62o:o("shape.border.join"),bodyColor:j}:{img:id(F.gv.getImage(h),j),bodyColor:j,stretch:o("image.stretch")};if(N&&!R);else{m.rect=h.getRect(),m.position=h.p(),m.scale=h.getScale(),m.anchor=h.getAnchor(),m.rotation=h.getRotation(),B===Hg&&(m._63o=o("shape.depth"));var x=0;if(B)x=$n(c,m._54o/2,m._62o),F.s("shape.dash")&&(x=W(x,(F.s("shape.dash.width")||m._54o)/2));else if(m.img&&m.img.boundExtend)if(x=Zp(m.img.boundExtend,h,F.gv),m.img.boundExtendAbsolute){var O=h.getScale();x/=F.gv._zoom*W(1,W($(O.x),$(O.y)))}else if(!m.img.fitSize){var u=Zp(m.img.width,h,F.gv),I=Zp(m.img.height,h,F.gv);x*=W(h.getWidth()/u,h.getHeight()/I)}F._40O(m,x);var K=o("clip.percentage");if(1>K&&(0>K&&(K=0),m.clipRect=qs(h.getAnchorRect(),o("clip.direction"),K)),B){var s=o("shape.fill.clip.percentage");1>s&&(0>s&&(s=0),m.shapeClipRect=qs(h.getAnchorRect(),o("shape.fill.clip.direction"),s))}}},getPosition:function(T,J,l,j){var W=Jl(T,this._83o.rect,j);return W.x+=J,W.y+=l,W},_80o:function(K){var t=this,D=t.s,Y=t.gv,d=t._data,c=t._83o,j=c.rect,o=c.position,R=c.rotation,S=c.anchor,m=c.scale,B=c.shape,f=c.clipRect;if(!t._checkEmptyRect||j.width>0&&j.height>0){var M=d.getSize();if(M.x=-M.width*S.x,M.y=-M.height*S.y,K.save(),sj(K,o.x,o.y),hb(K,R),_f(K,m.x,m.y),f&&(K.beginPath(),K.rect(f.x,f.y,f.width,f.height),K.clip()),t.freeDraw)t.freeDraw(K,M,c);else if(B){var k,a,$,I,E=c._60o,N=pb(K,E),A=c._53o,T=c._27Q,W=c._54o,C=c._55o,u=c.shapeGradientPack,Z=K.lineJoin,n=K.lineCap;if("roundRect"===B?k=D("shape.corner.radius"):"polygon"===B?k=D("shape.polygon.side"):"arc"===B&&(k=D("shape.arc.from"),a=D("shape.arc.to"),$=D("shape.arc.close"),I=D("shape.arc.oval")),K.lineJoin=c._62o,K.lineCap=c._61o,A||T||u){var b=c.shapeClipRect;b&&(K.save(),K.beginPath(),K.rect(b.x,b.y,b.width,b.height),K.clip()),Fr(K,B,M,k,a,$,I),u?bj(K,u):T?vq(K,T,c.bodyColor,null,d,Y):Cs(K,A,c.shapeGradient,c._59o,M),K.fill(),b&&K.restore(),u&&K.restore(),K!==N&&Fr(N,B,M,k,a,$,I)}else Fr(N,B,M,k,a,$,I);if(W>0){var Q=D("shape.border.width.absolute");Q&&(K.save(),K.setTransform(1,0,0,1,0,0)),K.lineWidth=W,K.strokeStyle=C,K.stroke(),Q&&K.restore(),c._56o&&Jq(K,C,c._57o,W,Y._zoom,c._58o)}if(xn(K,E),D("shape.dash")){var X=D("shape.dash.width")||W;if(X>0){E=D("shape.dash.pattern");var N=pb(K,E,t._2Q("shape.dash.offset"));N!==K&&Fr(N,B,M,k,a,$,I),t._1Q(K,"shape",X,E)}}uf(K,A,c._63o,M),K.lineJoin=Z,K.lineCap=n}else Ob(K,c.img,c.stretch,M.x,M.y,M.width,M.height,d,Y,c.bodyColor);K.restore()}t._39O(K,c)},_48O:function(){},_47O:function(){}});var Xm=function(_,N){Ke(Xm,this,[_,N])},Me=function(V,Z,G,S){var n=ig(V,Z);return G=S?y(G,n):_g(G,n),n?G/=n:G=0,{x:V.x+(Z.x-V.x)*G,y:V.y+(Z.y-V.y)*G}};hd(Xm,Ok,{_3O:function(){var O,Y=this,f=Y._data,A=Y.gv,S=Y.s,k=S(Ar),e=f.isLooped(),D=S("edge.width"),C=S("edge.center"),V=S("edge.offset"),u=A.getBorderColor(f),E=u?S("border.width"):0,H=Y.getSelectWidth(),G=f._40I,B=f._41I,h=Y._78o=G&&B?{looped:e,type:k,width:D,center:C,color:Y.getBodyColor("edge.color"),borderColor:u,borderWidth:E,_97o:H?S("select.color"):c,selectWidth:H,pattern:S("edge.pattern"),cap:S("edge.cap"),join:S("edge.join"),is3d:S("edge.3d"),_67o:S("edge.3d.color"),_66o:S("edge.3d.accuracy")}:c;if(h){var F=i.getEdgeType(k);if(F){var Z=F(f,Vp(Y,A,f,e,k),A,Y._19Q);Z.points&&Z.points.size()>1?(h._4O=Z,O=Ad(h._4O.points)):Z[Te]&&Z.rect&&(h._4O=Z,O=Z.rect)}else{var g=S("edge.source.anchor.x"),X=S("edge.source.anchor.y"),p=S("edge.target.anchor.x"),L=S("edge.target.anchor.y"),U=mb(A,G,S("edge.source.position"),S("edge.source.offset.x"),S("edge.source.offset.y"),g,X),m=mb(A,B,S("edge.target.position"),S("edge.target.offset.x"),S("edge.target.offset.y"),p,L);if(k===yc){var q=h.points=S(fp)||Am,l=q.size();h.segments=S("edge.segments");var s=g!==M||X!==M,K=p!==M||L!==M;if(!C)if(V)s||(U=Me(U,l?q.get(0):m,V,l)),K||(m=Me(m,l?q.get(l-1):U,V,l));else{var z;s||(z=ss(U,l?q.get(0):m,Qn(A,G)),z&&(U={x:z[0],y:z[1]})),K||(z=ss(l?q.get(l-1):U,m,Qn(A,B)),z&&(m={x:z[0],y:z[1]}))}O=Ll(Ad(h.points),Ad(U,m))}else{var Q=Vp(Y,A,f,e,k);if(Y._19Q||(Q=-Q),e)U=Wk(U),U.x=A.getNodeRect(G).x,h.radius=Q,O={x:U.x-Q,y:U.y-Q,width:2*Q,height:2*Q};else{var N=ig(U,m),x=_g(V,N),b={x:x,y:Q},$={x:N-x,y:Q},o=w(m.y-U.y,m.x-U.x),y=h.mat=new Mh(o);if(h.orienAngle=o,h.angle=m.x<U.x?o+I:o,h.rect={x:b.x,y:b.y,width:$.x-b.x,height:0},h.origin=U,b=y.tf(b),b.x+=U.x,b.y+=U.y,$=y.tf($),$.x+=U.x,$.y+=U.y,C){var T={x:N,y:0};T=y.tf(T),T.x+=U.x,T.y+=U.y,O=Ad([U,b,$,T]),h.c1=U,h.c2=T}else O=Ad(b,$);U=b,m=$}}h.sourcePoint=U,h.targetPoint=m,f._lastSourcePoint=U,f._lastTargetPoint=m}var J=0;S("edge.dash")&&(J=S("edge.dash.width")||D);var j="square"===h.cap?.71:.5;$n(O,W(J*j,D*j+E+H),h.join),Y._68o(O)}},getRotation:function(e,k,s){e=e||0;var b=this._78o;if(b){var j,F=b.angle,d=b.points,I=b._4O;if(F!=c)return k?b.orienAngle+e:F+e;if(I&&I[Te])return I.getRotation?I.getRotation(this,e,k,s):0;if(I&&I.points){var H=I.points;return j=H.size(),Mg[s]?j&&0===j%2?Tj(H.get(j/2-1),H.get(j/2),k,e):e:ae[s]?Tj(H.get(0),H.get(1),k,e):Tj(H.get(j-2),H.get(j-1),k,e)}if(d)return j=d.size(),Mg[s]?j&&0===j%2?Tj(d.get(j/2-1),d.get(j/2),k,e):e:ae[s]?Tj(b.sourcePoint,j?d.get(0):b.targetPoint,k,e):Tj(j?d.get(j-1):b.sourcePoint,b.targetPoint,k,e)}return e},getPosition:function(k,v,x,I,M){var b=this._78o;if(b){var V,K=b.type,a=b.points,F=b._4O,i=b.sourcePoint,e=b.targetPoint;if(!K)return b.looped?{x:i.x-b.radius+v,y:i.y+x}:(M&&i&&e&&(i.x>e.x||i.x===e.x&&i.y>e.y)&&(k=Sn[k],x=-x),V=Jl(k,b.rect,I),V.x+=v,V.y+=x,V=b.mat.tf(V),V.x+=b.origin.x,V.y+=b.origin.y,V);if(F&&F[Te])return F.getPosition?F.getPosition(this,k,v,x,I,M):{x:(i.x+e.x)/2,y:(i.y+e.y)/2};if(a){var V,Y=a.size();if(Mg[k]){if(Y){var u=Y%2;if(0===u)return lr(a.get(Y/2-1),a.get(Y/2),k,v,x,I,M);V=a.get((Y-u)/2)}else V={x:(i.x+e.x)/2,y:(i.y+e.y)/2};return V=Jl(k,{x:V.x,y:V.y,width:0,height:0},I),V.x+=v,V.y+=x,V}return ae[k]?lr(i,Y?a.get(0):e,k,v,x,I,M):lr(Y?a.get(Y-1):i,e,k,v,x,I,M)}if(F){var s=F.points,Y=s.size();if(Mg[k]){var u=Y%2;return 0===u?lr(s.get(Y/2-1),s.get(Y/2),k,v,x,I,M):(V=s.get((Y-u)/2),V=Jl(k,{x:V.x,y:V.y,width:0,height:0},I),V.x+=v,V.y+=x,V)}return ae[k]?lr(s.get(0),s.get(1),k,v,x,I,M):lr(s.get(Y-2),s.get(Y-1),k,v,x,I,M)}}return ln},_42:function(b){this._78o&&Xm.superClass._42.call(this,b)},drawPath:function(U,m){U.beginPath();var Z=m.type,_=m.points,e=m.segments,v=m._4O;if(!Z||_){var p=m.sourcePoint,s=p.x,G=p.y,N=m.targetPoint,B=N.x,u=N.y;if(Z)if(e){var V=new Vr({x:s,y:G});V.addAll(_),V.add({x:B,y:u}),No(U,V,e)}else U.moveTo(s,G),_.each(function(u){U.lineTo(u.x,u.y)}),U.lineTo(B,u);else m.looped?U.arc(s,G,m.radius,0,Y,!0):m.center?(U.moveTo(m.c1.x,m.c1.y),U.lineTo(s,G),U.lineTo(B,u),U.lineTo(m.c2.x,m.c2.y)):(U.moveTo(s,G),U.lineTo(B,u))}else v&&(v.points?No(U,v.points,v.segments):v[Te]&&v[Te](U,v))},_80o:function(M){var l=this,j=l.s,h=l._78o,T=h.width,Y=h.selectWidth,x=h.borderWidth,t=h.color,w=M.lineJoin,U=M.lineCap,J=h.pattern;M.lineJoin=h.join,M.lineCap=h.cap,l.drawPath(pb(M,J),h);var m=j("edge.width.absolute");if(m&&(M.save(),M.setTransform(1,0,0,1,0,0)),Y&&(M.strokeStyle=h._97o,M.lineWidth=T+2*(x+Y),M.stroke()),x&&(M.strokeStyle=h.borderColor,M.lineWidth=T+2*x,M.stroke()),M.strokeStyle=t,M.lineWidth=T,M.stroke(),h.is3d&&Jq(M,t,h._67o,T,l.gv._zoom,h._66o),m&&M.restore(),xn(M,J),j("edge.dash")){J=j("edge.dash.pattern");var N=pb(M,J,l._2Q("edge.dash.offset"));N!==M&&l.drawPath(N,h),l._1Q(M,"edge",j("edge.dash.width")||T,J)}M.lineJoin=w,M.lineCap=U},_48O:function(){},_47O:function(){},_71o:function(k,N){var o=this,h=o._data;if(o._19Q=!0,!h.getEdgeGroup())return k?h.s("edge.gap"):0;var D,H=0,c=0,$=0;if(h.getEdgeGroup().getSiblings().each(function(k){k.each(function(V){if(o.gv.isVisible(V)&&V.s(Ar)==N){var m=V.s("edge.gap");D?(c+=$/2+m/2,$=m):(D=V,$=m),V===h&&(H=c)}})}),k)return c-H+$;var u=H-c/2;return D&&h._40I!==D._40I&&(o._19Q=!1),u}});var Xe=function(h,D){Ke(Xe,this,[h,D])};hd(Xe,Hr,{_3O:function(){var C,K,y=this,V=y.s,P=y._data,m=y.gv;if(y._88I=c,P.isExpanded()&&P.eachChild(function(F){var j=m.getBoundsForGroup(F);j&&(K||(K=[]),K.push(j),C=Ll(C,j))}),C){var L=m.getLabel(P),T=V("group.type");C=pk(T,K,C),Ab(C,P,"group.padding",1);var H=y._88I={type:T,rect:C,_64o:C};if(!T&&L!=c){var l,j=y.labelInfo={label:L,color:V("group.title.color"),font:V("group.title.font"),align:V("group.title.align")},I=Yi(j,L),W=I.width,e=I.height,k=V("group.title.align");W>C.width&&(C.width=W),j.rect={y:C.y-e,width:I.width,height:e},l=k===rp?C.x:k===il?C.x+C.width-W:C.x+C.width/2-W/2,j.rect.x=l,H.titleRect={x:C.x,y:C.y-e,width:C.width,height:e+1},H.rect={x:C.x,y:C.y-e,width:C.width,height:C.height+e}}y._40O(H,V("group.border.width")/2)}else Xe.superClass._3O.call(y)},getPosition:function(z,Q,n,j){var V=this._88I;if(V){var l=Jl(z,V.rect,j);return l.x+=Q,l.y+=n,l}return Xe.superClass.getPosition.apply(this,arguments)},_24O:function(v,t){var m=this._88I;(!m||m.type||"label2"===v)&&Xe.superClass._24O.call(this,v,t)},_80o:function(M){var H=this,Q=H._88I;if(Q){var P=H._data,s=H.s,Y=H.gv,C=Q.type,d=Q.rect,V=Q._64o,h=Q.titleRect,w=H.getBodyColor(),X=id(s("group.image"),w),R=s("group.image.stretch"),E=H.getBodyColor("group.background"),K=id(s("group.repeat.image"),w),r=s("group.gradient.pack"),$=s("group.gradient"),b=s("group.gradient.color"),g=s("group.depth");if(C){var l=s("group.border.pattern"),c=s("group.border.width"),B=M.lineJoin,Z=M.lineCap;if(M.lineJoin=s("group.border.join"),M.lineCap=s("group.border.cap"),X){if(M.save(),Fr(M,C,d),M.clip(),Ob(M,X,R,d.x,d.y,d.width,d.height,P,Y,w),M.restore(),c>0){var p=pb(M,l);Fr(p,C,d),M.lineWidth=c,M.strokeStyle=s("group.border.color"),M.stroke(),xn(M,l)}}else{var p=pb(M,l);E||K||r?(Fr(M,C,d),r?bj(M,r):K?vq(M,K,w,null,P,Y):Cs(M,E,$,b,d),M.fill(),r&&M.restore(),M!==p&&Fr(p,C,d)):Fr(p,C,d),c>0&&(M.lineWidth=c,M.strokeStyle=s("group.border.color"),M.stroke()),xn(M,l),C===Hg&&uf(M,E,g,d)}M.lineJoin=B,M.lineCap=Z}else if(X?Ob(M,X,R,V.x,V.y,V.width,V.height,P,Y,H.getBodyColor()):(E||K)&&(K?vq(M,K,w,null,P,Y):Cs(M,E,$,b,V),Fr(M,Hg,V),M.fill(),uf(M,E,g,V)),h){var A=s("group.title.background");lo(M,h.x,h.y,h.width,h.height,A),uf(M,A,g,h)}H._39O(M,Q)}else Xe.superClass._80o.call(H,M)}});var Uk=function(M,y){Ke(Uk,this,[M,y])};hd(Uk,Hr,{_80o:function(k){this._39O(k,this._83o)}});var Sc=function(r,N){Ke(Sc,this,[r,N])};hd(Sc,Hr,{_3O:function(){var M=this,B=M._data,t=M.s,u=M.gv,b=B.getPoints(),g=u.getBorderColor(B),Z=g?t("border.width"):0,I=M.getSelectWidth(),j=t("shape.border.width"),L=B.getRect(),N=u.getBodyColor(B),n=M._99o=b.isEmpty()?c:{rect:L,rotation:B.getRotation(),fillRule:t("shape.fill.rule"),scale:B.getScale(),position:B.p(),points:b,segments:B.getSegments(),bodyColor:N,borderColor:g,borderWidth:Z,_94o:t("shape.border.3d"),_95o:t("shape.border.3d.color"),_96o:t("shape.border.3d.accuracy"),_97o:I?t("select.color"):c,selectWidth:I,_53o:t("shape.background"),_27Q:id(t("shape.repeat.image"),N),shapeGradientPack:t("shape.gradient.pack"),_54o:j,_55o:t("shape.border.color"),shapeGradient:t("shape.gradient"),_59o:t("shape.gradient.color"),_60o:t("shape.border.pattern"),_61o:t("shape.border.cap"),_62o:t("shape.border.join")};if(n){var V=B.getScale(),S=W(1,W($(V.x),$(V.y))),k=j*("square"===n._61o?.71:.5)+Z+I/M.gv._zoom/S;k&&(k*=S,L=Wk(L),$n(L,k,n._62o)),M._68o(L);var H=t("clip.percentage");1>H&&(0>H&&(H=0),n.clipRect=qs(B.getAnchorRect(),t("clip.direction"),H));var w=t("shape.fill.clip.percentage");1>w&&(0>w&&(w=0),n.shapeClipRect=qs(B.getAnchorRect(),t("shape.fill.clip.direction"),w))}},getPosition:function(g,_,k,b){var o=this._99o;if(o){var K=Jl(g,o.rect,b);return K.x+=_,K.y+=k,K}return ln},_42:function(I){this._99o&&Sc.superClass._42.call(this,I)},_80o:function(y){var p,B=this,h=B.s,Z=B._99o,C=Z.position,l=Z.scale,s=Z.rotation,P=Z.bodyColor,Y=Z.borderWidth,e=Z.selectWidth,V=Z._53o,v=Z._27Q,A=Z.shapeGradientPack,J=Z._54o,S=Z.clipRect,f=Z.shapeClipRect,m=Z.points,N=Z.segments,o=B._data.isClosePath(),$=Z.fillRule,T=V||v||A;y.save(),sj(y,C.x,C.y),hb(y,s),_f(y,l.x,l.y),S&&(y.beginPath(),y.rect(S.x,S.y,S.width,S.height),y.clip()),T&&f&&(y.save(),y.beginPath(),y.rect(f.x,f.y,f.width,f.height),y.clip()),sj(y,-C.x,-C.y);var M=Z._60o,U=pb(y,M),x=y.lineJoin,E=y.lineCap;y.lineJoin=Z._62o,y.lineCap=Z._61o,T?(No(y,m,N,o),A?bj(y,A):v?vq(y,v,P,null,B._data,B.gv):(p=P?P:V,Cs(y,p,Z.shapeGradient,Z._59o,Z.rect)),y.fill($),f&&(y.restore(),sj(y,-C.x,-C.y)),A&&y.restore(),U!==y&&No(U,m,N,o)):No(U,m,N,o);var c=h("shape.border.width.absolute");if(c&&(y.save(),y.setTransform(1,0,0,1,0,0)),e&&(y.strokeStyle=Z._97o,y.lineWidth=J+2*(Y+e),y.stroke()),Y&&(y.strokeStyle=Z.borderColor,y.lineWidth=J+2*Y,y.stroke()),J&&(p=Z._55o,!V&&P&&(p=P),y.strokeStyle=p,y.lineWidth=J,y.stroke(),Z._94o&&Jq(y,p,Z._95o,J,B.gv._zoom,Z._96o)),c&&y.restore(),xn(y,M),h("shape.dash")){var W=h("shape.dash.width")||J;if(W>0){M=h("shape.dash.pattern");var U=pb(y,M,B._2Q("shape.dash.offset"));U!==y&&No(U,m,N,o),B._1Q(y,"shape",W,M)}}y.lineJoin=x,y.lineCap=E,y.restore()},_48O:function(){},_47O:function(){}});var an=function(E,o){Ke(an,this,[E,o])};hd(an,Sc,{getRotation:function(p,F,K){p=p||0;var O=this._data.getPoints(),t=O.size();return t>1?Mg[K]?t&&0===t%2?Tj(O.get(t/2-1),O.get(t/2),F,p):p:ae[K]?Tj(O.get(0),O.get(1),F,p):Tj(O.get(t-2),O.get(t-1),F,p):p},getPosition:function(f,Y,w,B,p){var $=this._data.getPoints(),W=$.size();if(W>1){if(Mg[f]){var T=W%2;if(0===T)return lr($.get(W/2-1),$.get(W/2),f,Y,w,B,p);var j=$.get((W-T)/2),J={x:j.x,y:j.y,width:0,height:0};return j=Jl(f,J,B),j.x+=Y,j.y+=w,j}return ae[f]?lr($.get(0),$.get(1),f,Y,w,B,p):lr($.get(W-2),$.get(W-1),f,Y,w,B,p)}return ln}});var Oo=function(A,w){Ke(Oo,this,[A,w])};hd(Oo,Hr,{_3O:function(){var V=this;Oo.superClass._3O.call(V);var o=V.s,Q=V._83o;V._82o=Q.img||Q.shape?c:{background:V.getBodyColor("grid.background"),depth:o("grid.depth"),rect:Q.rect,_88o:o("grid.cell.depth"),cellBorderColor:o("grid.cell.border.color"),_89o:o("grid.row.count"),_90o:o("grid.column.count"),block:o("grid.block"),_91o:o("grid.block.color"),_92o:o("grid.block.padding"),_93o:o("grid.block.width")}},_80o:function(A){var P=this,E=P._82o;if(!E)return Oo.superClass._80o.call(P,A),void 0;var p,x,G=P._data,q=E.background,T=E.rect,l=E.block,f=E._91o,o=E._92o,v=E._93o,O=E._88o,c=E.cellBorderColor,m=E._89o,M=E._90o;if(q)if(lo(A,T.x,T.y,T.width,T.height,q),uf(A,q,E.depth,T),O)for(p=0;m>p;p++)for(x=0;M>x;x++)T=G.getCellRect(p,x),T&&uf(A,q,O,T);else if(c){for(A.beginPath(),p=0;m>p;p++)for(x=0;M>x;x++)T=G.getCellRect(p,x),T&&A.rect(T.x,T.y,T.width,T.height);A.strokeStyle=c,A.lineWidth=1,A.stroke()}if("h"===l)for(p=0;m>p;p++)T=Ll(G.getCellRect(p,0),G.getCellRect(p,M-1)),Xc(T,o),Wn(A,f,T.x,T.y,T.width,T.height,v);else if("v"===l)for(x=0;M>x;x++)T=Ll(G.getCellRect(0,x),G.getCellRect(m-1,x)),Xc(T,o),Wn(A,f,T.x,T.y,T.width,T.height,v);P._39O(A,P._83o)}});var Ni=function(t,D){Ke(Ni,this,[t,D])};hd(Ni,Hr,{_checkEmptyRect:!1,_81o:function(){var M=this._data,E=Ni.superClass._81o.call(this),V=M.s("text");if(V!=c){var N,T,K=M.s("text.font"),A=M.s("text.align"),x=M.s("text.vAlign"),s=Zh(K,V),v=s.width,z=s.height,Q=M.getAnchor(),g=M.getWidth(),w=M.getHeight();"left"===A?N=-g*Q.x:"center"===A?N=-g*Q.x+(g-v)/2:"right"===A&&(N=g*(1-Q.x)-s.width),"top"===x?T=-w*Q.y:"middle"===x?T=-w*Q.y+(w-z)/2:"bottom"===x&&(T=w*(1-Q.y)-s.height);var o,C=M.getMatrix();o=Ad([C.tf(N,T),C.tf(N+v,T),C.tf(N+v,T+z),C.tf(N,T+z)]),E=Ll(E,o)}return E}});var vd=bh.Interactor=function(w){this.gv=this._graphView=w};On("Interactor",G,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(E){this.gv.fi(E)},setCursor:function(Q){cn||(this.getView().style.cursor=Q)},startDragging:function(G){var P=this;P._lastClientPoint=_c(G),P._lastLogicalPoint=P.gv.lp(G),Ql(P,G)},clearDragging:function(){var N=this;N._lastClientPoint=N._lastLogicalPoint=N._logicalPoint=c},autoScroll:function(M){return this.gv.autoScroll(M,this._lastClientPoint)}});var Eh=bh.DefaultInteractor=function(o){Ke(Eh,this,[o])};On("DefaultInteractor",vd,{handle_mousedown:function(O){lg(O);
var l=this,s=l.gv,A=s.getDataAt(O);!s.setFocus(O)||s._editing||s._scrolling||(pn(O)?s.handleDoubleClick(O,A):s.handleClick(O,A),!Qj()&&A||!s.isPannable()||!Zi(O)||Og(O)||(l._tx=s.tx(),l._ty=s.ty(),l.startDragging(O)))},handleWindowMouseUp:function(G){var M=this,s=M.gv;s._panning&&(delete s._panning,s.onPanEnded(),M.fi({kind:"endPan",event:G})),delete M._tx,delete M._ty,M.clearDragging()},handle_mousemove:function(V){var P=this,F=P.gv;P._hoverTimer&&(O(P._hoverTimer),delete P._hoverTimer),P._hoverTimer=a(function(){P.fi({kind:"hover",event:V}),O(P._hoverTimer),delete P._hoverTimer},F.getHoverDelay()||800)},handle_touchmove:function(I){this.handle_mousemove(I)},handleWindowMouseMove:function(e){var I=this,R=I.gv,i=I._lastClientPoint;I.fi({kind:R._panning?"betweenPan":"beginPan",event:e}),R._panning=1,R.setTranslate(I._tx+e.clientX-i.x,I._ty+e.clientY-i.y)},handle_mousewheel:function(n){this.gv.handleScroll(n,n.wheelDelta)},handle_DOMMouseScroll:function(x){2===x.axis&&this.gv.handleScroll(x,-x.detail)},handle_keydown:function(t){this.gv.handleKeyDown(t)}});var md=bh.SelectInteractor=function(g){Ke(md,this,[g])};On("SelectInteractor",vd,{_42:function(){var A=this,d=A.gv,P=d.getZoom(),I=A.mark,a=A.div;a||(a=A.div=us(),Rf(A.getView(),a));var B={};B.x=I.x*P+d.tx(),B.y=I.y*P+d.ty(),B.width=I.width*P,B.height=I.height*P,gg(a,B),this.intersects()?(a.style.border="",a.style.background=d.getRectSelectBackground()):(a.style.background="",a.style.border="1px solid "+d.getRectSelectBorderColor())},handle_mousedown:function(q){var e=this,M=e.gv;if(e._57I=c,!(M._editing||M._scrolling||Qj())){var k=M.getDataAt(q),A=M.sm();if(k)if(Og(q))A.co(k)?A.rs(k):A.as(k);else if(A.co(k)){if(pn(q)&&k instanceof Lk&&k.isClickThroughEnabled()){var T=M.getDataAt(q,function(s){M._clickThroughChecking=!0;var f=s.getParent()===k&&M.isSelectable(s);return delete M._clickThroughChecking,f});T&&(q.clickThrough=!0,A.ss(T))}}else A.ss(k);else Og(q)||!M.isPannable()?Zi(q)&&(Og(q)||A.cs(),M.isRectSelectable()&&(e.startDragging(q),M._77O=1)):Zi(q)&&(e._57I=_c(q))}},handle_mouseup:function(Q){var x=this,k=x._57I;k&&(ig(k,_c(Q))<=1&&x.gv.sm().cs(),x._57I=c)},handleWindowMouseUp:function(W){this.clear(W)},handleWindowMouseMove:function(P){var k=this,X=k.gv;k._logicalPoint=X.lp(P),k.mark?(k.fi({kind:"betweenRectSelect",event:P}),k.autoScroll(P),k.redraw()):k.fi({kind:"beginRectSelect",event:P}),k.mark=Ad(k._lastLogicalPoint,k._logicalPoint),k.redraw()},intersects:function(){var l=this,N=l._lastLogicalPoint,r=l._logicalPoint;return N.x>r.x||N.y>r.y},clear:function(K){var n=this,i=n.gv,T=n.mark;if(n._57I=c,n._lastLogicalPoint){if(T){if(0!==T.width&&0!==T.height){var p=i.getDatasInRect(T,n.intersects());if(!p.isEmpty()){var Q=i.sm(),d=Q.toSelection();p.each(function(D){Q.co(D)?d.remove(D):d.add(D)}),Q.ss(d)}}Ye(n.div),delete n.div,delete n.mark,n.redraw(),n.fi({kind:"endRectSelect",event:K}),i.onRectSelectEnded()}n.clearDragging(),delete i._77O}},redraw:function(){var T=this;T._draw||(T._draw=1,a(function(){T.mark&&T._42(),delete T._draw},16))}});var Cq=bh.MoveInteractor=function(t){Ke(Cq,this,[t])};On("MoveInteractor",vd,{handle_mousedown:function(y){var i=this,M=i.gv;if(Zi(y)&&!M._editing&&!M._scrolling&&!Qj()){var C=M.getSelectedDataAt(y);C?(i._data=C,M.handleMouseDown&&M.handleMouseDown(y,C),i.startDragging(y),M.isMovable(C)&&(M._moving=1)):M._focusData=c}},handleWindowMouseUp:function(E){var o=this,J=o.gv;J.handleMouseUp&&J.handleMouseUp(E,o._data),o.clear(E)},handleWindowMouseMove:function(h){var l=this,B=l._data,j=l.gv,d=j.getDataModel(),I=d.getHistoryManager();if((!j._93O||!j._93O(h,B))&&j._moving){l._logicalPoint||l.fi({kind:"prepareMove",event:h});var c=l._logicalPoint?"betweenMove":"beginMove",G={kind:c,event:h},e=l._logicalPoint=j.lp(h);I&&"beginMove"===c&&I.beginInteraction();var a=l._calcShift(c,h),R=a.x,z=a.y,D=l.gv.getMoveMode(h,B);D&&("x"===D?z=0:"y"===D?R=0:"xy"!==D&&(R=z=0)),j.moveSelection(R,z),l._lastLogicalPoint=e,l.autoScroll(h),l.fi(G)}},_calcShift:function(){var S=this,v=S._logicalPoint,c=S._lastLogicalPoint,u=v.x-c.x,W=v.y-c.y;return{x:u,y:W}},clear:function(t){var R=this,V=R.gv,B=V.getDataModel(),s=B.getHistoryManager();R._lastLogicalPoint&&(R._lastLogicalPoint=R._data=V._moving=c,R._logicalPoint&&(R.fi({kind:"endMove",event:t}),V.onMoveEnded(),s&&s.endInteraction()),R.clearDragging())}});var qk=bh.ScrollBarInteractor=function(p){Ke(qk,this,[p])};On("ScrollBarInteractor",vd,{_41o:function(){return this.gv.getViewRect().height<this.gv.getScrollRect().height},_40o:function(){return this.gv.getViewRect().width<this.gv.getScrollRect().width},isV:function(k){var U=this.gv.getViewRect();return this._41o()&&(U.x+U.width-this.gv.lp(k).x)*this.gv.getZoom()<Vd},isH:function(l){var H=this.gv.getViewRect();return this._40o()&&(H.y+H.height-this.gv.lp(l).y)*this.gv.getZoom()<Vd},handle_mousemove:function(c){this.handle_touchmove(c)},handle_touchmove:function(Y){if(!nm&&Zi(Y)){var q=this,h=q.isV(Y),f=q.isH(Y);(h||f)&&q.gv.showScrollBar(),q.gv._scrolling=h||f}},handleWindowMouseUp:function(m){this.handleWindowTouchEnd(m)},handleWindowTouchEnd:function(M){this._state=this._cp=this._tx=this._ty=this.gv._scrolling=c,this.fi({kind:"endScroll",event:M})},handle_mousedown:function(U){this.handle_touchstart(U)},handle_touchstart:function(H){var Z=this;if(Z.gv.setFocus(H),lg(H),Z.handle_touchmove(H),!(Wm(H)>1)&&Z.gv._scrolling){Z._cp=_c(H),Z._tx=Z.gv.tx(),Z._ty=Z.gv.ty();var g=Z.isV(H);Z._state=g?"vScroll":"hScroll",Ql(Z,H),Z.fi({kind:"beginScroll",event:H})}},handleWindowMouseMove:function(F){this.handleWindowTouchMove(F)},handleWindowTouchMove:function(Q){var b=_c(Q),I=this.gv.getViewRect(),E=this.gv.getScrollRect();"vScroll"===this._state?this.gv.ty(this._ty+(this._cp.y-b.y)*E.height/I.height):"hScroll"===this._state&&this.gv.tx(this._tx+(this._cp.x-b.x)*E.width/I.width),this.fi({kind:"betweenScroll",event:Q})}});var Ee=bh.TouchInteractor=function(W,K){K=K||{},K.selectable===M&&(K.selectable=!0),K.movable===M&&(K.movable=!0),K.pannable===M&&(K.pannable=!0),K.pinchable===M&&(K.pinchable=!0),K.editable===M&&(K.editable=!0),this.params=K,Ke(Ee,this,[W])};On("TouchInteractor",vd,{ms_edit:1,setUp:function(){var t=this;Ee.superClass.setUp.call(t),cn&&t.params.editable&&t.gv.setEditInteractor(t)},tearDown:function(){var t=this;Ee.superClass.tearDown.call(t),cn&&t.params.editable&&t.gv.setEditInteractor(c)},clear:function(d){var A=this,b=A.gv,V=b.dm().getHistoryManager();b._moving&&(A.fi({kind:"endMove",event:d}),delete b._moving,b.onMoveEnded(),V&&V.endInteraction()),b._panning&&(A.fi({kind:"endPan",event:d}),delete b._panning,b.onPanEnded()),b._pinching&&(A.fi({kind:"endPinch",event:d}),delete b._pinching,b.onPinchEnded()),b._editing&&(A._46O(d),A._77I=A._node=A._edge=A._shape=A._rect=A._89I=A._index=b._editing=c),A._moving=A._panning=A._pinching=A._editing=A._57I=A._data=A._beginHistory=c,A.clearDragging()},handle_touchstart:function(Z){var K=this;if(!K.gv._editing){lg(Z),K._57I=c;var v=K.params,r=K.gv,S=r.sm(),L=r.getDataAt(Z),i=Wm(Z);if(1===i){if(pn(Z))return r.handleDoubleClick(Z,L),void 0;r.handleClick(Z,L),L&&(r.handleMouseDown&&r.handleMouseDown(Z,L),K._data=L),v.selectable||(L=c),L?(S.co(L)||S.ss(L),v.editable&&r.isEditable(L)&&K._79I(Z,L,!0)?(K._editing=1,K.startDragging(Z)):v.movable&&r.isMovable(L)&&(K._moving=1,K.startDragging(Z))):(K._57I=_c(Z),v.pannable&&r.isPannable()&&(K._panning=1,K.startDragging(Z),K._translate={x:r.tx(),y:r.ty()}))}else if(v.pinchable&&2===i){K._pinching=1,K.startDragging(Z);var C=r.getView(),d=r.getZoom(),W=C.getBoundingClientRect(),f=Z.touches[0],u=Z.touches[1],z={x:(f.clientX+u.clientX)/2-W.left,y:(f.clientY+u.clientY)/2-W.top};z.x-=r.tx(),z.y-=r.ty(),z.x/=d,z.y/=d,K._p=z,K._d=Qo(Z)}}},handle_touchend:function(G){var n=this,v=n.gv,l=n._57I,C=n._data;l&&(ig(l,_c(G))<=1&&v.sm().cs(),n._57I=c),C&&v.handleMouseUp&&v.handleMouseUp(G,C)},handleWindowTouchEnd:function(E){this.clear(E)},handleWindowTouchMove:function(y){var I=this,X=I.gv,j=X.dm().getHistoryManager(),N=Wm(y);if(1===N){if(I._editing&&(j&&!I._beginHistory&&(I._beginHistory=1,j.beginInteraction()),X._editing=1,I._78I(y)),I._moving)j&&!I._beginHistory&&(I._beginHistory=1,j.beginInteraction()),I.handleMove(y);else if(I._panning){var d=_c(y);X.setTranslate(I._translate.x+d.x-I._lastClientPoint.x,I._translate.y+d.y-I._lastClientPoint.y),I.fi({kind:X._panning?"betweenPan":"beginPan",event:y}),X._panning=1}}else if(2===N&&I._pinching){var F=Qo(y);X.handlePinch(I._p,F,I._d),I._d=F,I.fi({kind:X._pinching?"betweenPinch":"beginPinch",event:y}),X._pinching=1}},handleMove:function(d){var e=this,r=e.gv,F=r.lp(d);r._93O&&r._93O(d,e._data)||(r.moveSelection(F.x-e._lastLogicalPoint.x,F.y-e._lastLogicalPoint.y),e._lastLogicalPoint=F,e.autoScroll(d),e.fi({kind:r._moving?"betweenMove":"beginMove",event:d}),r._moving=1)}});var v=V.ht,yl=v.graph._editor={Math:{},Guide:{}};yl.getStyle=function(D){var k,h=yl.StyleMap;return h&&(k=h[D],k!==M)?k:yl.DefaultStyleMap[D]},yl.setStyle=function(Y,V){var E=yl.StyleMap;E||(E=yl.StyleMap={}),E[Y]=V},yl.inEdit=function(t){return t._inXEdit===!0},yl.startEdit=function(J){J._inXEdit=!0,yl.Inject.doInject(J)},yl._46O=function(x){x._inXEdit=!1,yl.Inject.undoInject(x)},yl.toScreenPosition=function(h,Z){var S=h.tx(),G=h.ty(),H=h._zoom;return new yl.Math.Vector2(Z.x*H+S,Z.y*H+G)},yl.checkHit=function(X,N,k){return X.distanceTo(N)<k?!0:!1},yl.toWorldPosition=function(B,K){var x=B.tx(),o=B.ty(),n=B._zoom;return{x:(K.x-x)/n,y:(K.y-o)/n}},yl.setAntialias=function(P,x){for(var z,O=["imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","msImageSmoothingEnabled"],h=0,d=O.length;d>h&&(z=O[h],!(z in P));h++);P[z],P[z]=x},yl.log=function(){};var Ur=yl.Inject={_modules:[]};Ur.registAsModule=function(l,N){var w={},q={};for(var D in l){var U=N.prototype[D];w[D]=U}l.getBackup=function(I){return w[I]},l.getBackups=function(){return w},q.doInject=function(){for(var y in l)"getBackup"!==y&&(N.prototype[y]=l[y])},q.undoInject=function(){for(var d in l)"getBackup"!==d&&(N.prototype[d]=w[d])},Ur._modules.push(q)},Ur.doInject=function(N){for(var f,F=Ur._modules,v=0,n=F.length;n>v;v++)f=F[v],f.doInject(N)},Ur.undoInject=function(E){for(var T,A=Ur._modules,S=0,G=A.length;G>S;S++)T=A[S],T.undoInject(E)};var vd=v.graph.EditInteractor=function(w){var c=this,Q=m.createElement("canvas");Q.className="editCanvas",Q.style.position="absolute",c._styleMap={},c._canvas=Q,c._context=Q.getContext("2d"),vd.superClass.constructor.call(c,w),yl.setAntialias(c._context,!1),c._subModules=[new yl.Anchor(c),new yl.Rect(c),new yl.Curve(c),new yl.MoveHelper(c)],c._gridGuide=new yl.Guide.Grid(c),c._rectGuide=new yl.Guide.Rect(c)},$p=vd;v.Default.def(vd,v.graph.Interactor,{ms_edit:1,ms_fire:1}),G.defineProperties(vd.prototype,{editDetail:{get:function(){var A=!!this._editDetail;return A},set:function(B){var u=this,F=u._editDetail;F!==B&&(u._editDetail=B,u.gv._editing=B,u.fp("editDetail",F,B),u.fp("pointsEditingMode",F,B))}},gvEditing:{get:function(){return this.gv._editing},set:function(T){(!this._editDetail||T)&&(this.gv._editing=T,T||(this.editDetail=!1))}},editing:{get:function(){return this._editing},set:function(n){this._editing=n,this.gvEditing=n}},pointsEditingMode:{get:function(){return this.editDetail},set:function(s){var H=this;H.editDetail!==s&&(s?H._tryEnterEditDetailMode():H._tryQuitEditDetailMode())}},gridEnabled:{get:function(){var A=this._gridEnabled;if(!A)return!1;var $=this.gv;return $?!0:!0},set:function(o){o!==this._gridEnabled&&(this._gridEnabled=o,this._42())}},alignmentGuideEnabled:{get:function(){return this._agEnabled},set:function(v){v!==this._agEnabled&&(this._agEnabled=v,this._42())}},gridGuide:{get:function(){return this._gridGuide}},rectGuide:{get:function(){return this._rectGuide}}}),vd.prototype.getSubModule=function(B){var z,R,S,m=this._subModules;for(R=0,S=m.length;S>R;R++)if(z=m[R],z.catalog===B)return z},vd.prototype.invokeSubModule=function(n,l){var h=this,I=h._subModules;if(I)for(var x,f,c,W=Array.prototype.slice.call(arguments,2),d=0,m=I.length;m>d;d++)if(x=I[d],f=x[n],f&&(c=f.apply(x,W),c!=M&&l))return x},vd.prototype.invokeSubModuleInverse=function(Z,A){var W=this,V=W._subModules;if(V)for(var a,G,h,U=Array.prototype.slice.call(arguments,2),F=V.length-1;F>=0;F--)if(a=V[F],G=a[Z],G&&(h=G.apply(a,U),h!=M&&A))return a},vd.prototype.setUp=function(){yl.log("setUp");var Z=this,X=Z.gv,r=X.getView(),i=Z._canvas;vd.superClass.setUp.call(Z),X.setEditInteractor(Z),X._79O?r.insertBefore(i,X._79O):r.appendChild(i),yl.startEdit(X),Z.invokeSubModule("setUp"),X.dm().mm(Z._onDataModelChanged,Z),X.dm().md(Z._onDataPropertyChanged,Z)},vd.prototype.tearDown=function(){yl.log("tearDown");var x=this,W=x.gv,J=W.getView();x._resetCustomCursorStyle(),vd.superClass.tearDown.call(x),W.dm().umm(x._onDataModelChanged),W.dm().umd(x._onDataPropertyChanged),W.setEditInteractor(null),J.removeChild(x._canvas),yl._46O(W),x.invokeSubModule("tearDown")},vd.prototype._onDataModelChanged=function(E){var u=this;("clear"===E.kind||"remove"===E.kind&&u.editDetail&&E.data===u.getSubModule("Curve").target)&&(u.editDetail=!1,u._42())},vd.prototype._onDataPropertyChanged=function(H){var v=this;if(v.editDetail){var C=v.getSubModule("Curve"),x=H.data;x===C.target&&(x._writing||C._handleDataChanged())}},vd.prototype.clear=function(){yl.log("clear")},vd.prototype.redraw=function(){this._42()},vd.prototype._42=function(){var $=this;$._drawTimer||($._drawTimer=a(function(){delete $._drawTimer,$.drawImpl()},0))},vd.prototype.drawImpl=function(){var _;for(_ in{_42:!0})break;return function(){var w=this,a=w._canvas,q=w.gv,$=q.getWidth(),e=q.getHeight(),J=w._context,I=v.Default.getInternal();(a.width!==$||a.height!==e)&&I.setCanvas(a,$,e),J.clearRect(0,0,a.width,a.height);var H=w._getValidSelection();J.save();var N=v.Default.devicePixelRatio;J.scale(N,N),w._gridGuide._42(),w._rectGuide._42(),w.invokeSubModuleInverse(_,!1,J,q,H),J.restore()}}(),vd.prototype._getValidSelection=function(){var r=this,t=r.gv,h=t.sm().getSelection(),x=[];return h.each(function(o){t.isVisible(o)&&t.isEditable(o)&&x.push(o)}),x},vd.prototype.handle_touchmove=function(Q){return this.handle_mousemove(Q)},vd.prototype.handle_mousemove=function(p){if(!v.Default.isDragging()){var j=this;(j.editDetail||!Qj())&&(j.gvEditing=!1,j._checkEdit(p)&&(j.gvEditing=!0))}},vd.prototype.handle_touchstart=function(K){return this.handle_mousedown(K)},vd.prototype.handle_mousedown=function(t){lg(t);var z=this;if(z.editDetail||!Qj()){if(pn(t)&&!t.clickThrough){if(z.editDetail){if(z._tryQuitEditDetailMode(t))return}else if(z._tryEnterEditDetailMode())return;if(z.invokeSubModule("handleDoubleClick",!0,t))return}var n=z._checkEdit(t);if(n){z._downPosition=z._getLogicalPoint(t);var $=z.gv.dm(),s=$.getHistoryManager();s&&s.beginInteraction(),n.startEdit(z,t),z.editing=!0}}},vd.prototype._checkEdit=function(p){var r=this,b=r.gv,g=r._getLogicalPoint(p),H=r.invokeSubModule("check",!0,b,p,g)||null;return r._editMod=H,H},vd.prototype.handleWindowTouchMove=function(n){return this.handleWindowMouseMove(n)},vd.prototype.handleWindowMouseMove=function(o){var u=this,N=u._downPosition;if(N){var S=u._getLogicalPoint(o);if(S.distanceTo(N)<u.getStyle("moveSensitivity"))return;delete u._downPosition}var C=u._editMod;C&&C.handleEdit(u.gv,o)},vd.prototype._getLogicalPoint=function(M){var q=this,D=v.Default.getLogicalPoint(M,q._canvas);return new yl.Math.Vector2(D)},vd.prototype.handleWindowTouchEnd=function(p){return this.handleWindowMouseUp(p)},vd.prototype.handleWindowMouseUp=function(){var g;for(g in{_46O:!0})break;return function(){var P=this;P.editing=!1,P.setCursor("default"),P.invokeSubModule(g,!1),P._42();var E=P.gv.dm(),o=E.getHistoryManager();o&&o.endInteraction()}}(),vd.prototype.handle_mousewheel=function(U){var r=this;lg(U),r.invokeSubModule("preHandleScroll",!0)||r.gv.handleScroll(U,U.wheelDelta)},vd.prototype.handleDelete=function(){var y=this;return y.editDetail?(y.invokeSubModule("handleDelete",!0),y._42(),void 0):(y.gv.removeSelection(),void 0)},vd.prototype.handle_keydown=function(b){var J=this;if((b.metaKey||b.ctrlKey)&&J._42(),Qj(b)&&!J.editing)return J.gvEditing=!1,J.setCursor("default"),J._42(),void 0;var A=aq(b);return J.editDetail?((A||$j(b))&&(J.editDetail=!1,J._42()),J.invokeSubModule("handle_keydown",!0,b),void 0):(A&&J._tryEnterEditDetailMode(),void 0)},vd.prototype.handle_keyup=function(U){this.invokeSubModule("handle_keyup",!0,U)},vd.prototype._tryEnterEditDetailMode=function(){var u=this;return!u.editDetail&&u.invokeSubModule("canEnterEditDetailMode",!0)&&1===u._getValidSelection().length?(u.editDetail=!0,u._42(),!0):void 0},vd.prototype._tryQuitEditDetailMode=function(E){var j=this;if(j.editDetail){var a=j.gv,X=j.getSubModule("Curve").target;return E&&a.getDataAt(E)===X?void 0:(j.editDetail=!1,j._42(),!0)}},vd.prototype.setStyle=function(v,I,$){var g=this;$?yl.setStyle(v,I):g._styleMap[v]=I,g.fp("styleChanged",null,{key:v,value:I,base:$}),g._42()},vd.prototype.getStyle=function($){var i=this,A=i._styleMap[$];return A!==M?A:yl.getStyle($)},vd.prototype.setCursor=function(b){this._resetCustomCursorStyle(),v.graph.EditInteractor.superClass.setCursor.call(this,b)},vd.prototype._resetCustomCursorStyle=function(){var f=this;if(f._customStyle){var u=this.gv.getView();u.classList&&u.classList.remove&&u.classList.remove(f._customStyle),f._customStyle=null}},vd.prototype._setRotateCursor=function(O){var G=this,L=G._cursorFactory;L||(L=G._cursorFactory=new yl.CursorFactory(G));var K=L.getRotateCursor(O),Z=G.gv.getView();G._resetCustomCursorStyle(),G._customStyle=K,Z.classList&&Z.classList.add&&Z.classList.add(K)};var is=yl.Group=function(y){var D=this;D._entities=y,D._64O=0,D._position={x:0,y:0},D._scale={x:1,y:1},D._anchor={x:.5,y:.5},D._anchor2={x:.5,y:.5}};is.prototype={},is.prototype.constructor=is;var Qm=null;is.findOrCreateGroup=function(U){if(Qm&&Qm.checkIsMe(U))return Qm;var T=new yl.Group(U);return T.getKeyOb()?(Qm=T,T):void 0},is.prototype.checkIsMe=function(g){var v=this._entities;if(v.length!==g.length)return!1;var l,J={},U=g.length;for(l=0;U>l;l++)J[g[l]._id]=!0;for(l=0;U>l;l++)if(!J[v[l]._id])return!1;return!0},is.prototype.getRotation=function(){return this._64O},is.prototype.getPosition=function(){return this._position},is.prototype.getAnchor=function(){return this._anchor},is.prototype.getWidth=function(){return this._width},is.prototype.getScale=function(){return this._scale},is.prototype.getSize=function(){return{width:this._width,height:this._height}},is.prototype.getHeight=function(){return this._height},is.prototype.getKeyOb=function(){for(var S=this._entities,X=S.length-1;X>=0;X--){var C=S[X];if(this.isNode(C))return C}},is.prototype.getAnchor2=function(){var t=this,V=t.rotateCenter;if(V)return V;var C=t.getKeyOb();if(!C)return t._anchor;var O=t._anchor2,$=C.getMatrix();return $.tf({x:C.getWidth()*(O.x-C.getAnchor().x),y:C.getHeight()*(O.y-C.getAnchor().y)})},is.prototype.setAnchor2=function(Y,S){var o=this,F=o.getKeyOb();if(F){var N,O=F.getMatrix();N="number"==typeof Y?{x:Y,y:S}:Y;var G=O.tfi(N);o._anchor2={x:F.getAnchor().x+G.x/F.getWidth(),y:F.getAnchor().y+G.y/F.getHeight()}}},is.prototype.setRotation=function(){},is.prototype.beginRotate=function(T){this.rotateCenter=T.pos,this.rotateMode=T.groupRotateMode},is.prototype.endRotate=function(){delete this.rotateCenter,delete this.rotateMode},is.prototype.addRotation=function(x,B){return"batch"===B?this._addRotationInBatchMode(x):"block"===B?this._addRotationInBlockMode(x):void 0},is.prototype._addRotationInBlockMode=function(S){var Y=this,B=Y.rotateCenter||Y.getPosition();Y._entities.forEach(function(e){if(Y.isNode(e)){var m=e.getMatrix();m.translate(-B.x,-B.y),m.rotate(S),m.translate(B.x,B.y);var K=Math.sign(e.getScale().x);e.setRotation(w(m.b*K,m.a*K)),e.setPosition(m.tx,m.ty)}})},is.prototype._addRotationInBatchMode=function(e){var P=this,q=P._anchor2;P._entities.forEach(function(H){if(P.isNode(H)){var u=H.getAnchor(),l=H.getMatrix(),n=l.tf({x:H.getWidth()*(q.x-u.x),y:H.getHeight()*(q.y-u.y)}),g=new yl.Math.Matrix2;g.set(l.a,l.b,l.c,l.d,l.tx,l.ty),g.translate(-n.x,-n.y),g.rotate(e),g.translate(n.x,n.y);var j=Math.sign(H.getScale().x);H.setRotation(w(g.b*j,g.a*j)),H.setPosition(g.tx,g.ty)}})},is.prototype.setPosition=function(f){var e,K,n,L,W=this,k=W._position,C=f.x-k.x,a=f.y-k.y,d=W._entities;for(K=0,n=d.length;n>K;K++)e=d[K],To(e)&&(L=e.getPosition(),e.setPosition(L.x+C,L.y+a));W._position=f},is.prototype.setScale=function(U,R){var n=this,m=U/n._scale.x,D=R/n._scale.y;n._adjustChildScaleOrSize(m,D,"size"),n._scale={x:U,y:R}},is.prototype.getRect=function(){var r=this,t=r._position,n=r._width,y=r._height;return{x:t.x-n/2,y:t.y-y/2,width:n,height:y}},is.prototype.setSize=function(j,W){var K=this,j=Math.max(1,j),W=Math.max(1,W),O=j/K._width,v=W/K._height;K._adjustChildScaleOrSize(O,v,"size"),K._width=j,K._height=W},is.prototype._adjustChildScaleOrSize=function(F,l,E){var e,D,u,N,j,c,m,h,V,g,t,$,W,d,H=this,C=H._position,S=H._entities,U=new yl.Math.Matrix2;for(D=0,u=S.length;u>D;D++)if(e=S[D],H.isNode(e)){if(N=e.getPosition(),j=e.getRotation(),c=e.getWidth(),m=e.getHeight(),h=e.getScale(),t=h.x*c,$=h.y*m,U.identity().scale(t,$).rotate(j).translate(N.x,N.y).translate(-C.x,-C.y).rotate(-H._64O),j=w(U.b*Math.sign(t),U.a*Math.sign(t)),U.scale(F,l),V=Math.cos(j),g=Math.sin(j),Math.abs(V)<.001?(W=U.b/g,d=-U.c/g):(W=U.a/V,d=U.d/V),"scale"===E)e.setScale(W/c,d/m);else if("size"===E){var z=W/h.x,G=d/h.y;e.setScale(Kp(W)*Math.abs(h.x),Kp(d)*Math.abs(h.y)),e.setSize(Math.max(.1,Math.abs(z)),Math.max(.1,Math.abs(G)))}U.rotate(H._64O).translate(C.x,C.y),e.setPosition(U.tx,U.ty)}},is.prototype.getMatrix=function(){var H=this,s=H._position,Z=v.Default.getInternal(),o=H._scale;return new Z.Mat(H._64O,s.x,s.y,o.x,o.y)},is.prototype.getCorners=function(){var W=this,k=W._width,E=W._height,t=W._anchor,j=-k*t.x,C=-E*t.y,i=W.getMatrix();return[i.tf(j,C),i.tf(j,C+E),i.tf(j+k,C+E),i.tf(j+k,C)]},is.prototype.calcInfo=function(){var b,x,l,q,D,i,v=this,y=[],f=v._entities,k=v._64O;for(q=0,D=f.length;D>q;q++)i=f[q],v.isNode(i)&&i.getCorners&&y.push.apply(y,i.getCorners());if(y.length){var B=Math.cos(-k),r=Math.sin(-k),I=1/0,$=-1/0,m=1/0,A=-1/0;for(q=0,D=y.length;D>q;q++)l=y[q],b=l.x,x=l.y,l.x=B*b-r*x,l.y=r*b+B*x,I=Math.min(I,l.x),$=Math.max($,l.x),m=Math.min(m,l.y),A=Math.max(A,l.y);v._width=($-I)/v._scale.x,v._height=(A-m)/v._scale.y,B=Math.cos(k),r=Math.sin(k);var z=v._anchor;b=I+($-I)*z.x,x=m+(A-m)*z.y,v._position={x:B*b-r*x,y:r*b+B*x}}},is.prototype.isNode=function(l){return To(l)?mr(l)?!1:!0:!1},is.prototype._42=function(u,j,A){var G,k,V,E,y,Z,t,p,w=this,N=w._entities,x=w.rotateMode;for("batch"===x&&(p=w.getKeyOb()),G=0,k=N.length;k>G;G++)V=N[G],w.isNode(V)&&(Z=V.getRect(),E=yl.toScreenPosition(A,{x:Z.x,y:Z.y}),y=yl.toScreenPosition(A,{x:Z.x+Z.width,y:Z.y+Z.height}),t={min:E,max:y},V===p&&(t.isKeyOb=!0),yl.Icons.DrawIcon(u,j,yl.Icons.GroupSubEntityRect,t))};var Mb=yl.CursorFactory=function(v){var B=this;B._interactor=v,B._rotateCursorStyles={}};Mb.prototype={},Mb.prototype.constructor=Mb,Mb.prototype.getRotateCursor=function(d){var r=this;0>d&&(d+=2*Math.PI);var M=r._interactor,z=M.getStyle("rotateCursorSize"),l=M.getStyle("rotateCursorRound"),o=Math.round(180*(d/Math.PI)/l);o*l>=360&&(o=0);var S=r._rotateCursorStyles,F="htCustomRotateStyle_"+z+"_"+l+"_"+o;return S[F]||(r._produceRotateCursor(F,z,l,o),S[F]=!0),F},Mb.prototype._produceRotateCursor=function(N,h,f,n){var l=this;l._interactor;var F=l._canvas;F||(F=l._canvas=m.createElement("canvas")),F.width=F.height=h*devicePixelRatio,F.style.width=F.style.height=h+" px";var X=F.getContext("2d");yl.setAntialias(X,!1),X.scale(devicePixelRatio,devicePixelRatio);var _,A,Q,L,z,a=Math.round(h/2),I=""+a+" "+a+",auto !important;";_=Math.PI/180*n*f,X.clearRect(0,0,h,h),X.save(),X.scale(h/32,h/32),X.translate(16,16),X.rotate(_+Math.PI/2),X.beginPath(),X.moveTo(-8,0),X.lineTo(-8,3),X.lineTo(-5,3),X.moveTo(8,0),X.lineTo(8,3),X.lineTo(5,3),X.moveTo(-8,3),X.quadraticCurveTo(0,-6,8,3),X.restore(),X.strokeStyle="white",X.lineWidth=4,X.stroke(),X.strokeStyle="black",X.lineWidth=2,X.stroke(),A=JSON.stringify(F.toDataURL()),L="cursor:url("+A+")"+I,1!==devicePixelRatio&&(Q='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+h+'px" height="'+h+'px"><image xlink:href='+A+' width="'+h+'" height="'+h+'"/></svg>',L+="cursor:url(data:image/svg+xml;base64,"+btoa(Q)+")"+I,L+="cursor:-webkit-image-set(url("+A+")"+devicePixelRatio+"x,url("+A+")1x)"+I),z=m.createElement("style"),z.textContent="body."+N+" *, ."+N+"{"+L+"}",m.head.appendChild(z)};var ke=yl.Guide.Grid=function(d){var v=this;v._interactor=d,v._alignmentGuideId=0,v._xAlignmentGuide=[],v._yAlignmentGuide=[]};ke.prototype={},ke.prototype.constructor=ke,G.defineProperties(ke.prototype,{gridBlockSize:{get:function(){var n=this;return n._gridBlockSize||n._interactor.getStyle("gridBlockSize")},set:function(G){this._gridBlockSize=G,this._interactor._42()}},gridThickLinesEvery:{get:function(){var N=this;return N._gridThickLinesEvery||N._interactor.getStyle("gridThickLinesEvery")},set:function(q){this._gridThickLinesEvery=q,this._interactor._42()}},gridEnabled:{get:function(){var B=this,e=B._interactor;return e.gridEnabled&&B.isValidGrid()}}}),ke.prototype._42=function(){var q=this,I=q._interactor;q.gridEnabled&&q.drawGrid(),I.alignmentGuideEnabled&&q.drawAlignmentGuide()},ke.prototype.makeMatrix=function(){var q=this,Z=q._interactor.getStyle("gridAngle"),Q=q._interactor.getStyle("gridRotation"),g=new yl.Math.Matrix2,o=Math.sin(Z),G=Math.cos(Z);return g.set(1,0,G,o,0,0),g.rotate(Q),g},ke.prototype.isValidGrid=function(){var v=this,T=Math.PI,A=v._interactor,I=A.gv;if(I._zoom<A.getStyle("gridZoomThreshold"))return!1;var h=A.getStyle("gridAngle"),V=Math.abs(180*(h%T/T)),p=1-1e-8;return p>V||V>180-p?!1:!0},ke.prototype.drawAlignmentGuide=function(){var b=this,o=b._interactor,_=o.gv,k=o._canvas,c=o._context,E=k.width,m=k.height,i=_.tx(),g=_.ty(),D=_._zoom;c.beginPath(),c.strokeStyle=o.getStyle("gridAlignmentGuideColor"),c.lineWidth=1,b._xAlignmentGuide.forEach(function(r){var A=r.p*D+i;c.moveTo(A,0),c.lineTo(A,m)}),b._yAlignmentGuide.forEach(function(z){var V=z.p*D+g;c.moveTo(0,V),c.lineTo(E,V)}),c.stroke()},ke.prototype.drawGrid=function(){function o(B,E,O,u){var G=yl.toScreenPosition(l,H.apply({x:B,y:E})),K=yl.toScreenPosition(l,H.apply({x:O,y:u}));e.moveTo(G.x,G.y),e.lineTo(K.x,K.y)}var j=this,B=j._interactor,y=j.gridBlockSize,d=j.gridThickLinesEvery,K=B.getStyle("gridThickColor"),b=B.getStyle("gridLightColor"),l=B.gv,X=B._canvas,e=B._context,Q=X.width,W=X.height,H=j.makeMatrix(),Y=H.applyInverse(yl.toWorldPosition(l,{x:0,y:0})),E=H.applyInverse(yl.toWorldPosition(l,{x:Q,y:0})),G=H.applyInverse(yl.toWorldPosition(l,{x:0,y:W})),z=H.applyInverse(yl.toWorldPosition(l,{x:Q,y:W})),t=Math.min(Y.x,E.x,G.x,z.x),U=Math.max(Y.x,E.x,G.x,z.x),T=Math.min(Y.y,E.y,G.y,z.y),m=Math.max(Y.y,E.y,G.y,z.y);Q=U-t,W=m-T;var L=Math.ceil(t/y),P=Math.floor(U/y),p=Math.ceil(T/y),A=Math.floor(m/y);l.tx(),l.ty(),l._zoom;var O,M,q;for(e.save(),e.lineWidth=1,e.beginPath(),e.strokeStyle=K,q=Math.ceil(L/d)*d;P>=q;q+=d)O=q*y,o(O,T,O,m);for(q=Math.ceil(p/d)*d;A>=q;q+=d)M=q*y,o(t,M,U,M);for(e.stroke(),e.beginPath(),e.strokeStyle=b,q=L;P>=q;q++)0!==q%d&&(O=q*y,o(O,T,O,m));for(q=p;A>=q;q++)0!==q%d&&(M=q*y,o(t,M,U,M));e.stroke(),e.restore()},ke.prototype.getAlignmentGuides=function(){var q=this;return{x:q._xAlignmentGuide,y:q._yAlignmentGuide}},ke.prototype.addAlignmentGuide=function(D,L,n){var a=this,V="x"===D?a._xAlignmentGuide:a._yAlignmentGuide,n=n?n:++a._alignmentGuideId,s={p:L,id:n};if(V.length){var z=a._findClosestAlignmentGuide(s.p,V);z.dis<0?V.splice(z.index+1,0,s):V.splice(z.index,0,s)}else V.push(s);return a._interactor._42(),n},ke.prototype.findClosest=function(n,J,f){var i=this,X=i._interactor,D=X.gv;f&&(n=yl.toWorldPosition(D,n));var l,r,Q,u=1/0,P=1/0,d=n.x,g=n.y;if(i.gridEnabled){var L=i.gridBlockSize,p=i.makeMatrix(),U=p.applyInverse(n);U=p.apply({x:Math.round(U.x/L)*L,y:Math.round(U.y/L)*L}),u=U.x-d,P=U.y-g,Q=!0}if(X.alignmentGuideEnabled&&(l=i._findClosestAlignmentGuide(d,i._xAlignmentGuide).dis,r=i._findClosestAlignmentGuide(g,i._yAlignmentGuide).dis,Math.abs(l)<Math.abs(u)&&(u=l,Q=!0),Math.abs(r)<Math.abs(P)&&(P=r,Q=!0)),Q){Q=!1;var e=D._zoom,Y=X.getStyle("smartGuideSensitivity")/e,y={};if(Math.abs(u)<Y&&"y"!==J&&(y.x=f?u*e:u,Q=!0),Math.abs(P)<Y&&"x"!==J&&(y.y=f?P*e:P,Q=!0),Q)return y}},ke.prototype._findClosestAlignmentGuide=function(R,e){if(!e.length)return{dis:1/0};for(var l,C=0,_=e.length-1;_-C>1;)l=Math.floor((C+_)/2),e[l].p<R?C=l:_=l;var s=e[C].p-R,Z=e[_].p-R;return Math.abs(s)<=Math.abs(Z)?{line:e[C],dis:s,index:C}:{line:e[_],dis:Z,index:_}},ke.prototype.removeAllAlignmentGuide=function(X){var w=this;"y"!==X&&(w._xAlignmentGuide=[]),"x"!==X&&(w._yAlignmentGuide=[]),w._interactor._42()},ke.prototype.removeAlignmentGuide=function(j){var v,l,r,c=this,f=c._xAlignmentGuide;for(k=0;2>k;k++)for(f=0===k?c._xAlignmentGuide:c._yAlignmentGuide,v=0,l=f.length;l>v;v++)if(r=f[v],r.id===j)return f.splice(v,1),c._interactor._42(),{axis:0===k?"x":"y",position:r.p};return!1},ke.prototype.adjustAlignmentGuide=function(J,_){var t=this,n=t.removeAlignmentGuide(J);return n?(t.addAlignmentGuide(n.axis,_,J),!0):!1};var gk=yl.Guide.Rect=function(M){var a=this;a._interactor=M};gk.prototype={},gk.prototype.constructor=gk,gk.prototype.gatherRects=function(){var B,Y,k,$,U=this,t=U._interactor.gv,P=[],u=[],L={x:P,y:u},c={},X=t.getDataModel(),M=X.a("width"),J=X.a("height");M&&J&&(B=0,Y=0,k=M,$=J,P.push({node:X,type:0,p:B},{node:X,type:1,p:B+k/2},{node:X,type:2,p:B+k}),u.push({node:X,type:0,p:Y},{node:X,type:1,p:Y+$/2},{node:X,type:2,p:Y+$}),c[X._id||0]={x:B,y:Y,width:k,height:$}),X.each(function(x){if(To(x)&&!t.isSelected(x)&&t.isVisible(x)){var C=!1;if(t.sm().getSelection().each(function(B){C||(x.isHostOn(B)?C=!0:x.isDescendantOf(B)&&(C=!0))}),!C){var J=x.getRect();B=J.x,Y=J.y,k=J.width,$=J.height,P.push({node:x,type:0,p:B},{node:x,type:1,p:B+k/2},{node:x,type:2,p:B+k}),u.push({node:x,type:0,p:Y},{node:x,type:1,p:Y+$/2},{node:x,type:2,p:Y+$}),c[x._id]=J}}}),P.sort(function(J,I){return J.p-I.p}),u.sort(function(v,o){return v.p-o.p}),U._grid=L,U._87I=c},gk.prototype.gatherLines=function(t,a,Y){var o,m,g,s,f,G,l,p,A,M,Q,c,L=this,I=[L.findClosest({x:t.x,y:t.y},a),L.findClosest({x:t.x+t.w/2,y:t.y+t.h/2},a),L.findClosest({x:t.x+t.w,y:t.y+t.h},a)],B={},W=L._87I;Y=Y||255;var _,U;for(L._guideLine=[],o=0;2>o;o++)for(B={},0===o?(s="y",p=t.x,A=p+t.w):(s="x",p=t.y,A=p+t.h),m=0;3>m;m++)f=I[m],f&&isFinite(f[s])&&(_=1<<3*o+m,Y&_&&(G=f[s+"Line"],l=G.node,U=l._id||0,B[U]||(B[U]=!0,c=W[U],"y"===s?(M=c.x,Q=c.x+c.width):(M=c.y,Q=c.y+c.height),g=G.p,L._guideLine.push({type:s,a:p,b:A,c:M,d:Q,p:g}))))},gk.prototype._binarySearchClosest=function(u,P){if(!P.length)return{dis:1/0};for(var q,N=0,G=P.length-1;G-N>1;)q=Math.floor((N+G)/2),P[q].p<u?N=q:G=q;var T=P[N].p-u,s=P[G].p-u;return Math.abs(T)<=Math.abs(s)?{line:P[N],dis:T}:{line:P[G],dis:s}},gk.prototype.findClosest=function(k,H,y){var t=this,x=t._interactor,V=x.gv,z=t._grid;y&&(k=yl.toWorldPosition(V,k));var _,E=t._binarySearchClosest(k.x,z.x),O=t._binarySearchClosest(k.y,z.y),T=E.dis,n=O.dis,h=V._zoom,c=x.getStyle("smartGuideSensitivity")/h,o={};return Math.abs(T)<c&&"y"!==H&&(o.x=y?T*h:T,o.xLine=E.line,_=!0),Math.abs(n)<c&&"x"!==H&&(o.y=y?n*h:n,o.yLine=O.line,_=!0),_?o:void 0},gk.prototype._42=function(){var I=this,_=I._guideLine;if(_&&!v.Default.isCtrlDown()){var Z,u,M,x,b,J,d,L,f,E,P,t,$,w,e,o,A,X=I._interactor,F=X.gv,W=X._context,H=F.tx(),s=F.ty(),V=F._zoom,a=X.getStyle("guideLineTextSpacing");for(Z=0,u=_.length;u>Z;Z++)M=_[Z],L=M.type,f=M.p,E=M.a,P=M.b,t=M.c,$=M.d,w=Math.min(E,t),e=Math.max(P,$),"x"===L?(x=f*V+H,b=w*V+s,J=x,d=e*V+s):(x=w*V+H,b=f*V+s,J=e*V+H,d=b),yl.Icons.DrawIcon(X,W,yl.Icons.MoveLineGuide,[x,b,J,d]),$>=E&&P>=t||(w=E>$?$:P,e=E>$?E:t,A=e-w,"x"===L?(M.center2center||(x-=a,J=x),b=w*V+s,d=e*V+s,o=yl.Icons.MoveLineGuideDistanceV):"y"===L&&(M.center2center||(b-=a,d=b),x=w*V+H,J=e*V+H,o=yl.Icons.MoveLineGuideDistanceH),yl.Icons.DrawIcon(X,W,o,{x0:x,y0:b,x1:J,y1:d,dis:A}))
}},gk.prototype.clear=function(){this._guideLine=null},yl.DefaultStyleMap={pointSize:[24,9],checkSize:7,rotateCheckSize:10,moveSensitivity:10,rotateRound:Math.PI/2,rotateSensitivity:Math.PI/60,shiftRotateRound:Math.PI/12,shiftLineRotateRound:Math.PI/4,anchorMovable:!0,anchorVisible:!0,anchorHideThreshold:25,anchorOutsideVisibleThreshold:.25,anchorRound:.25,anchorSensitivity:.02,smartGuideSensitivity:8,curveIntersectSize:5,curvePointIntersectSize:8,edgeHostDetectPerFrame:!0,guideLineTextSpacing:32,gridBlockSize:40,gridThickLinesEvery:10,gridThickColor:"#5d5d5d",gridLightColor:"#d0d0d0",gridZoomThreshold:.25,gridAlignmentGuideColor:"#ff0000",gridAngle:Math.PI/2,gridRotation:0,groupRotateModeDefault:"block",groupRotateModeKey:["ctrlKey","metaKey"],rotateCursorSize:32,rotateCursorRound:45,tipTextColor:"#ffffff",tipBackground:"#333333",curveHighlightColor:"#30599e",rectPointBackground:"white",rectPointBorderColor:"#666666",rectPointShadowColor:"rgba(0,0,0,0.35)",shapeCtrlPointBackground:"white",shapeCtrlPointBorderColor:"#707070",shapeHighlighPointBackground:"#30599e"};var ks=yl.Icons={},Pl=1e4,ej=null,Bl=8;v.Default.setImage("Icons.RectPoint",{width:Bl,height:Bl,comps:[{type:"shape",points:[0,0,0,Bl,Bl,Bl,Bl,0],segments:[1,2,2,2,5],shadow:!0,borderWidth:1,shadowColor:{func:function(){return ej.getStyle("rectPointShadowColor")}},background:{func:function(){return ej.getStyle("rectPointBackground")}},borderColor:{func:function(){return ej.getStyle("rectPointBorderColor")}}}]});var dr="#e000e0";ks.GroupSubEntityRect={comps:[{type:"shape",points:{func:function(){var U=ks.GroupSubEntityRect.data;if(!U)return[];var b=U.min,e=U.max;return[b.x,b.y,b.x,e.y,e.x,e.y,e.x,b.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return ks.GroupSubEntityRect.data.isKeyOb?dr:"#666666"}}}]},ks.Line={comps:[{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[ks.Line.data.P1.x,ks.Line.data.P1.y],Bl,Bl]}}},{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[ks.Line.data.P2.x,ks.Line.data.P2.y],Bl,Bl]}}}]},ks.EdgeHostGuide={comps:[{type:"shape",points:{func:function(){return ks.EdgeHostGuide.data}},segments:[1,2,2,2,5],background:null,borderWidth:2,borderColor:"red"}]},ks.Rect={comps:[{type:"shape",points:{func:function(){var j=ks.Rect.data;if(!j)return[];var J=j.LT,$=j.LB,r=j.RB,B=j.RT;return[J.x,J.y,$.x,$.y,r.x,r.y,B.x,B.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:"#666666"},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return ks.Rect.data.rotation}},rect:{func:function(){return[[ks.Rect.data.LT.x,ks.Rect.data.LT.y],Bl,Bl]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return ks.Rect.data.rotation}},rect:{func:function(){return[[ks.Rect.data.LB.x,ks.Rect.data.LB.y],Bl,Bl]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return ks.Rect.data.rotation}},rect:{func:function(){return[[ks.Rect.data.RB.x,ks.Rect.data.RB.y],Bl,Bl]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return ks.Rect.data.rotation}},rect:{func:function(){return[[ks.Rect.data.RT.x,ks.Rect.data.RT.y],Bl,Bl]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return ks.Rect.data.rotation}},visible:{func:function(){return ks.Rect.data.L?!0:!1}},rect:{func:function(){return[[ks.Rect.data.L.x,ks.Rect.data.L.y],Bl,Bl]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return ks.Rect.data.rotation}},visible:{func:function(){return ks.Rect.data.R?!0:!1}},rect:{func:function(){return[[ks.Rect.data.R.x,ks.Rect.data.R.y],Bl,Bl]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return ks.Rect.data.rotation}},visible:{func:function(){return ks.Rect.data.T?!0:!1}},rect:{func:function(){return[[ks.Rect.data.T.x,ks.Rect.data.T.y],Bl,Bl]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return ks.Rect.data.rotation}},visible:{func:function(){return ks.Rect.data.B?!0:!1}},rect:{func:function(){return[[ks.Rect.data.B.x,ks.Rect.data.B.y],Bl,Bl]}}}]};var ir=18;v.Default.setImage("Icons.Anchor",{width:ir,height:ir,comps:[{type:"arc",rect:[4,4,ir-8,ir-8],arcFrom:0,arcClose:!1,background:"#ffffff",borderWidth:0,borderColor:"#000000"},{type:"shape",points:[2,ir/2,ir-2,ir/2,ir/2,2,ir/2,ir-2],segments:[1,2,1,2],background:null,borderWidth:1,borderColor:"#111111"},{type:"arc",rect:[5.5,5.5,ir-11,ir-11],arcFrom:0,arcClose:!1,background:null,borderWidth:1,borderColor:"#111111"}]}),ks.Anchor={comps:[{type:"image",name:"Icons.Anchor",rect:{func:function(){return[[ks.Anchor.data.POS.x,ks.Anchor.data.POS.y],ir,ir]}}}]},ks.TipShiftX=12,ks.TipShiftY=12;var jg=[8,28];ks.TipHelper={comps:[{type:"roundRect",rect:{func:function(){return[ks.TipHelper.data.helperPos.x,ks.TipHelper.data.helperPos.y,jg[0]*ks.TipHelper.data.size,jg[1]]}},background:{func:function(){return ej.getStyle("tipBackground")}},opacity:.6},{type:"text",text:{func:function(){return ks.TipHelper.data.text}},rect:{func:function(){return[ks.TipHelper.data.helperPos.x,ks.TipHelper.data.helperPos.y,jg[0]*ks.TipHelper.data.size,jg[1]]}},color:{func:function(){return ej.getStyle("tipTextColor")}},font:"bold 12px Arial",align:"center"}]};var bb=7;ks.ShapePoint={comps:[{type:"circle",rect:{func:function(){var C=ks.ShapePoint.data;return[C,bb,bb]}},background:"#ffffff",borderWidth:1,borderColor:"#333333"}]},ks.ShapeBgCurve={comps:[{type:"shape",points:{func:function(){return ks.ShapeBgCurve.data.P}},segments:{func:function(){return ks.ShapeBgCurve.data.S}},background:null,borderWidth:1,borderColor:"#333333"}]};var Nj=8;ks.ShapeHighlighPoint={comps:[{type:"circle",rect:{func:function(){var Z=ks.ShapeHighlighPoint.data;return[[Z.x,Z.y],Nj,Nj]}},background:{func:function(){return ej.getStyle("shapeHighlighPointBackground")}},borderWidth:0}]};var _h=10;ks.ShapeHighlighRealPoint={comps:[{type:"circle",rect:{func:function(){var j=ks.ShapeHighlighRealPoint.data;return[[j.x,j.y],_h,_h]}},background:"#ffffff",borderWidth:2,borderColor:"#333333"}]};var Oh=8;ks.ShapeHighlighCtrlPoint={comps:[{type:"shape",points:{func:function(){var h=ks.ShapeHighlighCtrlPoint.data,z=h.x,E=h.y,C=Oh/2;return[z-C,E-C,z-C,E+C,z+C,E+C,z+C,E-C]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return ej.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return ej.getStyle("shapeCtrlPointBorderColor")}}}]};var ho=3;ks.ShapeHighlightCurve={comps:[{type:"shape",points:{func:function(){return ks.ShapeHighlightCurve.data}},segments:[1,4],background:null,borderWidth:ho,borderColor:{func:function(){return ej.getStyle("curveHighlightColor")}}}]},ks.ShapeGuideLine={comps:[{type:"shape",points:{func:function(){return ks.ShapeGuideLine.data}},background:null,borderWidth:1,borderColor:"red"}]},ks.MoveLineGuide={comps:[{type:"shape",points:{func:function(){return ks.MoveLineGuide.data}},background:null,borderWidth:1,borderColor:"red"}]};var Ph=5;ks.MoveLineGuideDistanceH={comps:[{type:"shape",points:{func:function(){var L=ks.MoveLineGuideDistanceH.data,G=L.x0,C=L.y0,g=L.x1,A=L.y1;return[G,C,g,A,G,C-Ph,G,C+Ph,g,A-Ph,g,A+Ph]}},segments:[1,2,1,2,1,2],background:null,borderWidth:1,borderColor:"red"},{type:"text",text:{func:function(){return Math.round(ks.MoveLineGuideDistanceH.data.dis)}},rect:{func:function(){var j=ks.MoveLineGuideDistanceH.data;return[[(j.x0+j.x1)/2,j.y0-10],20,20]}},color:"red",font:"12px Arial",align:"center"}]},ks.MoveLineGuideDistanceV={comps:[{type:"shape",points:{func:function(){var O=ks.MoveLineGuideDistanceV.data,E=O.x0,u=O.y0,c=O.x1,g=O.y1;return[E,u,c,g,E-Ph,u,E+Ph,u,c-Ph,g,c+Ph,g]}},segments:[1,2,1,2,1,2],background:null,borderWidth:1,borderColor:"red"},{type:"text",text:{func:function(){return Math.round(ks.MoveLineGuideDistanceV.data.dis)}},rect:{func:function(){var C=ks.MoveLineGuideDistanceV.data;return[[C.x0-10,(C.y0+C.y1)/2],20,20]}},color:"red",font:"12px Arial",align:"center"}]};var um=6;ks.ShapeActivingCtrl={comps:[{type:"shape",visible:{func:function(){return ks.ShapeActivingCtrl.data.c1?!0:!1}},points:{func:function(){var $=ks.ShapeActivingCtrl.data;return[$.point.x,$.point.y,$.c1.x,$.c1.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:"#707070"},{type:"shape",visible:{func:function(){return ks.ShapeActivingCtrl.data.c2?!0:!1}},points:{func:function(){var u=ks.ShapeActivingCtrl.data;return[u.point.x,u.point.y,u.c2.x,u.c2.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:"#707070"},{type:"shape",visible:{func:function(){return ks.ShapeActivingCtrl.data.c1?!0:!1}},points:{func:function(){var a=ks.ShapeActivingCtrl.data.c1,c=a.x,H=a.y,g=um/2;return[c-g,H-g,c-g,H+g,c+g,H+g,c+g,H-g]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return ej.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return ej.getStyle("shapeCtrlPointBorderColor")}}},{type:"shape",visible:{func:function(){return ks.ShapeActivingCtrl.data.c2?!0:!1}},points:{func:function(){var U=ks.ShapeActivingCtrl.data.c2,y=U.x,u=U.y,t=um/2;return[y-t,u-t,y-t,u+t,y+t,u+t,y+t,u-t]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return ej.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return ej.getStyle("shapeCtrlPointBorderColor")}}}]},yl.Icons.DrawIcon=function(M,d,T,B){T.width=T.height=Pl,T.data=B,ej=M,v.Default.drawImage(d,T,0,0,Pl,Pl)},yl.Icons.MapPoints=function(r,$){for(var n=0,j=r.length;j>n;n++)r[n]/=$},yl.roundTo=function(b,q,J){var $=Math.abs(b%q);return J>$||J>q-$?q*Math.round(b/q):b},yl.toFixed=function(D){return Math.round(100*D)/100},yl.getDataMatrix=function(O){if(O instanceof v.Shape){var S=new yl.Math.Matrix2,f=O.getPosition();return S.translate(-f.x,-f.y).scale(O.getScale().x,O.getScale().y).rotate(O.getRotation()).translate(f.x,f.y),S}return O.getMatrix?O.getMatrix():new yl.Math.Matrix2},Math.sign===M&&(Math.sign=function(b){return 0>b?-1:b>0?1:+b});var ei=yl.Math.Matrix2=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0};ei.prototype={},ei.prototype.constructor=ei,ei.prototype.set=function(p,m,O,W,s,e){return this.a=p,this.b=m,this.c=O,this.d=W,this.tx=s,this.ty=e,this},ei.prototype.apply=function(a,S){S=S||new br;var T=a.x,G=a.y;return S.x=this.a*T+this.c*G+this.tx,S.y=this.b*T+this.d*G+this.ty,S},ei.prototype.applyInverse=function(t,C){C=C||new br;var G=1/(this.a*this.d+this.c*-this.b),D=t.x,$=t.y;return C.x=this.d*G*D+-this.c*G*$+(this.ty*this.c-this.tx*this.d)*G,C.y=this.a*G*$+-this.b*G*D+(-this.ty*this.a+this.tx*this.b)*G,C},ei.prototype.translate=function(R,P){return this.tx+=R,this.ty+=P,this},ei.prototype.scale=function(a,O){return this.a*=a,this.d*=O,this.c*=a,this.b*=O,this.tx*=a,this.ty*=O,this},ei.prototype.rotate=function(n){var N=Math.cos(n),A=Math.sin(n),s=this.a,o=this.c,v=this.tx;return this.a=s*N-this.b*A,this.b=s*A+this.b*N,this.c=o*N-this.d*A,this.d=o*A+this.d*N,this.tx=v*N-this.ty*A,this.ty=v*A+this.ty*N,this},ei.prototype.append=function(C){var c=this.a,O=this.b,B=this.c,o=this.d;return this.a=C.a*c+C.b*B,this.b=C.a*O+C.b*o,this.c=C.c*c+C.d*B,this.d=C.c*O+C.d*o,this.tx=C.tx*c+C.ty*B+this.tx,this.ty=C.tx*O+C.ty*o+this.ty,this},ei.prototype.setTransform=function(V,B,_,N,W,n,E,Y,F){var l,I,G,e,x,D,v,k,K,q;return x=Math.sin(E),D=Math.cos(E),v=Math.cos(F),k=Math.sin(F),K=-Math.sin(Y),q=Math.cos(Y),l=D*W,I=x*W,G=-x*n,e=D*n,this.a=v*l+k*G,this.b=v*I+k*e,this.c=K*l+q*G,this.d=K*I+q*e,this.tx=V+(_*l+N*G),this.ty=B+(_*I+N*e),this},ei.prototype.prepend=function(T){var u=this.tx;if(1!==T.a||0!==T.b||0!==T.c||1!==T.d){var H=this.a,i=this.c;this.a=H*T.a+this.b*T.c,this.b=H*T.b+this.b*T.d,this.c=i*T.a+this.d*T.c,this.d=i*T.b+this.d*T.d}return this.tx=u*T.a+this.ty*T.c+T.tx,this.ty=u*T.b+this.ty*T.d+T.ty,this},ei.prototype.invert=function(){var t=this.a,m=this.b,M=this.c,d=this.d,H=this.tx,O=t*d-m*M;return this.a=d/O,this.b=-m/O,this.c=-M/O,this.d=t/O,this.tx=(M*this.ty-d*H)/O,this.ty=-(t*this.ty-m*H)/O,this},ei.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},ei.prototype.clone=function(){var U=new ei;return U.a=this.a,U.b=this.b,U.c=this.c,U.d=this.d,U.tx=this.tx,U.ty=this.ty,U},ei.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},ei.IDENTITY=new ei,ei.TEMP_MATRIX=new ei;var br=yl.Math.Vector2=function(H,n){"object"==typeof H&&(H.x!=M?(n=H.y,H=H.x):(n=H[1],H=H[0])),this.set(H||0,n||0)};br.prototype={},br.prototype.constructor=br,G.defineProperties(br.prototype,{width:{get:function(){return this.x},set:function(L){this.x=L}},height:{get:function(){return this.y},set:function(B){this.y=B}}}),br.prototype.clone=function(){return new br(this.x,this.y)},br.prototype.copy=function(x){return this.set(x.x,x.y),this},br.prototype.equals=function(j){return j.x===this.x&&j.y===this.y},br.prototype.set=function(e,B){return this.x=e||0,this.y=B||(0!==B?this.x:0),this},br.prototype.setScalar=function(B){return this.x=B,this.y=B,this},br.prototype.setX=function(L){return this.x=L||0,this},br.prototype.setY=function(h){return this.y=h||0,this},br.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},br.prototype.addVectors=function(O,w){return this.x=O.x+w.x,this.y=O.y+w.y,this},br.prototype.addScalar=function(K){return this.x+=K,this.y+=K,this},br.prototype.addScaledVector=function(s,o){return this.x+=s.x*o,this.y+=s.y*o,this},br.prototype.sub=function(N){return this.x-=N.x,this.y-=N.y,this},br.prototype.subScalar=function(Q){return this.x-=Q,this.y-=Q,this},br.prototype.subVectors=function(m,D){return this.x=m.x-D.x,this.y=m.y-D.y,this},br.prototype.multiply=function(E){return this.x*=E.x,this.y*=E.y,this},br.prototype.multiplyScalar=function(_){return this.x*=_,this.y*=_,this},br.prototype.divide=function(Q){return this.x/=Q.x,this.y/=Q.y,this},br.prototype.divideScalar=function(S){return this.multiplyScalar(1/S)},br.prototype.min=function(O){return this.x=Math.min(this.x,O.x),this.y=Math.min(this.y,O.y),this},br.prototype.max=function(o){return this.x=Math.max(this.x,o.x),this.y=Math.max(this.y,o.y),this},br.prototype.clamp=function(N,q){return this.x=Math.max(N.x,Math.min(q.x,this.x)),this.y=Math.max(N.y,Math.min(q.y,this.y)),this},br.prototype.clampScalar=function(){var b,a;return function(d,L){return b===M&&(b=new br,a=new br),b.set(d,d),a.set(L,L),this.clamp(b,a)}}(),br.prototype.clampLength=function(S,J){var B=this.length();return this.multiplyScalar(Math.max(S,Math.min(J,B))/B)},br.prototype.dot=function(m){return this.x*m.x+this.y*m.y},br.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},br.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},br.prototype.normalize=function(){return this.divideScalar(this.length())},br.prototype.angle=function(){var d=Math.atan2(this.y,this.x);return 0>d&&(d+=2*Math.PI),d},br.prototype.distanceTo=function(j){return Math.sqrt(this.distanceToSquared(j))},br.prototype.distanceToSquared=function(I){var Y=this.x-I.x,P=this.y-I.y;return Y*Y+P*P},br.prototype.isNearEnough=function(t){return this.distanceToSquared(t)<1e-8},br.prototype.setLength=function(T){return this.multiplyScalar(T/this.length())},br.prototype.lerp=function(o,U){return this.x+=(o.x-this.x)*U,this.y+=(o.y-this.y)*U,this},br.prototype.lerpVectors=function(G,_,T){return this.subVectors(_,G).multiplyScalar(T).add(G)},br.prototype.rotateAround=function(p,m){var g=Math.cos(m),j=Math.sin(m),l=this.x-p.x,z=this.y-p.y;return this.x=l*g-z*j+p.x,this.y=l*j+z*g+p.y,this};var rk=yl.Math.Curve=function(){this._curves=[]};rk.prototype={},rk.prototype.constructor=rk,rk.prototype.createFromHtShape=function(j,A){A instanceof v.List&&(A=A.toArray());var S,x,Y,m,z,c,G,q=this,$=null,U=null,y=0,i=yl.Math.Vector2,Z=yl.Math.CubicBezier;for(x=0,Y=A.length;Y>x;x++){switch(m=A[x],z=null,m){case 1:U=new i(j[y],j[y+1]),$=U,y+=2;break;case 2:S=new i(j[y],j[y+1]),y+=2,z=new Z(U,U.clone(),S.clone(),S),U=S;break;case 3:c=new i(j[y],j[y+1]),S=new i(j[y+2],j[y+3]),y+=4,z=new Z(U,c.clone().sub(U).multiplyScalar(2/3).add(U),c.clone().sub(S).multiplyScalar(2/3).add(S),S),U=S;break;case 4:c=new i(j[y],j[y+1]),G=new i(j[y+2],j[y+3]),S=new i(j[y+4],j[y+5]),y+=6,z=new Z(U,c,G,S),U=S;break;case 5:if(!$)break;z=new Z(U,U.clone(),$.clone(),$),U=null,$=null}z&&(z._index=q._curves.length,q._curves.push(z))}},rk.prototype.checkPoint=function(c,_){var H,N,y,U,q,b=this,B=b._curves;for(H=0,N=B.length;N>H;H++)if(U=B[H],q=U.intersectRect(c,_,_),q.length)return y=0,q.forEach(function(l){y+=l.t}),y/=q.length,c=U.getPointAt(y),c.t=y,{bezier:U,intersection:c}},rk.prototype.insertKnot=function(m,T){var Z=m.insertKnot(T),b=this,$=b._curves;$.splice(m._index,1,Z[0],Z[1])},rk.prototype._isCloseEnough=function(s,t){return Math.abs(s.x-t.x)<1e-6&&Math.abs(s.y-t.y)<1e-6},rk.prototype._isSamePoint=function(B,Q){return B===Q},rk.prototype.moveRealPoint=function(u,K){var h=this,F=h._curves,B=K.clone().sub(u);F.forEach(function(R){var z=R._p1;R._p2,R._p3;var g=R._p4;h._isSamePoint(z,u)&&(R._p2.add(B),R._p1=K),h._isSamePoint(g,u)&&(R._p3.add(B),R._p4=K)})},rk.prototype.moveCtrlPoint=function(J,x,v){var I=J[v];if(I){var g=this,Z=g._curves;x.clone().sub(I),Z.forEach(function(f){var E;"c2"===v?E="_p2":"c1"===v&&(E="_p3"),g._isSamePoint(f[E],I)&&(f[E]=x)}),J[v]=x}},rk.prototype.deleteRealPoint=function(P,t){var v,q,y,G,E,U,z,V=this,F=V._curves,b={},X=[],u=yl.Math.CubicBezier;for(q=0,y=F.length;y>q;q++)v=F[q],G=v._p1,E=v._p2,U=v._p3,z=v._p4,(b[q]||!V._isSamePoint(G,P))&&(V._isSamePoint(z,P)?y>q+1&&V._isSamePoint(F[q+1]._p1,P)&&(t||X.push(new u(G,E,F[q+1]._p3,F[q+1]._p4))):X.push(v));V._curves=X},rk.prototype.findPairs=function(n,J){var f,G,b,s,I,e,y,M,c=this,i=c._curves,j={},E=[];for(G=0,b=i.length;b>G;G++)f=i[G],s=f._p1,I=f._p2,e=f._p3,y=f._p4,!j[G]&&c._isSamePoint(s,n)&&(J?E.push({point:s,r2:y}):E.push({point:s,c2:I})),c._isSamePoint(y,n)&&(M=J?{point:y,r1:s}:{point:y,c1:e},b>G+1&&c._isSamePoint(i[G+1]._p1,n)&&(J?M.r2=i[G+1]._p4:M.c2=i[G+1]._p2,j[G+1]=!0),E.push(M));return E},rk.prototype.toHtShape=function(){var Y=this,I=Y._curves,E=[],G=[],Z={x:1/0,y:1/0};return I.forEach(function(b){var I=b._p1,i=b._p2,X=b._p3,N=b._p4;return Y._isCloseEnough(I,Z)||(E.push(1),G.push(I.clone())),Z=N,Y._isCloseEnough(I,i)&&Y._isCloseEnough(X,N)?(E.push(2),G.push(N.clone()),void 0):(E.push(4),G.push(i.clone(),X.clone(),N.clone()),void 0)}),{segments:E,points:G}};var Bi=yl.Math.CubicBezier=function(k,s,h,x){var u=this;u._id=yl.Math.CubicBezier._globalId++,u._p1=k,u._p2=s,u._p3=h,u._p4=x};Bi._globalId=1,Bi.prototype={},Bi.prototype.constructor=Bi,Bi.prototype.toString=function(){return this._id},Bi.prototype.intersectRect=function(K,p,A){var U=p/2,g=A/2,c=K.x,N=K.y,V=yl.Math.Vector2,Z=new V(-U+c,-g+N),G=new V(U+c,g+N),m=new V(G.x,Z.y),j=new V(Z.x,G.y),t=this,k=t.intersectLine(Z,m),T=t.intersectLine(m,G),s=t.intersectLine(G,j),W=t.intersectLine(j,Z),z=k.concat(T).concat(s).concat(W);return z},Bi.prototype.intersectLine=function(L,n){var A,C,a,h,w,z,O,d,Q,R,j,E,H,Z=this,p=L.clone().min(n),Y=L.clone().max(n);h=Z._p1,w=Z._p2,z=Z._p3,O=Z._p4,A=h.clone().multiplyScalar(-1),C=w.clone().multiplyScalar(3),a=z.clone().multiplyScalar(-3),j=A.add(C).add(a).add(O),A=h.clone().multiplyScalar(3),C=w.clone().multiplyScalar(-6),a=z.clone().multiplyScalar(3),R=A.add(C).add(a),A=h.clone().multiplyScalar(-3),C=w.clone().multiplyScalar(3),Q=A.add(C),d=h.clone(),H=new yl.Math.Vector2(L.y-n.y,n.x-L.x),E=L.x*n.y-n.x*L.y;for(var P=Z.getRoots(H.dot(j),H.dot(R),H.dot(Q),H.dot(d)+E),x=new Array,N=0,X=P.length;X>N;N++){var D=P[N];if(!(0>D||D>1)){var S=h.clone().lerp(w,D),J=w.clone().lerp(z,D),$=z.clone().lerp(O,D),F=S.lerp(J,D),K=J.lerp($,D),q=F.lerp(K,D);q.t=D,L.x==n.x?p.y<=q.y&&q.y<=Y.y&&x.push(q):L.y==n.y?p.x<=q.x&&q.x<=Y.x&&x.push(q):q.x>=p.x&&q.y>=p.y&&q.x<=Y.x&&q.y<=Y.y&&x.push(q)}}return x},Bi.prototype.solveTForPoint=function(o){var N,y,Q,v,E=this;N=E._p1.x-o.x,y=E._p2.x-o.x,Q=E._p3.x-o.x,v=E._p4.x-o.x;for(var V=E.getRoots(v-3*Q+3*y-N,3*Q-6*y+3*N,3*y-3*N,N),H=M,w=1/0,c=0,m=V.length;m>c;c++){var J=V[c];if(!(0>J||J>1)){var u=E._p1.clone().lerp(E._p2,J),d=E._p2.clone().lerp(E._p3,J),K=E._p3.clone().lerp(E._p4,J),R=u.lerp(d,J),a=d.lerp(K,J),j=R.lerp(a,J);j.t=J;var t=Math.abs(j.y-o.y);w>t&&(w=t,H=j)}}return H},Bi.prototype.getPointAt=function(t){var N=this,n=N._p1,w=N._p2,p=N._p3,V=N._p4,G=n.clone().lerp(w,t),T=w.clone().lerp(p,t),J=p.clone().lerp(V,t),l=G.lerp(T,t),R=T.lerp(J,t);return l.lerp(R,t)},Bi.prototype.getRoots=function(C,y,l,p){var b,f,r,D,n,A=new Array;if(Math.abs(C)<1e-6){var b=y,f=l/b,r=p/b,D=f*f-4*r;if(D>0){var n=Math.sqrt(D);A.push(.5*(-f+n)),A.push(.5*(-f-n))}else 0==D&&A.push(.5*-f)}y/=C,l/=C,p/=C,b=(3*l-y*y)/3,f=(2*y*y*y-9*l*y+27*p)/27;var Z=y/3,V=f*f/4+b*b*b/27,j=f/2;if(Math.abs(V)<=1e-6&&(V=0),V>0){var M,J,n=Math.sqrt(V);M=-j+n,J=M>=0?Math.pow(M,1/3):-Math.pow(-M,1/3),M=-j-n,M>=0?J+=Math.pow(M,1/3):J-=Math.pow(-M,1/3),A.push(J-Z)}else if(0>V){var q=Math.sqrt(-b/3),x=Math.atan2(Math.sqrt(-V),-j)/3,Y=Math.cos(x),i=Math.sin(x),U=Math.sqrt(3);A.push(2*q*Y-Z),A.push(-q*(Y+U*i)-Z),A.push(-q*(Y-U*i)-Z)}else{var M;M=j>=0?-Math.pow(j,1/3):Math.pow(-j,1/3),A.push(2*M-Z),A.push(-M-Z)}return A},Bi.prototype._70I=function(){var j=this;return j._p1.distanceToSquared(j._p2)<1e-10&&j._p3.distanceToSquared(j._p4)<1e-10},Bi.prototype.insertKnot=function(h){var E=this,t=E._p1,j=E._p2,H=E._p3,f=E._p4,s=t.clone().lerp(j,h),F=j.clone().lerp(H,h),r=H.clone().lerp(f,h),Z=s.clone().lerp(F,h),i=F.clone().lerp(r,h),L=Z.clone().lerp(i,h);return E._70I()?(t.clone().lerp(f,h),[new yl.Math.CubicBezier(t,t.clone(),L.clone(),L),new yl.Math.CubicBezier(L,L.clone(),f.clone(),f)]):[new yl.Math.CubicBezier(t,s,Z,L),new yl.Math.CubicBezier(L,i,r,f)]};var Xm=v.Default.getInternal().ui().EdgeUI,Ub={_47O:function(l){var O=this,Q=Ub.getBackups()._47O;yl.inEdit(O.gv)||Q.call(O,l)}};yl.Inject.registAsModule(Ub,Xm);var Hr=v.Default.getInternal().ui().NodeUI,eg={_47O:function(c){var o=this,J=eg.getBackups()._47O;yl.inEdit(o.gv)||J.call(o,c)},getSelectWidth:function(){var g=this,d=g.gv,I=g._data;if(d.isEditable(I)&&yl.inEdit(d))return 0;var j=eg.getBackup("getSelectWidth");return j.call(g)}};yl.Inject.registAsModule(eg,Hr);var Jj=v.graph.GraphView,hl={_editPointSize:function(){var J=v.Default.isTouchable,n=yl.getStyle("pointSize");return n[J?0:1]}(),isPointEditable:function(U){var J=this;if(yl.inEdit(J))return J._pointEditableFunc?J._pointEditableFunc(U):!0;var D=hl.getBackup("isPointEditable");D.call(J,U)},isEditable:function(T){var e,n=this,H=hl.getBackup("isEditable");if(e=T instanceof yl.Group?!0:H.call(n,T),!yl.inEdit(n))return e;if(!(T instanceof v.Edge))return e;if(!T.s("2d.editable"))return!1;var i=n.getEditableFunc();return i?i(T):!0},_42:function(s,X){var Z=this,j=hl.getBackups()._42;if(j.call(Z,s,X),yl.inEdit(Z)){var O=Z.getEditInteractor();O.drawImpl()}}};yl.Inject.registAsModule(hl,Jj);var Sc=v.Default.getInternal().ui().ShapeUI,Xn={_47O:function($){var r=this,R=Xn.getBackups()._47O;yl.inEdit(r.gv)||R.call(r,$)}};yl.Inject.registAsModule(Xn,Sc);var Eh=v.graph.DefaultInteractor,te={handle_mousewheel:function(z){var n=this,T=te.getBackup("handle_mousewheel");yl.inEdit(n.gv)||T.call(n,z)}};yl.Inject.registAsModule(te,Eh);var Cq=v.graph.MoveInteractor,Db={_calcShift:function(j,S){var s=this,Y=Db.getBackup("_calcShift"),i=s.gv;if(!yl.inEdit(i))return Y.call(s,j,S);var P=i.getEditInteractor(),M=P.getSubModule("Move").calcShift(j,S,s);return M||Y.call(s,j,S)},clear:function(c){var i=this,h=Db.getBackup("clear");h.call(i,c);var s=i.gv;if(yl.inEdit(s)){var p=s.getEditInteractor();p.getSubModule("Move").clear(c)}}};yl.Inject.registAsModule(Db,Cq);var gk=yl.Rect=function(c){this.catalog="Rect",this._interactor=c};gk.prototype={},gk.prototype.constructor=gk,gk.prototype.gatherInfo=function(X,x){var $=this;if(1===x.length){var T=x[0];return T instanceof v.Shape&&T._70I()?$.gatherLine(X,T):mr(T,X)?!1:$.gatherSingleTarget(X,T)}return x.length>1?$.gatherMultiTargets(X,x):!1},gk.prototype.gatherSingleTarget=function(e,F){if(F.getCorners){var O,N=this.info;this.target=F,O=this.screenInfo={};var l=F.getCorners();N.LT=new yl.Math.Vector2(l[0]),N.LB=new yl.Math.Vector2(l[1]),N.RB=new yl.Math.Vector2(l[2]),N.RT=new yl.Math.Vector2(l[3]),N.T=N.LT.clone().add(N.RT).divideScalar(2),N.B=N.LB.clone().add(N.RB).divideScalar(2),N.L=N.LT.clone().add(N.LB).divideScalar(2),N.R=N.RT.clone().add(N.RB).divideScalar(2);for(var $ in N)O[$]=yl.toScreenPosition(e,N[$]);var T=this._interactor.getStyle("checkSize"),Z=function(B,y,J){var w=y.clone().sub(B).setLength(-T),t=J.clone().sub(B).setLength(-T),l=w.add(t).add(B);return l};return O.rotLT=Z(O.LT,O.RT,O.LB),O.rotLB=Z(O.LB,O.LT,O.RB),O.rotRB=Z(O.RB,O.LB,O.RT),O.rotRT=Z(O.RT,O.LT,O.RB),O.rotT=O.rotLT.clone().add(O.rotRT).divideScalar(2),O.rotB=O.rotLB.clone().add(O.rotRB).divideScalar(2),O.rotL=O.rotLT.clone().add(O.rotLB).divideScalar(2),O.rotR=O.rotRT.clone().add(O.rotRB).divideScalar(2),O.rotation=F.getRotation(),!0}},gk.prototype.gatherMultiTargets=function(s,z){var y=yl.Group.findOrCreateGroup(z);if(!y)return!1;var P=this;return P.editing&&"rotate"!==P.editing.mode||y.calcInfo(),P.gatherSingleTarget(s,y)},gk.prototype.gatherLine=function(q,x){this.target=x;var K=this.screenInfo={},z=x.getPoints(),e=yl.getDataMatrix(x);return K.P1=yl.toScreenPosition(q,e.apply(z.get(0))),K.P2=yl.toScreenPosition(q,e.apply(z.get(1))),!0},gk.ResizeKeys=["LT","RB","LB","RT","L","R","B","T"],gk.ResizeDirection=[{x:-1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:-1},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1}],gk.RotateKeys=["rotLT","rotRB","rotLB","rotRT","rotL","rotR","rotB","rotT"],gk.prototype.check=function(c,k,U){if(v.Default.isLeftButton(k)){var f=this;if(f.editing=null,f.tipInfo=null,f.screenInfo){if(f.screenInfo.P1)return f._checkLine(U);var S,I,u,L=null,p=f._interactor,b=p.getStyle("checkSize"),M=f.target,x=c.isEditable(M);if(x&&c.isRectEditable(M))for(I=0;I<yl.Rect.ResizeKeys.length;I++)if(u=yl.Rect.ResizeKeys[I],yl.checkHit(U,f.screenInfo[u],b)){L=u,S="resize";break}if(!L&&x&&c.isRotationEditable(M)){var y=p.getStyle("rotateCheckSize");for(I=0;I<yl.Rect.RotateKeys.length;I++)if(u=yl.Rect.RotateKeys[I],yl.checkHit(U,f.screenInfo[u],y)){L=u,S="rotate";break}}if(!L)return p.setCursor("default"),void 0;if("rotate"===S){var j,C=c.lp(k);if(M instanceof yl.Group){var R=p.getStyle("groupRotateModeKey");"string"==typeof R&&(R=[R]);for(var d=!1,Q=0,_=R.length;_>Q;Q++)if(k[R[Q]]){d=!0;break}var D=p.getStyle("groupRotateModeDefault");j=d?"batch"===D?"block":"batch":D}var J="batch"===j?M.getAnchor2():M.getPosition(),e=Math.atan2(C.y-J.y,C.x-J.x);p._setRotateCursor(e),f.editing={mode:S,key:L,pos:J,flipY:M.getScale().y<0,rotation:M.getRotation(),hitRot:e},j&&(f.editing.groupRotateMode=j)}else{var G=yl.Rect.ResizeKeys.indexOf(L),H=yl.Rect.ResizeDirection[G],w=Math.cos(M.getRotation()),i=Math.sin(M.getRotation()),m=H.x*Math.sign(M.getScale().x),Z=H.y*Math.sign(M.getScale().y),X=Math.atan2(-i*m-w*Z,w*m-i*Z),$=(Math.round(X/(Math.PI/4))+8)%8,g=["ew-resize","nesw-resize","ns-resize","nwse-resize","ew-resize","nesw-resize","ns-resize","nwse-resize"][$];this._interactor.setCursor(g);var V=M.getWidth(),n=M.getHeight(),o=M.getAnchor();f.editing={mode:S,key:L,rect:{x:-V*o.x,y:-n*o.y,width:V,height:n},anchor:o,matrix:M.getMatrix()}}return L}}},gk.prototype._checkLine=function(f){var u=this;u.screenInfo;var y,d=u._interactor.getStyle("checkSize");if(yl.checkHit(f,u.screenInfo.P1,d))y="P1";else{if(!yl.checkHit(f,u.screenInfo.P2,d))return this._interactor.setCursor("default"),void 0;y="P2"}return u.editing={mode:"line",key:y},y},gk.prototype.startEdit=function(F,d){F.startDragging(d);var K=this;K._interactor.fi({kind:"prepareEdit",event:d});var e=K.editing,h=K.target;return e?"rotate"===e.mode?(e.groupRotateMode&&h.beginRotate(e),void 0):(("line"===e.mode||h&&0===h.getRotation())&&(K._inSmartGuide=!0,K._interactor.rectGuide.gatherRects()),void 0):void 0},gk.prototype._46O=function(){var u=this,C=u.editing?u.editing.groupRotateMode:null;u.editing=null,u.tipInfo=null,u._inSmartGuide&&(u._interactor.rectGuide.clear(),u._inSmartGuide=!1),C&&u.target&&u.target.endRotate()},gk.prototype.handleEdit=function($,N){var R=this,C=R.editing;if(C){var c,E,J,g,i,P,y=R.target,_=C.key,Y=C.mode,r=R._interactor;if("rotate"===Y){var W,V,k=$.lp(N),w=C.pos,H=Math.atan2(k.y-w.y,k.x-w.x);if(C.groupRotateMode?V=H-C.hitRot:(W=H-C.hitRot,V=C.rotation+W),V%=2*Math.PI,0>V&&(V+=2*Math.PI),!v.Default.isCtrlDown(N)){var h,O;Of(N)?(h=r.getStyle("shiftRotateRound"),O=h/2):(h=r.getStyle("rotateRound"),O=r.getStyle("rotateSensitivity")),V=yl.roundTo(V,h,O)}C.groupRotateMode?(W=V-(C.lastRotation||0),0!==W&&(y.addRotation(W,C.groupRotateMode),C.lastRotation=V)):y.setRotation(V),r._setRotateCursor(H),V>Math.PI&&(V-=2*Math.PI);var L=180*(V/Math.PI);L=L.toFixed(2),c=""+L+"°"}else if("resize"===Y){var p=C.rect;g=p.x,i=p.y;var d=p.width,S=p.height,j=C.anchor,B=C.matrix;E=$.lp(N);var M,D=Of(N),q=R._unionPointMode1,u=R._unionPointMode2;if(R._inSmartGuide&&!v.Default.isCtrlDown(N)&&!D){var F;"L"===_||"R"===_?F="x":("T"===_||"B"===_)&&(F="y"),R._adsorbedToClosest(E,F),P=!0}M=B.tfi(E);var m;"LT"===_?(p=q(M,{x:g+d,y:i+S},d,S,D),m=9):"T"===_?(p=u({x:g,y:M.y},{x:g+d,y:i+S},d,S,D,"v"),m=1):"RT"===_?(p=q(M,{x:g,y:i+S},d,S,D),m=33):"L"===_?(p=u({x:M.x,y:i},{x:g+d,y:i+S},d,S,D,"h"),m=8):"R"===_?(p=u({x:g,y:i},{x:M.x,y:i+S},d,S,D,"h"),m=32):"LB"===_?(p=q(M,{x:g+d,y:i},d,S,D),m=12):"B"===_?(p=u({x:g,y:i},{x:g+d,y:M.y},d,S,D,"v"),m=4):"RB"===_&&(p=q(M,{x:g,y:i},d,S,D),m=36);var T=B.tf(p.x+p.width*j.x,p.y+p.height*j.y);y.setPosition(T),y.setSize(p.width,p.height),P&&(J=y.getRect(),r.rectGuide.gatherLines({node:y,x:J.x,y:J.y,w:J.width,h:J.height},F,m)),c=""+Math.round(p.width)+" * "+Math.round(p.height)}else if("line"===Y){if(E=$.lp(N),Of(N)){var U=y.getPoints(),A="P1"===_?U.get(1):U.get(0),b={x:E.x-A.x,y:E.y-A.y},e=r.getStyle("shiftLineRotateRound"),f=R._shiftDirList;if(!f||R._shiftRotateRound!==e){R._shiftRotateRound=e,R._shiftDirList=f=[];for(var x=0;x<Math.PI;x+=e)f.push({x:o(x),y:K(x)})}for(var G,n=0,s=0,X=f.length;X>s;s++){var t=f[s],Q=t.x*b.x+t.y*b.y;Math.abs(Q)>Math.abs(n)&&(n=Q,G=t)}E={x:A.x+G.x*n,y:A.y+G.y*n},r.rectGuide.clear()}else R._inSmartGuide&&!v.Default.isCtrlDown(N)&&(R._adsorbedToClosest(E),P=!0);var z=yl.getDataMatrix(y).applyInverse(E);y.setPoint("P1"===_?0:1,z,!0);var l=y.getPoints(),I=l.get(0),Z=l.get(1);g=I.x-Z.x,i=I.y-Z.y,c=" "+Math.round(Math.sqrt(g*g+i*i))+" ",P&&(J=y.getRect(),r.rectGuide.gatherLines({node:y,x:J.x,y:J.y,w:J.width,h:J.height}))}var a=v.Default.getLogicalPoint(N,r._canvas);a.x+=yl.Icons.TipShiftX,a.y+=yl.Icons.TipShiftY,R.tipInfo={helperPos:a,text:c,size:c.length}}},gk.prototype._unionPointMode1=function(T,J,r,i,g){if(g&&r&&i){var p=T.x-J.x,Y=T.y-J.y;Math.abs(p*i)<Math.abs(Y*r)?(Y=Math.sign(Y)*Math.abs(p*i/r),T.y=J.y+Y):(p=Math.sign(p)*Math.abs(Y*r/i),T.x=J.x+p)}return v.Default.unionPoint(T,J)},gk.prototype._unionPointMode2=function(S,k,y,B,t,L){var J=v.Default.unionPoint(S,k);if(t&&y&&B){var Y;"v"===L?(Y=J.x+J.width/2,J.width=y*J.height/B,J.x=Y-J.width/2):(Y=J.y+J.height/2,J.height=B*J.width/y,J.y=Y-J.height/2)}return J},gk.prototype._adsorbedToClosest=function(L,d){var G=this,x=G._interactor,T=x.rectGuide.findClosest(L,d),b=x.gridGuide.findClosest(L,d),R=1/0,M=1/0;T&&(isFinite(T.x)&&(R=T.x),isFinite(T.y)&&(M=T.y)),b&&(isFinite(b.x)&&Math.abs(b.x)<Math.abs(R)&&(R=b.x),isFinite(b.y)&&Math.abs(b.y)<Math.abs(M)&&(M=b.y)),isFinite(R)&&(L.x+=R),isFinite(M)&&(L.y+=M)},gk.prototype._42=function(w,j,Y){var C=this;C.info={},C.screenInfo=null;var r=C._interactor;if(!r.editDetail&&C.gatherInfo(j,Y)){var K=C.editing?C.editing.groupRotateMode:null,W=C.screenInfo;"block"!==K&&(W.P1?yl.Icons.DrawIcon(r,w,yl.Icons.Line,C.screenInfo):yl.Icons.DrawIcon(r,w,yl.Icons.Rect,C.screenInfo),C.tipInfo&&yl.Icons.DrawIcon(r,w,yl.Icons.TipHelper,C.tipInfo)),C.target instanceof yl.Group&&C.target._42(r,w,j)}};var Fc=yl.Anchor=function(i){this.catalog="Anchor",this._interactor=i
};Fc.prototype={},Fc.prototype.constructor=Fc,Fc.prototype.gatherInfo=function(E,H){var k=this;if(1===H.length){var r=H[0];if(!r.getAnchor)return;if(r instanceof v.Shape&&r._70I())return;if(mr(r,E))return;return k.gatherSingleTarget(E,H[0])}return H.length>1?k.gatherMultiTargets(E,H):!1},Fc.prototype.gatherSingleTarget=function(n,Q){var x=this;return x.info.POS=Q.getPosition(),x.screenInfo.POS=yl.toScreenPosition(n,x.info.POS),x.target=Q,!0},Fc.prototype.gatherMultiTargets=function(m,j){var N=this,B=yl.Group.findOrCreateGroup(j);return B?(N.screenInfo.POS=yl.toScreenPosition(m,B.getAnchor2()),N.target=B,!0):!1},Fc.prototype.isVisible=function(){var o=this,q=o._interactor;if(q.getStyle("anchorVisible")===!1)return!1;var t=o.target;if(t){if(this.editing)return!0;var O=t.getAnchor(),U=q.getStyle("anchorOutsideVisibleThreshold");if(O.x<-U||O.x>1+U||O.y<-U||O.y>1+U)return!0;var F=t.getSize(),s=t.getScale(),Y=Math.min(Math.abs(F.width*s.x),Math.abs(F.height*s.y));if(Y*q.gv._zoom<q.getStyle("anchorHideThreshold"))return!1}return!0},Fc.prototype.check=function(X,j,A){if(v.Default.isLeftButton(j)){var b=this,C=b._interactor;if(b.isVisible()&&C.getStyle("anchorMovable")!==!1){b.editing=null,b.tipInfo=null;var F=b.target;if(F&&X.isAnchorEditable(F)&&X.isEditable(F)){var P;if(b.screenInfo&&(P=b.screenInfo.POS)&&yl.checkHit(A,new yl.Math.Vector2(P),C.getStyle("checkSize"))){if(F instanceof yl.Group)return b.editing={},!0;var O=F.getWidth(),_=F.getHeight(),c=F.getAnchor();return b.editing={rect:{x:-O*c.x,y:-_*c.y,width:O,height:_},anchor:c,matrix:F.getMatrix()},!0}}}}},Fc.prototype.startEdit=function(w,t){w.startDragging(t)},Fc.prototype._46O=function(){this.editing=null,this.tipInfo=null},Fc.prototype.handleEdit=function(d,V){var b=this,x=b.target;if(x&&b.editing){var O=d.lp(V);if(x instanceof yl.Group)return x.setAnchor2(O),b._interactor._42(),void 0;var N=b.editing.matrix,u=N.tfi(O),W=b.editing.rect,w=(u.x-W.x)/W.width,s=(u.y-W.y)/W.height;if(!v.Default.isCtrlDown(V)){var n=b._interactor.getStyle("anchorRound"),z=b._interactor.getStyle("anchorSensitivity");w=yl.roundTo(w,n,z),s=yl.roundTo(s,n,z)}x.setAnchor(w,s,!0);var m=v.Default.getLogicalPoint(V,b._interactor._canvas);m.x+=yl.Icons.TipShiftX,m.y+=yl.Icons.TipShiftY;var k=""+w.toFixed(2)+", "+s.toFixed(2);b.tipInfo={helperPos:m,text:k,size:k.length}}},Fc.prototype._42=function(I,N,F){var M=this;M.info={},M.screenInfo={};var B=M._interactor;B.editDetail||M.gatherInfo(N,F)&&M.isVisible()&&(yl.Icons.DrawIcon(B,I,yl.Icons.Anchor,M.screenInfo),M.tipInfo&&yl.Icons.DrawIcon(B,I,yl.Icons.TipHelper,M.tipInfo))};var rk=yl.Curve=function(t){this.catalog="Curve",this._interactor=t};rk.prototype={},rk.prototype.constructor=rk,rk.PointType={Mirrored:0,Straight:1,Disconnected:2,Asymmetric:3},rk.prototype.setUp=function(){var q=this,G=q._interactor;G&&G.gv.mp(q._onGraphviewPropertyChanged,q)},rk.prototype._onGraphviewPropertyChanged=function(G){("zoom"===G.property||"translateX"===G.property||"translateY"===G.property)&&this._handleDataChanged()},rk.prototype.tearDown=function(){var S=this,j=S._interactor;j&&j.gv.ump(S._onGraphviewPropertyChanged)},rk.prototype.canEnterEditDetailMode=function(){var e=this,F=e._interactor,r=F._getValidSelection();if(1===r.length){var m=r[0],J=m instanceof v.Edge;if(m instanceof v.Shape||J){if(J){var a=m.s("edge.type");if(a&&"points"!==a)return}var c=F.gv;if(c.isPointEditable(m)&&c.isEditable(m))return e.target=m,!0}}},rk.prototype.preHandleScroll=function(){var f=this.editing;return f&&f.inEdit?!0:void 0},rk.prototype.getCurrentSelectintStatus=function(){var R=this;if(R.activing&&!R.activing.selections){if(R.activing.status!=M)return R.activing.status;var Z=function(I){var V=R.activing.status;R.activing.status=I,R._interactor.fp("shapePointStatus",V,I)},B=yl.Curve.PointType,Y=R.activing.point,D=R.activing.pairs;if(!D||1!==D.length)return Z(B.Mirrored);var n=D[0],x=n.c1&&n.c1.isNearEnough(Y),P=n.c2&&n.c2.isNearEnough(Y);if(!n.c1||!n.c2)return x||P?Z(B.Straight):Z(B.Disconnected);if(x&&P)return Z(B.Straight);if(x||P)return Z(B.Asymmetric);var C=n.c1.clone().sub(Y),O=n.c2.clone().sub(Y);return Math.abs(C.x*O.y-C.y*O.x)>1e-5||C.x*O.x>0?Z(B.Disconnected):Math.abs(C.length()-O.length())>1e-5?Z(B.Asymmetric):Z(B.Mirrored)}},rk.prototype.handle_keydown=function(Y){var V=this;if(V._interactor.editDetail){var J=yl.Curve.PointType;"1"===Y.key?V.setCurrentSelectionStatus(J.Straight):"2"===Y.key?V.setCurrentSelectionStatus(J.Mirrored):"3"===Y.key?V.setCurrentSelectionStatus(J.Disconnected):"4"===Y.key&&V.setCurrentSelectionStatus(J.Asymmetric)}},rk.prototype.setCurrentSelectionStatus=function(y){var x=this;if(x.activing){var i=x.getCurrentSelectintStatus();if(null!==i&&i!==y){x.activing.status=y;var h=x.activing.point,W=x.activing.pairs;if(W&&1===W.length){var T=W[0],u=x.screenInfo.curve,J=yl.Curve.PointType,G=function(){x._writeToHt(),x._interactor.fp("shapePointStatus",i,y)};if(y===J.Straight)return u.moveCtrlPoint(T,h,"c1"),u.moveCtrlPoint(T,h,"c2"),G(),void 0;if(i===J.Straight){var L=u.findPairs(h,!0),Y=L[0],C=Y.r1||h,v=Y.r2||h,a=v.clone().sub(C).multiplyScalar(.25);return u.moveCtrlPoint(T,h.clone().sub(a),"c1"),u.moveCtrlPoint(T,h.clone().add(a),"c2"),G(),void 0}var P=T.c1,Q=T.c2;if(P&&Q){if(y===J.Mirrored)return u.moveCtrlPoint(T,h.clone().multiplyScalar(2).sub(Q),"c1"),G(),void 0;if(y===J.Asymmetric&&i===J.Disconnected){var p=P.clone().sub(h).length(),a=h.clone().sub(Q).setLength(p).add(h);return u.moveCtrlPoint(T,a,"c1"),G(),void 0}}x._interactor.fp("shapePointStatus",i,y)}}}},rk.prototype._handleDataChanged=function(G){var S=this;if(S.screenInfo&&S.target){var l=S._interactor;S.gatherSingleTarget(l.gv,S.target,!0),S.check(l.gv,null,G?l._getLogicalPoint(G):new yl.Math.Vector2(l._lastClientPoint)),l._42()}},rk.prototype.gatherSingleTarget=function(n,w,j){var W,M,P=this;P.screenInfo&&P.screenInfo.curve&&(M=P.screenInfo.curve._curves);var U=P.editing;W=U?P.screenInfo:P.screenInfo={};var x,Z,R=w instanceof v.Edge;R?(x=w.s("edge.segments"),Z=w.s("edge.points")||new v.List):(x=w._58O,Z=w._59O),W.S=x;var u=W.P=[],h=yl.getDataMatrix(w);if(Z.each(function(A){A=h.apply(A);var t=yl.toScreenPosition(n,A);u.push(t.x,t.y)}),R){var H=yl.toScreenPosition(n,w._lastSourcePoint),T=yl.toScreenPosition(n,w._lastTargetPoint);u.splice(0,0,H.x,H.y),u.push(T.x,T.y)}if(!W.S||!W.S.size()){W.S=new v.List,W.S.add(1);for(var C=0;C<u.length/2-1;C++)W.S.add(2)}if((!U||j)&&P.convertToCubicBezier(M),P.activing&&(j||!P.editing||"realPoint"===P.editing.type)){var y=W.curve.findPairs(P.activing.point);P.activing.pairs=y}R&&"points"!==w.s("edge.type")&&P._writeToHt()},rk.prototype._convertToNewPoint=function(y,X,u){var G,n,I;for(G=0,n=X.length;n>G;G++){if(I=X[G],I._p1.isNearEnough(y))return I._p1;if(I._p4.isNearEnough(y))return I._p4}if(u)for(G=0,n=Math.min(u.length,n);n>G;G++){if(I=u[G],I._p1===y)return X[G]._p1;if(I._p4===y)return X[G]._p4}},rk.prototype.convertToCubicBezier=function(S){var O,X,m=this,T=new yl.Math.Curve,i=m.screenInfo;if(T.createFromHtShape(i.P,i.S),i.curve=T,m.activing){var V=T._curves;if(O=m.activing.point,X=m._convertToNewPoint(O,V,S),X&&(m.activing.point=X),m.activing.selections){var d=-1,a=m.activing.selections;a.forEach(function(L){d++,X=m._convertToNewPoint(L,V,S),X&&(a[d]=X)})}}},rk.prototype.check=function(Z,b,R){if(!b||v.Default.isLeftButton(b)){var c=this;if(c._interactor.setCursor("default"),c.editing=null,c.highlight=null,c.tipInfo=null,c.screenInfo){if(Qj())return c._interactor._42(),!0;if(c._checkEditCtrlPoint(R))return c._interactor._42(),!0;if(c._checkEditRealPoint(R))return c._interactor._42(),!0;var y=c.screenInfo.curve,T=y.checkPoint(R,c._interactor.getStyle("curveIntersectSize"));if(T){var m=c.highlight={};m.type="insertKnot",m.bezier=T.bezier,m.point=T.intersection}return c._interactor._42(),!0}}},rk.prototype._checkEditRealPoint=function(S){var i,U,k,z,B,A,c=this,l=c.screenInfo.curve._curves,q=c._interactor.getStyle("curvePointIntersectSize"),J=1/0;for(q*=q,k=0,z=l.length;z>k;k++)i=l[k],B=i._p1,A=S.distanceToSquared(B),J>A&&(J=A,U=B),B=i._p4,A=S.distanceToSquared(B),J>A&&(J=A,U=B);if(J>q)return!1;var w=c.highlight={};return w.type="changeRealPoint",w.point=U,c.editing={type:"realPoint",point:U,shiftGuide:{point:U.clone(),dir:"x",limit:0}},c._interactor.setCursor("crosshair"),!0},rk.prototype._checkEditCtrlPoint=function(N){var y=this;if(y.activing&&!y.activing.selections){var U=y.getCurrentSelectintStatus();if(U!==yl.Curve.PointType.Straight){var Z=y.activing.pairs;if(Z){var A=y._interactor.getStyle("curvePointIntersectSize");A*=A;var L,F,k,i,C,c,I,g,M,m=1/0;for(I=0,M=Z.length;M>I;I++)for(i=Z[I],g=0;2>g;g++)C=0===g?"c1":"c2",i[C]&&(c=N.distanceToSquared(i[C]),m>c&&(m=c,L=i,F=I,k=C));if(m>A)return!1;y.activing.hlpair=L,y.activing.hltype=k;var q=y.highlight={};return q.type="changeCtrlPoint",q.point=L[k],y.editing={type:"ctrlPoint",pair:L,pairId:F,ctrlType:k,direction:L[k].clone().sub(y.activing.point).normalize()},y._interactor.setCursor("crosshair"),!0}}}},rk.prototype.startEdit=function(o,n){o.startDragging(n);var H=this;H.highlight&&"insertKnot"===H.highlight.type&&(H.insertKnot(),H.gatherSingleTarget(H._interactor.gv,H.target),H.activing=null,H._checkEditRealPoint(H._interactor._getLogicalPoint(n)));var g=H.highlight,R=v.Default.isCtrlDown(n);if(!g||Qj()){var D=H._interactor.gv;if(!D.setFocus(n)||D._scrolling)return;return D.isPannable()&&Zi(n)&&!R&&(H._pan={tx:D.tx(),ty:D.ty()}),void 0}if("changeRealPoint"===g.type){var E,b=H.activing?H.activing.point:null,t=H.activing?H.activing.selections:null;if(R&&H.activing)b===g.point?(t?(H.activing={point:t[0]},t.length>1&&(t.splice(0,1),H.activing.selections=t)):H.activing=null,H.editing=null):t&&(E=t.indexOf(g.point))>=0?(t.length>1?t.splice(E,1):delete H.activing.selections,H.editing=null):t?(t.push(b),H.activing={point:g.point,selections:t}):H.activing={point:g.point,selections:[b]};else if(t)b===g.point||((E=t.indexOf(g.point))>=0?(t.splice(E,1,b),H.activing={point:g.point,selections:t}):H.activing={point:g.point});else{var j;b===g.point&&(j=H.activing.status),H.activing={point:g.point},j&&(H.activing.status=j)}}},rk.prototype.insertKnot=function(){var f=this,N=f.highlight,V=f.screenInfo.curve;V.insertKnot(N.bezier,N.point.t),f._writeToHt()},rk.prototype._writeToHt=function(){for(var q,S,b=this,x=b.screenInfo.curve,k=x.toHtShape(),g=k.points,d=[],w=k.segments,X=b._interactor.gv,y=b.target,l=y instanceof v.Edge,C=yl.getDataMatrix(y).invert(),Z=0,p=g.length;p>Z;Z++)q=g[Z],S=yl.toWorldPosition(X,q),S=C.apply(S),d.push(S);if(y._writing=!0,l){y.s("edge.type","points"),y.setStyle("edge.segments",w),y.setStyle("edge.points",d.slice(1,d.length-1)),y.setStyle("edge.source.offset.x",0),y.setStyle("edge.source.offset.y",0),y.setStyle("edge.target.offset.x",0),y.setStyle("edge.target.offset.y",0);var Y=b._nextChangeEdgeHost;delete b._nextChangeEdgeHost,Y&&("source"===Y.type?y.setSource(Y.host):y.setTarget(Y.host)),b._writeEdgeHostAnchor("source",d[0]),b._writeEdgeHostAnchor("target",d[d.length-1])}else d.length?(y.setSegments(w),y.setPoints(d,!0)):y.removeFromDataModel();delete y._writing},rk.prototype._writeEdgeHostAnchor=function(B,c){var K=this,F=K.target,U=K._calcHostAnchor(F,B,c);F.s("edge."+B+".anchor.x",U.x),F.s("edge."+B+".anchor.y",U.y)},rk.prototype._calcHostAnchor=function(O,i,g,M){M||(M="source"===i?O.getSource():O.getTarget());var h=M.getRotation(),R=M.getAnchor(),Y=this._interactor.gv;if(mr(M,Y)&&(h=0),h){var X=M.getMatrix(),E=X.tfi(g),d=M.getSize();return{x:E.x/d.width+R.x,y:E.y/d.height+R.y}}var F=Qn(Y,M),v={x:(g.x-F.x)/F.width,y:(g.y-F.y)/F.height};return v},rk.prototype._handlePanning=function(l){var P=this,u=P._pan;if(u){u.started=!0;var R=P._interactor,c=R.gv,E=R._lastClientPoint,Y=_c(l);c.setTranslate(u.tx+Y.x-E.x,u.ty+Y.y-E.y),P.gatherSingleTarget(R.gv,P.target),R._42()}},rk.prototype.handleEdit=function(L,D){var B=this,U=B.editing;if(B._pan)return B._handlePanning(D),void 0;if(U){U.inEdit=!0;var A,a,Q=B._interactor._getLogicalPoint(D),$=v.Default.isCtrlDown(D),g=v.Default.isShiftDown(D);if(B._guideInfo=null,"ctrlPoint"===U.type&&g){var m=B.editing.direction.clone();A=B.activing.point;var S=m.dot(Q.clone().sub(A));Q=m.setLength(S).add(A)}else{var m;if("realPoint"===U.type&&g){var H=B.editing.shiftGuide,s=H.point,V=Math.abs(Q.x-s.x),b=Math.abs(Q.y-s.y);V>b&&V>H.limit&&"y"===H.dir&&(H.dir="x"),b>V&&b>H.limit&&"x"===H.dir&&(H.dir="y"),m=H.dir,"x"===m?(Q.y=s.y,H.limit=Math.max(H.limit,V)):"y"===m&&(Q.x=s.x,H.limit=Math.max(H.limit,b))}var t=B._isEditEdgeSourceTarget();if(t){var Y=B._editEdgeSourceTarget(t,Q,$);Y&&(a=Y.tipText)}else if(!$){var I=B._guidingToEdit(Q,m),l="realPoint"===U.type?B._interactor.gridGuide.findClosest(Q,m,!0):null,d=1/0,z=1/0;l&&(l.x&&(d=l.x),l.y&&(z=l.y));var M=!1;I&&(I.xList&&(Math.abs(I.x)<=Math.abs(d)?(M=!0,d=I.x):delete I.xList),I.yList&&(Math.abs(I.y)<=Math.abs(z)?(M=!0,z=I.y):delete I.yList),M&&(B._guideInfo=I)),isFinite(d)&&(Q.x+=d),isFinite(z)&&(Q.y+=z),M&&(I.v=Q)}}var F=B.screenInfo.curve;if("realPoint"===U.type){A=U.point,F.moveRealPoint(A,Q),U.point=Q,B.highlight.point=Q;var Z=B.activing.status,i=B.activing.selections;if(B.activing={point:Q,status:Z},i){var u=Q.clone().sub(A),_=0;i.forEach(function(L){var G=L.clone().add(u);F.moveRealPoint(L,G),i[_++]=G}),B.activing.selections=i}}else if("ctrlPoint"===U.type){var h=B.activing,n=h.pairs,E=n[U.pairId];F.moveCtrlPoint(E,Q,U.ctrlType);var c=h.status,f=yl.Curve.PointType;if((c===f.Mirrored||c===f.Asymmetric)&&E.c1&&E.c2){var A=new yl.Math.Vector2(h.point),y="c1"===U.ctrlType?"c2":"c1";if(c===yl.Curve.PointType.Mirrored)F.moveCtrlPoint(E,A.clone().multiplyScalar(2).sub(Q),y);else if(c===f.Asymmetric){var S=E[y].clone().sub(A).length(),X=A.clone().sub(E[U.ctrlType]).setLength(S).add(A);isNaN(X.x)||F.moveCtrlPoint(E,X,y)}}}var K=v.Default.getLogicalPoint(D,B._interactor._canvas);if(K.x+=yl.Icons.TipShiftX,K.y+=yl.Icons.TipShiftY,!a){var W=yl.toWorldPosition(L,Q);a=""+yl.toFixed(W.x)+", "+yl.toFixed(W.y)}B.tipInfo={helperPos:K,text:a,size:a.length},B._writeToHt()}},rk.prototype._isEditEdgeSourceTarget=function(){var d=this,I=d.target;if(!(I instanceof v.Edge))return!1;var s=d.editing.point,r=d.screenInfo.curve._curves;return s===r[0]._p1?"source":s===r[r.length-1]._p4?"target":!1},rk.prototype._editEdgeSourceTarget=function(j,T,G){var n,t=this,H=t.target;if(n="source"===j?H.getSource():H.getTarget()){var J=t._interactor.gv,g=yl.toWorldPosition(J,T),o=t._calcHostAnchor(H,j,g,n);if(!G){var B=t._interactor.getStyle("anchorRound"),$=t._interactor.getStyle("anchorSensitivity");o.x=yl.roundTo(o.x,B,$),o.y=yl.roundTo(o.y,B,$)}if(t._interactor.getStyle("edgeHostDetectPerFrame")||o.x<0||o.x>1||o.y<0||o.y>1){var E=J.getDataAt(g,function(F){return J.isSelectable(F)?To(F)?!0:!1:!1});if(E){var c=t._calcHostAnchor(H,j,g,E);n=E,t._nextChangeEdgeHost={type:j,host:E},o=c,G||(o.x=yl.roundTo(o.x,B,$),o.y=yl.roundTo(o.y,B,$))}}if(!G){var v=mb(J,n,0,0,0,o.x,o.y),C=yl.toScreenPosition(J,v);T.x=C.x,T.y=C.y}var M,K=[];if(mr(n,J)){var w=Qn(J,n);M=[{x:w.x,y:w.y},{x:w.x+w.width,y:w.y},{x:w.x+w.width,y:w.y+w.height},{x:w.x,y:w.y+w.height}]}else M=n.getCorners();return M.forEach(function(q){var f=yl.toScreenPosition(J,q);K.push(f.x,f.y)}),t._edgeHostGuideInfo=K,{host:n,anchor:o,tipText:""+o.x.toFixed(2)+", "+o.y.toFixed(2)}}},rk.prototype._guidingToEdit=function(Y,B){var D,C,e=this;if(D=e.screenInfo.curve){C=D._curves;var h,w,R,V,i,L,j,G,W=1/0,H=1/0,f=[];for(e.editing&&"realPoint"===e.editing.type&&(G=e.editing.point),i=0,L=2*C.length;L>i;i++)j=C[Math.floor(i/2)][i%2?"_p4":"_p1"],f.indexOf(j)>=0||(f.push(j),G&&G===j||(R=j.x-Y.x,V=j.y-Y.y,Math.abs(R)<Math.abs(W)?(W=R,h=[j]):R===W&&h.push(j),Math.abs(V)<Math.abs(H)?(H=V,w=[j]):V===H&&w.push(j)));var d=e._interactor.getStyle("smartGuideSensitivity");if((Math.abs(W)>d||"y"===B)&&(h=null),(Math.abs(H)>d||"x"===B)&&(w=null),h||w){var p=!1,o={};if(h&&(p=!0,o.xList=h,o.x=W),w&&(p=!0,o.yList=w,o.y=H),p)return o}}},rk.prototype._46O=function(){var m=this;m.editing=null,m._guideInfo=null,m._edgeHostGuideInfo=null,m._pan=null,m.tipInfo=null},rk.prototype._canDeletePoint=function(r,A){var S=this.target;if(!(S instanceof v.Edge))return!0;var q=r._curves[0],F=r._curves[r._curves.length-1];return q._p1===A||F._p4===A?!1:!0},rk.prototype.handleDelete=function(){var x=this;if(x.activing&&x.screenInfo){var a=v.Default.isShiftDown(),Z=x.screenInfo.curve;x._canDeletePoint(Z,x.activing.point)&&Z.deleteRealPoint(x.activing.point,a),x.activing.selections&&x.activing.selections.forEach(function(D){x._canDeletePoint(Z,D)&&Z.deleteRealPoint(D,a)}),delete x.activing,delete x.editing,delete x.tipInfo,delete x._pan,x._writeToHt(),x._interactor.fp("deleteShapePoint",!1,!0)}},rk.prototype.handleDoubleClick=function(D){var j=this,o=j._interactor._getLogicalPoint(D);if(j.screenInfo&&j._checkEditRealPoint(o)){var K=j.getCurrentSelectintStatus(),m=yl.Curve.PointType;return K=K===m.Mirrored?m.Straight:m.Mirrored,j.setCurrentSelectionStatus(K),j._interactor._42(),!0}},rk.prototype._drawHighlight=function(P){var m=this,C=m.highlight;if(C){var E=C.bezier,J=m._interactor;E&&yl.Icons.DrawIcon(J,P,yl.Icons.ShapeHighlightCurve,[E._p1.x,E._p1.y,E._p2.x,E._p2.y,E._p3.x,E._p3.y,E._p4.x,E._p4.y]);var _=C.point;_&&"insertKnot"===C.type&&yl.Icons.DrawIcon(J,P,yl.Icons.ShapeHighlighPoint,_)}},rk.prototype._drawGuide=function(L){var R=this,v=R._guideInfo;if(v){var E,Y,O,D,i=v.v;for(E=0;2>E;E++)if(D=0===E?v.xList:v.yList)for(Y=0,O=D.length;O>Y;Y++)yl.Icons.DrawIcon(R._interactor,L,yl.Icons.ShapeGuideLine,[i.x,i.y,D[Y].x,D[Y].y])}},rk.prototype._drawCurrentPoint=function(d){var r=this;if(r.activing){var C=r.activing,s=r.getCurrentSelectintStatus(),V=r._interactor;if(s!==yl.Curve.PointType.Straight){var b=C.pairs,y=C.hlpair,M=C.hltype,D=C.selections;if(b&&!D){var j,X,H;for(X=0,H=b.length;H>X;X++)j=b[X],X===y&&j[M]?yl.Icons.DrawIcon(V,d,yl.Icons.ShapeActivingCtrl,{point:j.point,c1:j.c1,c2:j.c2,hl:M}):yl.Icons.DrawIcon(V,d,yl.Icons.ShapeActivingCtrl,j)}}yl.Icons.DrawIcon(V,d,yl.Icons.ShapeHighlighRealPoint,r.activing.point),D&&D.forEach(function(t){yl.Icons.DrawIcon(V,d,yl.Icons.ShapeHighlighRealPoint,t)})}},rk.prototype.clear=function(){var z=this;z.editing=null,z._guideInfo=null,z.activing=null,z.highlight=null},rk.prototype._42=function(B){var r=this;r.info={},r.editing||(r.screenInfo=null);var x=r._interactor;return x.editDetail?r.target&&r._interactor.gv.isSelected(r.target)&&r._interactor.gv.isVisible(r.target)?(r.gatherSingleTarget(x.gv,r.target),yl.Icons.DrawIcon(x,B,yl.Icons.ShapeBgCurve,r.screenInfo),r._drawHighlight(B),r._drawCurrentPoint(B),r._getRealPoint().forEach(function(d){yl.Icons.DrawIcon(x,B,yl.Icons.ShapePoint,d)}),r._drawGuide(B),r.tipInfo&&yl.Icons.DrawIcon(x,B,yl.Icons.TipHelper,r.tipInfo),r._edgeHostGuideInfo&&yl.Icons.DrawIcon(x,B,yl.Icons.EdgeHostGuide,r._edgeHostGuideInfo),void 0):(x.editDetail=!1,r.clear(),void 0):(r.clear(),void 0)},rk.prototype._getRealPoint=function(){var B=this.screenInfo,I=B.P,q=B.S,v=-1,Q=[];return q.each(function(J){var U=1;if(3===J)U=2;else if(4===J)U=3;else if(5===J)return;v+=U,Q.push({x:I[2*v],y:I[2*v+1]})}),Q};var Ko=yl.MoveHelper=function(w){var s=this;s.catalog="Move",s._interactor=w};Ko.prototype={},Ko.prototype.constructor=Ko,Ko.prototype.calcShift=function(w,H,_){var k,K,d=this,s=d._interactor.gv,M=s.lp(H);if("beginMove"===w&&d._gatherGridInfo(_._lastLogicalPoint||M),k=d._target){var q=k.downPosition;if(q){var n=d._interactor.getStyle("moveSensitivity")/s._zoom;if(q.distanceTo(M)<n)return{x:0,y:0};delete k.downPosition}var y;K=v.Default.isShiftDown(H),K&&(M=d._dealShiftDown(M),y=k.shiftGuide.dir);var b,C=k.rawPos={x:k.pos.x+M.x-k.lp.x,y:k.pos.y+M.y-k.lp.y};if(v.Default.isCtrlDown(H)){if(b=d._calcShiftByAddon(),d._target.node instanceof yl.Group){var x=d._target.node;x._position.x+=b.x,x._position.y+=b.y}return b}for(var a,N=k.x+C.x,m=k.y+C.y,Z={x:N,y:m},p={x:N+k.w/2,y:m+k.h/2},$={x:N+k.w,y:m+k.h},D=d._interactor.rectGuide,E=d._interactor.gridGuide,j=[D.findClosest(Z,y),D.findClosest(p,y),D.findClosest($,y),E.findClosest(Z,y),E.findClosest(p,y),E.findClosest($,y)],f=1/0,L=1/0,o=0,R=j.length;R>o;o++)a=j[o],a&&(N=a.x,m=a.y,isFinite(N)&&Math.abs(N)<Math.abs(f)&&(f=N),isFinite(m)&&Math.abs(m)<Math.abs(L)&&(L=m));if(isFinite(f)||(f=0),isFinite(L)||(L=0),b=d._calcShiftByAddon(f,L),d._target.node instanceof yl.Group){var x=d._target.node;x._position.x+=b.x,x._position.y+=b.y}var g=k.node;if(!mr(g,s)){var V=C.x+f,u=C.y+L;d._interactor.rectGuide.gatherLines({node:g,x:k.x+V,y:k.y+u,w:k.w,h:k.h},y)}return b}},Ko.prototype._calcShiftByAddon=function(v,O){var Y=this._target,W=Y.rawPos,K=Y.node.getPosition();return v=v||0,O=O||0,{x:W.x-K.x+v,y:W.y-K.y+O}},Ko.prototype._dealShiftDown=function(E){var f=this,L=f._target.shiftGuide,r=f._target.lp,A=Math.abs(E.x-r.x),b=Math.abs(E.y-r.y);A>b&&A>L.limit&&"y"===L.dir&&(L.dir="x"),b>A&&b>L.limit&&"x"===L.dir&&(L.dir="y");var B=L.dir;return"x"===B?(E.y=r.y,L.limit=Math.max(L.limit,A)):"y"===B&&(E.x=r.x,L.limit=Math.max(L.limit,b)),E},Ko.prototype._gatherGridInfo=function(w){var V,m=this,U=m._interactor,q=U._getValidSelection();if(1===q.length){if(V=q[0],!V.getRect)return m._target=null,void 0}else if(V=yl.Group.findOrCreateGroup(q),!V)return m._target=null,void 0;var i=V.getPosition(),g=V.getRect();m._target={node:V,x:g.x-i.x,y:g.y-i.y,w:g.width,h:g.height,lp:{x:w.x,y:w.y},pos:{x:i.x,y:i.y},shiftGuide:{dir:"x",limit:0},downPosition:new yl.Math.Vector2(w)},U.rectGuide.gatherRects()},Ko.prototype.clear=function(){var S=this;S._interactor.rectGuide.clear(),S._interactor._42()};var Tg="directional",Wd="point",bm="spot",cq="light.color",bc=function(f,g){Ul(g)&&Gj.test(g)?qn(f,g):Sf[f]=g},nf=function(O){var F=Sf[O];return O&&F===M&&Gj.test(O)&&(Mi&&Mi[O]||qn(O,O)),F};Mj(i,{graph3dViewAttributes:c,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:I/60,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:kl,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewFovy:I/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewHeadlightRange:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewFogDisabled:!0,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewDashDisabled:!0,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,setShape3dModel:bc,getShape3dModel:nf,createMatrix:function(I,C){Kh(I)||(I=[I]);for(var f=I.length-1;f>=0;f--){var Y=I[f];C=Uc(Y.mat,Y.s3,Y.r3,Y.rotationMode,Y.t3,C)}return C},transformVec:function(N,j){return Vl(N,j)},createBoxModel:function(){return{vs:dh,ns:Sq,uv:fo,is:zd}},createRoundRectModel:function(b,w){return zm.roundRect(b,w)},createStarModel:function($,I){return zm.star($,I)},createRectModel:function(P,C){return zm.rect(P,C)},createTriangleModel:function(O,n){return zm.triangle(O,n)},createRightTriangleModel:function(x,c){return zm.rightTriangle(x,c)},createParallelogramModel:function(U,h){return zm.parallelogram(U,h)},createTrapezoidModel:function(Z,z){return zm.trapezoid(Z,z)},createSmoothSphereModel:function(y,_,r,M,u,c,d){return tp(new xs(y,_,r,M,u,c,d))},createSphereModel:function(C,K,l,A,R,O){return C?Yr(C,K,l,A,R,O):i.createSmoothSphereModel()},createSmoothConeModel:function(y,I,J,c,M){return sr(y,I,J,c,M)},createConeModel:function(S,V,R,Q,v,k){return S?Ek(S,V,R,Q,v,k):sr(k)},createSmoothCylinderModel:function(V,I,Q,p,h,o,j,a){return tp(new Mq(V,I,Q,p,h,o,j,a))},createCylinderModel:function(r,Q,o,B,p,Z,M){return r?xb(r,Q,o,B,p,Z,M):jr(Z,M)},createSmoothTorusModel:function(C,Q,d,m,P,z){return tp(new Dc(C,Q,d,m,P,z))},createTorusModel:function(Z,h,W,y,U,O,i){return Z?Jb(Z,h,W,y,U,O,i):Zc(O,i)},createExtrusionModel:function(Z,z,s,u,S,B,_,f){return tk(Z,z,s,u,S,B,_,f)},createSmoothRingModel:function(X,b,e,V,I,i){for(var a=[],t=0;t<X.length-1;t+=2)a.push({x:X[t],y:X[t+1]});for(X=Al(a,b,e)[0],a=[],t=0;t<X.length;t++){var z=X[t];a.push(new Rn(z.x,0,z.y))}return tp(new qq(a,i,V,I))},createTextGeometry:function(h,j){return tp(new ii(h,j))},loadFontFace:function(y,N){i.xhrLoad(y,function(t){if(!t)return N();var O;try{O=JSON.parse(t)}catch(I){O=JSON.parse(t.substring(65,t.length-2))}Uo.loadFace(O),N&&N(O.familyName.toLowerCase())},N?null:{sync:!0})},getRotationFromMatrix4:function($,j){var c=Q,B=$[0],h=$[4],J=$[8],F=$[1],T=$[5],g=$[9],L=$[2],x=$[6],N=$[10];j=j||"xyz",j=j[2]+j[1]+j[0],j=j.toUpperCase();var G={};if("XYZ"===j)G._y=Math.asin(c(J,-1,1)),Math.abs(J)<.99999?(G._x=Math.atan2(-g,N),G._z=Math.atan2(-h,B)):(G._x=Math.atan2(x,T),G._z=0);else if("YXZ"===j)G._x=Math.asin(-c(g,-1,1)),Math.abs(g)<.99999?(G._y=Math.atan2(J,N),G._z=Math.atan2(F,T)):(G._y=Math.atan2(-L,B),G._z=0);else if("ZXY"===j)G._x=Math.asin(c(x,-1,1)),Math.abs(x)<.99999?(G._y=Math.atan2(-L,N),G._z=Math.atan2(-h,T)):(G._y=0,G._z=Math.atan2(F,B));else if("ZYX"===j)G._y=Math.asin(-c(L,-1,1)),Math.abs(L)<.99999?(G._x=Math.atan2(x,N),G._z=Math.atan2(F,B)):(G._x=0,G._z=Math.atan2(-h,T));else if("YZX"===j)G._z=Math.asin(c(F,-1,1)),Math.abs(F)<.99999?(G._x=Math.atan2(-g,T),G._y=Math.atan2(-L,B)):(G._x=0,G._y=Math.atan2(J,N));else{if("XZY"!==j)return null;G._z=Math.asin(-c(h,-1,1)),Math.abs(h)<.99999?(G._x=Math.atan2(x,T),G._y=Math.atan2(J,B)):(G._x=Math.atan2(-g,N),G._y=0)}return[G._x,G._y,G._z]},createRingModel:function(P,$,M,O,A,m,r,j,X,E){for(var C=[],v=0;v<P.length-1;v+=2)C.push({x:P[v],y:P[v+1]});m=m||i.shapeSide,r=r||0,j=j||m;var p,W,n,L,_,w,x,V,J,D,v,z,q,u,d,Y,e,k,h=[],N=[],R=X?[]:c,G=X?[]:c,U=E?[]:c,Q=E?[]:c,l=O?[]:c,Z=O?[]:c,s=A?[]:c,T=A?[]:c,P=Al(C,$,M),H=Tq(P),F=0,B=2*Math.PI/m;return P.forEach(function(g){if(n=g.length,n>1){if(L=g[0],O)for(w=L.x,V=L.y,v=r;j>v;v++)z=v+1,q=v*B,u=z*B,d=K(q),Y=o(q),e=K(u),k=o(u),l.push(d*w,V,-Y*w,e*w,V,-k*w,0,V,0),Z.push(.5-.5*d,.5-.5*Y,.5-.5*e,.5-.5*k,.5,.5);for(D=0;n>D;D++){for(_=g[D],w=L.x,x=_.x,V=L.y,J=_.y,p=F/H,F+=ig(L,_),W=F/H,v=r;j>v;v++)z=v+1,q=v*B,u=z*B,d=K(q),Y=o(q),e=K(u),k=o(u),h.push(d*x,J,-Y*x,e*x,J,-k*x,d*w,V,-Y*w,e*x,J,-k*x,e*w,V,-k*w,d*w,V,-Y*w),N.push(v/m,W,z/m,W,v/m,p,z/m,W,z/m,p,v/m,p),X&&v===r&&(R.push(0,V,0,0,J,0,d*x,J,-Y*x,d*x,J,-Y*x,d*w,V,-Y*w,0,V,0),G.push(0,.5-V,0,.5-J,2*x,.5-J,2*x,.5-J,2*w,.5-V,0,.5-V)),E&&z===j&&(U.push(0,V,0,e*x,J,-k*x,0,J,0,e*x,J,-k*x,0,V,0,e*w,V,-k*w),Q.push(1,.5-V,1-2*x,.5-J,1,.5-J,1-2*x,.5-J,1,.5-V,1-2*w,.5-V));L=_}if(A)for(w=L.x,V=L.y,v=r;j>v;v++)z=v+1,q=v*B,u=z*B,d=K(q),Y=o(q),e=K(u),k=o(u),s.push(e*w,V,-k*w,d*w,V,-Y*w,0,V,0),T.push(.5-.5*e,.5+.5*k,.5-.5*d,.5+.5*Y,.5,.5)}}),{vs:h,uv:N,bottom_vs:s,bottom_uv:T,top_vs:l,top_uv:Z,from_vs:R,from_uv:G,to_vs:U,to_uv:Q}}},!0),Mj(D,{"3d.move.mode":M,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"shape.border.gradient.color":M,"edge.gradient.color":M,"edge.source.t3":M,"edge.target.t3":M,"light.type":Wd,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":I/4,"light.range":0,"light.exponent":1,"light.intensity":1,"wf.visible":!1,"wf.width":1,"wf.color":sc,"wf.short":!1,"wf.mat":M,batch:M,"transparent.mask":!1,brightness:M,"select.brightness":.7,"repeat.uv.length":M,"label.face":rb,"label.t3":M,"label.r3":M,"label.texture.scale":2,"label.rotationMode":we,"label.light":!1,"label.blend":M,"label.reverse.flip":!1,"label.reverse.color":De,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":rb,"label2.t3":M,"label2.r3":M,"label2.texture.scale":2,"label2.rotationMode":we,"label2.light":!1,"label2.blend":M,"label2.reverse.flip":!1,"label2.reverse.color":De,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":rb,"note.t3":M,"note.r3":M,"note.texture.scale":2,"note.rotationMode":we,"note.light":!1,"note.blend":M,"note.reverse.flip":!1,"note.reverse.color":De,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":rb,"note2.t3":M,"note2.r3":M,"note2.texture.scale":2,"note2.rotationMode":we,"note2.light":!1,"note2.blend":M,"note2.reverse.flip":!1,"note2.reverse.color":De,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,shape3d:M,"shape3d.color":Df,"shape3d.top.color":M,"shape3d.bottom.color":M,"shape3d.from.color":M,"shape3d.to.color":M,"shape3d.image":M,"shape3d.top.image":M,"shape3d.bottom.image":M,"shape3d.from.image":M,"shape3d.to.image":M,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":M,"shape3d.side.to":M,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":M,"shape3d.opacity":M,"shape3d.reverse.flip":!1,"shape3d.reverse.color":De,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":M,"shape3d.uv.scale":M,"shape3d.top.uv.offset":M,"shape3d.top.uv.scale":M,"shape3d.bottom.uv.offset":M,"shape3d.bottom.uv.scale":M,"shape3d.from.uv.offset":M,"shape3d.from.uv.scale":M,"shape3d.to.uv.offset":M,"shape3d.to.uv.scale":M,"shape3d.top.cap":M,"shape3d.bottom.cap":M,"shape3d.start.angle":0,"shape3d.sweep.angle":Y,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"all.light":!0,"all.visible":!0,"all.color":Df,"all.image":M,"all.blend":M,"all.opacity":M,"all.reverse.flip":!1,"all.reverse.color":De,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":M,"all.uv.offset":M,"all.uv.scale":M,"all.discard.selectable":!0,mat:M,"left.mat":M,"right.mat":M,"top.mat":M,"bottom.mat":M,"front.mat":M,"back.mat":M},!0);var Od,vk=!1,Kb=[0,0,0,0],Qg={left:[1/255,0,0,1],right:[2/255,0,0,1],top:[3/255,0,0,1],bottom:[4/255,0,0,1],front:[5/255,0,0,1],back:[6/255,0,0,1],m:{1:rp,2:il,3:dq,4:Cb,5:rb,6:Ig}},kd=function(P,v,K,a){if(v.getFaceVisible(P,K)){li(v,Ki(P,v.getFaceMat(P,K)||v.getMat(P)));var k=v._26I;v.getFaceReverseCull(P,K)?k.enable(k.CULL_FACE):k.disable(k.CULL_FACE),Jp(k,v._prg.uFixPickReverseColor,Qg[K]),Yc(k),Ng(k,a,6),kn(k),un(v)}},Lh=function(w){return w instanceof ar},mp=function(N){return[N.x,N.e||0,N.y]},dj=function(j,k,U){for(var k=yo(k),I=k[0],V=k[1],t=k[2];U--;)j.push(I,V,t)},Yd=function(G,n,u){for(var n=yo(n),l=n[0],A=n[1],v=n[2],s=n[3];u--;)G.push(l,A,v,s)},ce=function(o,p,S){if(p)for(var C,b,i,w=p[0],B=p[1],g=p[2],m=p[4],T=p[5],R=p[6],K=p[8],J=p[9],f=p[10],h=p[12],F=p[13],x=p[14],t=S.length,e=0,e=0;t>e;e+=3)C=S[e],b=S[e+1],i=S[e+2],o.push(w*C+m*b+K*i+h,B*C+T*b+J*i+F,g*C+R*b+f*i+x);else rr(o,S)},yf=function(D,c){var g=c.s("light.intensity"),Q=yo(c.s(cq)),r=Q[0],H=Q[1],$=Q[2];1!==g&&(r*=g,H*=g,$*=g),D.push(r,H,$,c.s("light.disabled")?1:0)},Rp=function(N,s,D){Jp(s,D.uHeadlightRange,N._headlightRange);var S=N._headlightIntensity,A=yo(N._headlightColor);1!==S&&(A=[A[0]*S,A[1]*S,A[2]*S]),Jp(s,D.uHeadlightColor,[A[0],A[1],A[2],N._headlightDisabled?1:0]);var P=N._59O,$=N._spots,k=N._dirs;if(P.length){var R=[],B=[],n=[];P.forEach(function(L){yf(R,L),rr(B,N._transformPointToViewSpace(L.p3())),n.push(L.s("light.range"))}),s.uniform4fv(D.uPointColor,R),s.uniform1fv(D.uPointRange,n),s.uniform3fv(D.uPointPosition,B)}if($.length){var I=[],T=[],d=[],y=[],l=[],U=[];$.forEach(function(m){yf(I,m),rr(T,N._transformPointToViewSpace(m.p3())),rr(l,N._transformDirectionToViewSpace(m.p3(),m.s("light.center"))),d.push(m.s("light.range")),y.push(K(m.s("light.angle")/2)),U.push(m.s("light.exponent"))}),s.uniform4fv(D.uSpotColor,I),s.uniform1fv(D.uSpotRange,d),s.uniform1fv(D.uSpotAngle,y),s.uniform1fv(D.uSpotExponent,U),s.uniform3fv(D.uSpotPosition,T),s.uniform3fv(D.uSpotDirection,l)
}if(k.length){var m=[],f=[];k.forEach(function(r){yf(m,r),rr(f,N._transformDirectionToViewSpace(r.p3()))}),s.uniform4fv(D.uDirColor,m),s.uniform3fv(D.uDirDirection,f)}},vi=function(K){return K>0&&0===(K-1&K)},vh=function(w){return w=W(0,y(I,w)),w=W(Dd,y(I-Dd,w))},Be=function(){return.05+d()/2},Gp=function(e,b,a,R){var n,G=e.getEye();return e.isOrtho()?(n=jo(e.getCenter(),G),n[0]+=R[0],n[1]+=R[1],n[2]+=R[2]):n=G,qc(b,a,R,n)},qc=function(e,y,b,o){var s=Sd(e,y),P=jo(o,b,!0),F=Sd(P,y);if($(F)<Dd)return c;var M=(s-Sd(b,y))/F;return[b[0]+P[0]*M,b[1]+P[1]*M,b[2]+P[2]*M]},ed=function(W,G){return{x:2*W.x-G.x,y:2*W.y-G.y}},wq=function(u,H,j,T){var A,b;if(!u)return A=w(H.y-j.y,j.x-H.x),{x:H.x+T*o(A),y:H.y+T*K(A)};if(!j)return A=w(u.y-H.y,H.x-u.x),{x:H.x+T*o(A),y:H.y+T*K(A)};var J=jo([u.x,u.y,0],[H.x,H.y,0],!0),V=jo([j.x,j.y,0],[H.x,H.y,0],!0),x=-(J[0]+V[0])/2,z=-(J[1]+V[1])/2,d=l(x*x+z*z);if(Dd>d)return A=w(u.y-H.y,H.x-u.x),{x:H.x+T*o(A),y:H.y+T*K(A)};var L=u.x-H.x,c=u.y-H.y,B=j.x-H.x,s=j.y-H.y,Y=l(Math.min(L*L+c*c,B*B+s*s));return A=t(Sd(J,V))/2,b=J[1]*V[0]-J[0]*V[1]>0?-1:1,x/=d,z/=d,d=Math.min(T/o(A),Y/K(A)),{x:H.x+b*d*x,y:H.y+b*d*z}},Fm=function(U){var Z=U[1],M=U[2],G=U[3],H=U[6],S=U[7],C=U[11];U[1]=U[4],U[2]=U[8],U[3]=U[12],U[4]=Z,U[6]=U[9],U[7]=U[13],U[8]=M,U[9]=H,U[11]=U[14],U[12]=G,U[13]=S,U[14]=C},Dh=function(L){var $=L[0],I=L[1],k=L[2],N=L[3],n=L[4],D=L[5],i=L[6],R=L[7],Q=L[8],E=L[9],y=L[10],V=L[11],F=L[12],h=L[13],Z=L[14],q=L[15],u=$*D-I*n,p=$*i-k*n,v=$*R-N*n,b=I*i-k*D,J=I*R-N*D,B=k*R-N*i,T=Q*h-E*F,Y=Q*Z-y*F,K=Q*q-V*F,r=E*Z-y*h,S=E*q-V*h,a=y*q-V*Z,M=u*a-p*S+v*r+b*K-J*Y+B*T;return M?(M=1/M,L[0]=(D*a-i*S+R*r)*M,L[1]=(k*S-I*a-N*r)*M,L[2]=(h*B-Z*J+q*b)*M,L[3]=(y*J-E*B-V*b)*M,L[4]=(i*K-n*a-R*Y)*M,L[5]=($*a-k*K+N*Y)*M,L[6]=(Z*v-F*B-q*p)*M,L[7]=(Q*B-y*v+V*p)*M,L[8]=(n*S-D*K+R*T)*M,L[9]=(I*K-$*S-N*T)*M,L[10]=(F*J-h*v+q*u)*M,L[11]=(E*v-Q*J-V*u)*M,L[12]=(D*Y-n*r-i*T)*M,L[13]=($*r-I*Y+k*T)*M,L[14]=(h*p-F*b-Z*u)*M,L[15]=(Q*b-E*p+y*u)*M,void 0):c},Ik=function(t,Y){if(Y){var T=Y[0],W=Y[1],X=Y[2];t[12]=t[0]*T+t[4]*W+t[8]*X+t[12],t[13]=t[1]*T+t[5]*W+t[9]*X+t[13],t[14]=t[2]*T+t[6]*W+t[10]*X+t[14],t[15]=t[3]*T+t[7]*W+t[11]*X+t[15]}},Ji=function(l,_){if(_){var L=_[0],B=_[1],m=_[2];l[0]=l[0]*L,l[1]=l[1]*L,l[2]=l[2]*L,l[3]=l[3]*L,l[4]=l[4]*B,l[5]=l[5]*B,l[6]=l[6]*B,l[7]=l[7]*B,l[8]=l[8]*m,l[9]=l[9]*m,l[10]=l[10]*m,l[11]=l[11]*m}},mg=function(H,i,p){var b=i[0],Y=i[1],q=i[2],S=i[3],B=i[4],D=i[5],I=i[6],g=i[7],P=i[8],Z=i[9],n=i[10],w=i[11],Q=i[12],G=i[13],$=i[14],L=i[15],l=p[0],v=p[1],W=p[2],R=p[3];return H[0]=l*b+v*B+W*P+R*Q,H[1]=l*Y+v*D+W*Z+R*G,H[2]=l*q+v*I+W*n+R*$,H[3]=l*S+v*g+W*w+R*L,l=p[4],v=p[5],W=p[6],R=p[7],H[4]=l*b+v*B+W*P+R*Q,H[5]=l*Y+v*D+W*Z+R*G,H[6]=l*q+v*I+W*n+R*$,H[7]=l*S+v*g+W*w+R*L,l=p[8],v=p[9],W=p[10],R=p[11],H[8]=l*b+v*B+W*P+R*Q,H[9]=l*Y+v*D+W*Z+R*G,H[10]=l*q+v*I+W*n+R*$,H[11]=l*S+v*g+W*w+R*L,l=p[12],v=p[13],W=p[14],R=p[15],H[12]=l*b+v*B+W*P+R*Q,H[13]=l*Y+v*D+W*Z+R*G,H[14]=l*q+v*I+W*n+R*$,H[15]=l*S+v*g+W*w+R*L,H},_r=function(B,c,L,t){var x,C,K,i,Z,n,T,U,R,j,S=c[0],z=c[1],u=c[2],O=t[0],w=t[1],v=t[2],h=L[0],f=L[1],s=L[2];return $(S-h)<Dd&&$(z-f)<Dd&&$(u-s)<Dd?Rr(B):(T=S-h,U=z-f,R=u-s,j=1/l(T*T+U*U+R*R),T*=j,U*=j,R*=j,x=w*R-v*U,C=v*T-O*R,K=O*U-w*T,j=l(x*x+C*C+K*K),j?(j=1/j,x*=j,C*=j,K*=j):(x=0,C=0,K=0),i=U*K-R*C,Z=R*x-T*K,n=T*C-U*x,j=l(i*i+Z*Z+n*n),j?(j=1/j,i*=j,Z*=j,n*=j):(i=0,Z=0,n=0),B[0]=x,B[1]=i,B[2]=T,B[3]=0,B[4]=C,B[5]=Z,B[6]=U,B[7]=0,B[8]=K,B[9]=n,B[10]=R,B[11]=0,B[12]=-(x*S+C*z+K*u),B[13]=-(i*S+Z*z+n*u),B[14]=-(T*S+U*z+R*u),B[15]=1,B)},Jm=function(Z,$,o,y,p){var n=1/L($/2),D=1/(y-p);return Z[0]=n/o,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=0,Z[5]=n,Z[6]=0,Z[7]=0,Z[8]=0,Z[9]=0,Z[10]=(p+y)*D,Z[11]=-1,Z[12]=0,Z[13]=0,Z[14]=2*p*y*D,Z[15]=0,Z},yp=function(S,s,h,X,j,q,x){var A=1/(s-h),a=1/(X-j),R=1/(q-x);return S[0]=-2*A,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=-2*a,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=2*R,S[11]=0,S[12]=(s+h)*A,S[13]=(j+X)*a,S[14]=(x+q)*R,S[15]=1,S},dn=function(t,k){var n=k[0],b=k[1],E=k[2],w=k[3],q=n*n+b*b+E*E+w*w,v=q?1/q:0;return t[0]=-n*v,t[1]=-b*v,t[2]=-E*v,t[3]=w*v,t},Ib=function(n,s){var u=s[0]+s[5]+s[10],N=0;return u>0?(N=2*Math.sqrt(u+1),n[3]=.25*N,n[0]=(s[6]-s[9])/N,n[1]=(s[8]-s[2])/N,n[2]=(s[1]-s[4])/N):s[0]>s[5]&s[0]>s[10]?(N=2*Math.sqrt(1+s[0]-s[5]-s[10]),n[3]=(s[6]-s[9])/N,n[0]=.25*N,n[1]=(s[1]+s[4])/N,n[2]=(s[8]+s[2])/N):s[5]>s[10]?(N=2*Math.sqrt(1+s[5]-s[0]-s[10]),n[3]=(s[8]-s[2])/N,n[0]=(s[1]+s[4])/N,n[1]=.25*N,n[2]=(s[6]+s[9])/N):(N=2*Math.sqrt(1+s[10]-s[0]-s[5]),n[3]=(s[1]-s[4])/N,n[0]=(s[8]+s[2])/N,n[1]=(s[6]+s[9])/N,n[2]=.25*N),n},sb=function(E,I,z){var U=I[0],o=I[1],Y=I[2],L=I[3],J=U+U,t=o+o,P=Y+Y,k=U*J,s=U*t,C=U*P,b=o*t,O=o*P,g=Y*P,B=L*J,Q=L*t,i=L*P;return E[0]=1-(b+g),E[1]=s+i,E[2]=C-Q,E[3]=0,E[4]=s-i,E[5]=1-(k+g),E[6]=O+B,E[7]=0,E[8]=C+Q,E[9]=O-B,E[10]=1-(k+b),E[11]=0,E[12]=z[0],E[13]=z[1],E[14]=z[2],E[15]=1,E},ec=i.getRotationFromMatrix4,Sm=function(){var o=[0,0,0],I=[0,0,0],f=[0,0,0],F=function(i,d,m){i[0]=d[1]*m[2]-d[2]*m[1],i[1]=d[2]*m[0]-d[0]*m[2],i[2]=d[0]*m[1]-d[1]*m[0]},Z=function(M){return M[0]*M[0]+M[1]*M[1]+M[2]*M[2]},H=function(o){var v=Math.sqrt(Z(o));o[0]/=v,o[1]/=v,o[2]/=v},K=function(q,$,d){q[0]=$[0]-d[0],q[1]=$[1]-d[1],q[2]=$[2]-d[2]};return function(E,M,R){var q=Wg();return K(f,E,M),0===Z(f)&&(f[2]=1),H(f),F(o,R,f),0===Z(o)&&(1===Math.abs(R[2])?f[0]+=1e-4:f[2]+=1e-4,H(f),F(o,R,f)),H(o),F(I,f,o),q[0]=o[0],q[4]=I[0],q[8]=f[0],q[1]=o[1],q[5]=I[1],q[9]=f[1],q[2]=o[2],q[6]=I[2],q[10]=f[2],q}}(),dc=function(x,J){return _r(J?J:Wg(),x._eye,x._center,x._up)},ub=function(_){var O=_.getAspect(),$=_._near,w=_._far,e=Wg();if(_._ortho){var t=_._orthoWidth/2,B=t/O;yp(e,-t,t,-B,B,$,w)}else Jm(e,_._fovy,O,$,w);return e},bp=function(d,G){if(!d)return c;var p=0,m=1,v=2,j=[],R=0,g=d.length,X=g/3;if(G){for(;g>R;R++)j[R]=0;for(R=0;R<G.length;R+=3){var Q=[],w=[],D=[];Q[p]=d[3*G[R+1]+p]-d[3*G[R]+p],Q[m]=d[3*G[R+1]+m]-d[3*G[R]+m],Q[v]=d[3*G[R+1]+v]-d[3*G[R]+v],w[p]=d[3*G[R+2]+p]-d[3*G[R+1]+p],w[m]=d[3*G[R+2]+m]-d[3*G[R+1]+m],w[v]=d[3*G[R+2]+v]-d[3*G[R+1]+v],D[p]=Q[m]*w[v]-Q[v]*w[m],D[m]=Q[v]*w[p]-Q[p]*w[v],D[v]=Q[p]*w[m]-Q[m]*w[p];for(var $=0;3>$;$++)j[3*G[R+$]+p]+=D[p],j[3*G[R+$]+m]+=D[m],j[3*G[R+$]+v]+=D[v]}}else for(R=0;X>R;R+=3){var Q=[],w=[],D=[];Q[p]=d[3*(R+1)+p]-d[3*R+p],Q[m]=d[3*(R+1)+m]-d[3*R+m],Q[v]=d[3*(R+1)+v]-d[3*R+v],w[p]=d[3*(R+2)+p]-d[3*(R+1)+p],w[m]=d[3*(R+2)+m]-d[3*(R+1)+m],w[v]=d[3*(R+2)+v]-d[3*(R+1)+v],D[p]=Q[m]*w[v]-Q[v]*w[m],D[m]=Q[v]*w[p]-Q[p]*w[v],D[v]=Q[p]*w[m]-Q[m]*w[p];for(var $=0;3>$;$++)j[3*(R+$)+p]=D[p],j[3*(R+$)+m]=D[m],j[3*(R+$)+v]=D[v]}for(R=0;g>R;R+=3){var t=[];t[p]=j[R+p],t[m]=j[R+m],t[v]=j[R+v];var E=l(t[p]*t[p]+t[m]*t[m]+t[v]*t[v]);0===E&&(E=Dd),t[p]=t[p]/E,t[m]=t[m]/E,t[v]=t[v]/E,j[R+p]=t[p],j[R+m]=t[m],j[R+v]=t[v]}return new jb(j)},Ge=function(C,g,q,x){if(q||(q=C.createTexture()),g){var Z=C.TEXTURE_2D,U=C.REPEAT,w=C.CLAMP_TO_EDGE,d=C.TEXTURE_MIN_FILTER;x!==C.NEAREST&&(x=C.LINEAR),Tl(C,q),C.texImage2D(Z,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,g),eb(C,C.TEXTURE_MAG_FILTER,x),vi(g.width)&&vi(g.height)&&!g.clampToEdge?(eb(C,C.TEXTURE_WRAP_S,U),eb(C,C.TEXTURE_WRAP_T,U),eb(C,d,C.LINEAR_MIPMAP_LINEAR),C.generateMipmap(Z)):(eb(C,C.TEXTURE_WRAP_S,w),eb(C,C.TEXTURE_WRAP_T,w),eb(C,d,x)),Tl(C,c)}return q},Cj=function(A,q){var K=new Uint8Array(3);return q=q||A.createTexture(),Tl(A,q),eb(A,A.TEXTURE_MIN_FILTER,A.LINEAR),A.texImage2D(A.TEXTURE_2D,0,A.RGB,1,1,0,A.RGB,A.UNSIGNED_BYTE,K),q},Ep=function(W){W._26I&&W._prg&&(W._26I.deleteProgram(W._prg),W._prg=c)},ic=function(M,R,g,w){var U=M.createShader(g);return M.shaderSource(U,w),M.compileShader(U),M.attachShader(R,U),U},xe=function(W){return W.createBuffer()},Tl=function(H,q){H.bindTexture(H.TEXTURE_2D,q)},lm=function(D,L){D.bindFramebuffer(D.FRAMEBUFFER,L)},eb=function(x,Q,S){x.texParameteri(x.TEXTURE_2D,Q,S)},eq=function(T,k){if(k){var k=yo(k);T.clearColor(k[0],k[1],k[2],k[3])}},He=function(B,R){Jp(B,R.uFix,!0),Bd(B,R.aNormal)},Ce=function(S,q){Jp(S,q.uFix,!1),kq(S,q.aNormal)},ue=function(H,g,A,J,K,B,X,m){H._picking||(A?(Jp(H,g.uBlend,!0),Jp(H,g.uBlendColor,A)):Jp(H,g.uBlend,!1),Jp(H,g.uLight,J==c?!0:J),ps(K)&&1!==K&&Jp(H,g.uPartOpacity,K),Jp(H,g.uReverseFlip,B==c?!1:B),Jp(H,g.uFixPickReverseColor,X||De)),m?H.enable(H.CULL_FACE):H.disable(H.CULL_FACE)},bn=function(O,J){O._picking||Jp(O,J.uPartOpacity,1)},Yc=function($,M,b,K,I,k,l,H,W){if(!b)return $.activeTexture($.TEXTURE0),Tl($,$._emptyTexture),$.activeTexture($.TEXTURE1),Tl($,$._emptyBlendTexture),void 0;Jp($,M.uTexture,!0),Jp($,M.uDiscardSelectable,po(K)?K:!0),kq($,M.aUv),tr($,I,k,M.aUv,2),W?(Jp($,M.uBlendTexture,!0),$.activeTexture($.TEXTURE1),Tl($,W),$.uniform1i(M.uBlendSampler,1)):(Jp($,M.uBlendTexture,!1),$.activeTexture($.TEXTURE1),Tl($,$._emptyBlendTexture)),$.activeTexture($.TEXTURE0),Tl($,b),$.uniform1i(M.uSampler,0);var E=[0,0,1,1];l&&(E[0]=l[0],E[1]=l[1]),H&&(E[2]=H[0],E[3]=H[1]),Jp($,M.uOffsetScale,E)},kn=function(w,k,q){w.activeTexture(w.TEXTURE0),Tl(w,c),w.activeTexture(w.TEXTURE1),Tl(w,c),q&&(Bd(w,k.aUv),Jp(w,k.uTexture,!1),Jp(w,k.uBlendTexture,!1))},gh=function(m,$,Q,L,j,v){!Q||r||g||m.lineWidth(Q),L&&!m._picking&&Jp(m,$.uFixPickReverseColor,L),j&&tr(m,j,v,$.aPosition)},Ud=function(W,t,u,a){Od&&(a=W[Od]),W.drawArrays(a==c?W.TRIANGLES:a,t,u);var r=W._renderInfo;r&&(r.calls++,r.vertices+=u,(a==c||a===W.TRIANGLES)&&(r.faces+=u/3),a===W.LINES&&(r.lines+=u/2))},Ng=function(U,$,z,m){Od&&(m=U[Od]),U.drawElements(m==c?U.TRIANGLES:m,z,U.UNSIGNED_SHORT,$==c?0:2*$);var B=U._renderInfo;B&&(B.calls++,B.vertices+=z,(m==c||m===U.TRIANGLES)&&(B.faces+=z/3),m===U.LINES&&(B.lines+=z/2))},tr=function(R,A,v,I,P){var j=R.ARRAY_BUFFER;R.bindBuffer(j,A),v&&R.bufferData(j,v,R.STATIC_DRAW),I!=c&&R.vertexAttribPointer(I,P?P:3,R.FLOAT,!1,0,0)},xr=function(S,r,H){var i=S.ELEMENT_ARRAY_BUFFER;S.bindBuffer(i,r),H&&S.bufferData(i,H,S.STATIC_DRAW)},Jp=function(B,S,$){if($!=c&&S!=c){$=yo($);var J=$.length;3===J?B.uniform3fv(S,$):4===J?B.uniform4fv(S,$):16===J?B.uniformMatrix4fv(S,!1,$):po($)?B.uniform1i(S,$?1:0):2===J?B.uniform2fv(S,$):B.uniform1f(S,$)}},kq=function(X,V){V!=c&&V>=0&&X.enableVertexAttribArray(V)},Bd=function(L,P){P!=c&&P>=0&&L.disableVertexAttribArray(P)},un=function(Y,i){var y=Y.getGL(),S=Y._prg;Y._7O=Y._8O.pop(),i&&(Jp(y,S.uMVMatrix,Y._7O),Y._6O=i,Jp(y,S.uNMatrix,i))},Wp=function(b,W){return W||(W=Wg()),Qi(W,b),Dh(W),Fm(W),W},li=function(u,N){var J=u.getGL(),V=u._prg,o=u._7O;N&&(u._8O.push(tb(o)),mg(o,o,N)),Jp(J,V.uMVMatrix,o),Jp(J,V.uNMatrix,Wp(o,u._6O))},zk=function(P,l,Q,$,i,w){if(Q){if($){var E=Q.value++,n=[(255&E>>24)/255,(255&E>>16)/255,(255&E>>8)/255,(255&E)/255];Q[E]={data:i,part:w}}else n=Kb;return Jp(P,l.uFixPickReverseColor,n),n}},gb=function(){var G={center:function(d,e,E,p,l){var K=-e[1]/2,M={x:-e[0]/2,y:K,width:e[0],height:e[1]},g=Jl(d,M,E);return[g.x+p,-g.y-l,Be()]},front:function(m,e,i,M,B){var y=-e[1]/2,u={x:-e[0]/2,y:y,width:e[0],height:e[1]},b=Jl(m,u,i);return[b.x+M,-b.y-B,e[2]/2+Be()]},back:function(P,A,E,g,J){var K=-A[0]/2,$=-A[1]/2,k={x:K,y:$,width:A[0],height:A[1]},L=Jl(P,k,E);return[-L.x-g,-L.y-J,-A[2]/2-Be()]},left:function(m,T,r,u,H){var I=-T[1]/2,P={x:-T[2]/2,y:I,width:T[2],height:T[1]},s=Jl(m,P,r);return[-T[0]/2-Be(),-s.y-H,s.x+u]},right:function(y,T,u,V,g){var e=-T[2]/2,W=-T[1]/2,D={x:e,y:W,width:T[2],height:T[1]},l=Jl(y,D,u);return[T[0]/2+Be(),-l.y-g,-l.x-V]},top:function(d,s,I,l,A){var Q={x:-s[0]/2,y:-s[2]/2,width:s[0],height:s[2]},P=Jl(d,Q,I);return[P.x+l,s[1]/2+Be(),P.y+A]},bottom:function(E,P,e,t,V){var A=-P[2]/2,m={x:-P[0]/2,y:A,width:P[0],height:P[2]},g=Jl(E,m,e);return[g.x+t,-P[1]/2-Be(),-g.y-V]}};return function(a,f,s,Z,w,c){return G[Z](a,f,s,w||0,c||0)}}(),Qf=function(p,N,B,x,d,v,J,R,A,G){if(d&&(N[0]+=d[0],N[1]+=d[1],N[2]+=d[2]),Ik(p,B),R){var c=Wg();if(ol(c,A,G),Vl(N,c),Ik(p,N),p.auto=R,p.pos=Vl([0,0,0],p),v){var C=p.mat2=Wg();ol(C,v,J)}}else ol(p,A,G),Ik(p,N),x===rp?nj(p,-S):x===il?nj(p,S):x===dq?wm(p,-S):x===Cb?wm(p,S):x===Ig&&nj(p,I),ol(p,v,J);return p},xd=function(c,M){var t=M.auto,Q=M.mat2,w=c.gv;if(t){var e,y=Wg(),N=[0,0,0,0];e="string"==typeof t?[t.indexOf("x")<0?w._eye[0]:w._center[0],t.indexOf("y")<0?w._eye[1]:w._center[1],t.indexOf("z")<0?w._eye[2]:w._center[2]]:w._eye,Ib(N,_r(Wg(),e,w._center,w._up)),sb(y,dn(N,N),M.pos),Q&&mg(y,y,Q),li(w,y)}else li(w,M)},io=function(z,b,p,Q,g){var q=z.s,B=z.gv,t=B.getGL(),e=B._prg,i=B._buffer,J=B._1O;Ge(t,kr,J),xd(z,p),ue(t,e,q(b+".blend"),q(b+".light"),q(b+".opacity"),q(b+".reverse.flip"),q(b+".reverse.color"),q(b+".reverse.cull")),Yc(t,e,J,g,i.uv,Lc),tr(t,i.vs,Q,e.aPosition),tr(t,i.ns,Zk,e.aNormal),xr(t,i.is,Ro),Ng(t,0,Ro.length),kn(t,e,J),bn(t,e),un(B)},kg=function(h,v,X){var P=h.gv,e=h.data,n=h[v]={blend:P.getBodyColor(e)||P.getFaceBlend(e,v),light:P.getFaceLight(e,v),color:P.getFaceColor(e,v),opacity:P.getFaceOpacity(e,v),transparent:P.getFaceTransparent(e,v),reverseFlip:P.getFaceReverseFlip(e,v),reverseColor:P.getFaceReverseColor(e,v),reverseCull:P.getFaceReverseCull(e,v),texture:P.getFaceImage(e,v),blendTexture:P.getFaceBlendImage(e,v),discardSelectable:P.getFaceDiscardSelectable(e,v)};if("csg"!==v){n.uv=P.getFaceUv(e,v)||X&&X[v+"Uv"],n.uvScale=P.getFaceUvScale(e,v)||X&&X[v+"UvScale"],n.uvOffset=P.getFaceUvOffset(e,v)||X&&X[v+"UvOffset"];var r=P.getFaceMat(e,v);r&&(n.mat=Ki(e,r))}return n},hm=function(E,e,p,_,I){if(_){if(!I(_.transparent))return;var K=E.data,Z=E.gv,W=Z._buffer,C=Z.getTexture(_.texture,K),y=Z.getTexture(_.blendTexture,K);Yc(e,p,C,_.discardSelectable,W.uv,_.tuv,_.uvOffset,_.uvScale,y),ue(e,p,_.blend,_.light,_.opacity,_.reverseFlip,_.reverseColor,_.reverseCull),Jp(e,p.uDiffuse,_.color),tr(e,W.vs,_.vs,p.aPosition),tr(e,W.ns,_.ns,p.aNormal),Ud(e,0,_.vs.length/3),bn(e,p),kn(e,p,C)}},tg=function(W,U,m,G,k,F){var o,M,A,S,v,x,q,Z,t,J,h,p=[G-U,k-m],a=W?W.length:0;for(A=0;a>A;A++){for(S=2,o=W[A],v=o[0],x=o[1];S+1<o.length;){if(q=o[S],Z=o[S+1],M=Gd(U,m,G,k,v,x,q,Z,!0)){t=[q-v,Z-x],J=ig(t),t[0]/=J,t[1]/=J,J=Sd(p,t),J=J>0?F:-F,h=[t[0]*J,t[1]*J];break}v=q,x=Z,S+=2}if(h)break}if(h)for(G=U+h[0],k=m+h[1],A=0;a>A;A++)for(S=2,o=W[A],v=o[0],x=o[1];S+1<o.length;){if(q=o[S],Z=o[S+1],M=Gd(U,m,G,k,v,x,q,Z,!0))return[0,0];v=q,x=Z,S+=2}return h?h:[G-U,k-m]},Tp=v.graph3d={},bi=function(F,J,Z){hd(n+".graph3d."+F,J,Z)},Gk="~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh!gjeof$!~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj!ITBE!gfegj$!!gjeof$!~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!!gjeof$!~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!~<wVb!>!wVs|*fsvuyfUeofmCv)gj~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVs!3dfw!hojzsbw<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUeofmCv!mppc!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",Ci="~~<eJ!>!spmpDhbsG`mh~<spmpDsfmqnbTwv!>+!eJ<*wVs!-sfmqnbTeofmCv)E3fsvuyfu!>!spmpDsfmqnbTwv!5dfw|!*fsvuyfUeofmCv)!gj!!gjeof$!~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~!gjeof$!<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg!HPG!gfegj$!!gjeof$!~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTv)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTv!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQv!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEv)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~!gjeof$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!~<spmpd!>!eJ|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw<*yfusfWw.)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw!gjeof$!<ftvggjEv!>!spmpd!ftmf$!~<ftvggjEv!>!spmpd|ftmf~<spmpDidubCw!>!spmpd|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!<spmpd!5dfw|!ftmf~!gjeof$!~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj!ITBE!gfegj$!!gjeof$!<spmpDftsfwfSldjQyjGv!>!eJ!ftmf$!~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*yjGv)gj<eJ!5dfw|ftmf~~!<esbdtje!|!*1/1!>>!b/spmpDhbsG`mh)!gj!gjeof$!<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh!ftmf$!~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*ldjQv)gj~~<esbdtje|*1/1!>>!b/spmpDwv)gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov!HPG!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<wVs!3dfw!hojzsbw<sfmqnbTeofmCv!E3sfmqnbt!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUeofmCv!mppc!nspgjov<fsvuyfUv!mppc!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov!YJGFSQ!gjeof$!!gjeof$!!<ubpmg!qnvjefn!opjtjdfsq!!ftmf$!!<ubpmg!qihji!opjtjdfsq!!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!!TF`MH!gfegj$!";Mj(i,{setBatchInfo:function(j,q){Aq[j]=q},getBatchInfo:function(b){return Aq[b]}},!0);var bf=[1,1,1],Yk=[1,0,0,0,0,1,0,1,1,1,1,0],rm=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],xj=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],Kq=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],xl=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],Sl=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],Xj=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],Cd=function(E,e){gl(E,e),Ti(E,e,"_wireframeModelMap","_wireframeIndexMap"),Ti(E,e,"_polylineModelMap","_polylineIndexMap"),Ti(E,e,"_wireframeModelMapSwap","_wireframeIndexMapSwap"),Ti(E,e,"_polylineModelMapSwap","_polylineIndexMapSwap")},gl=function(M,i){if(i){var n,q,K=i._id,g=M._33O,P=M._34O,h=P[K];if(h){q=h.batch,n=g[q];var J=h.begin,X=h.size,z=3*J,O=3*X,U=4*J,p=4*X,t=n.vs,m=n.uv,f=n.cs,x=n.bs,j=n.rs,V=n.ds,y=h.index;if(n.invalidate=!0,delete P[K],V.splice(y,1),lh(V))delete g[q];else{for(;y<V.length;y++)h=P[V[y]._id],h.index--,h.begin-=X;t.splice(z,O),n.ns.splice(z,O),n.ps.splice(U,p),m&&m.splice(2*J,2*X),f&&f.splice(U,p),x&&x.splice(z,O),j&&j.splice(J,X)}}}else M._34O={},M._33O={}},Ti=function(k,i,$,Z){if(i){var c,a,f=i._id,W=k[$],Q=k[Z],r=Q[f];if(r){a=r.batch,c=W[a];var V=r.begin,R=r.size,p=3*V,y=3*R,j=4*V,w=4*R,s=c.ds,v=r.index;if(c.invalidate=!0,delete Q[f],s.splice(v,1),lh(s))delete W[a];else{for(;v<s.length;v++)r=Q[s[v]._id],r.index--,r.begin-=R;c.vs.splice(p,y),c.cs.splice(j,w),c.ps.splice(j,w),c.ls&&c.ls.splice(V,R)}}}else k[$]={},k[Z]={}},mo=function(R,F,B,W){if(!W)return c;var r=F[W];if(!r){var g=Aq[W]||nc,p=g.image?[]:c;r=F[W]={vs:[],ns:[],uv:p,cs:p?c:g.color?c:[],bs:g.blend?[]:c,ps:[],rs:g.brightness?[]:c,ds:[]}}return r.invalidate=!0,R[B._id]={index:r.ds.length,begin:r.vs.length/3,batch:W},r.ds.push(B),r},qe=function(H,T){return T!=c&&1!==T?[H[0]*T,H[1]*T,H[2]*T,H[3]]:H},Rg=function(T,q,Z){var y=T.getBrightness(q),z=yo(Z.color||"white"),X=z[3]<1,S=Math.ceil(Z.width)||1,C=(X?"T":"O")+S,O=T._wireframeIndexMap,e=T._wireframeModelMap,M=e[C];M||(M=e[C]={vs:[],cs:[],ps:[],ds:[],T:X,W:S});var c,N=T.getData3dUI(q),_=si(N);if(Z.geometry){if(!_)return;if(c=Wq(_),!c)return}else c=Z.short?Cm:oj;M.invalidate=!0;var i=M.vs,o=M.cs,Y=M.ds,k=O[q._id]={index:Y.length,begin:i.length/3,batch:C};Y.push(q);var b=Ki(q,Z.mat),l=N._calcAnchorMat(q);l&&mg(b,b,l),ce(i,b,c);var v=k.size=i.length/3-k.begin;Yd(o,qe(z,y),v)},ab=function(N,P,v,M,A,m,I,i,L){var $=N.getBrightness(P);$==c&&($=1);var k=qe(yo(M),$),f=k[3]<1;m=Math.ceil(m)||1;var S=(f?"T":"O")+m;if(I){var t=I[0],B=(I[1]||t)+t;S+="-"+t+"-"+B,L&&(S+="-"+Wl(L)+"-"+$,L=qe(yo(L),$))}var H=N._polylineIndexMap,q=N._polylineModelMap,E=q[S];E||(E=q[S]={vs:[],cs:[],ps:[],ds:[],ls:I?[]:c,T:f,W:m},I&&(E.D=t,E.G=B,E.A=L)),E.invalidate=!0;var w,Q=E.vs,T=E.cs,K=E.ds,n=E.ls,_=H[P._id]={index:K.length,begin:Q.length/3,batch:S};K.push(P),rr(Q,v);var X,b=_.size=Q.length/3-_.begin,p=v.length,l=0,W=[];if(I||A)for(w=0;p>w;w+=6)X=ig([v[w],v[w+1],v[w+2]],[v[w+3],v[w+4],v[w+5]]),W.push(X),l+=X;if(l&&A){var U,G=qe(yo(A),$),j=[G[0]-k[0],G[1]-k[1],G[2]-k[2],G[3]-k[3]],z=0;for(w=0;p>w;w+=6)U=z/l,Yd(T,[k[0]+j[0]*U,k[1]+j[1]*U,k[2]+j[2]*U,k[3]+j[3]*U],1),z+=W[w/6],U=z/l,Yd(T,[k[0]+j[0]*U,k[1]+j[1]*U,k[2]+j[2]*U,k[3]+j[3]*U],1)}else Yd(T,k,b);if(I)for(z=i||0,w=0;p>w;w+=6)n.push(z),z+=W[w/6],n.push(z)},Vf=function(q,E,l){if(E)for(var w=4*E.begin,j=l[E.batch].ps,Q=0;Q<E.size;Q++)j[w++]=q[0],j[w++]=q[1],j[w++]=q[2],j[w++]=q[3]},Wo=function(F,e){var Q=e+["32"],p=F[e],R=F[Q];p?R&&R.length===p.length?R.set(p):F[Q]=new jb(p):delete F[Q]},Xi=function(k,n,m,d,c,p,i,L,h){if(Kh(m))m.forEach(function(e){Xi(k,n,e,d,c,p,i,L,h)});else if(Ul(m))Xi(k,n,si(d,m),d,c,p,i,L,h);else if(vf(m)){var C,f=Zp(m.mat,n,k),o=Zp(m.s3,n,k),B=Zp(m.t3,n,k),j=Zp(m.r3,n,k);if((o||j||B||f)&&(C=Uc(f,o,j,Zp(m.rotationMode,n,k),B),p.push(C)),m.shape3d)Xi(k,n,m.shape3d,d,c,p,i,L,m);else{var K=d.s;h=h||nc;var R=p[0],W=p.length,M=K("shape3d.color",m.color,h.color);if(c||(c=K("shape3d.blend",m.blend,h.blend)),W>1){R=tb(R);for(var w=1;W>w;w++)mg(R,R,p[w])}m.vs&&K(Ug,m.visible,h.visible)&&mn(R,i,L,m.vs,m.uv,m.is,c,M),m.top_vs&&K(ie,m.topVisible,h.topVisible)&&mn(R,i,L,m.top_vs,m.top_uv,m.top_is,c,K("shape3d.top.color",m.topColor,h.topColor)||M),m.bottom_vs&&K(Jc,m.bottomVisible,h.bottomVisible)&&mn(R,i,L,m.bottom_vs,m.bottom_uv,m.bottom_is,c,K("shape3d.bottom.color",m.bottomColor,h.bottomColor)||M),m.from_vs&&K(wi,m.fromVisible,h.fromVisible)&&mn(R,i,L,m.from_vs,m.from_uv,m.from_is,c,K("shape3d.from.color",m.fromColor,h.fromColor)||M),m.to_vs&&K(Qk,m.toVisible,h.toVisible)&&mn(R,i,L,m.to_vs,m.to_uv,m.to_is,c,K("shape3d.to.color",m.toColor,h.toColor)||M)}C&&p.pop()}},mn=function(L,H,z,U,J,v,b,Q){var i,k=H.cs,K=H.uv,t=H.bs;if(v){i=v.length;for(var _=0;i>_;_++){var e=v[_];ce(z,L,[U[3*e],U[3*e+1],U[3*e+2]]),K&&rr(K,[J[2*e],J[2*e+1]])}}else i=U.length/3,ce(z,L,U),K&&rr(K,J);k&&Yd(k,Q,i),t&&(b?dj(t,b,i):rr(t,bf,i))},Kf=function(H,x,V,K){var R=[];K?Xi(H.gv,H.data,K,H,H.getBodyColor(),[x],V,R):(xk(H,rp,x,V,R),xk(H,il,x,V,R),xk(H,rb,x,V,R),xk(H,Ig,x,V,R),xk(H,dq,x,V,R),xk(H,Cb,x,V,R),xk(H,"csg",x,V,R)),R.length&&(rr(V.vs,R),rr(V.ns,bp(R)))},xk=function(i,y,A,B,D){var C=i[y];if(C){var S=C.tuv;if(S){var f,h,H,l,v=C.uvScale,G=C.uvOffset;if(v)for(f=S.length,h=v[0],H=v[1],l=0;f>l;l+=2)S[l]*=h,S[l+1]*=H;if(G)for(f=S.length,h=G[0],H=G[1],l=0;f>l;l+=2)S[l]+=h,S[l+1]+=H}mn(A,B,D,C.vs,S,c,C.blend,C.color)}},Hn=function(x,d,t,Q,K,H,h,j){var P,$=t.cs,S=t.uv,_=t.bs;if(x.getFaceVisible(d,H)){var M=x.getFaceMat(d,H);if(M&&(K=Ki(d,M)),ce(h,K,j),$&&Yd($,x.getFaceColor(d,H),6),S){var v=x.getFaceUv(d,H)||Q[H+"Uv"],A=x.getFaceUvScale(d,H)||Q[H+"UvScale"],r=x.getFaceUvOffset(d,H)||Q[H+"UvOffset"];v=v?[v[6],v[7],v[0],v[1],v[2],v[3],v[2],v[3],v[4],v[5],v[6],v[7]]:Yk;var g=v[0],N=v[1],Y=v[2],F=v[3],o=v[4],m=v[5],i=v[6],G=v[7],k=v[8],u=v[9],I=v[10],f=v[11];if(A){var X=A[0],J=A[1];g*=X,N*=J,Y*=X,F*=J,o*=X,m*=J,i*=X,G*=J,k*=X,u*=J,I*=X,f*=J}if(r){var B=r[0],D=r[1];g+=B,N+=D,Y+=B,F+=D,o+=B,m+=D,i+=B,G+=D,k+=B,u+=D,I+=B,f+=D}S.push(g,N,Y,F,o,m,i,G,k,u,I,f)}_&&(P=x.getBodyColor(d)||x.getFaceBlend(d,H),P?dj(_,P,6):rr(_,bf,6))}},cl=function(m,O,Z,h){var x=m.getGL(),b=m._prg,G=m._buffer;if(!Gb(O)){li(m),He(x,b);for(var t in O){var k=O[t];if(!(h&&!k.T||!h&&k.T)){k.invalidate?(k.invalidate=!1,Wo(k,"vs"),Wo(k,"cs"),Wo(k,"ls"),Wo(k,"ps")):Z&&Wo(k,"ps");var L=k.vs32,g=Z?k.ps32:k.cs32;gh(x,b,k.W,c,G.vs,L);var X=k.D,V=!m._dashDisabled&&X;V&&(Jp(x,b.uDash,!0),Jp(x,b.uDashDistance,X),Jp(x,b.uDashGapDistance,k.G),kq(x,b.aLineDistance),tr(x,G.lineDistance,k.ls32,b.aLineDistance,1),Jp(x,b.uDiffuse,k.A||Kk));var o=!m._batchColorDisabled;o&&(Jp(x,b.uBatchColor,!0),kq(x,b.aBatchColor),tr(x,G.batchColor,g,b.aBatchColor,4)),Yc(x),Ud(x,0,L.length/3,x.LINES),kn(x),o&&(Jp(x,b.uBatchColor,!1),Bd(x,b.aBatchColor)),V&&(Jp(x,b.uDash,!1),Bd(x,b.aLineDistance))}}Ce(x,b)}},Qp=function(Y,l,m){var t,H,d,O,j,D,i,J,M,b,R,s=Y.getGL(),g=Y._prg,u=Y._buffer,n=Y._33O;if(!Gb(n)){li(Y);for(t in n)if(H=Aq[t]||nc,!(m&&!H.transparent||!m&&H.transparent)&&(d=n[t],l||!H.transparentMask)){var B=m&&H.autoSort!==!1&&(Y._33Q||d.invalidate);if(d.invalidate?(d.invalidate=!1,Wo(d,"vs"),Wo(d,"ns"),Wo(d,"cs"),Wo(d,"rs"),Wo(d,"ps"),Wo(d,"bs"),Wo(d,"uv")):l&&Wo(d,"ps"),j=d.vs32,D=l?d.ps32:d.cs32,M=d.uv32,i=d.bs32,J=d.rs32,R=j.length/3,B&&(d.is=Co(j,Y.getEye())),R){O=H.light,b=Y.getTexture(H.image),ue(s,g,c,H.light,H.opacity,H.reverseFlip,H.reverseColor,H.reverseCull),D?Y._batchColorDisabled||(Jp(s,g.uBatchColor,!0),kq(s,g.aBatchColor),tr(s,u.batchColor,D,g.aBatchColor,4)):Jp(s,g.uDiffuse,H.color);var r=i&&!Y._batchBlendDisabled;r&&(Jp(s,g.uBatchBlend,!0),kq(s,g.aBatchBlend),tr(s,u.batchBlend,i,g.aBatchBlend));var T=J&&!Y._batchBrightnessDisabled;T&&(Jp(s,g.uBatchBrightness,!0),kq(s,g.aBatchBrightness),tr(s,u.batchBrightness,J,g.aBatchBrightness,1)),M?Yc(s,g,b,H.discardSelectable,u.uv,M,H.uvOffset,H.uvScale):Yc(s),tr(s,u.vs,j,g.aPosition),tr(s,u.ns,d.ns32,g.aNormal),d.is?(xr(s,u.is,d.is),Ng(s,0,R)):Ud(s,0,R),M?kn(s,g,b):kn(s),D&&!Y._batchColorDisabled&&(Jp(s,g.uBatchColor,!1),Bd(s,g.aBatchColor)),r&&(Jp(s,g.uBatchBlend,!1),Bd(s,g.aBatchBlend)),T&&(Jp(s,g.uBatchBrightness,!1),Bd(s,g.aBatchBrightness)),bn(s,g)}}}},Co=function(A,E){for(var k=A.length/3,p=new Array(k),r=k/3,w=new Array(r),X=0;r>X;X++)w[X]=X;w.sort(function(D,H){var t=9*D,j=[(A[t]+A[t+3]+2*A[t+6])/4,(A[t+1]+A[t+4]+2*A[t+7])/4,(A[t+2]+A[t+5]+2*A[t+8])/4];t=9*H;var e=[(A[t]+A[t+3]+2*A[t+6])/4,(A[t+1]+A[t+4]+2*A[t+7])/4,(A[t+2]+A[t+5]+2*A[t+8])/4],w=ig(E,j)-ig(E,e);return w>0?-1:0>w?1:0});for(var X=0;r>X;X++){var n=3*X,M=3*w[X];p[n]=M,p[n+1]=M+1,p[n+2]=M+2}return new Iq(p)};i.handleModelLoaded=function(){},i.handleUnfoundModel=function(){};var Mi=c,ok=c,Jd=function(k){Mi&&!k._loadingModelView_&&(ok||(ok={}),ok[k._loadingModelView_=Pk()]=k)},qn=function(s,p){Mi||(Mi={});var e=Mi[s];if(e){if(e.url===p)return;e.request.onload=og,e.request.onerror=og}var f=new XMLHttpRequest;if(Mi[s]={request:f,url:p},f.overrideMimeType("text/plain"),p=i.beforeLoadURL(p),p.data){var T=i.parse(p.data);ap(s,T),i.handleModelLoaded(s,T)}else f.open("GET",encodeURI(p),!0),f.onload=function(z){if(200===this.status||0===this.status){var v=i.parse(z.target.response);if("obj"===v.modelType){var D={cube:!0,center:!0,finishFunc:function(D,j){if(D){var j=[];for(var n in D){var X=D[n];j.rawS3=X.rawS3,j.push(X)}j.json=v,ap(s,j),i.handleModelLoaded(s,j)}else ap(s,i.handleUnfoundModel(s,p)||c)}};i.loadObj(v.obj,v.mtl,D)}}else ap(s,i.handleUnfoundModel(s,p)||c)},f.onerror=function(){ap(s,i.handleUnfoundModel(s,p)||c)},f.send(null)},ap=function(l,e){if(Sf[l]=e,delete Mi[l],Gb(Mi)&&(Mi=c,ok)){for(var X in ok){var S=ok[X];S._2O&&(S._2O={}),S.invalidateAll&&S.invalidateAll(M,"modelLoaded",l),S.redraw&&S.redraw(),S.iv(),delete S._loadingModelView_}ok=c}if(e&&ok)for(var X in ok){var S=ok[X];S.invalidateAll&&S.invalidateAll(M,"modelLoading",l),S.redraw&&S.redraw(),S.iv()}},Lc=new jb([0,0,0,1,1,1,1,0]),Zk=new jb([0,0,1,0,0,1,0,0,1,0,0,1]),Ro=new Iq([0,1,2,2,3,0]),dh=new jb([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),zd=new Iq([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),fo=new jb([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),ao=new jb([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),Sq=bp(dh,zd),oj=(new jb([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new Iq([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5]),Cm=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],Yr=function(U,X,s,R,d,O){O=O||16,U=U||16,X=X||0,s=s||U;
var m,c,C,Z,b,G,M,z,u=.5,n=[],D=[],E=Y/U,H=I/O;for(m=0;O>m;m++)for(b=m+1,Z=m*H,z=b*H,c=X;s>c;c++)G=c+1,C=c*E,M=G*E,n.push(u*o(Z)*K(C),u*K(Z),-u*o(Z)*o(C),u*o(z)*K(M),u*K(z),-u*o(z)*o(M),u*o(Z)*K(M),u*K(Z),-u*o(Z)*o(M),u*o(Z)*K(C),u*K(Z),-u*o(Z)*o(C),u*o(z)*K(C),u*K(z),-u*o(z)*o(C),u*o(z)*K(M),u*K(z),-u*o(z)*o(M)),D.push(c/U,m/O,G/U,b/O,G/U,m/O,c/U,m/O,c/U,b/O,G/U,b/O);if(R){var h=[],q=[];for(C=X*E,m=0;O>m;m++)b=m+1,Z=m*H,z=b*H,h.push(0,0,0,u*o(z)*K(C),u*K(z),-u*o(z)*o(C),u*o(Z)*K(C),u*K(Z),-u*o(Z)*o(C)),q.push(0,.5,X/U,b/O,X/U,m/O)}if(d){var l=[],F=[];for(C=s*E,m=0;O>m;m++)b=m+1,Z=m*H,z=b*H,l.push(0,0,0,u*o(Z)*K(C),u*K(Z),-u*o(Z)*o(C),u*o(z)*K(C),u*K(z),-u*o(z)*o(C)),F.push(1,.5,s/U,m/O,s/U,b/O)}return{vs:n,uv:D,from_vs:h,from_uv:q,to_vs:l,to_uv:F}},Zc=function($,W,j){$=$||.17,W=W||12,j=j||18,0>$?$=0:$>.25&&($=.25);var F,u,U,A,B,S,L,G=.5,M=[],d=[],T=[],D=Y/j,J=Y/W,O=G-$;for(u=0;W>=u;u++)for(A=-I+u*J,S=K(A),B=o(A),F=0;j>=F;F++)U=F*D,L=O+$*S,M.push(K(U)*L,B*$,-o(U)*L),d.push(F/j,1-u/W);for(u=0;W>u;u++){var n=u*(j+1),P=(u+1)*(j+1);for(F=0;j>F;F++)T.push(n+F,P+F+1,P+F,n+F,n+F+1,P+F+1)}return{vs:M,uv:d,is:T}},Jb=function(N,i,j,f,_,w,g){g=g||12,N=N||18,i=i||0,j=j||N,w=w||.17,0>w?w=0:w>.25&&(w=.25);var v,b,F,P,x,y,d,V,J,m,H=.5,k=[],X=[],S=Y/N,h=Y/g,c=H-w;for(F=0;g>F;F++)for(P=F+1,d=-I+F*h,V=-I+P*h,v=i;j>v;v++)b=v+1,x=v*S,y=b*S,J=c+w*K(d),m=c+w*K(V),k.push(K(x)*J,o(d)*w,-o(x)*J,K(y)*J,o(d)*w,-o(y)*J,K(y)*m,o(V)*w,-o(y)*m,K(x)*J,o(d)*w,-o(x)*J,K(y)*m,o(V)*w,-o(y)*m,K(x)*m,o(V)*w,-o(x)*m),X.push(v/N,1-F/g,b/N,1-F/g,b/N,1-P/g,v/N,1-F/g,b/N,1-P/g,v/N,1-P/g);if(f){var T=[],E=[];for(F=0;g>F;F++)P=F+1,d=-I+F*h,V=-I+P*h,x=i*S,J=c+w*K(d),m=c+w*K(V),T.push(K(x)*J,o(d)*w,-o(x)*J,K(x)*m,o(V)*w,-o(x)*m,K(x)*c,0,-o(x)*c),E.push(.5+.5*K(d),.5-.5*o(d),.5+.5*K(V),.5-.5*o(V),.5,.5)}if(_){var e=[],D=[];for(F=0;g>F;F++)P=F+1,d=-I+F*h,V=-I+P*h,x=j*S,J=c+w*K(d),m=c+w*K(V),e.push(K(x)*J,o(d)*w,-o(x)*J,K(x)*c,0,-o(x)*c,K(x)*m,o(V)*w,-o(x)*m),D.push(.5-.5*K(d),.5-.5*o(d),.5,.5,.5-.5*K(V),.5-.5*o(V))}return{vs:k,uv:X,from_vs:T,from_uv:E,to_vs:e,to_uv:D}},jr=function(t,V){for(var B,R,u,H=.5,I=16,E=[],s=[],r=[],z=Y/I,j=0;I>=j;j++)B=j*z,R=K(B)*H,u=o(B)*H,E.push(R,-H,u,R,H,u),s.push(1-j/I,1,1-j/I,0);for(j=0;I>j;j++)r.push(2*j,2*j+1,2*j+3,2*j,2*j+3,2*j+2);if(V){var k=[],a=[],L=[];for(k.push(0,-H,0),a.push(.5,.5),j=0;I>=j;j++)B=j*z,R=K(B),u=o(B),k.push(R*H,-H,-u*H),a.push(.5+.5*R,.5+.5*u);for(j=0;I>j;j++)L.push(0,j+2,j+1)}if(t){var U=[],n=[],i=[];for(U.push(0,H,0),n.push(.5,.5),j=0;I>=j;j++)B=j*z,R=K(B),u=o(B),U.push(R*H,H,-u*H),n.push(.5+.5*R,.5-.5*u);for(j=0;I>j;j++)i.push(0,j+1,j+2)}return{vs:E,uv:s,is:r,bottom_vs:k,bottom_uv:a,bottom_is:L,top_vs:U,top_uv:n,top_is:i}},xb=function(n,V,R,g,a,q,B){n=n||12,V=V||0,R=R||n;for(var N,t,k,u,z,G,H,A,p=.5,c=[],v=[],D=Y/n,F=V;R>F;F++)N=F+1,t=F*D,k=N*D,u=K(t)*p,z=o(t)*p,G=K(k)*p,H=o(k)*p,c.push(u,-p,-z,G,-p,-H,u,p,-z,G,-p,-H,G,p,-H,u,p,-z),v.push(F/n,1,N/n,1,F/n,0,N/n,1,N/n,0,F/n,0);if(B){var w=[],P=[];for(F=V;R>F;F++)t=D*F,k=D*(F+1),u=K(t),z=o(t),G=K(k),H=o(k),w.push(u*p,-p,-z*p,0,-p,0,G*p,-p,-H*p),P.push(.5+.5*u,.5+.5*z,.5,.5,.5+.5*G,.5+.5*H)}if(q){var j=[],l=[];for(F=V;R>F;F++)t=D*F,k=D*(F+1),u=K(t),z=o(t),G=K(k),H=o(k),j.push(u*p,p,-z*p,G*p,p,-H*p,0,p,0),l.push(.5+.5*u,.5-.5*z,.5+.5*G,.5-.5*H,.5,.5)}if(g){var E=[],Z=[];t=D*V,u=K(t)*p,z=o(t)*p,A=V/n,E.push(0,p,0,0,-p,0,u,-p,-z,u,-p,-z,u,p,-z,0,p,0),Z.push(0,0,0,1,A,1,A,1,A,0,0,0)}if(a){var _=[],r=[];t=D*R,u=K(t)*p,z=o(t)*p,A=R/n,_.push(0,-p,0,0,p,0,u,p,-z,u,p,-z,u,-p,-z,0,-p,0),r.push(1,1,1,0,A,0,A,0,A,1,1,1)}return{vs:c,uv:v,bottom_vs:w,bottom_uv:P,top_vs:j,top_uv:l,from_vs:E,from_uv:Z,to_vs:_,to_uv:r}},sr=function(P,w,H,F,d){w=w||18,H=H||0,F=F==c?Y:F,d=d==c?.5:d;for(var g,h,B,I,j,e,l=[0,.5,.75,.875,.9375],G=[],$=[],_=[],t=F/w,A=0;A<l.length;A++){var O=0===A%2?0:.5;for(g=0;w>=g;g++)h=(g+O)*t+H,B=1-l[A],G.push(K(h)*d*B,-d+2*l[A]*d,-o(h)*d*B),$.push((g+O)/w,B)}for(A=0;A<l.length-1;A++){var s=A*(w+1),X=(A+1)*(w+1);for(g=0;w>g;g++)_.push(s+g,X+g+1,X+g,s+g,s+g+1,X+g+1)}for(e=G.length/3-(w+1),g=0;w>g;g++)G.push(0,d,0),$.push((g+.5)/w,0);for(g=0;w>g;g++)_.push(e+g,e+g+1,e+(w+1)+g);if(P){var R=[],C=[],m=[];for(R.push(0,-d,0),C.push(.5,.5),g=0;w>=g;g++)h=g*t+H,I=K(h),j=o(h),R.push(I*d,-d,-j*d),C.push(.5+.5*I,.5+.5*j);for(g=0;w>g;g++)m.push(0,g+2,g+1)}return{vs:G,uv:$,is:_,bottom_vs:R,bottom_uv:C,bottom_is:m}},Ek=function(q,w,b,r,x,p){q=q||16,w=w||0,b=b||q;for(var c=.5,V=[],L=[],y=Y/q,Z=w;b>Z;Z++){var M=Z+1,v=y*Z,g=y*M;V.push(K(v)*c,-c,-o(v)*c,K(g)*c,-c,-o(g)*c,0,c,0),L.push(Z/q,1,M/q,1,(Z+M)/2/q,0)}if(p){var j=[],d=[];for(Z=w;b>Z;Z++){v=y*Z,g=y*(Z+1);var C=K(v),k=o(v),s=K(g),h=o(g);j.push(C*c,-c,-k*c,0,-c,0,s*c,-c,-h*c),d.push(.5+.5*C,.5+.5*k,.5,.5,.5+.5*s,.5+.5*h)}}if(r){var Q=[],I=[];v=y*w,Q.push(0,c,0,0,-c,0,K(v)*c,-c,-o(v)*c),I.push(0,0,0,1,w/q,1)}if(x){var R=[],t=[];v=y*b,R.push(0,-c,0,0,c,0,K(v)*c,-c,-o(v)*c),t.push(1,1,1,0,b/q,1)}return{vs:V,uv:L,bottom_vs:j,bottom_uv:d,from_vs:Q,from_uv:I,to_vs:R,to_uv:t}},tk=function(S,n,I,w,L,i,Y,M){for(var v=[],R=0;R<S.length-1;R+=2)v.push({x:S[R],y:S[R+1]});return Dn(v,n,I,w,L,i,Y,M,!1)},zm={roundRect:function(k,r){return tk([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],k,r,3)},star:function(D,w){return tk([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],D,w)},rect:function(r,z){return tk([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],r,z)},plane:function(){return{vs:[-.5,.5,0,.5,.5,0,-.5,-.5,0,.5,.5,0,-.5,-.5,0,.5,-.5,0],uv:[0,0,1,0,0,1,1,0,0,1,1,1],ns:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]}},triangle:function(L,u){return tk([0,-.5,.5,.5,-.5,.5],[1,2,2,5],L,u)},rightTriangle:function(O,E){return tk([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],O,E)},parallelogram:function(u,p){return tk([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],u,p)},trapezoid:function(M,A){return tk([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],M,A)}},hf={sphere:1,cylinder:1,cone:1,torus:1},Fl={torus:1,sphere:1},ci=Mj(Wk(zm),{cylinder:1}),Qe=Mj(Wk(zm),{cylinder:1,cone:1}),od=function(O,S,Y){var u,R=Zp(O.mat,Y,S),M=Zp(O.s3,Y,S),b=Zp(O.t3,Y,S),v=Zp(O.r3,Y,S);return(M||v||b||R)&&(u=tb(S._6O),li(S,Uc(R,M,v,Zp(O.rotationMode,Y,S),b))),u},Nf=function(D,j,y,P,U,b,I){if(Kh(y))y.forEach(function(V){Nf(D,j,V,P,U,b,I)});else if(Ul(y))Nf(D,j,si(P,y),P,U,b,I);else if(vf(y))if(y.shape3d){var c=od(y,D,j);Nf(D,j,y.shape3d,P,U,b,y),c&&un(D,c)}else Si(D,j,y,P.s,U,b,I)},Si=function(x,o,p,N,I,H,Z){if(Z=Z||nc,!H||H(N("shape3d.transparent",p.transparent,Z.transparent))){var r=od(p,x,o);uk(p);var K=x._26I,k=x._prg,f=x._buffer,n=N("shape3d.color",p.color,Z.color);I||(I=N("shape3d.blend",p.blend,Z.blend));var B,X=p.opacity==c?Z.opacity:p.opacity,s=N("shape3d.opacity");B=s!=c&&X!=c?X*s:X!=c?X:s,ue(K,k,I,N("shape3d.light",p.light,Z.light),B,N("shape3d.reverse.flip",p.reverseFlip,Z.reverseFlip),N("shape3d.reverse.color",p.reverseColor,Z.reverseColor),N("shape3d.reverse.cull",p.reverseCull,Z.reverseCull)),p.vs&&N(Ug,p.visible,Z.visible)&&Zr(K,k,f,n,x.getTexture(N("shape3d.image",p.image,Z.image),o),N("shape3d.discard.selectable",p.discardSelectable,Z.discardSelectable),p.vs,p.uv,p.ns,p.is,N("shape3d.uv.offset",p.uvOffset,Z.uvOffset),N("shape3d.uv.scale",p.uvScale,Z.uvScale)),p.top_vs&&N(ie,p.topVisible,Z.topVisible)&&Zr(K,k,f,N("shape3d.top.color",p.topColor,Z.topColor)||n,x.getTexture(N("shape3d.top.image",p.topImage,Z.topImage),o),N("shape3d.top.discard.selectable",p.topDiscardSelectable,Z.topDiscardSelectable),p.top_vs,p.top_uv,p.top_ns,p.top_is,N("shape3d.top.uv.offset",p.topUvOffset,Z.topUvOffset),N("shape3d.top.uv.scale",p.topUvScale,Z.topUvScale)),p.bottom_vs&&N(Jc,p.bottomVisible,Z.bottomVisible)&&Zr(K,k,f,N("shape3d.bottom.color",p.bottomColor,Z.bottomColor)||n,x.getTexture(N("shape3d.bottom.image",p.bottomImage,Z.bottomImage),o),N("shape3d.bottom.discard.selectable",p.bottomDiscardSelectable,Z.bottomDiscardSelectable),p.bottom_vs,p.bottom_uv,p.bottom_ns,p.bottom_is,N("shape3d.bottom.uv.offset",p.bottomUvOffset,Z.bottomUvOffset),N("shape3d.bottom.uv.scale",p.bottomUvScale,Z.bottomUvScale)),p.from_vs&&N(wi,p.fromVisible,Z.fromVisible)&&Zr(K,k,f,N("shape3d.from.color",p.fromColor,Z.fromColor)||n,x.getTexture(N("shape3d.from.image",p.fromImage,Z.fromImage),o),N("shape3d.from.discard.selectable",p.fromDiscardSelectable,Z.fromDiscardSelectable),p.from_vs,p.from_uv,p.from_ns,p.from_is,N("shape3d.from.uv.offset",p.fromUvOffset,Z.fromUvOffset),N("shape3d.from.uv.scale",p.fromUvScale,Z.fromUvScale)),p.to_vs&&N(Qk,p.toVisible,Z.toVisible)&&Zr(K,k,f,N("shape3d.to.color",p.toColor,Z.toColor)||n,x.getTexture(N("shape3d.to.image",p.toImage,Z.toImage),o),N("shape3d.to.discard.selectable",p.toDiscardSelectable,Z.toDiscardSelectable),p.to_vs,p.to_uv,p.to_ns,p.to_is,N("shape3d.to.uv.offset",p.toUvOffset,Z.toUvOffset),N("shape3d.to.uv.scale",p.toUvScale,Z.toUvScale)),bn(K,k),r&&un(x,r)}},Zr=function(o,e,$,U,L,p,j,X,H,G,A,f){j&&(Jp(o,e.uDiffuse,U),X?Yc(o,e,L,p,$.uv,X,A,f):Yc(o),tr(o,$.vs,j,e.aPosition),tr(o,$.ns,H,e.aNormal),G?(xr(o,$.is,G),Ng(o,0,G.length)):Ud(o,0,j.length/3),X?kn(o,e,L):kn(o))},si=function(Y,D){var o=Y.s;if(D||(D=o(Fi)),!D)return c;if(vf(D))return D;var A=nf(D);if(A)return A;if("text"===D){var Q={amount:o("shape3d.text.amount"),size:o("shape3d.text.size"),font:o("shape3d.text.font"),style:o("shape3d.text.style"),weight:o("shape3d.text.weight"),fill:o("shape3d.text.fill"),curveSegments:o("shape3d.text.curveSegments"),spacing:o("shape3d.text.spacing")},P=Y.gv.getShape3dText(Y.data),Z=P;for(var E in Q)Z+="_"+(Q[E]===M?"U":Q[E]);return Y._cachedTextKey===Z?Y._cachedTextGeometry:(Y._cachedTextKey=Z,Y._cachedTextGeometry=i.createTextGeometry(P,Q))}var E=D;if(hf[D]){var j=o("shape3d.side"),e=o("shape3d.side.from"),b=o("shape3d.side.to"),G=o(wi),W=o(Qk);3>j?(j=0,e=0,b=0,G=!1,W=!1):((e==c||0>e)&&(e=0),(b==c||b>j)&&(b=j),0===e&&b===j&&(G=!1,W=!1)),E+="-"+j+"-"+e+"-"+b+"-"+G+"-"+W}if(ci[D]){var v=o(ie);E+="-"+v}if(Qe[D]){var N=o(Jc);E+="-"+N}if("torus"===D){var d=o("shape3d.torus.radius");0>d?d=0:d>.25&&(d=.25),E+="-"+d}if(Fl[D]){var $=o(fl);E+="-"+$}return A=Th[E],A||("box"===D?A=i.createBoxModel():zm[D]?A=zm[D](v,N):"sphere"===D?A=i.createSphereModel(j,e,b,G,W,$):D===Rh?A=i.createCylinderModel(j,e,b,G,W,v,N):"cone"===D?A=i.createConeModel(j,e,b,G,W,N):"torus"===D&&(A=i.createTorusModel(j,e,b,G,W,d,$)),Th[E]=A),A},uk=function(){var t=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],G=["is","top_is","bottom_is","from_is","to_is"];return X=cd(Gk.substr(Gk.indexOf("^#")+2)),wk(i[Pg(Eo+t[15]+"n"+t[16])]())&&lk()?function(Y){Y&&!Y._complete_&&(Y._complete_=!0,Y.vs&&lh(Y.ns)&&(Y.ns=bp(Y.vs,Y.is)),Y.top_vs&&lh(Y.top_ns)&&(Y.top_ns=bp(Y.top_vs,Y.top_is)),Y.bottom_vs&&lh(Y.bottom_ns)&&(Y.bottom_ns=bp(Y.bottom_vs,Y.bottom_is)),Y.from_vs&&lh(Y.from_ns)&&(Y.from_ns=bp(Y.from_vs,Y.from_is)),Y.to_vs&&lh(Y.to_ns)&&(Y.to_ns=bp(Y.to_vs,Y.to_is)),t.forEach(function(S){var _=Y[S];Kh(_)&&(Y[S]=new jb(_))}),G.forEach(function($){var W=Y[$];Kh(W)&&(Y[$]=new Iq(W))}))}:void 0}(),th=function(y,g){var c=y[g];Kh(c)&&(y[g]=new jb(c))};Mj(mi,{_25Q:function(K){K._16O=function(p,c,s,E,d,f,H,_,A){var i=this.info;if(i){var m,D,g,h,N,a,G=Wg();if(Mg[c]?(m=i.p3,D=i.c1,g=i.c2):ae[c]?(D=i.s1||i.c1,g=i.s2||i.c2):(D=i.t1||i.c1,g=i.t2||i.c2),m)a=gb(c,cm,s,E,_,A);else{var Y=jo(g,D),n=ig(D,g);h=[0,-w(Y[2],Y[0]),b(Y[1]/n)],N="zyx",m=[(D[0]+g[0])/2,(D[1]+g[1])/2,(D[2]+g[2])/2],a=gb(c,[n,0,0],s,E,_,A)}return Qf(G,a,m,E,d,f,H,p,h,N)}return Jf},K._80o=function(F,j,m){var W=this,y=W.shapeModel;if(y){var A=W.gv;li(A),Nf(A,W.data,y,W,W.getBodyColor(),m)}},K.createLineModel=function(R,l,u,y,I){for(var b=this,E=b.s,U=qj(R,l,E(fl)),B=[],S=0;S<U.length;S++){var $=U[S],L=$.length;if(L>1){var h=$[0];B.push(h.x,h.y,h.z);for(var O=1;L-1>O;O++)h=$[O],B.push(h.x,h.y,h.z),B.push(h.x,h.y,h.z);h=$[L-1],B.push(h.x,h.y,h.z)}}var s,P,V,a=E(y+".color"),N=E(I),q=0;return N&&(P=E(I+".color"),s=E(I+".pattern"),q=E(I+".offset"),V=a),ab(b.gv,b.data,B,P||a,V?c:E(y+".gradient.color"),u,s||E(y+".pattern"),q,V),U},K.createTubeModel=function(G,K,b,B){for(var u=this,C=u.s,e=C("shape3d.side")||Vi,h=C("shape3d.start.angle"),s=C("shape3d.sweep.angle"),p=C(ie)?C("shape3d.top.cap"):c,L=C(Jc)?C("shape3d.bottom.cap"):c,_="flat"===p,d="flat"===L,Z=_&&(B?B.uv:C("shape3d.top.image")),S=d&&(B?B.uv:C("shape3d.bottom.image")),x=B?B.uv:C("shape3d.image"),O={vs:[],uv:x?[]:c,top_vs:_?[]:c,top_uv:Z?[]:c,bottom_vs:d?[]:c,bottom_uv:S?[]:c},N=qj(G,K,C(fl),b),R=0,H=N.length;H>R;R++)ee(O,N[R],C(tq),b,e,h,s,p,L);if(B){var T=[];Xi(u.gv,u.data,O,u,u.getBodyColor(),[],B,T),T.length&&(rr(B.vs,T),rr(B.ns,bp(T)))}else u.shapeModel=O;return N},K.getCache=function(){var y=this.info;if(y){var a=y.list;if(a){var j=y.cache;return j||(j=y.cache=km(a)),j}}return c}}});var oc=function(l,f){for(var M,q=0,z=l.length,X=0,n=z-1;n>=X;)if(q=e(X+(n-X)/2),M=l[q].length-f,0>M)X=q+1;else{if(!(M>0)){n=q;break}n=q-1}q=n;var _=l[q],R=_.point;return q===z-1||_.length===f||(R=(new Rn).subVectors(l[q+1].point,R).normalize().multiplyScalar(f-_.length).add(R)),{point:R,tangent:_.tangent}},km=function(O){for(var i,X,I=[],u=0,d=0;d<O.length;d++){for(var D=O[d],v=0;v<D.length;v++){i=D[v],X&&(u+=X.distanceTo(i));var m=new Rn,o=D[v+1];o?m.subVectors(o,i):X?m.subVectors(i,X):m.x=1,m.normalize(),I.push({point:i,length:u,tangent:m}),X=i}X=null}return I},qj=function(E,$,Q,T){Q=Q||ff;for(var x=[],j=0,g=E.size();g>j;j++){var M=E.get(j);x.push(new Rn(M.x,M.e||0,M.y))}$&&(kk($)&&($=$._as),$.length||($=null));for(var G,C,i,_,u,q=[],l=0,J=0,e=$?$.length:g;e>J;J++)if(u=$?$[J]:0===J?1:2,1===u)q.push(i=[]),i.push(x[l++]);else if(2===u||5===u)if(_=2===u?x[l++]:i[0],T){var R=$?$[J+1]:e>J+1?2:c;if(2===R||5===R){var O=i[i.length-1],V=2===R?x[l]:i[0],B=(new Rn).subVectors(O,_),d=(new Rn).subVectors(V,_),P=B.length(),S=d.length();if(T>P/2&&T>S/2)i.push(_);else for(B.multiplyScalar(y(T,P/2)/P).add(_),d.multiplyScalar(y(T,S/2)/S).add(_),G=new Ym(B,_,d).getPoints(Q),C=0;Q>=C;C++)i.push(G[C])}else i.push(_)}else i.push(_);else if(3===u)for(G=new Ym(i[i.length-1],x[l++],x[l++]).getPoints(Q),C=1;Q>=C;C++)i.push(G[C]);else if(4===u)for(G=new gm(i[i.length-1],x[l++],x[l++],x[l++]).getPoints(Q),C=1;Q>=C;C++)i.push(G[C]);return q},dm=function(P){for(var l,O,N=new Rn,C=[],s=[],w=[],T=0,f=P.length;f>T;T++)l=P[T],O=P[T+1],O?N.subVectors(O,l):N.subVectors(l,P[T-1]),C.push(N.normalize().clone());var E,R,L,u,X=new Rn,v=new Rn,k=new An,n=1e-4,D=Number.MAX_VALUE,c=C[0],e=s[0]=new Rn,M=w[0]=new Rn;for(R=$(c.x),L=$(c.y),u=$(c.z),D>=R&&(D=R,X.set(1,0,0)),D>=L&&(D=L,X.set(0,1,0)),D>=u&&X.set(0,0,1),v.crossVectors(c,X).normalize(),e.crossVectors(c,v),M.crossVectors(c,e),T=1;f>T;T++)s[T]=s[T-1].clone(),w[T]=w[T-1].clone(),v.crossVectors(C[T-1],C[T]),v.length()>n&&(v.normalize(),E=t(Pe(C[T-1].dot(C[T]),-1,1)),s[T].applyMatrix4(k.makeRotationAxis(v,E))),w[T].crossVectors(C[T],s[T]);return{B:w,T:C,N:s}},ee=function(){var p=function(V){for(var m=1;m<arguments.length;m++){var Q=arguments[m];V.push(Q.x,Q.y,Q.z)}},W=function(c){for(var y=1;y<arguments.length;y++){var u=arguments[y].uv;c.push(u[0],u[1])}},i=function(Z,p,n,q,D){var A=-q*K(D),z=q*o(D);return new Rn(Z.x+A*n.x+z*p.x,Z.y+A*n.y+z*p.y,Z.z+A*n.z+z*p.z)},S=function(O,f,V,n,J,w,b,h){b=b||Y;for(var G=[],R=b/J,a=0;J>=a;a++){var T=i(O,f,V,n,a*R+w);G.push(T),h!=c&&(T.uv=[h,a/J])}return G},u=function(D,w,k,W,z,U,P,A,M){M=M||Y;var I=w?D.top_vs:D.bottom_vs;if(I)for(var $=w?D.top_uv:D.bottom_uv,j=M/P,X=0;P>X;X++){var V,G;w?(V=X*j+A,G=(X+1)*j+A):(G=X*j+A,V=(X+1)*j+A),p(I,i(k,W,z,U,V),i(k,W,z,U,G),k),$&&$.push(.5-.5*K(V),.5-.5*o(V),.5-.5*K(G),.5-.5*o(G),.5,.5)}};return function(E,G,t,w,k,s,y,L,i){var P=G.length;if(P>1){var f,o,q,V,D,b,O,v=dm(G),n=v.T,e=v.N,r=v.B;"flat"===L&&u(E,!0,G[0],r[0],e[0],w,k,s,y),"flat"===i&&u(E,!1,G[P-1],r[P-1],e[P-1],w,k,s,y);var H,Z,Y=[],z=x(k/2),j="round"===L,U="round"===i,A=G[0],T=n[0],X=r[0],K=e[0],h=G[P-1],J=n[P-1],F=r[P-1],C=e[P-1];if(j){for(q=1;z>=q;q++)e.splice(0,0,K),r.splice(0,0,X),n.splice(0,0,T),Z=-q/z*w,G.splice(0,0,T.clone().multiplyScalar(Z).add(A)),Y[z-q]=l(w*w-Z*Z);P+=z}if(U){for(q=1;z>=q;q++)e.push(C),r.push(F),n.push(J),Z=q/z*w,G.push(J.clone().multiplyScalar(Z).add(h)),Y[G.length-1]=l(w*w-Z*Z);P+=z}if(E.uv){var B=0,Q=0,I=[];for(t&&(B=t),D=G[0],I[0]=0,q=1;P>q;q++)V=G[q],I[q]=D.distanceTo(V),D=V,t||(B+=I[q]);for(H=[],q=0;P>q;q++)Q+=I[q],H[q]=B?Q/B:0}for(q=0;P>q;q++){if(V=G[q],b=r[q],O=e[q],f=S(V,b,O,Y[q]===M?w:Y[q],k,s,y,H?H[q]:c),o)for(var d=0;k>d;d++){var a=o[d],N=o[d+1]||o[0],R=f[d],m=f[d+1]||f[0];p(E.vs,N,a,R,R,m,N),E.uv&&W(E.uv,N,a,R,R,m,N)}o=f}}}}();Mj(i,{getLineLength:function(j){return j[j.length-1].length},getLineOffset:function(h,q){return oc(h,q)},getLineCacheInfo:function(N,o,Y,D){return km(qj(N,o,Y,D))}});var ar=v.Light=function(){Ke(ar,this),this.s(cq,D[cq]),this.s(Fi,"sphere"),this.s3(20,20,20)};Tn("Light",rj,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(q,u,Y){ar.superClass.onStyleChanged.apply(this,arguments),q===cq&&this.s("shape3d.color",Y)}});var Rd=Tp.Graph3dView=function(r,y){var g=this;g._attributes=y||i.graph3dViewAttributes,g._25I={},g._view=fi(1,g);var O=g._canvas=nq(g._view);O.addEventListener("webglcontextlost",function(A){A.preventDefault(),Ep(g),g._26I=c,g._1o.texture=c,g._35O=!0},!1),O.addEventListener("webglcontextrestored",function(){g._35O=!1,g.iv()},!1),g._34O={},g._33O={},g._wireframeIndexMap={},g._wireframeModelMap={},g._wireframeIndexMapSwap={},g._wireframeModelMapSwap={},g._polylineIndexMap={},g._polylineIndexMap={},g._polylineIndexMapSwap={},g._polylineIndexMapSwap={},g._8O=[],g._7O=Wg(),g._6O=Wg(),g._1o=new Pi(g),g._30O=new Bp(g),g._31O=new Oj(g),g._32O=new Gf(g),g._33Q=!0,g._eye=Wk(i.graph3dViewEye),g._center=Wk(i.graph3dViewCenter),g._up=Wk(i.graph3dViewUp),g._lightChanged=!1,g._59O=[],g._spots=[],g._dirs=[],g.dm(r?r:new pm),g.setInteractors([new Ef(g)])},Fp={fogDisabled:1,dashDisabled:1,batchColorDisabled:1,batchBlendDisabled:1,batchBrightnessDisabled:1};bi("Graph3dView",G,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable",Mn,pp,"firstPersonMode",pd,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightColor","headlightIntensity","headlightDisabled","ortho","orthoWidth","fovy","near","far",Ap,Gm,"up","aspect","fogDisabled","fogColor","fogNear","fogFar","dashDisabled","batchColorDisabled","batchBlendDisabled","batchBrightnessDisabled"],_editable:!1,_devicePixelRatio:M,_boundaries:M,_moveStep:i.graph3dViewMoveStep,_rotateStep:i.graph3dViewRotateStep,_pannable:i.graph3dViewPannable,_rotatable:i.graph3dViewRotatable,_walkable:i.graph3dViewWalkable,_resettable:i.graph3dViewResettable,_zoomable:i.graph3dViewZoomable,_firstPersonMode:i.graph3dViewFirstPersonMode,_mouseRoamable:i.graph3dViewMouseRoamable,_gridVisible:i.graph3dViewGridVisible,_gridSize:i.graph3dViewGridSize,_gridGap:i.graph3dViewGridGap,_gridColor:i.graph3dViewGridColor,_originAxisVisible:i.graph3dViewOriginAxisVisible,_centerAxisVisible:i.graph3dViewCenterAxisVisible,_axisXColor:i.graph3dViewAxisXColor,_axisYColor:i.graph3dViewAxisYColor,_axisZColor:i.graph3dViewAxisZColor,_ortho:i.graph3dViewOrtho,_orthoWidth:i.graph3dViewOrthoWidth,_fovy:i.graph3dViewFovy,_near:i.graph3dViewNear,_far:i.graph3dViewFar,_headlightColor:i.graph3dViewHeadlightColor,_headlightIntensity:i.graph3dViewHeadlightIntensity,_headlightRange:i.graph3dViewHeadlightRange,_headlightDisabled:i.graph3dViewHeadlightDisabled,_rectSelectable:i.graph3dViewRectSelectable,_rectSelectBackground:i.graph3dViewRectSelectBackground,_editSizeColor:i.graph3dViewEditSizeColor,_autoMakeVisible:rh,_fogDisabled:i.graph3dViewFogDisabled,_fogColor:i.graph3dViewFogColor,_fogNear:i.graph3dViewFogNear,_fogFar:i.graph3dViewFogFar,_dashDisabled:i.graph3dViewDashDisabled,_batchColorDisabled:i.graph3dViewBatchColorDisabled,_batchBlendDisabled:i.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:i.graph3dViewBatchBrightnessDisabled,setEye:function(d,t,j){1===arguments.length&&(t=d[1],j=d[2],d=d[0]);var C=this._eye;C[0]=d,C[1]=t,C[2]=j,this.fp(Ap,c,C)},setCenter:function(X,P,L){1===arguments.length&&(P=X[1],L=X[2],X=X[0]);var j=this._center;j[0]=X,j[1]=P,j[2]=L,this.fp(Gm,c,j)},setUp:function(v,s,G){1===arguments.length&&(s=v[1],G=v[2],v=v[0]);var U=this._up;U[0]=v,U[1]=s,U[2]=G,this.fp("up",c,U)},isTransparentMask:function(u){return u.s("transparent.mask")},getAspect:function(){var o=this,C=o._aspect;return C?C:o.getWidth()/o.getHeight()},getCanvas:function(){return this._canvas},setDataModel:function(J){var m=this,q=m._dataModel,k=m._selectionModel;q!==J&&(q&&(q.umm(m.handleDataModelChange,m),q.umd(m.handleDataPropertyChange,m),k||q.sm().ums(m.handleSelectionChange,m)),m._dataModel=J,J.mm(m.handleDataModelChange,m),J.md(m.handleDataPropertyChange,m),k?k._21I(J):J.sm().ms(m.handleSelectionChange,m),m.invalidateAll(!0),m.invalidateLight(),m.fp(Nh,q,J))},handleDataPropertyChange:function(f){var V=f.data;this.invalidateData(V),Lh(V)&&"s:light.type"===f.property&&this.invalidateLight()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(e){var w=this,f=e.property;w.iv(),w._18Q=c,"eye"===f?w._33Q=!0:"devicePixelRatio"===f?w._42(c,w._devicePixelRatio||tn):Fp[f]&&Ep(w)},_5O:function($){var K=$._22Q();return K?new K(this,$):c},getData3dUI:function(L){var e=this._25I[L._id];return e===M&&(e=this._5O(L),this._25I[L._id]=e),e},invalidateAll:function(i){var H=this;if(i){for(var v in H._25I){var g=H._25I[v];g&&g.dispose()}H._25I={},H.iv(),Cd(H)}else H.dm().each(function(t){H.invalidateData(t)})},invalidateSelection:function(){var z=this;z.sm().each(function(Y){z.invalidateData(Y)})},invalidateData:function(G){var O=this,J=O.getData3dUI(G);J&&(J.iv(),O.iv()),Cd(O,G)},getShape3dText:function(w){return w.getStyle("shape3d.text")||this.getLabel(w)},invalidateBatch:function(m){var X=this,V=X._33O,C=V[m],e=[],s={};if(C){C.ds.forEach(function(q){var S=X.getData3dUI(q);S&&S.iv(),delete X._34O[q._id],e.push(q._id)}),delete V[m];for(var T,t,L,c,Y,G,w,U,b,J=["_wireframeModelMap","_polylineModelMap","_wireframeModelMapSwap","_polylineModelMapSwap"],k=["_wireframeIndexMap","_polylineIndexMap","_wireframeIndexMapSwap","_polylineIndexMapSwap"],r=0;r<J.length;r++){var z=X[J[r]],x=X[k[r]];for(s={},U=0;U<e.length;U++){var n=x[e[U]];if(n){delete x[e[U]],b=n.batch,T=z[b];var K=n.begin,N=n.size,E=3*K,u=3*N,S=4*K,d=4*N;for(t=T.ds,L=T.vs,c=T.cs,Y=T.ps,G=T.ls,w=n.index,T.invalidate=!0,t[w]=M,w=E;E+u>w;w++)L[w]=M;for(w=S;S+d>w;w++)c[w]=M;for(w=S;S+d>w;w++)Y[w]=M;if(G)for(w=E;E+u>w;w++)G[w]=M;s[b]=!0}}for(b in s){T=z[b],t=T.ds,L=T.vs,c=T.cs,Y=T.ps,G=T.ls;var a=[];for(w=0;w<t.length;w++)t[w]!==M&&a.push(t[w]);if(0===a.length)delete z[b];else{for(T.ds=a,a=[],w=0;w<L.length;w++)L[w]!==M&&a.push(L[w]);for(T.vs=a,a=[],w=0;w<c.length;w++)c[w]!==M&&a.push(c[w]);for(T.cs=a,a=[],w=0;w<Y.length;w++)Y[w]!==M&&a.push(Y[w]);if(T.ps=a,G){for(a=[],w=0;w<G.length;w++)G[w]!==M&&a.push(G[w]);T.ls=a}}}}X.iv()}},handleDataModelChange:function(s){var K=this,E=s.kind,u=s.data;if("add"===E)K.invalidateData(u),ck(u)&&u.getEdgeGroup()&&u.getEdgeGroup().eachSiblingEdge(K.invalidateData,K),Lh(u)&&K.invalidateLight();else if(E===Yl){var v=u._id,T=K._25I[v];T&&(T.dispose(),delete K._25I[v],K.iv()),u===K._currentSubGraph&&K.setCurrentSubGraph(c),Cd(K,u),Lh(u)&&K.invalidateLight()}else E===nb&&(K.invalidateAll(!0),K.setCurrentSubGraph(c),Cd(K),K.invalidateLight())},toCanvas:function(_){var g=this,H=g.getGL();if(g.validate(),_){var f=H.getParameter(H.COLOR_CLEAR_VALUE);eq(H,_)}g._42(c,1);var I=g.getWidth(),i=g.getHeight(),A=new Uint8Array(4*I*i),W=nq(),o=W.getContext("2d");H.readPixels(0,0,I,i,H.RGBA,H.UNSIGNED_BYTE,A),ge(W,I,i,1);for(var w=o.getImageData(0,0,I,i),B=w.data,l=0;l<B.length;l+=4){var p=l/4,n=e(p/I),m=p-n*I;p=4*((i-1-n)*I+m),B[p]=A[l],B[p+1]=A[l+1],B[p+2]=A[l+2],B[p+3]=A[l+3]}return o.putImageData(w,0,0),_&&eq(H,f),g._42(c,g._devicePixelRatio||tn),W},toDataURL:function(e,f){var y=this,G=y.getGL();if(y.validate(),e){var V=G.getParameter(G.COLOR_CLEAR_VALUE);eq(G,e)}y._42(c,1);var R=y._canvas.toDataURL(f||"image/png",1);return e&&eq(G,V),y._42(c,y._devicePixelRatio||tn),R},getGL:function(){var G=this,$=G._26I,d=G._prg;if(!$)try{G._2O={},$=G._26I=G._canvas.getContext("webgl",G._attributes)||G._canvas.getContext("experimental-webgl",G._attributes),$._emptyTexture=Cj($),$._emptyBlendTexture=Cj($),G._buffer={vs:xe($),ns:xe($),is:xe($),uv:xe($),batchColor:xe($),batchBlend:xe($),batchBrightness:xe($),lineDistance:xe($)},G._1O=Ge($);var X=G._cube={vs:xe($),ns:xe($),is:xe($),uv:xe($)};tr($,X.vs,dh),tr($,X.ns,Sq),tr($,X.uv,fo),xr($,X.is,zd)}catch(y){}if($&&!d){if(d=G._prg=$.createProgram(),!d)return c;var R=G._dirs.length,b=G._spots.length,A=G._59O.length,e=["uPMatrix","uMVMatrix","uNMatrix","uViewMatrix","aNormal","aUv","uOffsetScale","uDiffuse","uBlend","uBlendColor","uBrightness","uPartOpacity","uTexture","uBlendTexture","uSampler","uBlendSampler","uDiscardSelectable","uFix","uPick","uReverseFlip","uFixPickReverseColor","uBatchBrightness","aBatchBrightness","uBatchColor","aBatchColor","uBatchBlend","aBatchBlend","uDash","aLineDistance","uDashDistance","uDashGapDistance","uLight","uHeadlightRange","uHeadlightColor","uFogColor","uFogNear","uFogFar"];R&&e.push("uDirColor","uDirDirection"),b&&e.push("uSpotColor","uSpotRange","uSpotAngle","uSpotExponent","uSpotPosition","uSpotDirection"),A&&e.push("uPointColor","uPointRange","uPointPosition"),eq($,[0,0,0,0]),$.clearDepth(1),$.enable($.DEPTH_TEST),$.depthFunc($.LEQUAL),$.enable($.BLEND),$.blendFuncSeparate($.SRC_ALPHA,$.ONE_MINUS_SRC_ALPHA,$.ONE,$.ONE_MINUS_SRC_ALPHA),vk||(Gk=cd(Gk.substring(0,Gk.indexOf("^#"))),Ci=cd(Ci),vk=!0);var Z=["#define MAX_DIR "+R,"#define MAX_SPOT "+b,"#define MAX_POINT "+A,G._fogDisabled?"":"#define FOG",G._dashDisabled?"":"#define DASH",G._batchColorDisabled?"":"#define BATCHCOLOR",G._batchBlendDisabled?"":"#define BATCHBLEND",G._batchBrightnessDisabled?"":"#define BATCHBRIGHTNESS",""].join("\n"),S=ic($,d,$.VERTEX_SHADER,Gk.replace("PREFIX",Z)),D=ic($,d,$.FRAGMENT_SHADER,Ci.replace("PREFIX",Z));r?e.push("aPosition"):(d.aPosition=0,$.bindAttribLocation(d,0,"aPosition")),$.linkProgram(d),e.forEach(function(c){d[c]=/^u/.test(c)?$.getUniformLocation(d,c):$.getAttribLocation(d,c)}),$.useProgram(d),$.deleteShader(S),$.deleteShader(D)}return $},getBrightness:function(u){var w=u.s("brightness"),r=this.isSelected(u)?u.s("select.brightness"):c;return w==c?r:r==c?w:w*r},getWireframe:function(e){var R=e.s("wf.visible"),h=e.s("wf.width");return R===!0||h>0&&"selected"===R&&this.isSelected(e)?{color:e.s("wf.color"),width:h,"short":e.s("wf.short"),mat:e.s("wf.mat")}:void 0},_transformPointToViewSpace:function(l){var t=[l[0],l[1],l[2]];return Vl(t,this._viewMatrix),t},_transformDirectionToViewSpace:function(t,A){var I=[t[0],t[1],t[2]];Vl(I,this._viewMatrix);var c=A?[A[0],A[1],A[2]]:[0,0,0];Vl(c,this._viewMatrix);var $=c[0]-I[0],y=c[1]-I[1],f=c[2]-I[2],M=Math.sqrt($*$+y*y+f*f);return M?[$/M,y/M,f/M]:[$,y,f]},getWireframeGeometry:function(A){return A.s("wf.geometry")?{color:A.s("wf.color"),width:A.s("wf.width"),mat:A.s("wf.mat"),geometry:!0}:void 0},getBodyColor:function(W){return W.s("body.color")},getMat:function(M){return M.getMat?M.getMat():M.s("mat")},getFaceMat:function(y,r){return y.getFaceMat?y.getFaceMat(r):y.s(r+".mat")},getFaceBlend:function(s,r){return s.s(r+".blend")||s.s("all.blend")},getFaceColor:function(Z,U){return Z.s(U+".color")||Z.s("all.color")},getFaceImage:function(U,x){return U.s(x+".image")||U.s("all.image")},getFaceBlendImage:function(E,x){return E.s(x+".blend.image")||E.s("all.blend.image")},getFaceDiscardSelectable:function(l,G){var z=l.s(G+".discard.selectable");return z==c?l.s("all.discard.selectable"):z},getFaceUv:function(e,c){return e.s(c+".uv")||e.s("all.uv")},getFaceUvOffset:function(J,Q){return J.s(Q+".uv.offset")||J.s("all.uv.offset")},getFaceUvScale:function(Z,Y){return Z.s(Y+".uv.scale")||Z.s("all.uv.scale")},getFaceLight:function(Q,C){var Z=Q.s(C+".light");return Z==c?Q.s("all.light"):Z},getFaceVisible:function(L,y){var S=L.s(y+".visible");return S==c?L.s("all.visible"):S},getFaceOpacity:function(q,z){var s=q.s(z+".opacity");return s==c?q.s("all.opacity"):s},getFaceTransparent:function(f,P){var B=f.s(P+".transparent");return B==c?f.s("all.transparent"):B},getFaceReverseColor:function(a,e){return a.s(e+".reverse.color")||a.s("all.reverse.color")},getFaceReverseFlip:function($,P){var i=$.s(P+".reverse.flip");return i==c?$.s("all.reverse.flip"):i},getFaceReverseCull:function(k,V){var H=k.s(V+".reverse.cull");return H==c?k.s("all.reverse.cull"):H},getTextureMap:function(){return this._2O},deleteTexture:function(g){var A=this,Z=A._2O[g];Z&&(delete A._2O[g],A.getGL().deleteTexture(Z))},invalidateShape3dCachedImage:function($){var t=$._shape3dCachedImage;t&&(this.getGL().deleteTexture(t),delete $._shape3dCachedImage)},getTexture:function(Y,r){if(!Y)return c;var P=this,T=P.getGL(),m=P._2O[Y];if(!m){var w=id(Y);if(w)if(w.tagName){if(w.dynamic)return Ge(T,w,P._1O);m=P._2O[Y]=Ge(T,w)}else{var k=r.s("shape3d.image.cache");if(k&&r._shape3dCachedImage&&(m=r._shape3dCachedImage),!m){var W,V,f=r.s("shape3d.fixSizeOnScreen");if(f?(W=f[0],V=f[1]):(W=lc(w,r),V=sf(w,r)),W>=1&&V>=1){W*=devicePixelRatio,V*=devicePixelRatio;var q=Bq(W,V);co(q,w,0,0,W,V,r,P),q.restore(),k&&Fn(w,r)?(m=r._shape3dCachedImage=Ge(T,kr,null,T.NEAREST),kr=null):m=Ge(T,kr,P._1O,T.NEAREST)}}}}return m},redraw:function(){this.iv()},validateImpl:function(){var Z=this;if(Z._lightChanged){Z._lightChanged=!1;var y=[],U=[],c=[];Z.dm().each(function(s){if(Lh(s)){var B=s.s("light.type");B===Wd?y.push(s):B===bm?U.push(s):B===Tg&&c.push(s)}}),(y.length!==Z._59O.length||U.length!==Z._spots.length||c.length!==Z._dirs.length)&&Ep(Z),Z._59O=y,Z._spots=U,Z._dirs=c}Z._42(),Z._1o.iv()},getRenderInfo:function(){var z=this.getGL();return z?z._renderInfo:void 0},showDebugTip:function(){var $=this,Q=$._debugDiv;if(!Q){Q=$._debugDiv=m.createElement("div"),Q.style.position="absolute",Q.style.overflow="hidden",Q.style.backgroundColor="white",Q.style.color="black";var K=$.getView();$._79O?K.insertBefore(Q,$._79O):K.appendChild(Q),$._debugTipTimerId=setInterval(function(){var Z=$.getRenderInfo();if(Z){var t="Draw Calls: "+Z.calls+"<br/>"+"Vertices: "+Z.vertices+"<br/>"+"Faces: "+Z.faces+"<br/>"+"Lines: "+Z.lines;Q.innerHTML=t}},10)}},hideDebugTip:function(){var n=this,v=n._debugDiv;v&&(delete n._debugDiv,cancelAnimationFrame(n._debugTipTimerId),delete n._debugTipTimerId,n.getView().removeChild(v))},_42:function(J,o){var s=this;if(!s._35O&&(!Kc||_o(Kc))){var C,f;J&&(J instanceof rj?f=J:C=J);var F=s._canvas,A=s.getWidth(),V=s.getHeight(),j=s.getGL(),r=s._prg;if(j){if(o?J||ge(F,A,V,o):(o=s._devicePixelRatio||tn,J||A===F.clientWidth&&V===F.clientHeight||ge(F,A,V,o)),j.viewport(0,0,A*o,V*o),j._renderInfo={calls:0,vertices:0,faces:0,lines:0},s._81O=c,j.clear(j.COLOR_BUFFER_BIT|j.DEPTH_BUFFER_BIT),Jp(j,r.uBrightness,1),Jp(j,r.uOpacity,1),Jp(j,r.uPartOpacity,1),j._picking=!!J,Jp(j,r.uPick,!!J),Jp(j,r.uTexture,!1),Jp(j,r.uBlendTexture,!1),Jp(j,r.uFix,!1),Jp(j,r.uBatchColor,!1),Jp(j,r.uBatchBlend,!1),Jp(j,r.uBatchBrightness,!1),Jp(j,r.uPMatrix,s._projectMatrix=ub(s)),Jp(j,r.uViewMatrix,dc(s,s._7O)),s._viewMatrix=tb(s._7O),J||(Rp(s,j,r),s._fogDisabled||(Jp(j,r.uFogColor,s._fogColor),Jp(j,r.uFogNear,s._fogNear),Jp(j,r.uFogFar,s._fogFar))),kq(j,r.aPosition),kq(j,r.aNormal),Bd(j,r.aUv),Bd(j,r.aBatchColor),Bd(j,r.aBatchBlend),Bd(j,r.aBatchBrightness),Bd(j,r.aLineDistance),f){var m=j.getParameter(j.COLOR_CLEAR_VALUE);
j.clearColor(0,0,0,0),j.disable(j.BLEND),Bd(j,r.aNormal),tr(j,s._cube.vs,c,r.aPosition),xr(j,s._cube.is),kd(f,s,rp,0),kd(f,s,rb,6),kd(f,s,il,12),kd(f,s,Ig,18),kd(f,s,dq,24),kd(f,s,Cb,30),kq(j,r.aNormal),eq(j,m)}else if(C){C.value=2;var m=j.getParameter(j.COLOR_CLEAR_VALUE);j.clearColor(0,0,0,0),j.disable(j.BLEND),s._95I(j,r,C),Qp(s,C),cl(s,s._polylineModelMap,C),cl(s,s._wireframeModelMap,C),s._95I(j,r,C,!0),Qp(s,C,!0),cl(s,s._polylineModelMap,C,!0),cl(s,s._wireframeModelMap,C,!0),j.clear(j.DEPTH_BUFFER_BIT),s._swapLineMap(),s._95I(j,r,C,!1,!0),cl(s,s._polylineModelMap,C),cl(s,s._wireframeModelMap,C),s._swapLineMap(),j.disable(j.DEPTH_TEST),s._30O._42(j,r,C),j.enable(j.DEPTH_TEST),eq(j,m)}else j.disable(j.BLEND),s.drawSky(j,r),s._31O._42(j,r),s._95I(j,r),Qp(s),cl(s,s._polylineModelMap),cl(s,s._wireframeModelMap),j.enable(j.BLEND),j.depthMask(!1),s._95I(j,r,c,!0),Qp(s,c,!0),cl(s,s._polylineModelMap,c,!0),cl(s,s._wireframeModelMap,c,!0),j.depthMask(!0),j.clear(j.DEPTH_BUFFER_BIT),s._swapLineMap(),s._95I(j,r,c,!1,!0),cl(s,s._polylineModelMap),cl(s,s._wireframeModelMap),s._swapLineMap(),j.disable(j.DEPTH_TEST),j.disable(j.BLEND),s._32O._42(j,r),s._30O._42(j,r),j.enable(j.DEPTH_TEST);tr(j,c),xr(j,c),s._33Q=!1}}},_swapLineMap:function(){var N=this;s=N._polylineModelMap,N._polylineModelMap=N._polylineModelMapSwap,N._polylineModelMapSwap=s,s=N._wireframeModelMap,N._wireframeModelMap=N._wireframeModelMapSwap,N._wireframeModelMapSwap=s,s=N._polylineIndexMap,N._polylineIndexMap=N._polylineIndexMapSwap,N._polylineIndexMapSwap=s,s=N._wireframeIndexMap,N._wireframeIndexMap=N._wireframeIndexMapSwap,N._wireframeIndexMapSwap=s},_updateSkyBoxPosition:function(v){if(this._skyBox&&v&&"eye"===v.property){var j=v.newValue;this._skyBox.p3(j[0],j[1],j[2]),this.invalidateData(this._skyBox)}},setSkyBox:function(S){this._skyBox=S,this.ump(this._updateSkyBoxPosition,this),this.invalidateAll(),S&&(this.mp(this._updateSkyBoxPosition,this),this._updateSkyBoxPosition())},drawSky:function(f,Q,U){var k=this,I=k._skyBox;if(I){var z=k._headlightIntensity,w=yo(k._headlightColor),Q=k._prg;1!==z&&(w=[w[0]*z,w[1]*z,w[2]*z]),Jp(f,Q.uHeadlightColor,[w[0],w[1],w[2],1]);var Y=k.getData3dUI(I);Y&&Y._42(f,Q,U,function(){return!0}),f.clear(f.DEPTH_BUFFER_BIT),Jp(f,Q.uHeadlightColor,[w[0],w[1],w[2],k._headlightDisabled?1:0])}},_95I:function(y,F,q,t,G){function Q(K){if(!!K.s("shape3d.alwaysOnTop")==!!G&&Z.isVisible(K)&&(!N||R)){if(!q&&Z.isTransparentMask(K))return;var j=Z.getData3dUI(K);j&&j._42(y,F,q,Y)}}var Z=this,Y=function(X){return t?X:!X};Z.sky&&y.clear(y.DEPTH_BUFFER_BIT),Z.dm().each(Q)},getLogicalPoint:function(U){return _k(U,this._canvas)},getHitFaceInfo:function(L){L.target&&(L=this.lp(L));var h=this.getDataInfoAt(L);if(h){var X=this._1o.face(h.data,hk(L.x,L.y));if(X)return{data:h.data,face:X}}return c},unproject:function(d,L){var Z=this,g=Z.getWidth(),n=Z.getHeight(),S=d.target?Z.lp(d):d,u=S.x-g/2,C=S.y-n/2,t=2*(u/g),f=2*(-1*C/n);L=L||0;var q=Wg(),V=ub(Z),h=dc(Z);mg(q,V,h),Dh(q);var Q=yi([t,f,L,1],q);return[Q[0]/Q[3],Q[1]/Q[3],Q[2]/Q[3]]},getDataAt:function(j){var E=this.getDataInfoAt(j);return E?E.data:c},getDataInfoAt:function(H,B){return H.target&&(H=this.lp(H)),this._1o.get(hk(H.x,H.y,B),!0)},getDatasInRect:function(r){return this._1o.get(r)},setEditable:function(q){var V=this,U=V._editable;V._editable=q,this.fp(qi,U,q)},isEditable:function(p){var A=this;return A._editable?To(p)?p.s("3d.editable")?A._editableFunc?A._editableFunc(p):!0:!1:!1:!1},isSelectable:function(E){return E.s("3d.selectable")&&this.sm().isSelectable(E)},isMovable:function(w){var V=this;return ck(w)&&w.getStyle(Ar)!==yc?!1:w.s("3d.movable")?V._movableFunc?V._movableFunc(w):!0:!1},isSizeEditable:function(P){return To(P)?this._sizeEditableFunc?this._sizeEditableFunc(P):!0:!1},isRotationEditable:function(K){return To(K)&&K.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(K):!0:!1},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(P){this.setZoom(ug,P)},zoomOut:function(l){this.setZoom(1/ug,l)},setZoom:function(P,m){if(1!==P){var I=this;if(I._ortho)return I.setOrthoZoom(P,m),void 0;I._14o&&I._14o.stop(!0);var g=1/P,q=I._eye,j=I._center,o=j[0]+(q[0]-j[0])*g-q[0],X=j[1]+(q[1]-j[1])*g-q[1],d=j[2]+(q[2]-j[2])*g-q[2];if(!(ig(q,j)<I._moveStep&&1>g)){if(m=al(m)){var U=Wk(q);return m.action=function(V){I.fi({kind:I._zooming?"betweenZoom":"beginZoom"}),I._zooming=1,q[0]=U[0]+o*V,q[1]=U[1]+X*V,q[2]=U[2]+d*V,I.fp(Ap,c,q)},m._37o=function(){delete I._14o,delete I._zooming,I.fi({kind:"endZoom"}),I.onZoomEnded()},I._14o=Vh(m)}q[0]+=o,q[1]+=X,q[2]+=d,I.fp(Ap,c,q)}}},setOrthoZoom:function(L,H){if(1!==L){var r=this;r._14o&&r._14o.stop(!0);var g=r._orthoWidth,Z=g/L-g;if(!(g<r._moveStep&&L>1))return(H=al(H))?(H.action=function(M){r.fi({kind:r._zooming?"betweenZoom":"beginZoom"}),r._zooming=1,r.setOrthoWidth(g+Z*M)},H._37o=function(){delete r._14o,delete r._zooming,r.fi({kind:"endZoom"}),r.onZoomEnded()},r._14o=Vh(H)):(r.setOrthoWidth(g/L),void 0)}},getPositionInfo:function(j){var W=this,y=W._eye,k=W._center,q=W.getAspect(),N=j?Sd(jo(k,y,!0),jo(j,y)):ig(y,k);if(W._ortho){var B=W._orthoWidth;return{length:N,height:B/q,width:B}}var o=2*L(W._fovy/2)*N;return{length:N,height:o,width:o*q}},getCenterInfo:function(){var i=this;return i._81O||(i._81O=i.getPositionInfo()),Wk(i._81O)},rotate:function(U,i,D,E){var A=this;if(U||i){E==c&&(E=A._firstPersonMode),A._88O&&A._88O.stop(!0);var j=A._center,Z=A._eye,h=A.getCenterInfo().length,y=E?j:Z,d=E?Z:j,e=jo(y,d),s=w(e[0],e[2]),k=w(l(e[0]*e[0]+e[2]*e[2]),e[1]),f=E?Gm:Ap;return E&&(i=-i),(D=al(D))?(D.action=function(n){A.fi({kind:A._rotating?"betweenRotate":"beginRotate"}),A._rotating=1;var C=s+U*n,z=k+i*n;z=vh(z),e[0]=h*o(z)*o(C),e[1]=h*K(z),e[2]=h*o(z)*K(C),y[0]=d[0]+e[0],y[1]=d[1]+e[1],y[2]=d[2]+e[2],A.fp(f,c,y)},D._37o=function(){delete A._88O,delete A._rotating,A.fi({kind:"endRotate"}),A.onRotateEnded()},A._88O=Vh(D)):(s+=U,k+=i,k=vh(k),e[0]=h*o(k)*o(s),e[1]=h*K(k),e[2]=h*o(k)*K(s),y[0]=d[0]+e[0],y[1]=d[1]+e[1],y[2]=d[2]+e[2],A.fp(f,c,y),void 0)}},pan:function(V,h,t,y){if(V||h){var C=this;y==c&&(y=C._firstPersonMode),C._89O&&C._89O.stop(!0);var i=dc(C),T=[i[0]*V,i[4]*V,i[8]*V],Z=[i[1]*h,i[5]*h,i[9]*h],Q=T[0]+Z[0],s=T[1]+Z[1],w=T[2]+Z[2],g=C._center,b=C._eye;if(y){var _=tg(C.getBoundaries(),b[0],b[2],b[0]+Q,b[2]+w,l(Q*Q+w*w));Q=_[0],w=_[1]}if(t=al(t)){var q=Wk(b),x=Wk(g);return t.action=function(t){C.fi({kind:C._panning?"betweenPan":"beginPan"}),C._panning=1,g[0]=x[0]+Q*t,g[1]=x[1]+s*t,g[2]=x[2]+w*t,b[0]=q[0]+Q*t,b[1]=q[1]+s*t,b[2]=q[2]+w*t,C.fp(Ap,c,b),C.fp(Gm,c,g)},t._37o=function(){delete C._89O,delete C._panning,C.fi({kind:"endPan"}),C.onPanEnded()},C._89O=Vh(t)}g[0]+=Q,g[1]+=s,g[2]+=w,b[0]+=Q,b[1]+=s,b[2]+=w,C.fp(Ap,c,b),C.fp(Gm,c,g)}},walk:function(V,P,Y){if(V){var N=this;Y==c&&(Y=N._firstPersonMode),N._90O&&N._90O.stop(!0);var S=N._center,F=N._eye,Z=jo(S,F,!0);if(Y){var U=tg(N.getBoundaries(),F[0],F[2],F[0]+Z[0]*V,F[2]+Z[2]*V,$(V));if(V=ig(U),!V)return;Z=[U[0]/V,0,U[1]/V]}if(P=al(P)){var n=Wk(F),s=Wk(S);return P.action=function(u){N.fi({kind:N._walking?"betweenWalk":"beginWalk"}),N._walking=1;var H=V*u;F[0]=n[0]+Z[0]*H,F[1]=n[1]+Z[1]*H,F[2]=n[2]+Z[2]*H,S[0]=s[0]+Z[0]*H,S[1]=s[1]+Z[1]*H,S[2]=s[2]+Z[2]*H,N.fp(Ap,c,F),N.fp(Gm,c,S)},P._37o=function(){delete N._90O,delete N._walking,N.fi({kind:"endWalk"}),N.onWalkEnded()},N._90O=Vh(P)}F[0]+=Z[0]*V,F[1]+=Z[1]*V,F[2]+=Z[2]*V,S[0]+=Z[0]*V,S[1]+=Z[1]*V,S[2]+=Z[2]*V,N.fp(Ap,c,F),N.fp(Gm,c,S)}},handleScroll:function(p,O){p.preventDefault();var E=this,x=E._moveStep;E.isFirstPersonMode()?E.isPannable()&&E.pan(0,O>0?x:-x):E.isZoomable()&&E.setZoom(0>O?1/tf:tf)},handlePinch:function(p,q){this.isZoomable()&&this.setZoom(q>p?1/Uh:Uh)},reset:function(){this.setCenter(i.graph3dViewCenter),this.setEye(i.graph3dViewEye),this.setUp(i.graph3dViewUp)},moveSelection:function(S,T,C){var d,i=this,E=i.dm();E&&(d=E.getHistoryManager()),d&&d.beginInteraction(),aj(this.sm().toSelection(this.isMovable,this),S,T,C),d&&d.endInteraction()},getMoveMode:function(j,G){var c=G.s("3d.move.mode");if(c)return c;var Z="88",S="89",J="90";return Of(j)||kf[Z]&&kf[S]&&kf[J]?"xyz":kf[Z]&&kf[S]?"xy":kf[Z]&&kf[J]?"xz":kf[S]&&kf[J]?"yz":kf[Z]?"x":kf[S]?"y":kf[J]?"z":"xz"},handleTick:function(){var u=this,m=!1,R=u._moveStep,h=R,d=!1,$=!0,H=u._rotateStep*($?-1:1);if(u.isWalkable()||(h=0),u.isPannable()||(R=0),u.isRotatable()||(H=0),u._32Q){var g=(Wr()-u._32Q)/50;h*=g,R*=g,H*=g}u._31Q&&(jn(u._31Q),delete u._31Q,delete u._32Q),fs()&&(m=!0,u.pan(-R,0,d,$)),jq()&&(m=!0,u.pan(R,0,d,$)),uj()&&(m=!0,Of()?u.pan(0,R,d,$):u.walk(h,d,$)),Vj()&&(m=!0,Of()?u.pan(0,-R,d,$):u.walk(-h,d,$)),gc()&&(m=!0,u.rotate(-H,0,d,$)),Ag()&&(m=!0,u.rotate(H,0,d,$)),np()&&(m=!0,u.rotate(0,-H/2,d,$)),Ic()&&(m=!0,u.rotate(0,H/2,d,$)),m&&(u._32Q=Wr(),u._31Q=Cf(u.handleTick,u))},handleKeyDown:function(j){var l=this;!Og(j)&&vl[j.keyCode]?l.handleTick():Fj(j)?l.selectAll():Mf(j)?l.handleDelete(j):Qj(j)&&this.isResettable()&&l.reset()},checkDoubleClickOnNote:function(w,J,c){var H=this;if(c===hr){if(J.s("note.toggleable"))return J.s(Dk,!J.s(Dk)),H.fi({kind:"toggleNote",event:w,data:J,part:c}),!0}else if(c===ip&&J.s("note2.toggleable"))return J.s(kb,!J.s(kb)),H.fi({kind:"toggleNote2",event:w,data:J,part:c}),!0;return!1},checkDoubleClickOnRotation:function(O,v,K){return K===Tm?(v.setRotationX(0),!0):K===ni?(v.setRotationY(0),!0):K===me?(v.setRotationZ(0),!0):!1},onRotateEnded:function(){},onWalkEnded:function(){},toViewPosition:function(_){var Q=this,D=Q.getWidth()/2,x=Q.getHeight()/2,N=Q._18Q;return N&&N._wh===D/x||(N=ub(Q),Q._18Q=mg(N,N,dc(Q)),Q._18Q._wh!==D/x),_=yi([_[0],_[1],_[2],1],N),{x:D+D*_[0]/_[3],y:x-x*_[1]/_[3]}},getHitPosition:function(b,y,m){var C=this,h=C.getWidth(),P=C.getHeight(),r=b.target?C.lp(b):b,L=r.x-h/2,G=r.y-P/2,d=C.getCenterInfo(),I=dc(C);y=y?y:[0,0,0],m=m?m:[0,1,0],L=L/h*d.width,G=-1*G/P*d.height;var k=[I[0]*L,I[4]*L,I[8]*L],F=[I[1]*G,I[5]*G,I[9]*G],q=[k[0]+F[0],k[1]+F[1],k[2]+F[2]],f=C.getCenter(),U=Gp(C,y,m,[q[0]+f[0],q[1]+f[1],q[2]+f[2]]);return U?U:[0,0,0]},getLineLength:function(S){this.validate();var I=this.getData3dUI(S);if(I&&I.getCache){var g=I.getCache();if(g)return g[g.length-1].length}return 0},getLineOffset:function(b,o){var z=this.getData3dUI(b);if(z&&z.getCache){var i=z.getCache();if(i)return oc(i,o)}return c},isLabelVisible:function(){return!0},isNoteVisible:function(){return!0}});var pq=Tp.Interactor=function(u){this.gv=u};bi("Interactor",G,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var Ef=Tp.DefaultInteractor=function(C){Ke(Ef,this,[C])};bi("DefaultInteractor",pq,{handle_contextmenu:function(W){lg(W)},handle_mousewheel:function(M){this.gv.handleScroll(M,M.wheelDelta/40)},handle_DOMMouseScroll:function($){2===$.axis&&this.gv.handleScroll($,-$.detail)},handle_keydown:function(I){this.gv.handleKeyDown(I)},handle_mousedown:function(K){this.handle_touchstart(K)},handle_touchstart:function(T){lg(T);var O=this,w=O.gv,U=Zi(T),D=w.getDataInfoAt(T),R=D?D.data:c,l=D?D.part:c,u=w.sm(),L=sn(T),v=Wm(T);w.setFocus(T)&&(O._62O=c,O._57I=c,R?Og(T)?u.co(R)?u.rs(R):u.as(R):u.co(R)||u.ss(R):U&&(Og(T)?w.isRectSelectable()&&(O._62O=Ij):O._57I=_c(T)),O._31Q&&(jn(O._31Q),delete O._31Q,delete O._32Q),O._62O||(w.isFirstPersonMode()&&(Of(T)||v>2?O._62O="pan":w.isMouseRoamable()||cn?(O._62O="roaming",O.foward=L&&Zi(T),O._32Q=Wr(),O._31Q=Cf(O.tick,O)):U||(O._62O="roaming")),O._62O||(U&&L&&ib[l]?(O._62O=l,O.p3=R.p3()):U&&L&&To(R)&&w.isSelected(R)&&w.isMovable(R)?(O._62O="move",O.p3=R.p3(),O.movedata=R):cn&&(v>2?O._62O="pan":2===v&&(O.dist=Qo(T),O._62O="pinch")))),O.point=w.lp(T),Ql(O,T),pn(T)?w.handleDoubleClick(T,R,l):w.handleClick(T,R,l))},tick:function(){var D=this,v=D.gv,J=v._moveStep;D.point&&v.isWalkable()&&(D._32Q&&(J*=(Wr()-D._32Q)/50),v.walk(D.foward?J:-J),D._32Q=Wr(),D._31Q=Cf(D.tick,D))},handle_mouseup:function(V){this.handle_touchend(V)},handle_touchend:function(D){var v=this._57I;v&&(ig(v,_c(D))<=1&&this.gv.sm().cs(),this._57I=c)},handleWindowMouseMove:function(D){this.handleWindowTouchMove(D)},handleWindowTouchMove:function(F){var B,L,g=this,s=g.gv,k=g._62O,I=g.point,j=s.dm(),c=j.getHistoryManager(),G=s.lp(F),t=G.x-I.x,R=G.y-I.y,S=-Y*t/s.getWidth(),x=-Y*R/s.getHeight();if("roaming"===k)g.rotate(F,S/2,x/2);else if(k===Tm||k===ni||k===me)c&&!s._86O&&c.beginInteraction(),s.fi({kind:s._86O?"betweenEditRotation":"beginEditRotation",event:F}),s._86O=1,s.sm().each(function(c){if(To(c)&&s.isRotationEditable(c)){var l=$(S)>$(x)?S:x;k===Tm?c.setRotationX(c.getRotationX()+l):k===ni?c.setRotationY(c.getRotationY()+l):k===me&&c.setRotationZ(c.getRotationZ()+l)}});else if("move"===k||ib[k]){k===Gi||k===ri||k===Wj?(c&&!s._87O&&c.beginInteraction(),s.fi({kind:s._87O?"betweenEditSize":"beginEditSize",event:F}),s._87O=1):(c&&!s._moving&&c.beginInteraction(),s.fi({kind:s._moving?"betweenMove":"beginMove",event:F}),s._moving=1);var D,A=g.p3,Z=s.getPositionInfo(A),C=dc(s);D=k===Ve?"x":k===Vn?"y":k===Kg?"z":k===Gi?"sx":k===ri?"sy":k===Wj?"sz":s.getMoveMode(F,g.movedata),t=t/s.getWidth()*Z.width,R=-1*R/s.getHeight()*Z.height;var y,n,z=[C[0]*t,C[4]*t,C[8]*t],U=[C[1]*R,C[5]*R,C[9]*R],d=z[0]+U[0],X=z[1]+U[1],N=z[2]+U[2],o=[A[0]+d,A[1]+X,A[2]+N],e=jo(s.getEye(),o,!0);if("xyz"===D?(y=o,s.moveSelection(d,X,N)):"xz"===D?(y=Gp(s,A,[0,1,0],o),y&&s.moveSelection(y[0]-A[0],0,y[2]-A[2])):"xy"===D?(y=Gp(s,A,[0,0,1],o),y&&s.moveSelection(y[0]-A[0],y[1]-A[1],0)):"yz"===D?(y=Gp(s,A,[1,0,0],o),y&&s.moveSelection(0,y[1]-A[1],y[2]-A[2])):"x"===D||"sx"===D?(e[0]=0,y=Gp(s,A,e,o),y&&(n=y[0]-A[0],"x"===D?s.moveSelection(n,0,0):s.sm().each(function(J){To(J)&&s.isSizeEditable(J)&&(B=W(Dd,J.getWidth()+n),L=B/J.getWidth(),J.setWidth(B),Of(F)&&(J.setHeight(J.getHeight()*L),J.setTall(J.getTall()*L)))}))):"y"===D||"sy"===D?(e[1]=0,y=Gp(s,A,e,o),y&&(n=y[1]-A[1],"y"===D?s.moveSelection(0,n,0):s.sm().each(function(D){To(D)&&s.isSizeEditable(D)&&(B=W(Dd,D.getTall()+n),L=B/D.getTall(),D.setTall(B),Of(F)&&(D.setHeight(D.getHeight()*L),D.setWidth(D.getWidth()*L)))}))):("z"===D||"sz"===D)&&(e[2]=0,y=Gp(s,A,e,o),y&&(n=y[2]-A[2],"z"===D?s.moveSelection(0,0,n):s.sm().each(function(I){To(I)&&s.isSizeEditable(I)&&(B=W(Dd,I.getHeight()+n),L=B/I.getHeight(),I.setHeight(B),Of(F)&&(I.setTall(I.getTall()*L),I.setWidth(I.getWidth()*L)))}))),!y)return;g.p3=y}else if(k===Ij){var J=g.div;J||(J=g.div=us(),Rf(g.getView(),J),J.op=I,J.style.background=s.getRectSelectBackground()),s.fi({kind:s._rectSelecting?"betweenRectSelect":"beginRectSelect",event:F}),s._rectSelecting=1,J.rect=Ad(J.op,G),gg(J,J.rect)}else if("pinch"===k&&2===Wm(F)){s.fi({kind:s._pinching?"betweenPinch":"beginPinch",event:F}),s._pinching=1;var n=Qo(F);s.handlePinch(n,g.dist),g.dist=n}else"pan"===k||Of(F)?g.pan(F,t,R):s.isFirstPersonMode()||(Zi(F)?g.rotate(F,S,x):(g.pan(F,t,0),s.isWalkable()&&(s.fi({kind:s._walking?"betweenWalk":"beginWalk",event:F}),s._walking=1,s.walk(R/s.getHeight()*s.getCenterInfo().height))));g.point=G},pan:function(C,c,R){var P=this.gv;if(P.isPannable()){var O=P.getCenterInfo(),k=c/P.getWidth()*O.width,y=-1*R/P.getHeight()*O.height;P.fi({kind:P._panning?"betweenPan":"beginPan",event:C}),P._panning=1,P.pan(-k,-y)}},rotate:function(b,o,l){var w=this.gv;w.isRotatable()&&(w.fi({kind:w._rotating?"betweenRotate":"beginRotate",event:b}),w._rotating=1,w.rotate(o,l))},handleWindowMouseUp:function(o){this.handleWindowTouchEnd(o)},handleWindowTouchEnd:function(Q){var $=this,i=$.gv,C=i.dm(),u=C.getHistoryManager(),P=$.div;if(P){var K=i.getDatasInRect(P.rect);if(!K.isEmpty()){var L=i.sm(),z=L.toSelection();K.each(function(d){L.co(d)?z.remove(d):z.add(d)}),L.ss(z)}Ye(P)}i._moving&&(delete i._moving,i.fi({kind:"endMove",event:Q}),i.onMoveEnded(),u&&u.endInteraction()),i._panning&&(delete i._panning,i.fi({kind:"endPan",event:Q}),i.onPanEnded()),i._rotating&&(delete i._rotating,i.fi({kind:"endRotate",event:Q}),i.onRotateEnded()),i._86O&&(delete i._86O,i.fi({kind:"endEditRotation",event:Q}),u&&u.endInteraction()),i._87O&&(delete i._87O,i.fi({kind:"endEditSize",event:Q}),u&&u.endInteraction()),i._pinching&&(delete i._pinching,i.fi({kind:"endPinch",event:Q}),i.onPinchEnded()),i._rectSelecting&&(delete i._rectSelecting,i.fi({kind:"endRectSelect",event:Q}),i.onRectSelectEnded()),i._walking&&(delete i._walking,i.fi({kind:"endWalk",event:Q}),i.onWalkEnded()),$.dist=$.point=$._62O=$.p3=$.movedata=$.div=$._57I=$._32Q=$._31Q=$.foward=c}});var Pi=function(M){this.gv=M};hd(Pi,G,{_iv:!0,iv:function(){this._iv=!0},face:function(u,y){var O=this,d=O.gv.getGL();if(!d||!To(u))return c;var m=y.x,T=y.width,W=y.height,H=O.height-y.y-W,F=e(T/2),L=new Uint8Array(4*T*W),g=0;for(O.iv(),O.validate(u),lm(d,O.frame),d.readPixels(m,H,T,W,d.RGBA,d.UNSIGNED_BYTE,L),lm(d,c),O.iv();F>=g;g++)for(var M=F-g,B=F+g,t=M;B>=t;t++)for(var l=M;B>=l;l++)if(t===M||t===B||l===M||l===B){var f=Qg.m[L[4*(t*T+l)]];if(f)return f}},get:function(u,q){this.validate();var W=this,r=W.gv.getGL();if(!r)return c;var o,E,T=u.x,P=u.width,m=u.height,v=W.height-u.y-m,b=e(P/2),O=new Uint8Array(4*P*m),N=0,M=O.length,H=q?c:new Vr,s=q?c:{};if(lm(r,W.frame),r.readPixels(T,v,P,m,r.RGBA,r.UNSIGNED_BYTE,O),lm(r,c),q){for(;b>=N;N++)for(var d=b-N,X=b+N,x=d;X>=x;x++)for(var V=d;X>=V;V++)if((x===d||x===X||V===d||V===X)&&(o=W.info(O,4*(x*P+V))))return o}else for(;M>N;N+=4)o=W.info(O,N),o&&(E=o.data,s[E._id]||(H.add(E),s[E._id]=E));return H},info:function(n,b){return this.colorMap[(n[b]<<24)+(n[b+1]<<16)+(n[b+2]<<8)+n[b+3]]},validate:function(O){var M=this,L=M.gv,T=L.getGL();if(T){var x=L.getWidth(),i=L.getHeight(),K=T.RGBA,E=T.TEXTURE_2D,A=T.RENDERBUFFER,$=T.FRAMEBUFFER;M.texture||(M.texture=Ge(T),M.render=T.createRenderbuffer(),M.frame=T.createFramebuffer()),(M.width!==x||M.height!==i)&&(Tl(T,M.texture),T.texImage2D(E,0,K,x,i,0,K,T.UNSIGNED_BYTE,c),eb(T,T.TEXTURE_MIN_FILTER,T.LINEAR),T.bindRenderbuffer(A,M.render),T.renderbufferStorage(A,T.DEPTH_COMPONENT16,x,i),lm(T,M.frame),T.framebufferTexture2D($,T.COLOR_ATTACHMENT0,E,M.texture,0),T.framebufferRenderbuffer($,T.DEPTH_ATTACHMENT,A,M.render),Tl(T,c),T.bindRenderbuffer(A,c),lm(T,c),M.width=x,M.height=i),M._iv&&(M._iv=!1,lm(T,M.frame),L._42(O||(M.colorMap={}),1),lm(T,c))}}});var Oj=function(L){this.gv=L};hd(Oj,G,{gap:0,size:0,_42:function(J,i){var G=this,O=G.gv,u=O._gridGap,Z=O._gridSize;if(O._gridVisible){if(G.gap!==u||G.size!==Z){for(var I=[],Y=O._gridSize/2,$=u*Y,T=0;2*Y+1>T;T++){var x=6*T,k=6*(2*Y+1)+x;I[x]=-$,I[x+1]=0,I[x+2]=-$+T*u,I[x+3]=$,I[x+4]=0,I[x+5]=-$+T*u,I[k]=-$+T*u,I[k+1]=0,I[k+2]=-$,I[k+3]=-$+T*u,I[k+4]=0,I[k+5]=$}G.vs=new jb(I),G.gap=u,G.size=Z}li(O),He(J,i),Yc(J),gh(J,i,1,O._gridColor,O._buffer.vs,G.vs),Ud(J,0,G.vs.length/3,J.LINES),kn(J),Ce(J,i)}else G.vs=G.gap=G.size=c}});var Gf=function(Z){this.gv=Z};hd(Gf,G,{_42:function(w,$){var x=this.gv,V=x._buffer.vs,A=x._axisXColor,m=x._axisYColor,R=x._axisZColor,J=x._originAxisVisible,q=x._centerAxisVisible;if(J||q){var P=r?w.TRIANGLES:w.TRIANGLE_FAN,h=w.LINES;if(li(x),He(w,$),Yc(w),J){var b=x.getCenterInfo(),O=y(b.width,b.height)/5,o=.8*O,s=.05*O;gh(w,$,1.5,A,V,new jb([0,0,0,O,0,0,o,s,0,o,0,s,o,-s,0,o,0,-s,o,s,0,0,0,0,0,O,0,s,o,0,0,o,s,-s,o,0,0,o,-s,s,o,0,0,0,0,0,0,O,s,0,o,0,s,o,-s,0,o,0,-s,o,s,0,o])),Ud(w,0,2,h),Ud(w,1,6,P),gh(w,$,c,m),Ud(w,7,2,h),Ud(w,8,6,P),gh(w,$,c,R),Ud(w,14,2,h),Ud(w,15,6,P)}if(q){var G=x._center,e=G[0],u=G[1],n=G[2],b=x.getPositionInfo(G);O=y(b.width,b.height)/20,gh(w,$,1.5,A,V,new jb([e,u,n,e+O,u,n,e,u,n,e,u+O,n,e,u,n,e,u,n+O])),Ud(w,0,2,h),gh(w,$,c,m),Ud(w,2,2,h),gh(w,$,c,R),Ud(w,4,2,h)}kn(w),Ce(w,$)}}});var Bp=function(b){this.gv=b},Ve="edit_tx",Vn="edit_ty",Kg="edit_tz",Tm="edit_rx",ni="edit_ry",me="edit_rz",Gi="edit_sx",ri="edit_sy",Wj="edit_sz",ib={};ib[Ve]=1,ib[Vn]=1,ib[Kg]=1,ib[Tm]=1,ib[ni]=1,ib[me]=1,ib[Gi]=1,ib[ri]=1,ib[Wj]=1,hd(Bp,G,{_42:function(W,j,r){var $=this,H=$.gv,s=H.sm().ld();if(H.isEditable(s)&&To(s)&&(!H.isFirstPersonMode()||!H.isMouseRoamable()&&!cn)){li(H);var p,m,o=H.isMovable(s),k=H.isRotationEditable(s),Y=H.isSizeEditable(s),Z=H._axisXColor,t=H._axisYColor,u=H._axisZColor,S=H._editSizeColor,E=H.getCenterInfo(),N=y(E.width,E.height)/10,Q=N/(r?5:10),c=.7*N,q=.4*c,v=s.p3(),K=v[0],P=v[1],A=v[2];p=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],o&&$._17O(W,j,s,r,Ve,Z,p,[K,P-Q,A,K+c,P-Q,A,K+c,P,A,K+c,P,A,K,P,A,K,P-Q,A,K,P-Q,A+Q,K+c,P-Q,A+Q,K+c,P-Q,A,K+c,P-Q,A,K,P-Q,A,K,P-Q,A+Q]),m=K+c,Y&&$._17O(W,j,s,r,Gi,S,p,[m,P-Q,A,m+q,P-Q,A,m+q,P,A,m+q,P,A,m,P,A,m,P-Q,A,m,P-Q,A+Q,m+q,P-Q,A+Q,m+q,P-Q,A,m+q,P-Q,A,m,P-Q,A,m,P-Q,A+Q]),m+=q,k&&$._17O(W,j,s,r,Tm,Z,p,[m,P-Q,A,m+q,P-Q,A,m+q,P,A,m+q,P,A,m,P,A,m,P-Q,A,m,P-Q,A+Q,m+q,P-Q,A+Q,m+q,P-Q,A,m+q,P-Q,A,m,P-Q,A,m,P-Q,A+Q]),p=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],o&&$._17O(W,j,s,r,Vn,t,p,[K,P,A,K,P+c,A,K-Q,P+c,A,K-Q,P+c,A,K-Q,P,A,K,P,A,K,P,A,K,P,A-Q,K,P+c,A-Q,K,P+c,A-Q,K,P+c,A,K,P,A]),m=P+c,Y&&$._17O(W,j,s,r,ri,S,p,[K,m,A,K,m+q,A,K-Q,m+q,A,K-Q,m+q,A,K-Q,m,A,K,m,A,K,m,A,K,m,A-Q,K,m+q,A-Q,K,m+q,A-Q,K,m+q,A,K,m,A]),m+=q,k&&$._17O(W,j,s,r,ni,t,p,[K,m,A,K,m+q,A,K-Q,m+q,A,K-Q,m+q,A,K-Q,m,A,K,m,A,K,m,A,K,m,A-Q,K,m+q,A-Q,K,m+q,A-Q,K,m+q,A,K,m,A]),p=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],o&&$._17O(W,j,s,r,Kg,u,p,[K,P,A,K,P,A+c,K,P-Q,A+c,K,P-Q,A+c,K,P-Q,A,K,P,A,K,P-Q,A,K-Q,P-Q,A,K-Q,P-Q,A+c,K-Q,P-Q,A+c,K,P-Q,A+c,K,P-Q,A]),m=A+c,Y&&$._17O(W,j,s,r,Wj,S,p,[K,P,m,K,P,m+q,K,P-Q,m+q,K,P-Q,m+q,K,P-Q,m,K,P,m,K,P-Q,m,K-Q,P-Q,m,K-Q,P-Q,m+q,K-Q,P-Q,m+q,K,P-Q,m+q,K,P-Q,m]),m+=q,k&&$._17O(W,j,s,r,me,u,p,[K,P,m,K,P,m+q,K,P-Q,m+q,K,P-Q,m+q,K,P-Q,m,K,P,m,K,P-Q,m,K-Q,P-Q,m,K-Q,P-Q,m+q,K-Q,P-Q,m+q,K,P-Q,m+q,K,P-Q,m])}},_17O:function(O,F,v,R,_,l,B,Q){var D=this.gv._buffer;zk(O,F,R,!0,v,_),ue(O,F,c,!0,c,!0,c,!1),Jp(O,F.uDiffuse,l),tr(O,D.vs,new jb(Q),F.aPosition),tr(O,D.ns,new jb(B),F.aNormal),Yc(O),Ud(O,0,12),kn(O),bn(O,F)}});var Pr=function(b,Y){this.gv=b,this.s=function(I,a,f){return a==c&&(a=f),a==c?Y.getStyle(I):Zp(a,Y,b)},this.data=Y};hd(Pr,G,{I3d:!0,ms_icons:1,_iv:!0,iv:function(){this._iv=!0},_42:function(I,y,R,s){var N=this,Y=N.data;if(!(Y instanceof Lk)){var q,Q,S,C,L,$,i,f=N.gv,A=Y._id,E=N.s("batch")&&!N.s("shape3d.alwaysOnTop"),b=f._34O,K=f._33O,a=f.isSelectable(Y),B=f.getBrightness(Y),l=B!=c&&1!==B;if(N.needValidate()){if(S=mo(b,K,Y,E),N.validate(S,E?Aq[E]||nc:c),S&&(C=b[A],L=C.size=S.vs.length/3-C.begin,i=S.rs))for(B=l?B:1,$=0;L>$;$++)i.push(B);if(To(Y)){var G=f.getWireframe(Y);G&&Rg(f,Y,G);var _=f.getWireframeGeometry(Y);_&&Rg(f,Y,_)}N.labelInfo=N.label2Info=N.noteInfo=N.note2Info=N._38o=c,N._24O(Pp,"getLabel"),N._24O(zo,"getLabel2"),N._26O(hr,"getNote"),N._26O(ip,"getNote2"),N._15O(),N._iv=!1}l&&Jp(I,y.uBrightness,B),Q=zk(I,y,R,a,Y,xm),Q&&(Vf(Q,b[A],K),Vf(Q,f._polylineIndexMap[A],f._polylineModelMap),Vf(Q,f._wireframeIndexMap[A],f._wireframeModelMap)),b[A]||N._80o(I,y,s),f.isLabelVisible(Y)&&((q=N.labelInfo)&&(zk(I,y,R,a,Y,Pp),N._28O(q,Pp,s)),(q=N.label2Info)&&(zk(I,y,R,a,Y,zo),N._28O(q,zo,s))),f.isNoteVisible(Y)&&((q=N.noteInfo)&&(zk(I,y,R,a,Y,hr),N._29O(q,hr,s)),(q=N.note2Info)&&(zk(I,y,R,a,Y,ip),N._29O(q,ip,s))),(q=N._38o)&&N._99O(I,y,q,R,a,s),l&&Jp(I,y.uBrightness,1)}},needValidate:function(){return this._iv},validate:function(){},_16O:function(){return Jf},_80o:function(){},dispose:function(){},getBodyColor:function(D){var T=this.data,W=this.gv.getBodyColor(T);return W?W:D?T.getStyle(D):c},_24O:function(i,S){var m=this,$=m.data,l=m.gv,P=m.s,T=l[S]($);if(T!=c){var o=P(i+".scale"),E=P(i+".max"),n=m[i+"Info"]={label:T,textureScale:P(i+".texture.scale"),color:l[S+"Color"]($),font:P(i+".font"),align:P(i+".align"),background:l[S+"Background"]($)},F=n.rect=Yi(n,T);E>0&&E<F.width&&(n.labelWidth=F.width,F.width=E),F.x=F.y=0,F.width*=o,F.height*=o,n.mat=m._16O(P(i+".autorotate"),P(i+".position"),F,P(i+".face"),P(i+".t3"),P(i+".r3"),P(i+".rotationMode"));var v=F.width/2,X=F.height/2;n.vs=new jb([-v,X,0,-v,-X,0,v,-X,0,v,X,0]),F.width/=o,F.height/=o}},_26O:function(Y,d){var U=this,l=U.data,f=U.gv,j=U.s,F=f[d](l);if(F!=c){var t=j(Y+".scale"),R=this[Y+"Info"]={note:F,textureScale:j(Y+".texture.scale"),expanded:j(Y+".expanded"),font:j(Y+".font"),color:j(Y+".color"),align:j(Y+".align"),borderWidth:j(Y+".border.width"),borderColor:j(Y+".border.color"),background:f[d+"Background"](l)};if(R.expanded){var B=j(Y+".max"),O=Yi(R,F);O.width+=6,O.height+=2,B>0&&B<O.width&&(R.labelWidth=O.width,O.width=B);var A={x:-O.width/2,y:-8-O.height,width:O.width,height:O.height+8}}else A={x:-6,y:-18,width:12,height:18};R.mat=U._16O(j(Y+".autorotate"),j(Y+".position"),c,j(Y+".face"),j(Y+".t3"),j(Y+".r3"),j(Y+".rotationMode")),R.rect=A,1!==t&&(A=Wk(A),A.x*=t,A.height*=t,A.y=-A.height,A.width*=t);var i=A.x,y=A.y,M=A.width,s=A.height;R.vs=new jb([i,-y,0,i,-y-s,0,i+M,-y-s,0,i+M,-y,0])}},_28O:function(k,c,l){if(l(this.s(c+".transparent"))){var _=k.rect,R=k.textureScale,s=_.width*R,Q=_.height*R;if(s>=1&&Q>=1){var p=Bq(s,Q);1!==R&&(p.translate(p,_.x,_.y),p.scale(R,R),p.translate(p,-_.x,-_.y)),_i(p,k),p.restore(),io(this,c,k.mat,k.vs,!0)}}},_29O:function(M,G,e){if(e(this.s(G+".transparent"))){var Y=M.rect,C=M.textureScale,y=Y.x,E=Y.y,a=Y.width*C,k=Y.height*C;if(a>=1&&k>=1){Y.x=Y.y=0;var h=Bq(a,k);1!==C&&h.scale(C,C),Sg(h,M),h.restore(),Y.x=y,Y.y=E,io(this,G,M.mat,M.vs,!1)}}},_99O:function(z,i,s,B,Q,N){if(s){var w=this,J=w.gv,y=w.data,H=J._buffer,A=J._1O,p=s.icons;for(var u in p){var G=p[u],j=s.rects[u];if(j&&N(Zp(G.transparent,y,J))){zk(z,i,B,Q,y,u);var b=Zp(G.shape3d,y,J),v=b?[b]:Zp(G.names,y,J),P=v?v.length:0,$=Zp(G.textureScale,y,J)||1,r=Zp(G.light,y,J);r==c&&(r=b?!0:!1),ue(z,i,Zp(G.blend,y,J),r,Zp(G.opacity,y,J),Zp(G.reverseFlip,y,J),Zp(G.reverseColor,y,J),Zp(G.reverseCull,y,J));for(var n=0;P>n;n++){var l=v[n],R=j[n];if(xd(w,R.mat),b)Nf(J,y,si(w,b),w);else{var x=id(l);if(x){var h=R.width*$,d=R.height*$;if(h>=1&&d>=1){var Y=Bq(h,d);Ob(Y,x,Zp(G.stretch,y,J),0,0,h,d,y,J),Y.restore(),Ge(z,kr,A),Yc(z,i,A,Zp(G.discardSelectable,y,J),H.uv,Lc),tr(z,H.vs,R.vs,i.aPosition),tr(z,H.ns,Zk,i.aNormal),xr(z,H.is,Ro),Ng(z,0,Ro.length),kn(z,i,A)}}}un(J)}bn(z,i)}}}}});var om=function(S,Z){Ke(om,this,[S,Z])};hd(om,Pr,{_16O:function(F,p,k,H,q,r,I,G,Y){var S=this.data,l=S.getFinalScale3d(),N=gb(p,l,k,H,G,Y);if(S.hasOwnProperty("_anchor")||S.hasOwnProperty("_anchorElevation")){var v=S.getAnchor3d();N[0]-=(v.x-.5)*l[0],N[1]-=(v.y-.5)*l[1],N[2]-=(v.z-.5)*l[2]}return Qf(Wg(),N,S.p3(),H,q,r,I,F,S.r3(),S.getRotationMode())},clear:function(){var L=this;L.faceMat=L.mat=L.shapeModel=L.left=L.right=L.front=L.back=L.top=L.bottom=L.csg=c},needValidate:function(){return this._iv||this.s("shape3d.autorotate")||this.s("shape3d.fixSizeOnScreen")},validate:function(O,p){var $=this,G=$.gv,C=$.data,J=si($);$._updateAutoRotation(),$._updateFixSize2d();var c=Ki(C,G.getMat(C),J?$.s("shape3d.scaleable"):!0),H=$._calcAnchorMat(C);if(H&&mg(c,c,H),$.clear(),O){var K=[];J?Xi(G,C,J,$,$.getBodyColor(),[c],O,K):(Hn(G,C,O,p,c,rp,K,rm),Hn(G,C,O,p,c,il,K,xj),Hn(G,C,O,p,c,dq,K,Kq),Hn(G,C,O,p,c,Cb,K,xl),Hn(G,C,O,p,c,rb,K,Sl),Hn(G,C,O,p,c,Ig,K,Xj)),K.length&&(rr(O.vs,K),rr(O.ns,bp(K)))}else $.mat=c,($.shapeModel=J)||($.vf(rp),$.vf(il),$.vf(rb),$.vf(Ig),$.vf(dq),$.vf(Cb))},_updateAutoRotation:function(){var c=this,e=c.s("shape3d.autorotate");if(e){var $,r=c.gv,U=c.data;$="string"==typeof e?[e.indexOf("x")<0?r._eye[0]:r._center[0],e.indexOf("y")<0?r._eye[1]:r._center[1],e.indexOf("z")<0?r._eye[2]:r._center[2]]:r._eye;var d=r._center,C=[$[0]-d[0],$[1]-d[1],$[2]-d[2]],f=U.p3(),T=Sm([f[0]+C[0],f[1]+C[1],f[2]+C[2]],f,r._up),w=U.r3(),S=ec(T,U.getRotationMode());Math.abs(w[0]-S[0])<1e-5&&Math.abs(w[1]-S[1])<1e-5&&Math.abs(w[2]-S[2])<1e-5||U.r3(S)}},_updateFixSize2d:function(){var d=this,A=d.s("shape3d.fixSizeOnScreen");if(A){var j=d.gv,k=d.data;k.getFinalScale3d();var Y=Ki(k,j.getMat(k)),N=Vl([0,0,0],Y),w=j.toViewPosition(N);if(!isNaN(w.x)&&!isNaN(w.y)){var n=Vl([1,0,0],Y),s=j.toViewPosition(n),_=Vl([0,1,0],Y),C=j.toViewPosition(_),P=s.x-w.x,l=C.y-w.y,R=k.getScale3d(),G=Math.abs(P/A[0]),F=Math.abs(l/A[1]);Math.abs(G-1)<.001&&Math.abs(F-1)<.001||k.setScale3d(R.x/G,R.y/F,R.z)}}},_calcAnchorMat:function(v){if(v.hasOwnProperty("_anchor")||v.hasOwnProperty("_anchorElevation")){var L=v.getAnchor3d(),P={x:L.x-.5,y:L.y-.5,z:L.z-.5},E=Wg();return Ik(E,[-P.x,-P.y,-P.z]),E}},vf:function(Q){var E=this;if(E.gv.getFaceVisible(E.data,Q)){var k=kg(E,Q);return k.mat&&(E.faceMat=!0),k}},_80o:function(k,V,m){var Y=this,A=Y.gv,C=Y.data,X=A._cube,H=Y.shapeModel;li(A,Y.mat),H?Nf(A,C,H,Y,Y.getBodyColor(),m):(tr(k,X.vs,c,V.aPosition),tr(k,X.ns,c,V.aNormal),xr(k,X.is),Y._18O(k,V,Y.left,0,m),Y._18O(k,V,Y.front,6,m),Y._18O(k,V,Y.right,12,m),Y._18O(k,V,Y.back,18,m),Y._18O(k,V,Y.top,24,m),Y._18O(k,V,Y.bottom,30,m)),un(A),Y.faceMat&&(Y._18O(k,V,Y.left,0,m,!0),Y._18O(k,V,Y.front,6,m,!0),Y._18O(k,V,Y.right,12,m,!0),Y._18O(k,V,Y.back,18,m,!0),Y._18O(k,V,Y.top,24,m,!0),Y._18O(k,V,Y.bottom,30,m,!0))},_18O:function(D,H,I,M,z,q){if(I){if(!z(I.transparent))return;if(q&&!I.mat||!q&&I.mat)return;q&&li(this.gv,I.mat);var r=this,A=r.data,$=r.gv,K=$.getTexture(I.texture,A),u=I.uv,F=I.uvScale,y=I.uvOffset,L=I.discardSelectable;if(K)if(u){for(var B=8*(M/6),R=0;8>R;R++)ao[B+R]=u[R];Yc(D,H,K,L,$._buffer.uv,ao,y,F)}else Yc(D,H,K,L,$._cube.uv,c,y,F);else Yc(D);ue(D,H,I.blend,I.light,I.opacity,I.reverseFlip,I.reverseColor,I.reverseCull),Jp(D,H.uDiffuse,I.color),Ng(D,M,6),bn(D,H),kn(D,H,K),q&&un($)}}});var eo=function(k,V){Ke(eo,this,[k,V])};hd(eo,Pr,{_25Q:1,validate:function(p){var o=this,t=o.gv,w=o.data,K=o.s,_=K("edge.width"),l=w._40I,V=w._41I;if(o.shapeModel=o.info=c,l&&V){var H,W,X,O,j,J,a,G,v,d,s=w.isLooped(),R=K(Ar),L=i.getEdgeType(R);if(L){var U=L(w,Vp(o,t,w,s,R),t,o._19Q);if(!U.points||U.points.isEmpty())return;J=o.info={},a=U.segments,j=U.points,G=j.size();for(var E=l.getElevation(),r=V.getElevation(),P=0;G>P;P++){var Z=j.get(P);Z.e==c&&(Z.e=E+(r-E)*P/(G-1))}v=mp(j.get(0)),d=mp(j.get(G-1));var g=G%2;0===g?(J.c1=mp(j.get(G/2-1)),J.c2=mp(j.get(G/2))):J.p3=mp(j.get((G-g)/2)),J.s1=v,J.s2=mp(j.get(1)),J.t1=mp(j.get(G-2)),J.t2=d}else{j=new Vr,J=o.info={};var Q=K("edge.offset"),D=K("edge.center"),u=K("edge.source.t3"),n=K("edge.target.t3"),C=l.p3(),I=V.p3();if(u&&(C[0]+=u[0],C[1]+=u[1],C[2]+=u[2]),n&&(I[0]+=n[0],I[1]+=n[1],I[2]+=n[2]),R===yc){a=K("edge.segments");var A=J.points=K(fp)||Am;if(G=A.size()){v=mp(A.get(0)),d=mp(A.get(G-1)),!D&&Q&&(X=jo(v,C,!0),Q=y(Q,ig(C,v)),C=[C[0]+X[0]*Q,C[1]+X[1]*Q,C[2]+X[2]*Q],X=jo(I,d,!0),Q=y(Q,ig(d,I)),I=[I[0]-X[0]*Q,I[1]-X[1]*Q,I[2]-X[2]*Q]);var g=G%2;0===g?(H=mp(A.get(G/2-1)),W=mp(A.get(G/2))):J.p3=mp(A.get((G-g)/2)),J.s1=C,J.s2=v,J.t1=d,J.t2=I}else!D&&Q&&(X=jo(I,C,!0),O=ig(C,I),Q=_g(Q,O),C=[C[0]+X[0]*Q,C[1]+X[1]*Q,C[2]+X[2]*Q],I=[I[0]-X[0]*Q,I[1]-X[1]*Q,I[2]-X[2]*Q]),H=C,W=I;j.add({x:C[0],y:C[2],e:C[1]}),j.addAll(A),j.add({x:I[0],y:I[2],e:I[1]})}else{var f=Vp(o,t,w,s,R);if(o._19Q||(f=-f),s){var q=C[0],h=C[1],M=C[2],k=l.getTall()/2+f;H=[q-f,h+k,M],W=[q+f,h+k,M],j.add({x:q-f,y:M,e:h}),j.add({x:q-f,y:M,e:h+k}),j.add({x:q+f,y:M,e:h+k}),j.add({x:q+f,y:M,e:h})}else{X=jo(I,C,!0),O=ig(C,I);var e={x:C[0],y:C[2]},N={x:I[0],y:I[2]},T=wq(c,e,N,f),$=T.x-e.x,F=T.y-e.y;Q=_g(Q,O),X[0]*=Q,X[1]*=Q,X[2]*=Q,H=[C[0]+X[0]+$,C[1]+X[1],C[2]+X[2]+F],W=[I[0]-X[0]+$,I[1]-X[1],I[2]-X[2]+F],D?(j.add({x:C[0],y:C[2],e:C[1]}),j.add({x:H[0],y:H[2],e:H[1]}),j.add({x:W[0],y:W[2],e:W[1]}),j.add({x:I[0],y:I[2],e:I[1]})):(j.add({x:H[0],y:H[2],e:H[1]}),j.add({x:W[0],y:W[2],e:W[1]}))}}J.c1=H,J.c2=W}J.list=K(Fi)===Rh?o.createTubeModel(j,a,_/2,p):o.createLineModel(j,a,_,"edge","edge.dash")}}});var af=function(b,k){Ke(af,this,[b,k])};hd(af,om,{_80o:function(J,H,l){var K=this,v=K.gv,x=K.shapeModel;li(v,K.mat),x?Nf(v,K.data,x,K,K.getBodyColor(),l):(hm(K,J,H,K.left,l),hm(K,J,H,K.front,l),hm(K,J,H,K.right,l),hm(K,J,H,K.back,l),hm(K,J,H,K.top,l),hm(K,J,H,K.bottom,l)),un(v)},validate:function(r,k){var b,F,Y=this,i=Y.s,V=Y.data,h=V.p3(),j=V._thickness/2,A=V.isClosePath(),w=V.getPoints(),N=V.getSegments(),l=i(fl),I=r&&r.uv;if(Y.clear(),0>j)F=Y.shapeModel=Dn(w,N,i(ie),i(Jc),l,i(tq),V.getTall(),V.getElevation(),A),i(Ug)?i("shape3d.image")||delete F.uv:(delete F.vs,delete F.ns,delete F.uv),i("shape3d.top.image")||delete F.top_uv,i("shape3d.bottom.image")||delete F.bottom_uv;
else if(i(Fi)===Rh)b=Al(w,N,l,A),F=Y.shapeModel={vs:[]},i("shape3d.image")&&(F.uv=[],F.sum=i(tq)||Tq(b)||1,F.len=0),i(ie)&&!A&&(F.top_vs=[],i("shape3d.top.image")&&(F.top_uv=[])),i(Jc)&&!A&&(F.bottom_vs=[],i("shape3d.bottom.image")&&(F.bottom_uv=[])),Y._12O(b,j);else{var z,y,f,M,o,u,D,U,x,R;b=Al(w,N,l,A),o=Y.vf(rb,I,!1,k),j&&(u=Y.vf(Ig,I,!1,k),D=A?c:Y.vf(rp,I,!1,k),U=A?c:Y.vf(il,I,!1,k),x=Y.vf(dq,I,!1,k),R=Y.vf(Cb,I,!1,k)),j?Y._12O(b,j):o&&b.forEach(function(H){if(M=H.length,M>0)for(z=H[0],f=1;M>f;f++)y=H[f],Y.addV(o.vs,z,y),z=y}),Y._20Q(b),r||(o&&(o.ns=bp(o.vs),th(o,"vs"),th(o,$i)),j&&(u&&(u.ns=bp(u.vs),th(u,"vs"),th(u,$i)),D&&(D.ns=bp(D.vs),th(D,"vs"),th(D,$i)),U&&(U.ns=bp(U.vs),th(U,"vs"),th(U,$i)),x&&(x.ns=bp(x.vs),th(x,"vs"),th(x,$i)),R&&(R.ns=bp(R.vs),th(R,"vs"),th(R,$i))))}var p=Y.mat=Wg();Ik(p,h),ol(p,V.r3(),V.getRotationMode()),Ik(p,Yo(h)),r&&(Kf(Y,p,r,F),Y.clear())},_20Q:function(L){var X,V,S,T,b,M,J,O=this,o=O.front,E=O.back,a=O.top,n=O.bottom,F=o?o.tuv:c,Z=E?E.tuv:c,i=a?a.tuv:c,v=n?n.tuv:c,I=0;(F||Z||i||v)&&(X=O.s(tq)||Tq(L)||1,L.forEach(function(k){if(V=k.length,V>0)for(M=k[0],S=1;V>S;S++)J=k[S],T=I/X,I+=ig(M,J),b=I/X,O._14O(o,T,b),O._14O(E,1-b,1-T),O._14O(a,T,b),O._14O(n,T,b),M=J}))},_14O:function(z,m,v){if(z){var C=z.uv,t=z.tuv;if(t){if(C)var b=C[0]+(C[6]-C[0])*m,F=C[1]+(C[7]-C[1])*m,u=C[2]+(C[4]-C[2])*m,G=C[3]+(C[5]-C[3])*m,p=C[2]+(C[4]-C[2])*v,E=C[3]+(C[5]-C[3])*v,U=C[0]+(C[6]-C[0])*v,e=C[1]+(C[7]-C[1])*v;else b=m,F=0,u=m,G=1,p=v,E=1,U=v,e=0;t.push(u,G,p,E,U,e,U,e,b,F,u,G)}}},_13O:function($){var r=$.uv,X=$.tuv;X&&(r?X.push(r[2],r[3],r[4],r[5],r[6],r[7],r[6],r[7],r[0],r[1],r[2],r[3]):X.push(0,1,1,1,1,0,1,0,0,0,0,1))},_12O:function(u,Q){var k,t,m,D,s,T=this;u.forEach(function(U){if(s=U.length,s>0)for(k={p:U[0],n:!0},D=1;s>D;D++)t=U[D],m=s-1>D?U[D+1]:c,T.addPoint(k,t,m,Q,U)})},addPoint:function(r,O,i,n,Y){var h,s,V,E,R,j,B,d,a,e=this,J=r.p,S=r.f,M=r.b,H=e.s("shape3d.side")||Vi,Q=e.s("shape3d.start.angle"),X=e.s("shape3d.sweep.angle"),l=e.shapeModel,T=e.data.isClosePath();if(r.n&&(r.n=!1,S=T&&Y.length>2?wq(Y[Y.length-2],J,O,n):wq(c,J,O,n),M=ed(J,S),l?l.top_vs&&e._10O(M,S,H,Q,X,l.top_vs,l.top_uv):(h=e.left)&&(e.addV(h.vs,M,S),e._13O(h))),s=i?wq(J,O,i,n):T&&Y.length>2?wq(J,O,Y[1],n):wq(J,O,c,n),V=ed(O,s),l){var o,y,w=l.vs,L=l.uv,m=l.sum;for(L&&(o=l.len/m,l.len+=ig(J,O),y=l.len/m),j=e._9O(M,S,H,Q,X),B=e._9O(V,s,H,Q,X),d=0;H>d;d++)a=d+1,rr(w,j[a]),rr(w,B[d]),rr(w,j[d]),rr(w,B[d]),rr(w,j[a]),rr(w,B[a]),L&&(E=d/H,R=a/H,L.push(o,R,y,E,o,E,y,E,o,R,y,R));!i&&l.bottom_vs&&e._10O(V,s,H,Q,X,l.bottom_vs,l.bottom_uv,!0)}else!i&&(h=e.right)&&(e.addV(h.vs,s,V),e._13O(h)),(h=e.front)&&e.addV(h.vs,S,s),(h=e.back)&&e.addV(h.vs,V,M),(h=e.top)&&e.addH(h.vs,S,s,V,M,!0),(h=e.bottom)&&e.addH(h.vs,M,V,s,S);r.p=O,r.f=s,r.b=V},_10O:function(q,J,v,e,d,k,U,r){var A,H,W=this,u=W.data,L=W._9O(q,J,v,e,d),h=(q.x+J.x)/2,c=(q.y+J.y)/2,V=u.getElevation(),i=0;for(i=0;v>i;i++)r?(rr(k,L[i]),rr(k,L[i+1])):(rr(k,L[i+1]),rr(k,L[i])),rr(k,[h,V,c]),U&&(r?(A=Y*(i+1)/v+e,H=Y*i/v+e):(A=Y*i/v+e,H=Y*(i+1)/v+e),U.push(.5-.5*K(H),.5-.5*o(H),.5-.5*K(A),.5-.5*o(A),.5,.5))},_9O:function(g,M,S,c,Q){var I,P,x=this,t=x.data,Z=[],O=(g.x+M.x)/2,V=(g.y+M.y)/2,v=t.getTall()/2,R=t.getElevation(),f=0;for(Q=Q||Y;S>=f;f++)I=Q*f/S+c,P=K(I),Z.push([O+(g.x-O)*P,R+v*o(I),V+(g.y-V)*P]);return Z},addV:function(s,Y,d){var G=Y.x,q=Y.y,H=d.x,A=d.y,j=this.data,E=j.getElevation(),r=j.getTall()/2;s.push(G,E-r,q,H,E-r,A,H,E+r,A,H,E+r,A,G,E+r,q,G,E-r,q)},addH:function(V,_,U,n,C,R){var L=this.data,r=L.getTall()/2,b=L.getElevation()+(R?r:-r);V.push(_.x,b,_.y,U.x,b,U.y,n.x,b,n.y,n.x,b,n.y,C.x,b,C.y,_.x,b,_.y)},vf:function(G,$,Z,W){var q,p=this,d=p.gv.getFaceVisible(p.data,G);return(Z||d)&&(q=kg(p,G,W),q.vs=[],q.tuv=d&&(q.texture||$)?[]:c,q.visible=d),q}});var wr=function(S,N){Ke(wr,this,[S,N])};hd(wr,Pr,{_25Q:1,validate:function(a){var $=this,Y=$.data,o=$.s,A=Y.getPoints(),x=A.size();if($.shapeModel=$.info=c,x>1){var f=$.info={},S=Y.getSegments(),w=Y.getThickness(),I=mp(A.get(0)),u=mp(A.get(x-1)),O=x%2;0===O?(f.c1=mp(A.get(x/2-1)),f.c2=mp(A.get(x/2))):f.p3=mp(A.get((x-O)/2)),f.s1=I,f.s2=mp(A.get(1)),f.t1=mp(A.get(x-2)),f.t2=u,f.list=o(Fi)===Rh?$.createTubeModel(A,S,w/2,a):$.createLineModel(A,S,w,"shape.border","shape.dash")}}}),Mj(i,{accordionViewExpandIcon:hh(fe),accordionViewCollapseIcon:hh(fe,!0),accordionViewLabelColor:ai,accordionViewLabelFont:bq,accordionViewTitleBackground:Xd,accordionViewSelectBackground:sc,accordionViewSelectWidth:3,accordionViewSeparatorColor:M,splitViewDividerSize:1,splitViewDividerBackground:Xd,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:Sh,rect:[2,2,12,12],background:fe}]},propertyViewLabelColor:Qd,propertyViewLabelSelectColor:ai,propertyViewLabelFont:bq,propertyViewExpandIcon:hh(Kj),propertyViewCollapseIcon:hh(Kj,!0),propertyViewBackground:cc,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:Nl,propertyViewColumnLineColor:Nl,propertyViewSelectBackground:sc,listViewLabelColor:Qd,listViewLabelSelectColor:ai,listViewLabelFont:bq,listViewRowLineVisible:!1,listViewRowLineColor:Nl,listViewSelectBackground:sc,treeViewLabelColor:Qd,treeViewLabelSelectColor:ai,treeViewLabelFont:bq,treeViewExpandIcon:hh(Io),treeViewCollapseIcon:hh(Io,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:Nl,treeViewSelectBackground:sc,treeViewDoubleClickToToggle:!0,tableViewLabelColor:Qd,tableViewLabelSelectColor:ai,tableViewLabelFont:bq,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:Nl,tableViewColumnLineColor:Nl,tableViewSelectBackground:sc,treeTableViewLabelColor:Qd,treeTableViewLabelSelectColor:ai,treeTableViewLabelFont:bq,treeTableViewExpandIcon:hh(Io),treeTableViewCollapseIcon:hh(Io,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:Nl,treeTableViewColumnLineColor:Nl,treeTableViewSelectBackground:sc,tableHeaderLabelColor:Qd,tableHeaderLabelFont:bq,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:oi,tableHeaderBackground:cc,tableHeaderMoveBackground:Ae,tableHeaderInsertColor:sc,tableHeaderSortDescIcon:uq(Kj,!0),tableHeaderSortAscIcon:uq(Kj),tabViewTabGap:1,tabViewLabelColor:ai,tabViewLabelFont:bq,tabViewTabBackground:Xd,tabViewSelectWidth:3,tabViewSelectBackground:sc,tabViewMoveBackground:Ae,tabViewInsertColor:sc,toolbarLabelColor:Qd,toolbarLabelSelectColor:ai,toolbarLabelFont:bq,toolbarBackground:cc,toolbarSelectBackground:sc,toolbarItemGap:8,toolbarSeparatorColor:Gg},!0);var ag={translateX:1,sortColumn:1},ul={sortable:1,sortOrder:1,sortFunc:1},Td={focusData:1},Fh={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},ys={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},Sp=function(h,v){v.add(h),h.hasChildren()&&h.eachChild(function(K){Sp(K,v)})},yk=function(N,G,X,Y,S,$,U,D,V,d,k){var t,n=X.getValueType(d),g=X.getAlign(d);if(X.getEnumValues(d)){var A=X.toEnumLabel(G,d),v=_b||0,B=0,r=$,P=i.getTextSize(Y,A).width;return t=id(X.toEnumIcon(G,d)),t&&(B=$+_b/2,"center"===g?B+=(D-(v+P))/2:"right"===g&&(B=B+D-(v+P)),de(N,t,B,U+V/2,d,k),r=B+_b/2),A!=c&&(t?pf(N,A,Y,S,r,U,D-(r-$),V):pf(N,A,Y,S,$,U,D,V,g)),void 0}return G=X.formatValue(G),G!=c?n===Dl?(lo(N,$,U,D,V,G),void 0):n===ds||!n&&po(G)?(t=id(G?gf:ro),de(N,t,$+D/2,U+V/2,d,k),void 0):(pf(N,G,Y,S,$,U,D,V,g),void 0):void 0},je=function(M,O){var W=O.view,B=W.getDataModel().getHistoryManager(),G=Nr(M),T=O.column||O.property;B&&B.beginInteraction(),O.editor=M,M.info=O,W.setCurrentEditor(M),W.getView().insertBefore(G,W._79O),gg(M,O.editorRect),M.setFocus?M.setFocus():Jh(M),M.commitValue=function(){M._17Q&&(M=M._17Q),W.setValue(O.data,T,M.getValue?M.getValue():M.value),M.close&&M.close(),Ye(G)},T.onEditorCreated&&T.onEditorCreated(O)},no=function(n,k,T,b,d){var h=be(n,T),t=k.value,e=k.view,q=d.getValueType(k.data);return h.onblur=h.onchange=function(){e.endEditing()},"input"===n?(t=d.formatValue(t),t!=c&&(h.value=t),h.onkeydown=function(W){aq(W)&&e.endEditing()},(q===Eo||q===Le)&&h.addEventListener(pi,i.numberListener,!1)):n===Ij&&b.forEach(function(f){var i=m.createElement("option");i.innerHTML=d.toEnumLabel(f),i.value=f,d.isEnumEqual(t,f)&&(i.selected=!0),Rf(h,i)}),je(h,k),h},Nd=v.widget={},As=function(H,o,u){hd(n+".widget."+H,o,u)};Mj(mi,{ms_value:function(R){R.getValue=function(B){var I=this.getItemById(B),Q=I.element;return Ul(Q)?Q:Q?Q.getValue?Q.getValue():Q.value:I.selected},R.setValue=function(w,l){var g=this.getItemById(w),b=g.element;b&&!Ul(b)?b.setValue?b.setValue(l):b.value=l:po(l)?(g.selected=l,this.iv()):(g.element=l,this.iv())},R.v=function(X,f){var G=this;if(2===arguments.length)G.setValue(X,f);else{if(!vf(X))return G.getValue(X);for(var F in X)G.setValue(F,X[F])}return G}},_46o:function(g){g._icon=c,g._accessType=c,g._valueType=c,g._editable=!1,g._batchEditable=!0,g._align=rp,g._nullable=!0,g._emptiable=!1,g.setParent=js,g.formatValue=function(Y){var $=this,j=$._valueType;return $.getEnumValues()?$.toEnumLabel(Y):j===ds?!!Y:Y!=c&&j===Eo?T(Y):Y},g.setEnum=function(d,L,B,g,t,M,n){var k=this;d&&!Kh(d)&&d.values&&(g=d.editable,B=d.icons,L=d.labels,t=d.strict,M=d.maxHeight,n=d.dropDownWidth,d=d.values),kk(d)&&(d=d._as),kk(L)&&(L=L._as),kk(B)&&(B=B._as),k._enumValues=d,k._enumLabels=L,k._enumIcons=B,k._enumEditable=g,k._enumStrict=t==c?!0:t,k._enumMaxHeight=M,k._enumDropDownWidth=n,d&&d.length&&ps(d[0])&&(k._valueType=Le),k.fp("enum",!1,!0)},g.getEnumDropDownWidth=function(){return this._enumDropDownWidth},g.getEnumMaxHeight=function(){return this._enumMaxHeight},g.isEnumEditable=function(){return this._enumEditable},g.getEnumValues=function(){return this._enumValues},g.getEnumLabels=function(){return this._enumLabels},g.getEnumIcons=function(){return this._enumIcons},g.isEnumStrict=function(){return this._enumStrict},g.isEnumEqual=function(y,K){return this._enumStrict?y===K:y==K},g.toEnumLabel=function(X,Y){var k=this,l=k.getEnumValues(Y),E=k.getEnumLabels(Y);if(l&&E)for(var G=0;G<l.length;G++)if(k.isEnumEqual(X,l[G]))return E[G];return X},g.toEnumIcon=function(Q,z){var O=this,F=O.getEnumValues(z),R=O.getEnumIcons(z);if(F&&R)for(var e=0;e<F.length;e++)if(O.isEnumEqual(Q,F[e]))return R[e];return M}},_45o:function(n){n._87o=function(D,l,R,Z,v,w){if(D){var k=this,Y=k._90I,N=us(1);k._columnLineVisible&&(v-=1),k._rowLineVisible&&(w-=1),0>=v||0>=w||(k._90I||(Y=k._90I={}),Y[l]||(Y[l]=new Vr),gg(N,k.tx()+R,k.ty()+Z,v,w),Rf(N,D),k._view.insertBefore(N,k._79O),D.onParentAdded&&D.onParentAdded(N),Y[l].add(N))}},n._76o=function(){var U=this,b=U._90I;if(b){for(var v in b)b[v].each(function(q){Ye(q)});delete U._90I}},n._77o=function(x){var R=this;if(R._90I){var b=R._90I[x];b&&(b.each(function(R){Ye(R)}),delete R._90I[x])}}},_47o:function(h){h.getValue=function(l,m){return m.getValue?m.getValue(l,m,this):mc(l,m.getAccessType(),m.getName())},h.setValue=function(y,k,I){if(k.isEmptiable(y)||""!==I||(I=M),k.isNullable(y)||I!=c){var L=this,v=k.getName(y),O=k.getAccessType(y),T=k.getValueType(y);T===Eo&&Ul(I)?I=j(I):T===Le&&Ul(I)?I=parseFloat(I):T===ds&&Ul(I)&&(I="true"===I),L._batchEditable&&k._batchEditable&&L.isSelected(y)?L.sm().each(function(U){k.setValue?k.setValue(U,k,I,L):El(U,O,v,I)}):k.setValue?k.setValue(y,k,I,L):El(y,O,v,I)}},h.setCurrentEditor=function(S){this.endEditing(),this._currentEditor=S,this.redraw()},h.isEditing=function(c,U){var D=this,Y=D._currentEditor;if(!Y)return!1;if(U){var f=Y.info;return f?(f.column||f.property)===U&&f.data===c:!1}return!0},h.endEditing=function(){var N=this,v=N._currentEditor,t=N.getDataModel().getHistoryManager();v&&(delete N._currentEditor,v.commitValue&&v.commitValue(v.info),N.redraw(),t&&t.endInteraction())},h.beginEditing=function(F){this.endEditing();var z=this,m=F.column||F.property;if(m.beginEditing)m.beginEditing(F);else{var O=F.data,D=F.value,q=z.getSelectBackground(O),X=m.getEnumValues(O),y=m.getSlider(O),G=m.getColorPicker(O);if(y){var R=fd(Nd.Slider,y);return R.setValue(D),R.getView().onblur=function(){z.endEditing()},R.isInstant()&&(R.onValueChanged=function(){z.setValue(O,m,R.getValue())}),je(R,F),void 0}if(G||m.getValueType(O)===Dl){var j=fd(Nd.ColorPicker,G);return j.setValue(D),j.onClosed=function(){z.endEditing()},j.isInstant()&&(j.onValueChanged=function(c,V){z.setValue(O,m,V)}),je(j,F),j.open(),void 0}if(X){if(Nd.ComboBox){var L=new Nd.ComboBox;L.setValue(D),L.setValues(X),L.setLabels(m.getEnumLabels(O)),L.setIcons(m.getEnumIcons(O)),L.setEditable(m.isEnumEditable(O)),L.setStrict(m.isEnumStrict(O)),L.setMaxHeight(m.getEnumMaxHeight(O)),L.setDropDownWidth(m.getEnumDropDownWidth(O)),L.onClosed=function(){z.endEditing()},je(L,F),L.open()}else no(Ij,F,q,X,m);return}var l=m.getValueType(O);if(l===ds||po(D))return z.setValue(O,m,!D),void 0;if(m.getItemEditor(O)){var r=Nm(m.getItemEditor(O)),E=new r(O,m,z,F),i=E.getView();return i._17Q=E,E.setValue(D),Lm(i),je(i,F),E.editBeginning&&E.editBeginning(),void 0}no("input",F,q,c,m)}}},_44o:function(q){q.init=function(w){var _=this,x=_.th=new hs(w),m=_._view=fi(1,_);_.tv=_._tableView=w,Rf(m,x.getView()),Rf(m,w.getView()),x.mp(function(m){m.property===Rc&&_.iv()}),_.iv()},q.getTableView=function(){return this.tv},q.getTableHeader=function(){return this.th},q.getDataModel=function(){return this.tv.dm()},q.getColumnModel=function(){return this.tv.getColumnModel()},q.setColumns=function(E){this.tv.setColumns(E)},q.addColumns=function(j){this.tv.addColumns(j)},q.endEditing=function(){this.tv.endEditing()},q.validateImpl=function(){var $=this,l=$.th,P=Eg(l),T={x:0,y:0,width:$.getWidth(),height:P};gg(l,T),T.y=P,T.height=W(0,$.getHeight()-P),gg($.tv,T)}},ms_vs:function(Z){Z._41o=function(){return this._29I.height<this._59I},Z._43o=function(){var E=this;E._41o()&&(E._58I||(a(function(){E._94O()},ak),E.iv()),E._58I=new Date)},Z._94O=function(){var R=this;if(R._58I){var i=new Date;i.getTime()-R._58I.getTime()>=ak?(delete R._58I,R.iv()):a(function(){R._94O()},ak)}},Z._93I=function(){var y=this,H=y._27I;if(y._58I||!y._autoHideScrollBar){H||Rf(y._79O,H=y._27I=us());var W=y._29I,Z=W.height,i=y._59I,C=y.getScrollBarSize(),Q=W.width-C-2,X=Z*(-y.ty()/i),F=Z*(Z/i),K=H.style;i>Z?(fr>F&&(X=X+F/2-fr/2,0>X&&(X=0),X+fr>Z&&(X=Z-fr),F=fr),K.visibility=gq,K.background=y.getScrollBarColor(),K.borderRadius=C/2+xc,gg(H,Q,X,C,F)):K.visibility=Ck}else H&&(H.style.visibility=Ck)}},ms_hs:function(r){r._40o=function(){return this._29I.width<this._91I},r._42o=function(){var e=this;e._40o()&&(e._95O||(a(function(){e._94I()},ak),e.iv()),e._95O=new Date)},r._94I=function(){var j=this;if(j._95O){var S=new Date;S.getTime()-j._95O.getTime()>=ak?(delete j._95O,j.iv()):a(function(){j._94I()},ak)}},r._92I=function(){var c=this,Q=c._28I;if(c._95O||!c._autoHideScrollBar){Q||Rf(c._79O,Q=c._28I=us());var $=c._29I,I=$.width,R=c._91I,s=c.getScrollBarSize(),P=$.height-s-2,l=I*(-c.tx()/R),g=I*(I/R),X=Q.style;R>I?(fr>g&&(l=l+g/2-fr/2,0>l&&(l=0),l+fr>I&&(l=I-fr),g=fr),X.visibility=gq,X.background=c.getScrollBarColor(),X.borderRadius=s/2+xc,gg(Q,l,P,g,s)):X.visibility=Ck}else Q&&(Q.style.visibility=Ck)}}}),db(gf,Pd(16,16,[{type:Hg,rect:[1,1,14,14],background:sc},{type:ih,rect:[1,1,14,14],width:1,color:Yn},{type:Cc,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),db(ro,Pd(16,16,{type:ih,rect:[1,1,14,14],width:1,color:Yn})),db(If,Pd(16,16,[{type:$d,rect:[2,2,12,12],borderWidth:1,borderColor:Yn,background:"#FFF"},{type:$d,rect:[4,4,8,8],background:sc}])),db(Pb,Pd(16,16,{type:$d,rect:[2,2,12,12],borderWidth:1,borderColor:Yn})),mi._15Q=function(O){O._29I=ln,O._59I=0,O._91I=0,O._5o=function(R){var d=this;d._30I=new Vr,d._rows=new Vr,d._rowMap={},d._31I=0,d._14I=0,d._view=fi(1,d),d._canvas=nq(d._view),Rf(d._view,d._79O=us()),d.dm(R?R:new pm)},O.getCheckIcon=function(R){var m=this.sm(),p=m.co(R);return m.sg()?id(p?If:Pb):id(p?gf:ro)},O.checkData=function(_){var E=this.sm(),y=E.co(_);E.sg()&&y||(this._32o=1,y?E.rs(_):E.as(_),delete this._32o)},O.getDataAt=function(F){F.target&&(F=this.lp(F));var Q=e(F.y/this._rowHeight),y=this._rows;return 0>Q||Q>=y.size()?c:y.get(Q)},O.onDataDoubleClicked=function(){},O.onDataClicked=function(){},O.adjustTranslateX=function(){return 0},O.adjustTranslateY=function(W){var C=this.getHeight()-this._59I;return C>W&&(W=C),W>0?0:T(W)},O.onPropertyChanged=function(p){var B=this,S=p.property;Fh[S]?B.ivm():Td[S]||B.redraw(),S===Rb?B._42o():S===vp&&B._43o()},O.getLabel=function(c){return c.toLabel()},O.getLabelFont=function(){return this._labelFont},O.getLabelColor=function(l){var c=this;if(c.isCheckMode()){if(c._focusData===l)return c._labelSelectColor}else if(c.isSelected(l))return c._labelSelectColor;return c._labelColor},O.getStartRowIndex=function(){return this._31I},O.getEndRowIndex=function(){return this._14I},O.getRowDatas=function(){return this._rows},O.getRowIndex=function(Z){return this._rowMap[Z._id]},O.getRowSize=function(){return this._rows.size()},O.getViewRect=function(){return Wk(this._29I)},O.isVisible=function(B){return this._visibleFunc?this._visibleFunc(B):!0},O.getCurrentSortFunc=function(){return this._sortFunc},O.setDataModel=function(Y){var X=this,l=X._dataModel,i=X._selectionModel;l!==Y&&(l&&(l.umm(X.handleDataModelChange,X),l.umd(X.handleDataPropertyChange,X),l.umh(X.handleHierarchyChange,X),i||l.sm().ums(X.handleSelectionChange,X)),X._dataModel=Y,Y.mm(X.handleDataModelChange,X),Y.md(X.handleDataPropertyChange,X),Y.mh(X.handleHierarchyChange,X),i?i._21I(Y):Y.sm().ms(X.handleSelectionChange,X),X.fp("dataModel",l,Y))},O.validateModel=function(){var m=this;m._rows.clear(),m._rowMap={},m.buildChildren(m._dataModel._roots);var q=m._rows=m._rows.toList(m.isVisible,m),J=0,Q=m.getCurrentSortFunc(),I=q.size();for(Q&&q.sort(Q);I>J;J++)m._rowMap[q.get(J)._id]=J},O.buildChildren=function(A){var D=this;A.each(function(G){D._rows.add(G),D.buildChildren(G._children)})},O.handleDataModelChange=function(){this.ivm()},O.handleDataPropertyChange=function(H){"parent"===H.property?this.ivm():this.invalidateData(H.data)},O.handleHierarchyChange=function(){this.ivm()},O.handleSelectionChange=function(Q){Q.datas.each(this.invalidateData,this),this.onSelectionChanged(Q)},O.onSelectionChanged=function(S){var _=this,x=_.sm();!_.isAutoMakeVisible()||1!==x.size()||"set"!==S.kind&&"append"!==S.kind||_._32o||_.makeVisible(x.ld())},O.handleBackgroundClick=function(t){Zi(t)&&!this.isCheckMode()&&this.sm().cs()},O.makeVisible=function(s){s&&(this._23I=s,this.iv())},O.scrollToIndex=function(X){var G=this,R=G._29I,H=R.height,q=G._rowHeight,N=q*X;X>=0&&X<G._rows.size()&&H>0&&(N+q>R.y+H?G.ty(-N+H-q):N<R.y&&G.ty(-N))},O.autoScroll=function(q,x){var P=this,H=P._rowHeight,G=H,K=H/4,Y=P._29I,L=P.lp(q),U={x:P.tx(),y:P.ty()};return H>0&&Y&&(L.x-Y.x<G?P.translate(K,0):Y.x+Y.width-L.x<G&&P.translate(-K,0),L.y-Y.y<G?P.translate(0,K):Y.y+Y.height-L.y<G&&P.translate(0,-K)),U.x=P.tx()-U.x,U.y=P.ty()-U.y,x&&(x.x+=U.x,x.y+=U.y),U},O.getTopRowOrderSelection=function(){var P=this.sm().getTopSelection(),$={},S=new Vr;return P.each(function(f){$[f._id]=f}),this._rows.each(function(H){$[H._id]&&S.add(H)}),S},O.getRowOrderSelection=function(){var v=new Vr;return this._rows.each(function(G){this.isSelected(G)&&v.add(G)},this),v},O.ivm=function(){this.invalidateModel()},O.invalidateModel=function(){var A=this;A._96I||(A._96I=1,A._32I=1,delete A._24I),A.iv()},O.redraw=function(){var R=this;R._32I||(R._32I=1,delete R._24I,R.iv())},O.invalidateData=function(Y){var m=this;B?m.redraw():m._32I||(m._24I||(m._24I={}),m._24I[Y._id]=Y,m.iv())},O.getFocusData=function(){return this._focusData},O.setFocusDataById=function(B){this.setFocusData(this.dm().getDataById(B))},O.setFocusData=function(x){var o=this,v=o._focusData;v!==x&&(o._focusData=x,o.fp("focusData",v,x),v&&o.invalidateData(v),x&&(o.invalidateData(x),o.isAutoMakeVisible()&&o.makeVisible(x)))},O.drawRowBackground=function(P,j,o,q,m,x,G){var I=this,O=I.isCheckMode();(j===I._focusData&&O||o&&!O)&&lo(P,q,m,x,G,I.getSelectBackground(j))},O.drawData=function(F,z,M){var i=this,r=i._rowHeight,o=r*M,L=i._29I,l=L.x,v=L.width;F.save(),F.beginPath(),F.rect(l,o,v,r),F.clip(),i._87o(i.drawRow(F,z,i.isSelected(z),l,o,v,r),M,l,o,v,r),F.restore(),i._rowLineVisible&&lo(F,l,o+r-1,v,1,i._rowLineColor)},O._12I=function(Q){var i=this,K=i._31I,x=i._29I,e=x.x,U=x.y,T=x.width,W=x.height;for(Q.beginPath(),Q.rect(e,U,T,W),Q.clip(),Q.clearRect(e,U,T,W),i._76o(),i._93db(Q);K<i._14I;K++)i.drawData(Q,i._rows.get(K),K);i._92db(Q)},O._13I=function(b){for(var K,F=this,E=F._rowHeight,s=F._29I,W=s.x,A=s.width,S=F._31I,Y=F._30I;S<F._14I;S++)K=F._rows.get(S),F._24I[K._id]&&Y.add({data:K,index:S});Y.isEmpty()||(b.beginPath(),Y.each(function(M){b.rect(W,M.index*E,A,E)}),b.clip(),Y.each(function(a){b.clearRect(W,a.index*E,A,E)}),Y.each(function(N){F._77o(N.index)}),F._93db(b),Y.each(function(h){F.drawData(b,h.data,h.index)}),F._92db(b),Y.clear())},O.validateImpl=function(){var H=this,V=H._canvas,P=H.getWidth(),M=H.getHeight(),r=H._rowHeight,O=H._32I;(P!==V.clientWidth||M!==V.clientHeight)&&(ge(V,P,M),O=1);var i=N&&!R;H._96I&&!i&&H.validateModel();var X=H._29I,t={x:-H.tx(),y:-H.ty(),width:P,height:M},K=H._rows.size(),y=Wb(V),L=H._23I;O||Bn(t,X)||(O=1),H._29I=t,H._59I=K*r,H._31I=e(t.y/r),H._14I=x((t.y+t.height)/r),H._31I<0&&(H._31I=0),H._14I>K&&(H._14I=K),H._99I&&O&&H._99I(),Ch(y,H.tx(),H.ty(),1),O?H._12I(y):H._24I&&H._13I(y),H._93I(),H._92I(),y.restore(),H._32I=H._24I=H._96I=c,L&&(H.scrollToIndex(H.getRowIndex(L)),delete H._23I),H.tx(H.tx()),H.ty(H.ty())}},mi._48o=function(V){V._rootVisible=!0,V._rootData=c,V._35o=function(){this._expandMap={},this._levelMap={}},V.validateModel=function(){var X=this,E=X._rootData;X._rows.clear(),X._levelMap={},X._rowMap={},X._currentLevel=0,E?X._rootVisible?X.isVisible(E)&&X.buildData(E):X.buildChildren(E):X.buildChildren(),delete X._currentLevel},V.buildData=function(g){var $=this,K=g._id,Q=$._rows;$._rowMap[K]=Q.size(),Q.add(g),$._levelMap[K]=$._currentLevel,$.isExpanded(g)&&($._currentLevel++,$.buildChildren(g),$._currentLevel--)},V.buildChildren=function(u){var R=this,o=u?u._children:R._dataModel._roots,M=R.getCurrentSortFunc();M&&R.isChildrenSortable(u)?o.toList(R.isVisible,R).sort(M).each(R.buildData,R):o.each(function(b){R.isVisible(b)&&R.buildData(b)})},V.getLevel=function(I){return this._levelMap[I._id]},V.getToggleIcon=function(h){var K=this,Q=K._loader,a=K._collapseIcon;return Q&&!Q.isLoaded(h)?a:h.hasChildren()?K.isExpanded(h)?K._expandIcon:a:c},V.isCheckMode=function(){return this._checkMode!=c},V.isChildrenSortable=function(){return!0},V.handleDataModelChange=function(e){var w=this;e.kind===Yl?delete w._expandMap[e.data._id]:e.kind===nb&&(w._expandMap={}),w.ivm()},V.toggle=function(U){var x=this;x.isExpanded(U)?x.collapse(U):x.expand(U)},V.isExpanded=function(I){return 1===this._expandMap[I._id]},V.expand=function(v){var j=this,I=j._loader;j.isExpanded(v)||(I&&!I.isLoaded(v)&&I.load(v),j._expandMap[v._id]=1,j.ivm(),j.onExpanded(v))},V.onExpanded=function(){},V.collapse=function(f){var V=this;V.isExpanded(f)&&(delete V._expandMap[f._id],V.ivm(),V.onCollapsed(f))},V.onCollapsed=function(){},V.expandAll=function(){var C=this;C._dataModel.each(function(b){b.hasChildren()&&(C._expandMap[b._id]=1)}),C.ivm()},V.collapseAll=function(){this._expandMap={},this.ivm()},V.makeVisible=function(f){if(f){var p=this;if(!p._rootData||f.isDescendantOf(p._rootData)){for(var O=f._parent;O;)p.expand(O),O=O._parent;p._23I=f,p.iv()}}},V.checkData=function(Y){var L,M=this,v=M._checkMode,m=M.sm(),H=m.co(Y);if(!m.sg()||!H){if(M._32o=1,v===Yp)H?m.rs(Y):m.as(Y);else if(v===ze)L=new Vr(Y),L.addAll(Y._children);else if("descendant"===v)L=new Vr,Sp(Y,L);else if("all"===v&&(L=new Vr,Sp(Y,L),!H))for(var Q=Y._parent;Q;)L.add(Q),Q=Q._parent;L&&(H?m.rs(L):m.as(L)),delete M._32o}},V._97I=function(C,s,d,o,N,j,v){var B=this,w=B._indent,z=B._levelMap[s._id],X=B.getIconWidth(s),I=id(B.getToggleIcon(s));I?(o+=w*z,de(C,I,o+w/2,N+v/2,s,B),o+=w):o+=w*(z+1),B._checkMode&&(de(C,B.getCheckIcon(s),o+w/2,N+v/2,s,B),o+=w),B.drawIcon(C,s,o,N,X,v),B.drawLabel(C,s,o+X,N,v)}},mi._14Q=function(w){w.getIcon=function(a){return a.getIcon()},w.getIconWidth=function(M){return this.getIcon(M)?this._indent:0},w.drawIcon=function(b,K,k,p,z,s){if(z){var L=this,O=L.getBodyColor(K),g=id(L.getIcon(K),O);g&&(s-=L.isRowLineVisible()?1:0,Ob(b,g,cs,k,p,z,s,K,L,O),Wn(b,L.getBorderColor(K),k,p,z,s))}},w.drawLabel=function(i,V,T,O,w){var P=this;pf(i,P.getLabel(V),P.getLabelFont(V),P.getLabelColor(V),T,O,0,w)}},mi._50o=function(i){i._98I=function(){var O=this,M=O._39o=new pm;O._60I=new Vr,M.mm(O._17o,O),M.md(O._18o,O),M.mh(O._19o,O)},i.setColumns=function(E){this._39o.clear(),this.addColumns(E)},i.addColumns=function(f){var k=this._39o;f.forEach(function(U){if(!(U instanceof pl)){var $=Nm(U.className);U=fd($?$:pl,U)}k.add(U)})},i.onColumnClicked=function(){},i.onCheckColumnClicked=function(){},i._3Q=function(q){for(var l,x=0,f=this._60I,H=f.size();H>x;x++)if(l=f.get(x),l.column===q)return l;return c},i.getColumnAt=function(i){var U=this._4Q(i);return U?U.column:c},i._4Q=function(S){for(var M=this,x=S.target?M.lp(S).x:S.x,b=M._60I,m=0;m<b.size();m++){var l=b.get(m),$=l.startX;if(x>=$&&x<$+l.column.getWidth())return l}return c},i.getToolTip=function(z){var h=this,$=h.getDataAt(z),x=h.getColumnAt(z);return $&&x?x.getToolTip($,h):c},i.adjustTranslateX=function(W){var j=this.getWidth()-this._91I;return j>W&&(W=j),W>0?0:T(W)},i._99I=function(){var G=this,U=G._29I,m=G._60I;m.clear(),G._91I=0,G._39o._roots.each(function(K){if(K.isVisible()){var p=G._91I+K.getWidth();G._91I<=U.x+U.width&&p>=U.x&&m.add({column:K,startX:G._91I}),G._91I=p}})},i.drawData=function(i,I,y){var n=this,O=n._rowHeight,N=O*y,w=n.isSelected(I),Q=n._29I,D=Q.x,M=Q.width;n.drawRowBackground(i,I,w,D,N,M,O),n._60I.each(function(T){var J=T.column,v=T.startX,e=J.getWidth();e>0&&!n.isEditing(I,J)&&(i.save(),i.beginPath(),i.rect(v,N,e,O),i.clip(),n._87o(n.drawCell(i,I,w,J,v,N,e,O),y,v,N,e,O),n._columnLineVisible&&lo(i,v+e-1,N,1,O,n._columnLineColor),i.restore())}),n._rowLineVisible&&lo(i,D,N+O-1,M,1,n._rowLineColor)},i.drawCell=function(d,M,m,C,T,X,Y,j){var r=this;if(C.drawCell)return C.drawCell(d,M,m,C,T,X,Y,j,r);var I=r.getValue(M,C);yk(d,I,C,r.getLabelFont(M,C,I),r.getLabelColor(M,C,I),T,X,Y,j,M,r)},i.getColumnModel=function(){return this._39o},i._17o=function(){this.redraw()},i._18o=function(i){var g=this;i.data===g._sortColumn&&ul[i.property]?g.ivm():(g._42o(),g.redraw())},i._19o=function(){this.redraw()},i.getCurrentSortFunc=function(){var J=this,p=J._sortColumn;if(p&&p.isSortable()){var e=p.getSortFunc(),S=Ld===p.getSortOrder()?1:-1;return e||(e=$f),function(H,f){return e.call(J,J.getValue(H,p),J.getValue(f,p),H,f)*S}}return J._sortFunc},i.isCellEditable=function(n,b){return!this.isCheckMode()&&this.isSelected(n)||this.isCheckMode()&&n===this._focusData?b.isEditable()&&this.isEditable():!1},i._37O=function(M,R){if(Zi(R))for(var P=this,D=P.lp(R),X=P._60I,L=P._rowHeight,$=P._29I,l=$.x,h=$.y,x=$.width,N=$.height,y=0;y<X.size();y++){var j=X.get(y),k=j.startX,d=j.column,F=d.getWidth();if(d!==P._31o&&d!==P._4o&&P.isCellEditable(M,d,R)&&D.x>=k&&D.x<k+F){var E={x:k,y:P.getRowIndex(M)*L,width:F,height:L},I={x:E.x+P.tx(),y:E.y+P.ty(),width:E.width,height:E.height},v=0,T=0;return E.x<l?v=E.x-l:E.x+E.width>l+x&&(v=E.x+E.width-l-x),v&&(P.tx(P.tx()-v),I.x-=v),E.y<h?T=E.y-h:E.y+L>h+N&&(T=E.y+L-h-N),T&&(P.ty(P.ty()-T),I.y-=T),P.beginEditing({data:M,column:d,value:P.getValue(M,d),event:R,rect:E,editorRect:I,view:P}),void 0}}}},Nd.BaseItemEditor=function(I,_,o,X){this._data=I,this._column=_,this._master=o,this._editInfo=X},As("BaseItemEditor",G,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var Hb=v.Tab=function(){Ke(Hb,this)};Tn("Tab",wn,{ms_ac:["view","closable","disabled"],_icon:c,_closable:!1,_disabled:!1,setParent:js});var pl=v.Column=function(){Ke(pl,this)};Tn("Column",wn,{_46o:1,ms_ac:["accessType","valueType",gq,qi,xq,Wh,"align",Dl,"sortOrder",wj,"sortable","clickable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:Ld,_sortFunc:c,_sortable:!0,_clickable:!0,setWidth:function(i){16>i&&(i=16);var S=this._width;this._width=i,this.fp(Wh,S,i)},getToolTip:function(z,e){return this.formatValue(e.getValue(z,this))}});var zl=v.Property=function(){Ke(zl,this)};Tn("Property",wn,{_46o:1,ms_ac:["accessType","valueType",qi,xq,"categoryName",Dl,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:c,getToolTip:function(U,J,D){var M=this;return J?M.formatValue(D.getValue(U,M)):D.getPropertyName(M)}}),Nd.AccordionView=function(){var v=this;v._20o={},v._21o=new Vr,v._10o=c,v._9o=c,v._11o=c,v._view=fi(0,v),v.iv()},As("AccordionView",G,{ms_v:1,ms_fire:1,ms_ac:[Wc,pc,"titleHeight",vb,Ne,"titleBackground","selectWidth",Zf,"orientation","separatorColor"],_expandIcon:i.accordionViewExpandIcon,_collapseIcon:i.accordionViewCollapseIcon,_titleHeight:uh,_labelColor:i.accordionViewLabelColor,_labelFont:i.accordionViewLabelFont,_titleBackground:i.accordionViewTitleBackground,_selectBackground:i.accordionViewSelectBackground,_selectWidth:i.accordionViewSelectWidth,_orientation:"v",_separatorColor:i.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(L,T,D,W){var c=this,b=us();if(c._20o[L])throw L+" already exists";b.onmousedown=lg,b.style.cursor=Gq,b.addEventListener(cn?Jr:fj,function(l){lg(l)},!1),b.addEventListener(cn?on:qh,function(m){lg(m),Zi(m)&&(c._10o===L?c.collapse():c.expand(L))},!1),Rf(c._view,b),c._20o[L]={content:T,div:b,canvas:nq(b),icon:W},c._21o.add(L),D&&c.expand(L),c.iv()},remove:function(c){var V=this,z=V._20o[c];z&&(Ye(z.div),delete V._20o[c],V._21o.remove(c),V.iv())},clear:function(){var i=this;i._20o={},i._21o.clear(),i.iv()},isExpanded:function(l){return this._10o===l},expand:function(G){var R=this;R._20o[G]&&R._10o!==G&&(R._10o=G,R.onExpanded(G),R.iv())},onExpanded:function(){},collapse:function(){var e=this;e._10o&&(e.onCollapsed(e._10o),delete e._10o,e.iv())},onCollapsed:function(){},initCanvas:function(g,_,u){ge(g,_,u);var A=Wb(g);return Ch(A,0,0,1),A.clearRect(0,0,_,u),A},drawTitle:function(B,h,N,s,P){var w=this,_=id(P.icon),d=w.isExpanded(h),g=w._titleHeight,O=w._titleBackground,m=w._selectWidth,f=w._separatorColor,o=id(d?w._expandIcon:w._collapseIcon),z=m+4;lo(B,0,0,N,s,O),d&&m&&lo(B,0,0,m,s,w._selectBackground),(d||w._21o.get(w._21o.size()-1)!==h)&&lo(B,0,s-1,N,1,f?f:xg(O)),_&&(de(B,_,z+lc(_)/2,g/2),z+=lc(_)+2),pf(B,h,w.getLabelFont(h),w.getLabelColor(h),z,0,0,g),o&&de(B,o,N-lc(o)/2-4,g/2)},validateImpl:function(){var n=this,B=n._view,U=0,p=0,b=n.getWidth(),u=n.getHeight(),O=n._titleHeight,D=n._21o.size()*O,w=n._11o,N=n._9o;delete n._11o,delete n._9o,n._21o.each(function(q){var A,x,Z=n._20o[q],Q=Z.content,B=n._10o===q;im(n)?(gg(Z.div,U,0,O,u),A=n.initCanvas(Z.canvas,O,u),sj(A,0,u),hb(A,-S),n.drawTitle(A,q,u,O,Z),A.restore(),B?(x=W(0,b-D),Q&&(n._11o=Q,n._9o=Nr(Q),gg(Q,U+O,0,x,u)),U+=O+x):U+=O):(gg(Z.div,0,p,b,O),A=n.initCanvas(Z.canvas,b,O),n.drawTitle(A,q,b,O,Z),A.restore(),B?(x=W(0,u-D),Q&&(n._11o=Q,n._9o=Nr(Q),gg(Q,0,p+O,b,x)),p+=O+x):p+=O)});var r=n._9o;w&&w!==n._11o&&w.endEditing&&w.endEditing(),r&&r!==N&&Rf(B,r),N&&N!==r&&Ye(N)}}),Nd.SplitView=function(n,D,j,s){var X=this,e=X._dividerDiv=us(),y=X._60O=nq(),N=X._61O=nq(),L=y.style,C=N.style;X._view=fi(1,X),Rf(X._view,e),L.msTouchAction=Jo,L.pointerEvents=Jo,L.cursor=Gq,C.msTouchAction=Jo,C.pointerEvents=Jo,C.cursor=Gq,n&&X.setLeftView(n),D&&X.setRightView(D),j&&X.setOrientation(j),s!=c&&X.setPosition(s),X.setStatus($q),new dg(X)},As("SplitView",G,{ms_v:1,ms_fire:1,ms_ac:["continuousLayout","dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_continuousLayout:!1,_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:i.splitViewDividerSize,_dividerBackground:i.splitViewDividerBackground,_dragOpacity:i.splitViewDragOpacity,_toggleIcon:i.splitViewToggleIcon,onPropertyChanged:function(){this.iv()
},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(c,t){var z=this,d=z._position;isNaN(c)||(t||(z._82O=0>c?-1:c>1?1:0),z._position=c,z.fp(xi,d,c))},getLeftView:function(){return this._leftView},setLeftView:function(v){var n=this,w=n._leftView,B=n._view;if(n._leftView!==v){if(w&&w!==n._rightView){var X=Nr(w);X.parentNode===B&&Ye(X)}if(n._leftView=v,v){var M=Nr(v);M.parentNode!==B&&B.insertBefore(M,n._dividerDiv)}n.fp("leftView",w,v)}},getRightView:function(){return this._rightView},setRightView:function(k){var N=this,S=N._rightView,b=N._view;if(N._rightView!==k){if(S&&S!==N._leftView){var H=Nr(S);H.parentNode===b&&Ye(H)}if(N._rightView=k,k){var D=Nr(k);D.parentNode!==b&&b.insertBefore(D,N._dividerDiv)}N.fp("rightView",S,k)}},validateImpl:function(){var s=this,X=s._draggable,B=s._position,u=s.getWidth(),R=s.getHeight(),p=s._dividerSize,P=s._dividerBackground,J=cn?18:8,F=s._dividerDiv,G=s._82O,k=s._60O,d=s._61O,t=s._toggleIcon,b=s._status,o=F.style,m=null,L=cn?20:4,i=t.comps[0];p>=J||0===p?s._coverDiv&&(Ye(s._coverDiv),delete s._coverDiv):s._coverDiv||(s._coverDiv=us(),r&&(s._coverDiv.style.background=en),Rf(F,s._coverDiv)),s._togglable?k.parentNode||(Rf(F,k),Rf(F,d)):(Ye(k),Ye(d));var h=s._coverDiv,$=s._leftView,f=s._rightView;if(im(s)){if(p>u&&(p=u),b===$q)if(1===G)var j=y(B,u),K=W(0,u-p-j);else-1===G?(K=y(-B,u),j=W(0,u-p-K)):(j=T((u-p)*B),K=W(0,u-p-j));else"cl"===b?(j=0,K=W(0,u-p)):"cr"===b&&(K=0,j=W(0,u-p));$&&gg($,0,0,j,R),f&&gg(f,j+p,0,K,R),gg(F,j,0,p,R),s._22o=j,h&&(gg(h,p/2-J/2,0,J,R),h.style.cursor=X?wg:""),F.style.cursor=X?wg:"";var e=F.clientHeight/2,N=F.clientWidth;ge(k,N,N),gg(k,0,e-N-L,N,N),m=Wb(k),Ch(m,0,0,1),i.rotation=-S,co(m,t,0,0,N,N),m.restore(),ge(d,N,N),gg(d,0,e+L,N,N),m=Wb(d),Ch(m,0,0,1),i.rotation=S,co(m,t,0,0,N,N),m.restore()}else{if(p>R&&(p=R),b===$q)if(1===G)var E=y(B,R),q=W(0,R-p-E);else-1===G?(q=y(-B,R),E=W(0,R-p-q)):(E=T((R-p)*B),q=W(0,R-p-E));else"cl"===b?(E=0,q=W(0,R-p)):"cr"===b&&(q=0,E=W(0,R-p));$&&gg($,0,0,u,E),f&&gg(f,0,E+p,u,q),gg(F,0,E,u,p),s._22o=E,h&&(gg(h,0,p/2-J/2,u,J),h.style.cursor=X?rg:""),o.cursor=X?rg:"";var C=F.clientWidth/2,N=F.clientHeight;ge(k,N,N),gg(k,C-N-L,0,N,N),m=Wb(k),Ch(m,0,0,1),i.rotation=0,co(m,t,0,0,N,N),m.restore(),ge(d,N,N),gg(d,C+L,0,N,N),m=Wb(d),Ch(m,0,0,1),i.rotation=I,co(m,t,0,0,N,N),m.restore()}o.background=P}});var dg=function(n){this.sv=n,this.addListeners()};hd(dg,G,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(a){var g=this,V=g.sv,A=V._dividerDiv,h=V._60O,o=V._61O,d=V._status,y=a.target;if(y===h)d===$q?V.setStatus("cl"):"cr"===d&&V.setStatus($q);else if(y===o)d===$q?V.setStatus("cr"):"cl"===d&&V.setStatus($q);else if(sn(a)&&(y===A||y===V._coverDiv)&&(lg(a),V.isDraggable())){V.getLeftView(),V.getRightView();var i=g.maskDiv=us();if(i.style.left=0,i.style.top=0,i.style.width=V.getWidth()+"px",i.style.height=V.getHeight()+"px",V.getView().appendChild(i),!V.isContinuousLayout()){var t=g.resizeDiv=us();t.style.left=A.style.left,t.style.top=A.style.top,t.style.width=A.style.width,t.style.height=A.style.height,t.style.opacity=V.getDragOpacity(),t.style.background=V.getDividerBackground(),Rf(g.getView(),t)}g._lastAbsPosition=V._22o,g._86o=im(V)?_c(a).x:_c(a).y,Ql(g,a)}},handleWindowTouchMove:function(U){sn(U)&&this.update(U,this.sv.isContinuousLayout())},handleWindowTouchEnd:function(v){var E=this;E.update(v,!0),E.sv.setStatus($q),E.maskDiv&&Ye(E.maskDiv),E.resizeDiv&&Ye(E.resizeDiv),E.maskDiv=E.resizeDiv=c},handle_mousedown:function($){Zi($)&&this.handle_touchstart($)},handleWindowMouseMove:function(r){this.handleWindowTouchMove(r)},handleWindowMouseUp:function(I){this.handleWindowTouchEnd(I)},update:function(p,q){var B=this,L=B.sv,k=im(L)?L.getWidth():L.getHeight(),F=L._dividerSize,P=B._lastAbsPosition-B._86o;im(L)?(P+=_c(p).x,P>k-F&&(P=k-F),0>P&&(P=0),B.resizeDiv&&(B.resizeDiv.style.left=P+xc)):(P+=_c(p).y,P>k-F&&(P=k-F),0>P&&(P=0),B.resizeDiv&&(B.resizeDiv.style.top=P+xc)),q&&k!==F&&(1===L._82O?L.setPosition(P,1):-1===L._82O?L.setPosition(P-k+F,1):L.setPosition(P/(k-F),1))}}),Nd.TabView=function(){var _=this,O=_._view=fi(1,_),l=_._91O=us(1),S=_._tabModel=new pm,Z=S.sm(),H=_.invalidate;_._7o=new Vr,_._canvas=nq(l),Rf(O,l),Rf(O,_._92O=us(1)),Z.setSelectionMode(Hh),Z.ms(H,_),S.mm(H,_),S.md(H,_),S.mh(H,_),new Ah(_),_.iv()},As("TabView",G,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",vb,Ne,"tabBackground","selectWidth",Zf,"moveBackground","insertColor"],_tabPosition:dq,_tabHeight:uh,_tabGap:i.tabViewTabGap,_labelColor:i.tabViewLabelColor,_labelFont:i.tabViewLabelFont,_tabBackground:i.tabViewTabBackground,_selectWidth:i.tabViewSelectWidth,_selectBackground:i.tabViewSelectBackground,_moveBackground:i.tabViewMoveBackground,_insertColor:i.tabViewInsertColor,_movable:!0,getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(B,o,I){var z=new Hb,w=this._tabModel;return z.setName(B),z.setView(o),w.add(z),I&&w.sm().ss(z),z},getLabel:function(V){return V.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(R){this._23o=R,this.iv()},get:function(u){var Q=this,m=Q._tabModel;if(ps(u))return m._roots.get(u);if(Ul(u)){var g;return m.each(function(X){u===Q.getLabel(X)&&(g=X)}),g}return u instanceof Hb?u:c},select:function(j){this._tabModel.sm().ss(this.get(j))},remove:function(I){var e=this;if(I=e.get(I)){var E=e._tabModel,D=E._roots.indexOf(I);e._tabModel.remove(I),e._12Q(--D)}},getCurrentTab:function(){return this._8o},hideTabView:function(O,c){c.parentNode===this._92O&&(Po(c)?(c.style.display=gd,c._tab_=O):Ye(c),Li())},showTabView:function(V,C){Po(C)&&(C.style.display="block",C._tab_=V),C.parentNode!==this._92O&&(Rf(this._92O,C),Li())},_24o:function(){var J,b=this,d=b._8o,v=b._9o,l=b._tabModel.sm().ld();l&&(J=Nr(l.getView())),J!==v&&(v&&(d.getView()&&d.getView().endEditing&&d.getView().endEditing(),b.hideTabView(d,v)),J&&b.showTabView(l,J)),b._8o=l,b._9o=J,d!==l&&b.onTabChanged(d,l)},onTabClosing:function(){return!0},onTabChanged:function(){},onTabClosed:function(t,_){this._12Q(--_)},_12Q:function(H){var s=this,d=s._tabModel,l=d.size();if(l&&!d.sm().ld()){H==c&&(H=0),H>=l&&(H=l-1),0>H&&(H=0);for(var o=H;o>=0;o--){var N=s.get(o);if(!N.isDisabled())return s.select(N),N}for(o=H+1;l>o;o++)if(N=s.get(o),!N.isDisabled())return s.select(N),N}},getTabWidth:function(o){var U=4,X=id(o.getIcon());X&&(U+=lc(X,o)+4);var R=this.getLabel(o);return R&&(U+=Zh(this.getLabelFont(o),R).width+4),o.isClosable()&&(U+=10),U},drawTab:function(o,C,B,e,r,W,_){var E,V=this,D=V._tabPosition,Z=B+4,b=V._selectWidth,q=id(C.getIcon()),c=C.isDisabled(),i=V.getLabelColor(C),a=V.getLabelFont(C),d=V.getLabel(C),k=V._selectBackground,v=D===rp+"-vertical",Q=D===il+"-vertical";(v||Q)&&(Z=e+4),c&&(o.globalAlpha=$k),lo(o,B,e,r,W,_),C===V._8o&&b&&(D===dq?lo(o,B,e+W-b,r,b,k):D===rp?lo(o,B+r-b,e,b,W,k):D===il?lo(o,B,e,b,W,k):v?lo(o,B+r-b,e,b,W,k):Q?lo(o,B,e,b,W,k):lo(o,B,e,r,b,k));var s=r/2;if(v&&(sj(o,s,e+W/2),hb(o,I),sj(o,-s,-e-W/2)),q){var h=sf(q,C),w=lc(q,C);if(v||Q){var T=B+r/2,R=Z+h/2;sj(o,T,R),hb(o,S),sj(o,-T,-R),de(o,q,B+r/2,Z+h/2,C,V),sj(o,T,R),hb(o,-S),sj(o,-T,-R),Z+=h+4}else de(o,q,Z+w/2,e+W/2,C,V),Z+=w+4}return v||Q?(sj(o,r/2,Z+r/2),hb(o,S),sj(o,-r/2,-Z-r/2),pf(o,d,a,i,B,Z,W,r),sj(o,r/2,Z+r/2),hb(o,-S),sj(o,-r/2,-Z-r/2)):pf(o,d,a,i,Z,e,r,W),v&&(sj(o,s,e+W/2),hb(o,-I),sj(o,-s,-e-W/2)),C.isClosable()&&(E=Q?{x:B+r-12,y:e+W-12,width:12,height:12}:{x:B+r-12,y:e+2,width:12,height:12},this.drawCloseIcon(C,o,i,E)),c&&(o.globalAlpha=1),E},drawCloseIcon:function(t,T,f,_){var F=_.x,I=_.y;T.strokeStyle=f,T.lineWidth=1,T.beginPath(),T.moveTo(F+2,I+8),T.lineTo(F+8,I+2),T.moveTo(F+8,I+8),T.lineTo(F+2,I+2),T.stroke()},validateImpl:function(){var e=this;e._24o();var C,B=e._canvas,t=e._tabPosition,c=e._91O,T=e._92O,$=e._tabModel,n=e.getWidth(),k=e.getHeight(),X=e._tabHeight,V=e._7o,w=e._tabGap,h=t===dq,D=t===rp,S=t===il,P=t===rp+"-vertical",p=t===il+"-vertical",G=e._23o,l=0;if((D||S)&&$._roots.each(function(N){l=W(e.getTabWidth(N),l)}),h?(gg(c,0,0,n,X),C={x:0,y:X,width:n,height:W(0,k-X)}):D?(gg(c,0,0,l,k),C={x:l,y:0,width:W(0,n-l),height:k}):S?(gg(c,n-l,0,l,k),C={x:0,y:0,width:W(0,n-l),height:k}):P?(gg(c,0,0,X,k),C={x:X,y:0,width:W(0,n-X),height:k}):p?(gg(c,n-X,0,X,k),C={x:0,y:0,width:W(0,n-X),height:k}):(gg(c,0,k-X,n,X),C={x:0,y:0,width:n,height:W(0,k-X)}),gg(T,C),P||p){e._9o&&(C.x=0,gg(e._8o.getView(),C)),ge(B,X,k);var Y=Wb(B),A=0;if(Ch(Y,0,e.ty(),1),Y.clearRect(0,0,X,k),V.clear(),$._roots.each(function(q){var F,k=e.getTabWidth(q);G&&G.tab===q||(F=e.drawTab(Y,q,0,A,X,k,e._tabBackground)),V.add({_75o:F,tab:q,startY:A,endY:A+k,height:k}),A+=k+w}),e._23Q=W(0,A-w),G){var H=G.position;e.drawTab(Y,G.tab,0,G.startY,X,G.height,e._moveBackground),lo(Y,0,H,X,1,e._insertColor)}Y.restore(),e.ty(e.ty())}else if(D||S){e._9o&&(C.x=0,gg(e._8o.getView(),C)),ge(B,l,k);var Y=Wb(B),A=0;if(Ch(Y,0,e.ty(),1),Y.clearRect(0,0,l,k),V.clear(),$._roots.each(function(j){var I;G&&G.tab===j||(I=e.drawTab(Y,j,0,A,l,X,e._tabBackground)),V.add({_75o:I,tab:j,startY:A,endY:A+X,height:X}),A+=X+w}),e._23Q=W(0,A-w),G){var H=G.position;e.drawTab(Y,G.tab,0,G.startY,l,G.height,e._moveBackground),lo(Y,0,H,l,1,e._insertColor)}Y.restore(),e.ty(e.ty())}else{e._9o&&(C.y=0,gg(e._8o.getView(),C)),ge(B,n,X);var Y=Wb(B),u=0;if(Ch(Y,e.tx(),0,1),Y.clearRect(0,0,n,X),V.clear(),$._roots.each(function(a){var h,o=e.getTabWidth(a);G&&G.tab===a||(h=e.drawTab(Y,a,u,0,o,X,e._tabBackground)),V.add({_75o:h,tab:a,startX:u,endX:u+o,width:o}),u+=o+w}),e._64I=W(0,u-w),G){var H=G.position;e.drawTab(Y,G.tab,G.startX,0,G.width,X,e._moveBackground),Ue(Y,e._insertColor,H,0,X)}Y.restore(),e.tx(e.tx())}for(var s=[],_=T.children,R=0;R<_.length;R++){var F=_[R],M=F._tab_;M&&!$.contains(M)&&s.push(F)}s.forEach(function(D){T.removeChild(D)})}});var Ah=function(C){this.tv=C,this.addListeners()};hd(Ah,G,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(A){this.handleScroll(A,10*(A.wheelDelta/40))},handle_DOMMouseScroll:function(h){this.handleScroll(h,10*-h.detail)},handleScroll:function(t,S){lg(t);var k=this.tv,d=k._tabPosition;!k._40o()||d!==dq&&d!==Cb||k.tx(this.tv.tx()+S),!k._41o()||d!==rp&&d!==il&&d!==rp+"-vertical"&&d!==il+"-vertical"||k.ty(this.tv.ty()+S)},_8Q:function(Q){var X,S,z=this.tv,k=z._tabPosition,v=z._7o;if(k===dq||k===Cb){var y=z.lp(Q).x;for(X=0;X<v.size();X++)if(S=v.get(X),S.startX<=y&&y<=S.endX)return S}else if(k===rp||k===il||k===rp+"-vertical"||k===il+"-vertical"){var I=z.lp(Q).y;for(X=0;X<v.size();X++)if(S=v.get(X),S.startY<=I&&I<=S.endY)return S}return c},isClickable:function(k){var Z=this.tv,o=Z._tabPosition,a=this._73o=this._8Q(k);return!Z._40o()||o!==dq&&o!==Cb?!Z._41o()||o!==rp&&o!==il&&o!==rp+"-vertical"&&o!==il+"-vertical"?a&&(!a.tab.isDisabled()||Z.isMovable()):!0:!0},handle_mousemove:function(A){var d=this;nm?d._74o=d._8Q(A):d.getView().style.cursor=d.isClickable(A)?Gq:""},handle_mousedown:function(O){this.handle_mousemove(O),this.handle_touchstart(O)},handle_touchstart:function(B){var E=this,Z=E.tv,r=Z._tabPosition;lg(B),E.isClickable(B)&&(r===dq||r===Cb?(E.x=_c(B).x,E.lp=Z.lp(B),E.tx=Z.tx()):(E.y=_c(B).y,E.lp=Z.lp(B),E.ty=Z.ty()),Ql(E,B))},handleWindowMouseMove:function(v){this.handleWindowTouchMove(v)},handleWindowTouchMove:function(A){var p,E=this,d=E.tv,Z=d._tabPosition,I=E._73o;if(Z===dq||Z===Cb){if(p=_c(A).x-E.x,!E._25o&&!E.moving&&$(p)>2&&(d._40o()&&!Og(A)?E._25o=1:I&&d.isMovable()&&(E.moving=1)),E._25o)d.tx(E.tx+p);else if(E.moving){var P=E.lp.x+p,X=d._tabGap/2;d._7o.each(function(v){var m=v.endX,M=P-v.startX<m-P;P>=v.startX&&m>=P&&d._7Q({tab:I.tab,startX:I.startX+p,width:I.width,front:M,insertTab:v.tab,position:M?W(0,v.startX-X):y(d._64I,m+X)})})}}else if(p=_c(A).y-E.y,!E._25o&&!E.moving&&$(p)>2&&(d._41o()&&!Og(A)?E._25o=1:I&&d.isMovable()&&(E.moving=1)),E._25o)d.ty(E.ty+p);else if(E.moving){var R=E.lp.y+p,X=d._tabGap/2;d._7o.each(function(K){var B=K.endY,T=R-K.startY<B-R;R>=K.startY&&B>=R&&d._7Q({tab:I.tab,startY:I.startY+p,height:I.height,front:T,insertTab:K.tab,position:T?W(0,K.startY-X):y(d._23Q,B+X)})})}},handleWindowMouseUp:function(b){this.handleWindowTouchEnd(b)},handleWindowTouchEnd:function(){var j=this,U=j.tv,I=U._tabPosition,L=U.getTabModel(),S=L._roots,u=j._73o;if(j.moving){var T=U._23o;if(T&&T.insertTab!==T.tab){var A=T.tab,R=S.remove(A),o=S.indexOf(T.insertTab);o>=0&&(T.front||o++,o<=S.size()&&(S.add(A,o),L._38I(A,R,o)))}U._7Q(c),delete j.moving}else if(!j._25o&&u){A=u.tab;var P=j._74o;if(!P||P.tab===A)if(!A.isDisabled()&&nl(u._75o,j.lp)){var s=function(){var w=S.indexOf(A);L.remove(A),U.onTabClosed(A,w)};U.onTabClosing(A,s)&&s()}else A.isDisabled()||U._8o===A||L.sm().ss(A)}j._25o=j._73o=j._74o=I===dq||I===Cb?j.x=j.lp=j.tx=c:j.y=j.lp=j.ty=c}}),Nd.PropertyView=function(f){var T=this;T._view=fi(1,T),T._canvas=nq(T._view),Rf(T._view,T._79O=us()),T._rows=new Vr,T._28o=new Vr,T._26o={},T._26Q={};var v=T._propertyModel=new pm,r=T.ivm;v.mm(r,T),v.md(r,T),v.mh(r,T),T.dm(f?f:new pm),new Ih(T)},As("PropertyView",G,{ms_ac:[vb,vc,Ne,qi,xq,"categorizable",rd,wj,pd,Wc,pc,ij,Zb,ml,"selectRowIndex",Zf,"background",qo,Il,gj,ui,Hc],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:ln,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:_b,_background:i.propertyViewBackground,_expandIcon:i.propertyViewExpandIcon,_collapseIcon:i.propertyViewCollapseIcon,_scrollBarColor:tm,_scrollBarSize:Lj,_autoHideScrollBar:Gc,_selectBackground:i.propertyViewSelectBackground,_rowHeight:bg,_rowLineVisible:i.propertyViewRowLineVisible,_rowLineColor:i.propertyViewRowLineColor,_10I:.5,_columnLineVisible:i.propertyViewColumnLineVisible,_columnLineColor:i.propertyViewColumnLineColor,_labelColor:i.propertyViewLabelColor,_labelSelectColor:i.propertyViewLabelSelectColor,_labelFont:i.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(V){0>V&&(V=0),V>1&&(V=1);var $=this,s=$._10I;$._10I=V,$.fp("columnPosition",s,V)},getPropertyName:function(c){return c.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(u,t,K){return K===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(h,o){return o===this._selectRowIndex?this._labelSelectColor:h.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(I){var v=this.getHeight()-this._59I;return v>I&&(I=v),I>0?0:T(I)},isExpanded:function(d){if(!d)return!0;var f=this._26o[d];return f?f.isExpanded:!(this._26Q[d]===!1)},toggle:function(K){var h=this;h.isExpanded(K)?h.collapse(K):h.expand(K)},expandAll:function(){this.validate();for(var w in this._26o)this.expand(w)},expand:function(k){if(k&&k!==gd){var P=this,i=P._26o[k];i&&!i.isExpanded&&(i.isExpanded=!0,P.onExpanded(k),P.ivm())}},onExpanded:function(){},collapseAll:function(){this.validate();for(var n in this._26o)this.collapse(n)},collapse:function(I){if(I&&I!==gd){var w=this,c=w._26o[I];c&&c.isExpanded&&(c.isExpanded=!1,w.onCollapsed(I),w.ivm())}},onCollapsed:function(){},getCategoryName:function(B){if(!this.isCategorizable())return gd;var u=B.getCategoryName();return u?u:gd},getPropertyModel:function(){return this._propertyModel},setDataModel:function(w){var Q=this,R=Q._dataModel;R!==w&&(R&&(R.umd(Q.handlePropertyChange,Q),Q._selectionModel||R.sm().ums(Q.ivm,Q)),Q._dataModel=w,w.md(Q.handlePropertyChange,Q),Q._selectionModel?Q._selectionModel._21I(w):w.sm().ms(Q.ivm,Q),Q.fp(Nh,R,w))},isVisible:function(E){return this._visibleFunc?this._visibleFunc(E):!0},onPropertyChanged:function(I){var F=this,q=I.property;ys[q]?F.ivm():F.iv(),q===vp&&F._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:Am},handlePropertyChange:function(i){this._27o===i.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var b=this;b._96I||(b.setSelectRowIndex(-1),b._96I=1,b.iv())},redraw:function(){this.iv()},validateModel:function(){var f=this,H=f._rows,a=f._28o,q={},Y=new Vr,n=f._27o;f.updateCurrentData(),n!==f._27o&&f.endEditing(),H.clear(),a.clear(),f.getRawProperties().each(function(F){if(f.isVisible(F)){Y.add(F);var c=f.getCategoryName(F);q[c]||(a.add(c,c===gd?0:M),q[c]={isExpanded:f.isExpanded(c),properties:new Vr})}}),f._sortFunc&&Y.sort(f._sortFunc);for(var i in f._26o)f._26Q[i]=f.isExpanded(i);f._26o=q,a.each(function(C){C!==gd&&H.add(C);var $=q[C];$.isExpanded&&Y.each(function(z){f.getCategoryName(z)===C&&($.properties.add(z),H.add({property:z,data:f._27o}))},f)})},validateImpl:function(){var p=this;p._76o(),p._96I&&(p.validateModel(),delete p._96I);var F=p._canvas,b=p.getWidth(),U=p.getHeight(),j=-p.ty(),L=p._rowHeight,K=p._indent,Z=b-K,A=p._rows,q=A.size(),u=p._9I=K+Z*p._10I,W=p._59I=q*L;ge(F,b,U),p._29I={x:0,y:j,width:b,height:U},p._31I=e(j/L),p._14I=x((j+U)/L),p._31I<0&&(p._31I=0),p._14I>q&&(p._14I=q);var T,z=Wb(F),k=p._background;Ch(z,0,-j,1),z.beginPath(),z.rect(0,j,b,U),z.clip(),z.clearRect(0,j,b,U),p._93db(z),k&&lo(z,0,0,K,W,k);for(var f=p._31I;f<p._14I;f++){var H=A.get(f),j=L*f;if(Ul(H))k&&lo(z,K,j,Z,L,k),T=id(p.isExpanded(H)?p._expandIcon:p._collapseIcon),T&&Ob(z,T,cs,0,j,K,L),z.save(),z.beginPath(),z.rect(K,j,Z,L),z.clip(),p.drawCategoryName(z,H,f,K,j,Z,L),z.restore();else{var r=H.property,m=H.data,T=id(r.getIcon()),E=p._selectRowIndex===f?p.getSelectBackground():c;if(T&&Ob(z,T,cs,0,j,K,L),E&&lo(z,K,j,Z,L,E),z.save(),z.beginPath(),z.rect(K,j,u-K,L),z.clip(),p.drawPropertyName(z,r,f,K,j,u-K,L),z.restore(),!p.isEditing(m,r)){var o=u+1,l=b-u-1;z.save(),z.beginPath(),z.rect(o,j,l,L),z.clip(),p._87o(p.drawPropertyValue(z,r,p.getValue(m,r),f,o,j,l,L,m),f,o,j,l,L),z.restore()}}p._rowLineVisible&&lo(z,K,j+L-1,Z,1,p._rowLineColor)}p._columnLineVisible&&(lo(z,u,0,1,W,p._columnLineColor),lo(z,b-1,0,1,W)),p._92db(z),p._93I(),z.restore(),p.ty(p.ty())},drawCategoryName:function(l,J,b,A,d,K,c){pf(l,J,this.getCategoryFont(J),this.getCategoryColor(J),A,d,K,c)},drawPropertyName:function(Q,M,R,T,g,D,J){return M.drawPropertyName?(M.drawPropertyName(Q,M,R,T,g,D,J,this),void 0):(pf(Q,this.getPropertyName(M),this.getPropertyFont(M,R),this.getPropertyColor(M,R),T,g,D,J),void 0)},drawPropertyValue:function(O,J,z,q,Q,_,v,H,b){return J.drawPropertyValue?J.drawPropertyValue(O,J,z,q,Q,_,v,H,b,this):(yk(O,z,J,this.getLabelFont(J,z,q),this.getLabelColor(J,z,q),Q,_,v,H,b,this),void 0)},isPropertyEditable:function(L){return L.isEditable()&&this.isEditable()},setProperties:function(j){this._propertyModel.clear(),this.addProperties(j)},addProperties:function(e){if(e){var c=this._propertyModel;e.forEach(function(A){if(!(A instanceof zl)){var a=Nm(A.className);A=fd(a?a:zl,A)}c.add(A)})}},getRowIndexAt:function(k){var q=this,w=e(q.lp(k).y/q._rowHeight);return w>=0&&w<q._rows.size()?w:-1},getPropertyAt:function(q){var Z=this,U=Z.getRowIndexAt(q);return U>=0?Z._rows.get(U).property:c},getToolTip:function(G){var w=this,Z=w.getPropertyAt(G),p=w._27o;return Z&&p?Z.getToolTip(p,w._9I<w.lp(G).x,w):c}});var Ih=function(U){this.pv=U,this.addListeners()};hd(Ih,G,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(x){this.getView().style.cursor=x},clear:function(){var r=this;r._62O=r.cp=r.ty=r.p=c,r.setCursor(Yp)},handle_mousedown:function(i){this.handle_touchstart(i)},handle_touchstart:function(g){var t=this,y=t.pv;lg(g),y.setFocus(g)&&(Zi(g)?(t.cp=_c(g),t.ty=y.ty(),t.p=y.getColumnPosition(),t.handle_touchmove(g)):y.setSelectRowIndex(y.getRowIndexAt(g)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(V){this.handle_touchend(V)},handle_touchend:function(i){var K=this;if(K.cp&&!K._62O){var o=K.pv,X=o.lp(i),S=X.x,W=X.y,T=o._indent,b=o.getRowIndexAt(i),x=o._9I;if(b>=0){var m=o._rowHeight,B=m*b,y=o._rows.get(b),H=y.property;if(Ul(y))id(o.isExpanded(y)?o._expandIcon:o._collapseIcon)&&S>=0&&T>=S&&W>=B&&B+m>=W?o.toggle(y):pn(i)&&o.toggle(y);else if(S>x&&o.isPropertyEditable(H,i)){var L={x:x+1,y:B,width:o.getWidth()-x-1,height:m},A={x:L.x+o.tx(),y:L.y+o.ty(),width:L.width,height:L.height},P=0,Q=o._29I;L.y<Q.y?P=L.y-Q.y:L.y+m>Q.y+Q.height&&(P=L.y+m-Q.y-Q.height),P&&(o.ty(o.ty()-P),A.y-=P),o.beginEditing({data:y.data,property:H,value:o.getValue(y.data,H),event:i,rect:L,editorRect:A,view:o})}}o.setSelectRowIndex(b)}K.clear()},handleWindowMouseMove:function(w){this.handleWindowTouchMove(w)},handleWindowTouchMove:function(N){var Z=this,z=Z.pv,J=Z.ty,A=Z.cp,n=_c(N),p=Z._62O;if("p"===p)z.setTranslateY(J+n.y-A.y);else if("c"===p){var w=z.getWidth()-z._indent;if(w>16){var b=Z.p-(A.x-n.x)/w,g=16/w;g>b&&(b=g),b>1-g&&(b=1-g),z.setColumnPosition(b)}}else"s"===p&&z.setTranslateY(J+(A.y-n.y)*z._59I/z._29I.height)},handle_mousemove:function(v){this.handle_touchmove(v)},handle_touchmove:function(W){if(!nm&&Zi(W)){var v=this,Q=v.pv,k=$(Q.lp(W).x-Q._9I)<=(cn?8:3);v.cp?v._62O||(k?(v._62O="c",Ql(v)):$(_c(W).y-v.cp.y)>=2&&(v._62O=v.isV(W)?"s":"p",Ql(v))):(k?v.setCursor(wg):v.setCursor(Yp),v.isV(W)&&Q._43o())}},isV:function(n){var c=this.pv,O=c._29I;return c._41o()&&O.x+O.width-c.lp(n).x<Vd},handle_mousewheel:function(_){this.handleScroll(_,_.wheelDelta/40)},handle_DOMMouseScroll:function(x){2===x.axis&&this.handleScroll(x,-x.detail)},handleScroll:function(X,V){var f=this.pv;lg(X),f.endEditing(),f.translate(0,V*f.getRowHeight())},handle_keydown:function(D){var g=this.pv,Z=g._rows.size(),T=g._selectRowIndex+(np(D)?-1:1);(np(D)||Ic(D))&&(0>T&&(T=0),T>=Z&&(T=Z-1),g.setSelectRowIndex(T))}}),Nd.ListView=function(_){this._5o(_),new Gr(this)},As("ListView",G,{ms_ac:[vb,vc,Ne,qo,rd,Il,gj,wj,pd,ij,Zb,ml,pp,Zf],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:_b,_rowHeight:bg,_rowLineVisible:i.listViewRowLineVisible,_rowLineColor:i.listViewRowLineColor,_scrollBarColor:tm,_scrollBarSize:Lj,_autoMakeVisible:rh,_autoHideScrollBar:Gc,_selectBackground:i.listViewSelectBackground,_labelColor:i.listViewLabelColor,_labelSelectColor:i.listViewLabelSelectColor,_labelFont:i.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(f){var d=this,y=d._checkMode;d._checkMode=f,d.fp(Ie,y,f)},drawRow:function(q,U,p,P,T,X,r){var o=this,L=0,j=o._indent,u=o.getIconWidth(U);o.drawRowBackground(q,U,p,P,T,X,r),o._checkMode&&(de(q,o.getCheckIcon(U),L+j/2,T+r/2,U,o),L+=j),o.drawIcon(q,U,L,T,u,r),o.drawLabel(q,U,L+u,T,r)}});var Gr=function(M){this.list=M,this._lastSelectDataTime=Wr(),this.addListeners()};hd(Gr,G,{ms_listener:1,getView:function(){return this.list._view},clear:function(H){var S=this,N=S.list;H&&"d"===S._62O&&!S.dragCancel&&N.handleDragAndDrop(H,"end"),N.draggingData&&(N.draggingData=null,N.redraw()),S.dragCancel=S._62O=S._isV=S._isH=S.cp=S.tx=S.ty=c},handle_mousedown:function(Y){this.handle_touchstart(Y)},handle_touchstart:function(Q){var V=this,h=V.list;if(lg(Q),h.setFocus(Q)){var C=h.getDataAt(Q);V.cp=_c(Q),V.tx=h.tx(),V.ty=h.ty(),Zi(Q)?C&&h.handleDragAndDrop&&!V.isV(Q)&&!V.isH(Q)&&(h.draggingData=C,h.redraw(),h.handleDragAndDrop(Q,"prepare")):(C&&V._33o(Q,C),V.clear(Q))}},handleWindowMouseUp:function(C){this.clear(C)},handleWindowTouchEnd:function(b){this.clear(b)},handle_mouseup:function(k){this.handle_touchend(k)},handle_touchend:function(R){var W=this,V=W.list;if(!W._isV&&!W._isH&&W.cp&&!W._62O){var S=V.getDataAt(R);S?(V.isCheckMode()?W._34o(R,S):W._33o(R,S),pn(R)?V.onDataDoubleClicked(S,R):V.onDataClicked(S,R)):V.handleBackgroundClick(R)}W.clear(R)},handleWindowMouseMove:function(f){this.handleWindowTouchMove(f)},handleWindowTouchMove:function(X){var t=this,U=t.list,y=t._62O,V=t.tx,N=t.ty,K=t.cp,v=_c(X),o=U._29I;"p"===y?U.setTranslate(V+v.x-K.x,N+v.y-K.y):"v"===y?U.ty(N+(K.y-v.y)*U._59I/o.height):"h"===y?U.tx(V+(K.x-v.x)*U._91I/o.width):"d"===y&&(t.dragCancel||U.handleDragAndDrop(X,"between"))},handle_mousemove:function(L){this.handle_touchmove(L)},handle_touchmove:function(g){if(!nm&&Zi(g)){var J=this,S=J.list;if(J._isV=J.isV(g),J._isH=J.isH(g),J.cp){if(!J._62O){if(ig(_c(g),J.cp)<2)return;J._isV?J._62O="v":J._isH?J._62O="h":S.draggingData&&!this.dragCancel?(J._62O="d",S.handleDragAndDrop(g,"begin")):J._62O="p",J._62O&&"d"!==J._62O&&S.draggingData&&(S.draggingData=null,S.redraw()),Ql(J)}}else J._isV&&S._43o(),J._isH&&S._42o()}},isV:function(D){var b=this.list,x=b._29I;return b._41o()&&x.x+x.width-b.lp(D).x<Vd},isH:function(k){var O=this.list,V=O._29I;return O._40o()&&V.y+V.height-O.lp(k).y<Vd},handle_mousewheel:function(q){this.handleScroll(q,q.wheelDelta/40,q.wheelDelta!==q.wheelDeltaX)},handle_DOMMouseScroll:function(d){this.handleScroll(d,-d.detail,1)},handleScroll:function(q,B,N){var v=this.list;lg(q),v.endEditing&&v.endEditing(),N&&v._41o()?v.translate(0,B*v.getRowHeight()):v._40o()&&v.translate(10*B,0)},handle_keydown:function(D){if(!i.isInput(D.target)){var o,I=this.list,W=I.sm(),d=I._rows,k=d.size();if(Fj(D))I.selectAll();else if(Mf(D))I.handleDelete&&I.handleDelete(D);else if($j(D))"d"!==this._62O||this.dragCancel||(I.handleDragAndDrop(D,"cancel"),this.dragCancel=!0);else if(Qj(D))I.isCheckMode()&&(o=I.getFocusData(),o&&I.checkData(o));else if(np(D)||Ic(D)){var r=I.isCheckMode();if(o=r?I.getFocusData():W.ld()){var s=I.getRowIndex(o);s>=0&&(np(D)?0!==s&&(o=d.get(s-1),r?I.setFocusData(o):W.ss(o)):s!==k-1&&(o=d.get(s+1),r?I.setFocusData(o):W.ss(o)))}else k>0&&(o=d.get(0),r?I.setFocusData(o):W.ss(o))}}},_34o:function(x,i){var u=this.list,y=u.lp(x).x;return y>=0&&y<=u._indent?(u.checkData(i),void 0):(u.setFocusData(i),void 0)},_33o:function(C,w){var q=this.list,r=q.sm(),$=r.ld();if(Og(C))q.isSelected(w)?r.rs(w):r.as(w);else if(Of(C))if($)for(var I=q.getRowIndex($),R=q.getRowIndex(w);I!==R;)I+=R>I?1:-1,r.as(q._rows.get(I));else r.ss(w);else if(Zi(C)){var W=Wr();if(r.contains(w)){var n=W-this._lastSelectDataTime;q.handleDataDoubleSelect&&n>500&&1500>n&&q.handleDataDoubleSelect(C,w)}r.ss(w),this._lastSelectDataTime=W}else r.contains(w)||r.ss(w)}}),Nd.TreeView=function(t){var z=this;z._35o(),z._5o(t),new Vm(z)},As("TreeView",G,{ms_ac:[vb,vc,Ne,"rootVisible",Ie,"rootData",wj,pd,ij,Zb,ml,rd,qo,Il,gj,Wc,pc,pp,Zf,"loader","doubleClickToToggle"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:c,_indent:_b,_rowHeight:bg,_rowLineVisible:i.treeViewRowLineVisible,_rowLineColor:i.treeViewRowLineColor,_scrollBarColor:tm,_scrollBarSize:Lj,_autoHideScrollBar:Gc,_expandIcon:i.treeViewExpandIcon,_collapseIcon:i.treeViewCollapseIcon,_autoMakeVisible:rh,_selectBackground:i.treeViewSelectBackground,_labelColor:i.treeViewLabelColor,_labelSelectColor:i.treeViewLabelSelectColor,_labelFont:i.treeViewLabelFont,_doubleClickToToggle:i.treeViewDoubleClickToToggle,drawRow:function(h,Z,k,m,l,T,G){var b=this;b.drawRowBackground(h,Z,k,m,l,T,G),b._97I(h,Z,k,0,l,T,G)},isOnToggleIcon:function(f){var Q=this.getDataAt(f);if(Q){var B=this.getIndent(),a=this.lp(f).x;if(id(this.getToggleIcon(Q))){var e=B*this.getLevel(Q);if(a>=e&&e+B>=a)return!0}}return!1}});var Vm=function(i){Ke(Vm,this,[i])};hd(Vm,Gr,{toggle:function(x,N,K,$){var A=this.list,l=A.lp(x).x;if(id(A.getToggleIcon(N))){var S=K*$;if(l>=S&&S+K>=l)return A.toggle(N),!0}return A.isDoubleClickToToggle()&&pn(x)?(A.toggle(N),!0):!1},_34o:function(s,h){var Y=this.list,W=Y.lp(s).x,G=Y._levelMap[h._id],O=Y._indent,M=O*(G+1);return W>=M&&M+O>=W?(Y.checkData(h),void 0):(this.toggle(s,h,O,G)||Y.setFocusData(h),void 0)},_33o:function(I,s){var F=this,P=F.list;F.toggle(I,s,P._indent,P.getLevel(s))||Vm.superClass._33o.call(F,I,s)},handle_keydown:function(E){if(gc(E)||Ag(E)){var G=this.list,h=G._rows,x=G.isCheckMode(),n=G.sm(),N=x?G.getFocusData():n.ld();N?N.hasChildren()&&(gc(E)?G.collapse(N):G.expand(N)):h.size()>0&&(N=h.get(0),x?G.setFocusData(N):n.ss(N))}else Vm.superClass.handle_keydown.call(this,E)}});var pr=Nd.TableView=function(O){this._98I(),this._5o(O),new jk(this)};As("TableView",G,{ms_ac:[vb,vc,Ne,"sortMode",qi,xq,qo,Il,gj,ui,Hc,"sortColumn",wj,pd,ij,Zb,ml,pp,Zf],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:Fd,_editable:!0,_batchEditable:!1,_rowHeight:bg,_rowLineVisible:i.tableViewRowLineVisible,_rowLineColor:i.tableViewRowLineColor,_columnLineVisible:i.tableViewColumnLineVisible,_columnLineColor:i.tableViewColumnLineColor,_scrollBarColor:tm,_scrollBarSize:Lj,_autoHideScrollBar:Gc,_autoMakeVisible:rh,_selectBackground:i.tableViewSelectBackground,_labelColor:i.tableViewLabelColor,_labelSelectColor:i.tableViewLabelSelectColor,_labelFont:i.tableViewLabelFont,getCheckColumn:function(){var o=this;if(!o._31o){var r=o._31o=new pl;r.setEditable(!0),r.setWidth(40),r.getValue=o.getCheckColumValue,r.drawCell=o.drawCheckColumnCell}return o._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(l){var D=this,I=D._39o,B=D.getCheckColumn();l!==D.isCheckMode()&&(l?I.add(B,0):I.remove(B),D.fp(Ie,!l,l))},getCheckColumValue:function(V,J,l){return l.isSelected(V)},drawCheckColumnCell:function(m,V,l,X,M,p,H,A,x){de(m,x.getCheckIcon(V),M+H/2,p+A/2,V,x)}});var jk=function(K){Ke(jk,this,[K])};hd(jk,Gr,{_34o:function(k,M){var H=this.list,Y=H._31o;if(H.isCellEditable(M,Y,k)){var _=H._3Q(Y),P=H.lp(k).x;if(_&&P>=_.startX&&P<_.startX+Y.getWidth())return H.checkData(M),void 0}H._37O(M,k),H.setFocusData(M)},_33o:function(s,j){this.list._37O(j,s),jk.superClass._33o.apply(this,arguments)}});var hi=Nd.TreeTableView=function(K){var t=this,C=t._4o=new pl;t._35o(),t._98I(),t._5o(K),C.setDisplayName("Name"),C.setEditable(!0),C.setWidth(180),C.drawCell=Zl,C.getValue=Qb,t._39o.add(C),new ob(t)},Zl=function(w,D,F,N,t,H,f,o,C){C._97I(w,D,F,t,H,f,o)},Qb=function(M,t,x){return x.getLabel(M)};As("TreeTableView",G,{ms_ac:[vb,vc,Ne,"sortMode",qi,xq,rd,Ie,"rootData","rootVisible",wj,pd,"sortColumn",Wc,pc,ij,Zb,ml,pp,gj,qo,Il,ui,Hc,Zf,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:Fd,_checkMode:c,_editable:!0,_batchEditable:!1,_indent:_b,_rowHeight:bg,_rowLineVisible:i.treeTableViewRowLineVisible,_rowLineColor:i.treeTableViewRowLineColor,_columnLineVisible:i.treeTableViewColumnLineVisible,_columnLineColor:i.treeTableViewColumnLineColor,_expandIcon:i.treeTableViewExpandIcon,_collapseIcon:i.treeTableViewCollapseIcon,_scrollBarColor:tm,_scrollBarSize:Lj,_autoHideScrollBar:Gc,_autoMakeVisible:rh,_selectBackground:i.treeTableViewSelectBackground,_labelColor:i.treeTableViewLabelColor,_labelSelectColor:i.treeTableViewLabelSelectColor,_labelFont:i.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var ob=function(C){Ke(ob,this,[C])};hd(ob,Gr,{_34o:function(e,a){var D=this.list,V=D._4o,l=D._3Q(V),d=D.lp(e).x;if(l){var w=D._indent,S=l.startX+w*D.getLevel(a);if(id(D.getToggleIcon(a))&&d>=S&&S+w>=d)return D.toggle(a),void 0;if(D.isCellEditable(a,V)&&(S+=w,d>=S&&S+w>=d))return D.checkData(a),void 0}D._37O(a,e),D.setFocusData(a)},_33o:function(s,f){var n=this.list,P=n.lp(s).x;if(id(n.getToggleIcon(f))){var p=n._3Q(n._4o);if(p){var C=n._indent,h=p.startX+C*n.getLevel(f);if(P>=h&&h+C>=P)return n.toggle(f),void 0}}n._37O(f,s),ob.superClass._33o.apply(this,arguments)}});var hs=Nd.TableHeader=function(G){var T=this,r=T._view=fi(1,T),u=T._39o=G.getColumnModel(),w=T.iv;T.tv=T._tableView=G,T._60I=new Vr,T._canvas=nq(r),r.style.background=i.tableHeaderBackground||"",r.style.height=Zd+xc,u.mm(w,T),u.md(w,T),u.mh(w,T),G.mp(function(C){ag[C.property]&&T.iv()},T),new td(T),T.iv()};As("TableHeader",G,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",vb,Ne,rd,"moveBackground","insertColor",ui,Hc,"resizable","movable"],_checkIcon:ro,_movable:!0,_resizable:!0,_labelColor:i.tableHeaderLabelColor,_labelFont:i.tableHeaderLabelFont,_columnLineColor:i.tableHeaderColumnLineColor,_columnLineVisible:i.tableHeaderColumnLineVisible,_sortDescIcon:i.tableHeaderSortDescIcon,_sortAscIcon:i.tableHeaderSortAscIcon,_moveBackground:i.tableHeaderMoveBackground,_insertColor:i.tableHeaderInsertColor,_indent:_b,getCheckIcon:function(){return this._checkIcon
},getTableView:function(){return this.tv},getLabel:function(w){return w.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(U){return U.getColor()||this._labelColor},getLabelAlign:function(F){return F._align},onPropertyChanged:function(){this.iv()},_5Q:function(R){this._61I=R,this.iv()},getLogicalPoint:function(m){return _k(m,this._canvas,this.tv.tx())},validateImpl:function(){var v=this,V=v._canvas,B=v.getWidth(),J=v.getHeight(),p=v.tv,P=v._60I,$=v._61I,I=-p.tx(),H=0;(B!==V.clientWidth||J!==V.clientHeight)&&ge(V,B,J),P.clear(),v._39o._roots.each(function(r){if(r.isVisible()){var b=H+r.getWidth();I+B>=H&&b>=I&&P.add({column:r,startX:H}),H=b}});var Z=Wb(V);if(Ch(Z,-I,0,1),Z.beginPath(),Z.rect(I,0,B,J),Z.clip(),Z.clearRect(I,0,B,J),P.each(function(D){var G=D.column,S=D.startX,R=G.getWidth();R>0&&(Z.save(),Z.beginPath(),Z.rect(S,0,R,J),Z.clip(),$&&$.column===G||v.drawColumn(Z,G,S,0,R,J),v._columnLineVisible&&lo(Z,S+R-1,0,1,J,v._columnLineColor),Z.restore())}),$){var x=$.column,H=$.startX,W=$.position,L=x.getWidth();Z.save(),Z.beginPath(),Z.rect(H,0,L,J),Z.clip(),Z.fillStyle=v._moveBackground,Z.fill(),v.drawColumn(Z,x,H,0,L,J),Z.restore(),Ue(Z,v._insertColor,W,0,J)}Z.restore()},_6Q:function(r){var t=this.tv;return t._31o===r&&t.sm().getSelectionMode()===vm},drawColumn:function(L,J,B,T,e,k){var t=this,Q=t.tv,b=id(J.getIcon()),p=t.getLabelAlign(J);if(t._6Q(J)){var Y=id(t._checkIcon);de(L,Y,B+e/2,T+k/2,J,t)}else{var P=t.getLabel(J),_=t.getLabelFont(J),A=t.getLabelColor(J),Z=Zh(_,P).width,I=b?t._indent:0;p===rp?(b&&Ob(L,b,cs,B,T,I,k),pf(L,P,_,A,B+I,T,e,k,rp)):p===il?(b&&Ob(L,b,cs,B+e-Z-I,T,I,k),pf(L,P,_,A,B,T,e,k,il)):(b&&Ob(L,b,cs,B+(e-Z-I)/2,T,I,k),pf(L,P,_,A,B+(e-Z+I)/2,T,0,k,rp))}if(J.isSortable()&&Q.getSortColumn()===J&&(b=id(J.getSortOrder()===Ld?t._sortAscIcon:t._sortDescIcon))){var X=lc(b,J)/2+2;de(L,b,p===il?B+X:B+e-X,T+k/2,J,Q)}}});var td=function(s){var F=this;F.th=s,F.tv=s._tableView,F.addListeners()};hd(td,G,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(n){this.getView().style.cursor=n},handle_mousemove:function(m){if(!nm){var U=this;delete U._29o,U.setCursor(Yp);for(var a=U.th,N=a._60I,F=a.lp(m).x,n=N.size()-1;n>=0;n--){var L=N.get(n),E=L.column,W=L.startX+E.getWidth();if(a.isResizable()&&$(W-F)<=(cn?10:3))return U._29o=L,U.setCursor(wg),void 0;F>L.startX&&W>F&&(U._29o=L),(E.isClickable()||E.isSortable()||a.isMovable()||U.tv.getCheckColumn&&E===U.tv.getCheckColumn())&&F>L.startX&&W>F&&U.setCursor(Gq)}}},handle_mousedown:function(V){this.handle_touchstart(V)},handle_touchstart:function(R){var y=this;lg(R),y.tv.endEditing(),y.handle_mousemove(R),y._29o&&(y.x=_c(R).x,y.lx=y.th.lp(R).x,y.w=y._29o.column.getWidth(),Ql(y,R))},handleWindowMouseMove:function(i){this.handleWindowTouchMove(i)},handleWindowTouchMove:function(A){var x=this,F=x.th,M=x.getView().style.cursor,Z=x._29o,r=_c(A).x-x.x;if(x.resizing||x.moving||(M===wg?x.resizing=1:F.isMovable()&&M===Gq&&$(r)>2&&(x.moving=1)),x.resizing)Z.column.setWidth(x.w+r);else if(x.moving){var v=x.lx+r;F._60I.each(function(T){var E=T.startX,b=E+T.column.getWidth();if(v>=E&&b>=v){var O={column:Z.column,startX:Z.startX+r,front:b-v>v-E,insertColumn:T.column};O.position=O.front?E:b,F._5Q(O)}})}},_16Q:function(F,W){var T=this,k=T.tv,V=T.th,l=V._checkIcon;if(V._6Q(F)){var d=id(l),N=T.lx,w=F.getWidth(),v=lc(d,F);if(N>=W+w/2-v&&W+w/2+v>=N){V.setCheckIcon(l===gf?ro:gf);var z=k.sm(),I=k._rows;return l===gf?z.rs(I):z.ss(I),k.onCheckColumnClicked(F),!0}}return!1},handleWindowMouseUp:function(K){this.handleWindowTouchEnd(K)},handleWindowTouchEnd:function(I){var S=this,p=S.tv,O=S.th,u=S._29o;if(S.moving){var g=O._61I;if(g&&g.insertColumn!==g.column){var t=g.column,F=p.getColumnModel()._roots,P=F.remove(t),j=F.indexOf(g.insertColumn);j>=0&&(g.front||j++,j<=F.size()&&(F.add(t,j),p.getColumnModel()._38I(t,P,j)))}O._5Q(c),delete S.moving}else if(!S.resizing&&u){t=u.column;var q=O.lp(I).x,b=u.startX,l=!0;if(O.onColumnClicked){var C=O.onColumnClicked(t,I,b);C===!1&&(l=!1)}if(l&&q>=b&&q<=b+t.getWidth()&&!S._16Q(t,b)){if(t.isSortable()){var U=p.getSortMode(),A=t.getSortOrder();U===Fd?p.getSortColumn()===t?(A===Pf&&p.setSortColumn(c),t.setSortOrder(A===Ld?Pf:Ld)):p.setSortColumn(t):"bistate"===U&&(p.getSortColumn()===t?t.setSortOrder(A===Ld?Pf:Ld):p.setSortColumn(t))}p.onColumnClicked(t,I,b)}}S._29o=S.resizing=S.x=S.lx=S.w=c}}),Nd.TablePane=function(y){this.init(new pr(y))},As("TablePane",G,{ms_v:1,_44o:1}),Nd.TreeTablePane=function(g){this.init(new hi(g))},As("TreeTablePane",G,{ms_v:1,_44o:1}),Nd.Toolbar=function(L){var b=this,r=b._view=fi(1,b),o=r.style;o.background=i.toolbarBackground||"",o.height=uh+xc,b._canvas=nq(r),b._30o=new Vr,b._90I=new Vr,b.setItems(L||[]),r.handleGroupSelectedChanged=function(v){if(v.isSelected()){var c=v.getGroupId();null!=c&&b._items.forEach(function(R){var q=R.element;q&&q!==v&&q.setSelected&&q.getGroupId&&q.getGroupId()===c&&q.setSelected(!1)})}},new Ao(b)},As("Toolbar",G,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[mk,vb,Ne,vc,Zf,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:i.toolbarLabelColor,_labelSelectColor:i.toolbarLabelSelectColor,_labelFont:i.toolbarLabelFont,_selectBackground:i.toolbarSelectBackground,_itemGap:i.toolbarItemGap,_separatorColor:i.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(X){var B=this.getItemInfoAt(X);return B?B.item.toolTip:c},getLabelColor:function(C){return C&&C.selected&&C.type!==gf&&C.type!==Se?this._labelSelectColor:this._labelColor},onPropertyChanged:function($){this.iv(),$.property===mk&&this._items.forEach(function(n){qg(n)})},redraw:function(){this.iv()},addItem:function(F,z){var n=this._items;z==c?n.push(F):n.splice(z,0,F),this.fp(mk,c,n)},removeItem:function(i){if(i)for(var X=this._items,Z=0;Z<X.length;Z++)i===X[Z]&&(X.splice(Z,1),this.fp(mk,c,X))},removeItemById:function(b){if(b!=c)for(var E=this._items,O=0;O<E.length;O++)if(b===E[O].id){var Y=E.splice(O,1)[0];return this.fp(mk,c,E),Y}},getItemById:function(q){if(q!=c)for(var j=this._items,Y=0;Y<j.length;Y++){var g=j[Y];if(q===g.id)return g}},setItemVisible:function(K,B){var h=this.getItemById(K);h&&(h.visible=B)},getItemInfos:function(){return this._30o},getItemInfoAt:function(g){var x=this,w=0,J=x._30o,Z=x.lp(g),k=Z.x,t=Z.y;if(t>=0&&t<=x.getHeight())for(;w<J.size();w++){var I=J.get(w);if(I.startX<=k&&k<=I.endX)return I}return c},drawItem:function(V,z,s,W,u){if(z.visible===!1)return 0;if(sq(z.visible)&&!z.visible())return 0;var v=this,B=z.disabled;B&&(V.globalAlpha=$k);var K=v.drawItemImpl(V,z,s,W,u),f=v._itemGap;return B&&(V.globalAlpha=1),this._currentItem!==z||"separator"===z||z.separator===!0||z.unfocusable||Wn(V,v._separatorColor,s-f/2,0,K+f,W),K},drawItemImpl:function(v,b,Q,E,O){var G=this,n=G._view,T=G._itemGap,Y=E/2,P=b.type,y=b.element,C=b.label;Ul(y)&&(C=y,y=c);var W,V=G.getLabelFont(b),B=G.getLabelColor(b),M=b.selected,l=id(b.icon),J=lc(l,b),x=0,U=J+(C?Zh(V,C).width:0);if("separator"===b||b.separator===!0)return Ue(v,G._separatorColor,Q,E/4,Y),1;if(y){l&&de(v,l,Q+J/2,Y,b,G),pf(v,C,V,B,Q+J,0,0,E);var e=Nr(y);O||G._90I.add(e),e.parentNode!==n&&Rf(n,e),y.iv&&y.iv(),y.validate&&y.validate();var D=e.getBoundingClientRect(),Z=D.width,A=e.style;return Lm(e),A.left=G.tx()+Q+U+xc,A.top=(E-D.height)/2+xc,U+Z}return P===Se?W=id(M?If:Pb):P===gf&&(W=id(M?gf:ro)),W?(x=lc(W,b),de(v,W,Q+x/2,Y,b,G),Q+=x,U+=x):M&&lo(v,Q-T/2,0,U+T,E,G.getSelectBackground(b)),l&&de(v,l,Q+J/2,Y,b,G),pf(v,C,V,B,Q+J,0,0,E),U},validateImpl:function(){var s=this,N=s._canvas,h=s.getWidth(),V=s.getHeight(),X=s._30o,q=s._items;ge(N,h,V);var K=Wb(N),g=s._itemGap,$=g/2;Ch(K,s.tx(),0,1),K.clearRect(0,0,h,V);var r=s._90I;s._90I=new Vr,X.clear(),q.forEach(function(c){var F=s.drawItem(K,c,$,V);X.add({item:c,startX:$,endX:$+F,width:F}),F&&($+=F+g)}),r.each(function(G){s._90I.contains(G)||Ye(G)});var P=s._64I;s._64I=W(0,$),K.restore(),s._stickToRight?(s._65O=0,K=Wb(N),$=h-s._64I+g,Ch(K,0,0,1),K.clearRect(0,0,h,V),X.clear(),q.forEach(function(Q){var T=s.drawItem(K,Q,$,V,!0);X.add({item:Q,startX:$,endX:$+T,width:T}),T&&($+=T+g)}),K.restore()):s.tx(s.tx()),P!==s._64I&&s.onSumWidthChanged(P,s._64I)},onSumWidthChanged:function(){},handleClick:function(b,E){var n=this,z=b.type,v=b.action,A=b.groupId,w=b.selected;b.disabled||(A!=c?w||(b.selected=!0,this._items.forEach(function(c){c.groupId===A&&b!==c&&(c.selected=!1)}),v&&b.action(b,n,E)):z===gf||"toggle"===z?(b.selected=!w,v&&b.action(b,n,E)):v&&b.action(b,n,E)),Li(),n.iv()}});var Ao=function(g){this.tb=g,this.addListeners()};hd(Ao,G,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(v){this.handleScroll(v,10*(v.wheelDelta/40))},handle_DOMMouseScroll:function(c){this.handleScroll(c,10*-c.detail)},handleScroll:function(p,f){lg(p);var k=this.tb;k.isScrollable()&&!k._stickToRight&&(k.tx(k.tx()+f),Zn())},handle_mousemove:function(w){var T=this;nm||T.setItem(w)},handle_mouseout:function(O){var v=this;O.target===v.getView()?v.tb.setCurrentItem(c):v.handle_mousemove(O)},handle_mousedown:function(M){this.handle_mousemove(M),this.handle_touchstart(M)},handle_touchstart:function(I){var p=this,q=p.tb,n=I.target;Zi(I)&&(n===p.getView()||n===q._canvas)&&(lg(I),q.setFocus(I)&&(this.setItem(I,!0),(q.isScrollable()||p.info&&!p.info.item.disabled)&&(p.x=_c(I).x,p.tx=q.tx(),Ql(p,I))))},handleWindowMouseMove:function(e){this.handleWindowTouchMove(e)},handleWindowTouchMove:function(C){var N=this,u=N.tb;if(!u._stickToRight){var r=_c(C).x-N.x;!N._25o&&$(r)>2&&u.isScrollable()&&(N._25o=1),N._25o&&u.tx(N.tx+r)}},handleWindowMouseUp:function(x){this.handleWindowTouchEnd(x)},handleWindowTouchEnd:function(n){var b=this,t=b.tb,z=b.info,A=b.tb.getItemInfoAt(n);if(!b._25o&&z){var o=z.item;A&&A.item===o&&t.handleClick(o,n)}b._25o=b.x=b.tx=c,b.setItem()},setItem:function(K,N){var r=this,S=r.tb,n=r.info=K?S.getItemInfoAt(K):c,j=n?n.item:c;S.setCurrentItem(j),N&&j&&sq(j.onDown)&&j.onDown(K)}}),Nd.BorderPane=function(){this._view=fi(1,this),this.iv()},As("BorderPane",G,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(l,a){this._12o("leftView",l),a!=c&&this.setLeftWidth(a)},getRightView:function(){return this._rightView},setRightView:function(f,U){this._12o("rightView",f),U!=c&&this.setRightWidth(U)},getTopView:function(){return this._topView},setTopView:function(x,U){this._12o("topView",x),U!=c&&this.setTopHeight(U)},getBottomView:function(){return this._bottomView},setBottomView:function(L,l){this._12o("bottomView",L),l!=c&&this.setBottomHeight(l)},getCenterView:function(){return this._centerView},setCenterView:function(l){this._12o("centerView",l)},_12o:function(T,l){var N=this,F="_"+T,W=N._view,E=N[F];E!==l&&(E&&(E.getView?Ye(E.getView()):Ye(E)),N[F]=l,l&&(l.getView?Rf(W,l.getView(),1):Rf(W,l,1)),N.fp(T,E,l))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var f=this,M=f._topView,d=f._bottomView,$=f._leftView,i=f._rightView,Q=f._centerView,o=f.getWidth(),x=f.getHeight(),N=0,t=0,Y=o,j=x,O=0,X=0,l=0,J=0;M&&(O=f._topHeight==c?Eg(M):f._topHeight,t=O),d&&(X=f._bottomHeight==c?Eg(d):f._bottomHeight,j=x-X),$&&(l=f._leftWidth==c?mj($):f._leftWidth,N=l),i&&(J=f._rightWidth==c?mj(i):f._rightWidth,Y=o-J);var L=W(0,Y-N),D=W(0,j-t);M&&gg(M,0,0,o,O),d&&gg(d,0,j,o,X),$&&gg($,0,t,l,D),i&&gg(i,Y,t,J,D),Q&&gg(Q,N,t,L,D)}})}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);