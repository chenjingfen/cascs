!function(w,j,F){"use strict";var c="ht",x=w[c],L=null,M=Math,Z=M.PI,t=M.cos,v=M.sin,W=M.abs,Q=M.max,R=M.sqrt,G=1e-5,B=x.Default,J=B.def,n=B.startAnim,l=B.createMatrix,m=B.transformVec,X=B.getInternal(),A=X.addMethod,q=X.superCall,y=X.toPointsArray,o=X.createNormals,p=X.toFloatArray,D=X.glMV,r=X.batchShape,h=X.createNodeMatrix,K=X.getFaceInfo,b=X.transformAppend,H=X.drawFaceInfo,E=X.createAnim,$=X.cube(),I=$.is,T=$.vs,S=$.uv,C=X.ui(),k=x.Node,f=x.Shape,z="h",a="v",Y="front",O="back",N="left",s="right",u="top",e="bottom",P="dw.expanded",g=".expanded",V="dw.angle",U=".angle",i=function(b,V,y){J(c+"."+b,V,y)},d=function(j,T,f){f?j.push(T.x,T.y):j.push(T.x,T.y,T.z)},_=[1,0,0],Up=function(G,c,B,z){var M,I,v,Q,O=0,m=[];if(z)for(M=z.length;M>O;O+=3)I=z[O],v=z[O+1],Q=z[O+2],m.push(new Ur([new Im([c[3*I],c[3*I+1],c[3*I+2]],_,B?[B[2*I],B[2*I+1],0]:L),new Im([c[3*v],c[3*v+1],c[3*v+2]],_,B?[B[2*v],B[2*v+1],0]:L),new Im([c[3*Q],c[3*Q+1],c[3*Q+2]],_,B?[B[2*Q],B[2*Q+1],0]:L)],G));else for(M=c.length;M>O;O+=3)I=O,v=O+1,Q=O+2,m.push(new Ur([new Im([c[3*I],c[3*I+1],c[3*I+2]],_,B?[B[2*I],B[2*I+1],0]:L),new Im([c[3*v],c[3*v+1],c[3*v+2]],_,B?[B[2*v],B[2*v+1],0]:L),new Im([c[3*Q],c[3*Q+1],c[3*Q+2]],_,B?[B[2*Q],B[2*Q+1],0]:L)],G));return m},Gi=[N,Y,s,O,u,e],Kg=Gi.concat("csg"),Nj=[0,6,12,18,24,30],Vg=function(e,U,$){for(var p=h(e),Q=[],O=0;6>O;O++)for(var P=Gi[O],v=Nj[O],E=$?U.getFaceUv(e,P):L,w=$?U.getFaceUvScale(e,P):L,A=$?U.getFaceUvOffset(e,P):L,D=0;2>D;D++){var B,y,Y,X=I[v+3*D],V=I[v+3*D+1],o=I[v+3*D+2];if($){if(E){var G=8*O;B=[E[2*X-G],E[2*X+1-G],0],y=[E[2*V-G],E[2*V+1-G],0],Y=[E[2*o-G],E[2*o+1-G],0]}else B=[S[2*X],S[2*X+1],0],y=[S[2*V],S[2*V+1],0],Y=[S[2*o],S[2*o+1],0];w&&(B[0]*=w[0],B[1]*=w[1],y[0]*=w[0],y[1]*=w[1],Y[0]*=w[0],Y[1]*=w[1]),A&&(B[0]+=A[0],B[1]+=A[1],y[0]+=A[0],y[1]+=A[1],Y[0]+=A[0],Y[1]+=A[1])}Q.push(new Ur([new Im(m([T[3*X],T[3*X+1],T[3*X+2]],p),_,B),new Im(m([T[3*V],T[3*V+1],T[3*V+2]],p),_,y),new Im(m([T[3*o],T[3*o+1],T[3*o+2]],p),_,Y)],e))}return kh.$15n(Q)},gf=function($,a){var j,u=$.data.getAttaches();if(u&&u.each(function(D){D instanceof Sq&&D.s("attach.operation")&&(j||(j=[]),j.push(D))}),j){var V;Gi.forEach(function(q){var J=Up(q,$[q].vs,$[q].tuv);V=V?V.concat(J):J}),V=kh.$15n(V),j.forEach(function(G){var o=G.s("attach.operation");V[o]&&(V=V[o](Vg(G,$.gv,$.csg.tuv)))}),Gi.forEach(function(F){F=$[F],F.vs=[],F.tuv&&(F.tuv=[])}),V.$19n().forEach(function(L){var T=L.$10n;if(T instanceof Sq){if(T.s("attach.cull"))return;T="csg"}for(var e=$[T],N=e.vs,F=e.tuv,y=L.$9n,P=2;P<y.length;P++)d(N,y[0].$24n),d(N,y[P-1].$24n),d(N,y[P].$24n),F&&(d(F,y[0].uv,!0),d(F,y[P-1].uv,!0),d(F,y[P].uv,!0))})}Kg.forEach(function(N){var z=$[N];z.visible&&z.vs.length?(z.ns=o(z.vs),p(z,"vs"),p(z,"tuv")):delete $[N]}),a&&(r($,L,a),$.clear())};A(B,{createFrameModel:function(K,M,J,h){K=K==L?.07:K,M=M==L?K:M,J=J==L?K:J,h=h?h:{};var P=h.top,I=h.bottom,c=h.left,t=h.right,G=h.front,B=h.back,i=[],D=[];return G===!0?(i.push(-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5),D.push(0,0,0,1,1,1,1,1,1,0,0,0)):G===!1||(i.push(-.5,.5,.5,-.5,-.5,.5,-.5+K,-.5,.5,-.5+K,-.5,.5,-.5+K,.5,.5,-.5,.5,.5,.5-K,.5,.5,.5-K,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5-K,.5,.5,-.5+K,.5,.5,-.5+K,.5-M,.5,.5-K,.5-M,.5,.5-K,.5-M,.5,.5-K,.5,.5,-.5+K,.5,.5,-.5+K,-.5+M,.5,-.5+K,-.5,.5,.5-K,-.5,.5,.5-K,-.5,.5,.5-K,-.5+M,.5,-.5+K,-.5+M,.5),D.push(0,0,0,1,K,1,K,1,K,0,0,0,1-K,0,1-K,1,1,1,1,1,1,0,1-K,0,K,0,K,M,1-K,M,1-K,M,1-K,0,K,0,K,1-M,K,1,1-K,1,1-K,1,1-K,1-M,K,1-M)),B===!0?(i.push(-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5),D.push(1,0,0,1,1,1,0,1,1,0,0,0)):B===!1||(i.push(-.5,.5,-.5,-.5+K,-.5,-.5,-.5,-.5,-.5,-.5+K,-.5,-.5,-.5,.5,-.5,-.5+K,.5,-.5,.5-K,.5,-.5,.5,-.5,-.5,.5-K,-.5,-.5,.5,-.5,-.5,.5-K,.5,-.5,.5,.5,-.5,-.5+K,.5,-.5,.5-K,.5-M,-.5,-.5+K,.5-M,-.5,.5-K,.5-M,-.5,-.5+K,.5,-.5,.5-K,.5,-.5,-.5+K,-.5+M,-.5,.5-K,-.5,-.5,-.5+K,-.5,-.5,.5-K,-.5,-.5,-.5+K,-.5+M,-.5,.5-K,-.5+M,-.5),D.push(1,0,1-K,1,1,1,1-K,1,1,0,1-K,0,K,0,0,1,K,1,0,1,K,0,0,0,1-K,0,K,M,1-K,M,K,M,1-K,0,K,0,1-K,1-M,K,1,1-K,1,K,1,1-K,1-M,K,1-M)),c===!0?(i.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5),D.push(0,0,0,1,1,1,1,1,1,0,0,0)):c===!1||(i.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5+J,-.5,-.5,-.5+J,-.5,.5,-.5+J,-.5,.5,-.5,-.5,.5,.5-J,-.5,-.5,.5-J,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5-J,-.5,.5,-.5+J,-.5,.5-M,-.5+J,-.5,.5-M,.5-J,-.5,.5-M,.5-J,-.5,.5,.5-J,-.5,.5,-.5+J,-.5,-.5+M,-.5+J,-.5,-.5,-.5+J,-.5,-.5,.5-J,-.5,-.5,.5-J,-.5,-.5+M,.5-J,-.5,-.5+M,-.5+J),D.push(0,0,0,1,J,1,J,1,J,0,0,0,1-J,0,1-J,1,1,1,1,1,1,0,1-J,0,J,0,J,M,1-J,M,1-J,M,1-J,0,J,0,J,1-M,J,1,1-J,1,1-J,1,1-J,1-M,J,1-M)),t===!0?(i.push(.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5),D.push(1,0,0,1,1,1,0,1,1,0,0,0)):t===!1||(i.push(.5,.5,-.5,.5,-.5,-.5+J,.5,-.5,-.5,.5,-.5,-.5+J,.5,.5,-.5,.5,.5,-.5+J,.5,.5,.5-J,.5,-.5,.5,.5,-.5,.5-J,.5,-.5,.5,.5,.5,.5-J,.5,.5,.5,.5,.5,-.5+J,.5,.5-M,.5-J,.5,.5-M,-.5+J,.5,.5-M,.5-J,.5,.5,-.5+J,.5,.5,.5-J,.5,-.5+M,-.5+J,.5,-.5,.5-J,.5,-.5,-.5+J,.5,-.5,.5-J,.5,-.5+M,-.5+J,.5,-.5+M,.5-J),D.push(1,0,1-J,1,1,1,1-J,1,1,0,1-J,0,J,0,0,1,J,1,0,1,J,0,0,0,1-J,0,J,M,1-J,M,J,M,1-J,0,J,0,1-J,1-M,J,1,1-J,1,J,1,1-J,1-M,J,1-M)),P===!0?(i.push(.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5),D.push(1,1,1,0,0,0,0,0,0,1,1,1)):P===!1||(i.push(.5,.5,.5,.5,.5,-.5,.5-K,.5,-.5,.5-K,.5,-.5,.5-K,.5,.5,.5,.5,.5,-.5+K,.5,.5,-.5+K,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5+K,.5,.5,.5-K,.5,.5,.5-K,.5,.5-J,-.5+K,.5,.5-J,-.5+K,.5,.5-J,-.5+K,.5,.5,.5-K,.5,.5,.5-K,.5,-.5+J,.5-K,.5,-.5,-.5+K,.5,-.5,-.5+K,.5,-.5,-.5+K,.5,-.5+J,.5-K,.5,-.5+J),D.push(1,1,1,0,1-K,0,1-K,0,1-K,1,1,1,K,1,K,0,0,0,0,0,0,1,K,1,1-K,1,1-K,1-J,K,1-J,K,1-J,K,1,1-K,1,1-K,J,1-K,0,K,0,K,0,K,J,1-K,J)),I===!0?(i.push(.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5),D.push(1,0,0,1,1,1,0,1,1,0,0,0)):I===!1||(i.push(.5,-.5,.5,.5-K,-.5,-.5,.5,-.5,-.5,.5-K,-.5,-.5,.5,-.5,.5,.5-K,-.5,.5,-.5+K,-.5,.5,-.5,-.5,-.5,-.5+K,-.5,-.5,-.5,-.5,-.5,-.5+K,-.5,.5,-.5,-.5,.5,.5-K,-.5,.5,-.5+K,-.5,.5-J,.5-K,-.5,.5-J,-.5+K,-.5,.5-J,.5-K,-.5,.5,-.5+K,-.5,.5,.5-K,-.5,-.5+J,-.5+K,-.5,-.5,.5-K,-.5,-.5,-.5+K,-.5,-.5,.5-K,-.5,-.5+J,-.5+K,-.5,-.5+J),D.push(1,0,1-K,1,1,1,1-K,1,1,0,1-K,0,K,0,0,1,K,1,0,1,K,0,0,0,1-K,0,K,J,1-K,J,K,J,1-K,0,K,0,1-K,1-J,K,1,1-K,1,K,1,1-K,1-J,K,1-J)),{vs:i,uv:D}}}),A(x.Style,{"dw.flip":!1,"dw.s3":[.999,.999,.5],"dw.t3":F,"dw.expanded":!1,"dw.toggleable":!0,"dw.axis":"left","dw.start":0,"dw.end":Z/2,"dw.angle":0,"attach.cull":!1,"attach.operation":"subtract"},!0),Gi.forEach(function(O){var w={};w[O+g]=!1,w[O+".toggleable"]=!1,w[O+".axis"]=N,w[O+".start"]=0,w[O+".end"]=Z/2,w[O+U]=0,A(x.Style,w,!0)});var kh=function(){this.$4n=[]};kh.$15n=function(N){var u=new kh;return u.$4n=N,u},kh.prototype={clone:function(){var J=new kh;return J.$4n=this.$4n.map(function(N){return N.clone()}),J},$19n:function(){return this.$4n},union:function(i){var d=new Aj(this.clone().$4n),G=new Aj(i.clone().$4n);return d.$3n(G),G.$3n(d),G.$6n(),G.$3n(d),G.$6n(),d.$7n(G.$2n()),kh.$15n(d.$2n())},subtract:function(l){var n=new Aj(this.clone().$4n),C=new Aj(l.clone().$4n);return n.$6n(),n.$3n(C),C.$3n(n),C.$6n(),C.$3n(n),C.$6n(),n.$7n(C.$2n()),n.$6n(),kh.$15n(n.$2n())},intersect:function(w){var s=new Aj(this.clone().$4n),x=new Aj(w.clone().$4n);return s.$6n(),x.$3n(s),x.$6n(),s.$3n(x),x.$3n(s),s.$7n(x.$2n()),s.$6n(),kh.$15n(s.$2n())},inverse:function(){var H=this.clone();return H.$4n.map(function(Q){Q.flip()}),H}},kh.cube=function(Y){Y=Y||{};var T=new Wk(Y.center||[0,0,0]),t=Y.radius?Y.radius.length?Y.radius:[Y.radius,Y.radius,Y.radius]:[1,1,1];return kh.$15n([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(b){return new Ur(b[0].map(function(G){var U=new Wk(T.x+t[0]*(2*!!(1&G)-1),T.y+t[1]*(2*!!(2&G)-1),T.z+t[2]*(2*!!(4&G)-1));return new Im(U,new Wk(b[1]))}))}))},kh.sphere=function(j){function C(O,q){O*=2*Z,q*=Z;var h=new Wk(t(O)*v(q),t(q),v(O)*v(q));S.push(new Im(w.$20n(h.$21n(l)),h))}j=j||{};for(var S,w=new Wk(j.center||[0,0,0]),l=j.radius||1,s=j.slices||16,M=j.stacks||8,F=[],L=0;s>L;L++)for(var O=0;M>O;O++)S=[],C(L/s,O/M),O>0&&C((L+1)/s,O/M),M-1>O&&C((L+1)/s,(O+1)/M),C(L/s,(O+1)/M),F.push(new Ur(S));return kh.$15n(F)},kh.cylinder=function(C){function g(m,G,w){var C=2*G*Z,$=s.$21n(t(C)).$20n(J.$21n(v(C))),u=o.$20n(N.$21n(m)).$20n($.$21n(y)),Q=$.$21n(1-W(w)).$20n(K.$21n(w));return new Im(u,Q)}C=C||{};for(var o=new Wk(C.start||[0,-1,0]),A=new Wk(C.end||[0,1,0]),N=A.$13n(o),y=C.radius||1,$=C.slices||16,K=N.$14n(),f=W(K.y)>.5,s=new Wk(f,!f,0).$12n(K).$14n(),J=s.$12n(K).$14n(),m=new Im(o,K.$11n()),Y=new Im(A,K.$14n()),E=[],G=0;$>G;G++){var i=G/$,B=(G+1)/$;E.push(new Ur([m,g(0,i,-1),g(0,B,-1)])),E.push(new Ur([g(0,B,0),g(0,i,0),g(1,i,0),g(1,B,0)])),E.push(new Ur([Y,g(1,B,1),g(1,i,1)]))}return kh.$15n(E)};var Wk=function(s,o,W){var b=this;3==arguments.length?(b.x=s,b.y=o,b.z=W):"x"in s?(b.x=s.x,b.y=s.y,b.z=s.z):(b.x=s[0],b.y=s[1],b.z=s[2])};Wk.prototype={clone:function(){return new Wk(this.x,this.y,this.z)},$11n:function(){return new Wk(-this.x,-this.y,-this.z)},$20n:function(r){return new Wk(this.x+r.x,this.y+r.y,this.z+r.z)},$13n:function(K){return new Wk(this.x-K.x,this.y-K.y,this.z-K.z)},$21n:function(k){return new Wk(this.x*k,this.y*k,this.z*k)},$16n:function(F){return new Wk(this.x/F,this.y/F,this.z/F)},$23n:function(V){return this.x*V.x+this.y*V.y+this.z*V.z},lerp:function(R,w){return this.$20n(R.$13n(this).$21n(w))},length:function(){return R(this.$23n(this))},$14n:function(){return this.$16n(this.length())},$12n:function(J){var b=this;return new Wk(b.y*J.z-b.z*J.y,b.z*J.x-b.x*J.z,b.x*J.y-b.y*J.x)}};var Im=function(U,H,j){var G=this;G.$24n=new Wk(U),G.$22n=new Wk(H),G.uv=j?new Wk(j):null};Im.prototype={clone:function(){var N=this;return new Im(N.$24n.clone(),N.$22n.clone(),N.uv?N.uv.clone():null)},flip:function(){this.$22n=this.$22n.$11n()},$18n:function(G,b){var B=this;return new Im(B.$24n.lerp(G.$24n,b),B.$22n.lerp(G.$22n,b),B.uv?B.uv.lerp(G.uv,b):null)}};var cl=function(w,d){this.$22n=w,this.w=d};cl.$17n=function(q,x,C){var t=x.$13n(q).$12n(C.$13n(q)).$14n();return new cl(t,t.$23n(q))},cl.prototype={clone:function(){return new cl(this.$22n.clone(),this.w)},flip:function(){var d=this;d.$22n=d.$22n.$11n(),d.w=-d.w},$5n:function(f,L,v,R,F){for(var k=this,m=0,H=1,u=2,e=3,S=0,$=[],n=0;n<f.$9n.length;n++){var W=k.$22n.$23n(f.$9n[n].$24n)-k.w,Q=-G>W?u:W>G?H:m;S|=Q,$.push(Q)}switch(S){case m:(k.$22n.$23n(f.$8n.$22n)>0?L:v).push(f);break;case H:R.push(f);break;case u:F.push(f);break;case e:for(var o=[],x=[],n=0;n<f.$9n.length;n++){var E=(n+1)%f.$9n.length,q=$[n],M=$[E],y=f.$9n[n],c=f.$9n[E];if(q!=u&&o.push(y),q!=H&&x.push(q!=u?y.clone():y),(q|M)==e){var W=(k.w-this.$22n.$23n(y.$24n))/k.$22n.$23n(c.$24n.$13n(y.$24n)),A=y.$18n(c,W);o.push(A),x.push(A.clone())}}o.length>=3&&R.push(new Ur(o,f.$10n)),x.length>=3&&F.push(new Ur(x,f.$10n))}}};var Ur=function(l,h){var u=this;u.$9n=l,u.$10n=h,u.$8n=cl.$17n(l[0].$24n,l[1].$24n,l[2].$24n)};Ur.prototype={clone:function(){var B=this.$9n.map(function(w){return w.clone()});return new Ur(B,this.$10n)},flip:function(){this.$9n.reverse().map(function(B){B.flip()}),this.$8n.flip()}};var Aj=function(N){var o=this;o.$8n=null,o.front=null,o.back=null,o.$4n=[],N&&o.$7n(N)};Aj.prototype={clone:function(){var $=this,g=new Aj;return g.$8n=$.$8n&&$.$8n.clone(),g.front=$.front&&$.front.clone(),g.back=$.back&&$.back.clone(),g.$4n=$.$4n.map(function(Y){return Y.clone()}),g},$6n:function(){for(var p=this,w=0;w<p.$4n.length;w++)p.$4n[w].flip();p.$8n.flip(),p.front&&p.front.$6n(),p.back&&p.back.$6n();var y=p.front;p.front=p.back,p.back=y},$1n:function(Q){var H=this;if(!H.$8n)return Q.slice();for(var _=[],T=[],A=0;A<Q.length;A++)H.$8n.$5n(Q[A],_,T,_,T);return H.front&&(_=H.front.$1n(_)),T=H.back?H.back.$1n(T):[],_.concat(T)},$3n:function(n){var t=this;t.$4n=n.$1n(t.$4n),t.front&&t.front.$3n(n),t.back&&t.back.$3n(n)},$2n:function(){var f=this,O=f.$4n.slice();return f.front&&(O=O.concat(f.front.$2n())),f.back&&(O=O.concat(f.back.$2n())),O},$7n:function(z){var h=this;if(z.length){h.$8n||(h.$8n=z[0].$8n.clone());for(var m=[],c=[],J=0;J<z.length;J++)this.$8n.$5n(z[J],h.$4n,h.$4n,m,c);m.length&&(h.front||(h.front=new Aj),this.front.$7n(m)),c.length&&(h.back||(h.back=new Aj),h.back.$7n(c))}}};var oj="symbol",lk=x.Symbol=function(g,B,z){var O=this;q(lk,O),O.s3(20,20,20),O.s({"all.visible":!1,shape:"rect"}),O.setIcon(g,B,z)};i("Symbol",k,{setIcon:function(o,f,b){var R,m=this;return lk.superClass.setIcon.call(m,o),o?(R={for3d:!0,face:"center",position:44,names:[o]},b&&(R.transaprent=!0),f&&(R.autorotate=f),m.addStyleIcon(oj,R)):m.removeStyleIcon(oj),m.setWidth(X.getImageWidth(B.getImage(o),m)||20),R}});var Sq=x.CSGNode=function(){q(Sq,this),this.s({shape:"rect","attach.thickness":1.001})},Nd={position:1,width:1,height:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,tall:1,elevation:1,"s:attach.cull":1,"s:attach.operation":1};i("CSGNode",k,{_22Q:function(){return Ml},onPropertyChanged:function(I){var L=this,r=L.getHost();Sq.superClass.onPropertyChanged.call(L,I),Nd[I.property]&&(r instanceof Hf||r instanceof Sq)&&r.fp("csgNodeChange",!0,!1)}});var Ml=function(D,t){q(Ml,this,[D,t])};J(Ml,C.Node3dUI,{_80o:function(c,g,M){var y=this;y._shape3d?Ml.superClass._80o.call(y,c,g,M):(D(y.gv),Kg.forEach(function(_){H(y,c,g,y[_],M)}))},validate:function(F,u){var E=this,J=E.gv,f=E.data;if(f.s("shape3d"))return Ml.superClass.validate.call(E,F,u),E._shape3d=!0,void 0;E._shape3d=!1;var g=h(f,J.getMat(f)),q=F&&F.uv;E.vf2("csg",q);for(var G=0;6>G;G++)for(var P=Gi[G],t=Nj[G],k=E.vf2(P,q,u),m=k.mat||g,X=k.vs,d=k.uv,r=k.tuv,w=0;2>w;w++){var L=I[t+3*w],U=I[t+3*w+1],s=I[t+3*w+2];if(b(X,m,[T[3*L],T[3*L+1],T[3*L+2]]),b(X,m,[T[3*U],T[3*U+1],T[3*U+2]]),b(X,m,[T[3*s],T[3*s+1],T[3*s+2]]),r)if(d){var o=8*G;r.push(d[2*L-o],d[2*L+1-o],d[2*U-o],d[2*U+1-o],d[2*s-o],d[2*s+1-o])}else r.push(S[2*L],S[2*L+1],S[2*U],S[2*U+1],S[2*s],S[2*s+1])}gf(E,F,u)},vf2:function(t,C,f){var X,G=this,p=G.gv.getFaceVisible(G.data,t);return X=K(G,t,f),X.vs=[],X.tuv=p&&(X.texture||C)?[]:L,X.visible=p,X}});var Hf=x.CSGShape=function(){var H=this;q(Hf,H),H.s({"shape.background":L,"shape.border.width":8}),H.setTall(240),H.setElevation(120),H.setThickness(14)};i("CSGShape",f,{IRotatable:!1,_22Q:function(){return qj},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setSegments:function(){}});var qj=function(F,R){q(qj,this,[F,R])};J(qj,C.Shape3dUI,{_80o:function(c,u,f){var F=this;F.undrawable||(D(F.gv),Kg.forEach(function($){H(F,c,u,F[$],f)}))},validate:function(c,F){var D=this,s=D.data,d=s.getPoints();if(D.undrawable=d.size()<2)return D.clear(),void 0;var B=s.isClosePath(),M=Q(s._thickness/2,G),i=y(d,L,L,B);Kg.forEach(function(i){D.vf(i,c&&c.uv,!0,F)}),B&&(D.left.visible=!1,D.right.visible=!1),D._12O(i,M),D._20Q(i),gf(D,c,F)}});var Hp=x.DoorWindow=function(){var i=this;q(Hp,i),i.setElevation(100),i.s3(100,200,14)};i("DoorWindow",Sq,{IDoorWindow:!0,toggle:function(w){this.setExpanded(!this.s(P),w)},isExpanded:function(){return this.s(P)},setExpanded:function(e,j){var Q,p=this,Y=p.$25n,D=p.getDataModel(),m=p.s(P);if(D&&(Q=D.getHistoryManager()),Y&&(Y.stop(!0),delete p.$25n),m!==e){Q&&Q.beginInteraction();var N=e?p.s("dw.end"):p.s("dw.start");p.s(P,e),j=E(j),j?(m=p.s(V),j.action=function(j){p.s(V,m+(N-m)*j)},j.finishFunc=function(){Q&&Q.endInteraction()},p.$25n=n(j)):(p.s(V,N),Q&&Q.endInteraction())}},getMat:function(){var A=this,o=A.s("dw.s3"),k=A.s("dw.t3"),i=A.s("dw.flip"),U=A.s(V);if(o||U||k||i){var q=[];if(i&&q.push({r3:[0,Z,0]}),o&&q.push({s3:o}),U){o=A.s3();var Y=A.s("dw.axis"),w=o[0]/2,D=o[1]/2;o[2]/2,Y===N?q.push({t3:[w,0,0]},{r3:[0,-U,0]},{t3:[-w,0,0]}):Y===s?q.push({t3:[-w,0,0]},{r3:[0,U,0]},{t3:[w,0,0]}):Y===u?q.push({t3:[0,-D,0]},{r3:[-U,0,0]},{t3:[0,D,0]}):Y===e?q.push({t3:[0,D,0]},{r3:[U,0,0]},{t3:[0,-D,0]}):Y===a?q.push({r3:[0,U,0]}):Y===z&&q.push({r3:[U,0,0]})}return k&&q.push({t3:k}),l(q)}return L}});var Nm=x.CSGBox=function(){var g=this;q(Nm,g),g.setElevation(100),g.s3(100,200,100)};i("CSGBox",Sq,{ICSGBox:!0,toggleFace:function(p,W){this.setFaceExpanded(p,!this.s(p+g),W)},isFaceExpanded:function(q){return this.s(q+g)},setFaceExpanded:function(l,c,e){var W=this,K=W.$25n,C=W.s(l+g);if(K&&(K.stop(!0),delete W.$25n),C!==c){var S=c?W.s(l+".end"):W.s(l+".start");W.s(l+g,c),e=E(e),e?(C=W.s(l+U),e.action=function(T){W.s(l+U,C+(S-C)*T)},W.$25n=n(e)):W.s(l+U,S)}},getFaceMat:function(A){var H=this,X=H.s(A+U);if(!X)return L;var d=H.s(A+".axis"),n=H.s3(),t=n[0]/2,S=n[1]/2,G=n[2]/2,B=[];return A===Y&&(d===N?B.push({t3:[t,0,-G]},{r3:[0,-X,0]},{t3:[-t,0,G]}):d===s?B.push({t3:[-t,0,-G]},{r3:[0,X,0]},{t3:[t,0,G]}):d===u?B.push({t3:[0,-S,-G]},{r3:[-X,0,0]},{t3:[0,S,G]}):d===e?B.push({t3:[0,S,-G]},{r3:[X,0,0]},{t3:[0,-S,G]}):d===a?B.push({t3:[0,0,-G]},{r3:[0,X,0]},{t3:[0,0,G]}):d===z&&B.push({t3:[0,0,-G]},{r3:[X,0,0]},{t3:[0,0,G]})),A===O&&(d===N?B.push({t3:[-t,0,G]},{r3:[0,-X,0]},{t3:[t,0,-G]}):d===s?B.push({t3:[t,0,G]},{r3:[0,X,0]},{t3:[-t,0,-G]}):d===u?B.push({t3:[0,-S,G]},{r3:[X,0,0]},{t3:[0,S,-G]}):d===e?B.push({t3:[0,S,G]},{r3:[-X,0,0]},{t3:[0,-S,-G]}):d===a?B.push({t3:[0,0,G]},{r3:[0,X,0]},{t3:[0,0,-G]}):d===z&&B.push({t3:[0,0,G]},{r3:[X,0,0]},{t3:[0,0,-G]})),A===N&&(d===N?B.push({t3:[t,0,G]},{r3:[0,-X,0]},{t3:[-t,0,-G]}):d===s?B.push({t3:[t,0,-G]},{r3:[0,X,0]},{t3:[-t,0,G]}):d===u?B.push({t3:[t,-S,0]},{r3:[0,0,-X]},{t3:[-t,S,0]}):d===e?B.push({t3:[t,S,0]},{r3:[0,0,X]},{t3:[-t,-S,0]}):d===a?B.push({t3:[t,0,0]},{r3:[0,X,0]},{t3:[-t,0,0]}):d===z&&B.push({t3:[t,0,0]},{r3:[0,0,X]},{t3:[-t,0,0]})),A===s&&(d===N?B.push({t3:[-t,0,-G]},{r3:[0,-X,0]},{t3:[t,0,G]}):d===s?B.push({t3:[-t,0,G]},{r3:[0,X,0]},{t3:[t,0,-G]}):d===u?B.push({t3:[-t,-S,0]},{r3:[0,0,X]},{t3:[t,S,0]}):d===e?B.push({t3:[-t,S,0]},{r3:[0,0,-X]},{t3:[t,-S,0]}):d===a?B.push({t3:[-t,0,0]},{r3:[0,X,0]},{t3:[t,0,0]}):d===z&&B.push({t3:[-t,0,0]},{r3:[0,0,X]},{t3:[t,0,0]})),A===u&&(d===N?B.push({t3:[t,-S,0]},{r3:[0,0,X]},{t3:[-t,S,0]}):d===s?B.push({t3:[-t,-S,0]},{r3:[0,0,-X]},{t3:[t,S,0]}):d===u?B.push({t3:[0,-S,G]},{r3:[-X,0,0]},{t3:[0,S,-G]}):d===e?B.push({t3:[0,-S,-G]},{r3:[X,0,0]},{t3:[0,S,G]}):d===a?B.push({t3:[0,-S,0]},{r3:[0,0,X]},{t3:[0,S,0]}):d===z&&B.push({t3:[0,-S,0]},{r3:[X,0,0]},{t3:[0,S,0]})),A===e&&(d===N?B.push({t3:[t,S,0]},{r3:[0,0,-X]},{t3:[-t,-S,0]}):d===s?B.push({t3:[-t,S,0]},{r3:[0,0,X]},{t3:[t,-S,0]}):d===u?B.push({t3:[0,S,-G]},{r3:[-X,0,0]},{t3:[0,-S,G]}):d===e?B.push({t3:[0,S,G]},{r3:[X,0,0]},{t3:[0,-S,-G]}):d===a?B.push({t3:[0,S,0]},{r3:[0,0,X]},{t3:[0,-S,0]}):d===z&&B.push({t3:[0,S,0]},{r3:[X,0,0]},{t3:[0,-S,0]})),l(B)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);